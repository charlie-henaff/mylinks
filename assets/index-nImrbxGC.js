(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function HS(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const un={},jc=[],oa=()=>{},y8=()=>!1,Gv=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),jS=t=>t.startsWith("onUpdate:"),ci=Object.assign,qS=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},_8=Object.prototype.hasOwnProperty,Yt=(t,e)=>_8.call(t,e),gt=Array.isArray,qc=t=>Kv(t)==="[object Map]",YP=t=>Kv(t)==="[object Set]",St=t=>typeof t=="function",On=t=>typeof t=="string",ro=t=>typeof t=="symbol",hn=t=>t!==null&&typeof t=="object",XP=t=>(hn(t)||St(t))&&St(t.then)&&St(t.catch),QP=Object.prototype.toString,Kv=t=>QP.call(t),b8=t=>Kv(t).slice(8,-1),JP=t=>Kv(t)==="[object Object]",zS=t=>On(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,cf=HS(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yv=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},T8=/-(\w)/g,Is=Yv(t=>t.replace(T8,(e,n)=>n?n.toUpperCase():"")),S8=/\B([A-Z])/g,Mu=Yv(t=>t.replace(S8,"-$1").toLowerCase()),Ta=Yv(t=>t.charAt(0).toUpperCase()+t.slice(1)),G_=Yv(t=>t?`on${Ta(t)}`:""),Wo=(t,e)=>!Object.is(t,e),lg=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ZP=(t,e,n,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:n})},Tb=t=>{const e=parseFloat(t);return isNaN(e)?t:e},E8=t=>{const e=On(t)?Number(t):NaN;return isNaN(e)?t:e};let Fw;const Xv=()=>Fw||(Fw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function WS(t){if(gt(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=On(i)?I8(i):WS(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(On(t)||hn(t))return t}const C8=/;(?![^(]*\))/g,w8=/:([^]+)/,x8=/\/\*[^]*?\*\//g;function I8(t){const e={};return t.replace(x8,"").split(C8).forEach(n=>{if(n){const i=n.split(w8);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function GS(t){let e="";if(On(t))e=t;else if(gt(t))for(let n=0;n<t.length;n++){const i=GS(t[n]);i&&(e+=i+" ")}else if(hn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const A8="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",k8=HS(A8);function eD(t){return!!t||t===""}const tD=t=>!!(t&&t.__v_isRef===!0),Ir=t=>On(t)?t:t==null?"":gt(t)||hn(t)&&(t.toString===QP||!St(t.toString))?tD(t)?Ir(t.value):JSON.stringify(t,nD,2):String(t),nD=(t,e)=>tD(e)?nD(t,e.value):qc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],r)=>(n[K_(i,r)+" =>"]=s,n),{})}:YP(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>K_(n))}:ro(e)?K_(e):hn(e)&&!gt(e)&&!JP(e)?String(e):e,K_=(t,e="")=>{var n;return ro(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let os;class iD{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=os,!e&&os&&(this.index=(os.scopes||(os.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=os;try{return os=this,e()}finally{os=n}}}on(){os=this}off(){os=this.parent}stop(e){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function tl(t){return new iD(t)}function sD(){return os}function hi(t,e=!1){os&&os.cleanups.push(t)}let cn;const Y_=new WeakSet;class rD{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,os&&os.active&&os.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Y_.has(this)&&(Y_.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||oD(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Bw(this),lD(this);const e=cn,n=Er;cn=this,Er=!0;try{return this.fn()}finally{uD(this),cn=e,Er=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)XS(e);this.deps=this.depsTail=void 0,Bw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Y_.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Sb(this)&&this.run()}get dirty(){return Sb(this)}}let aD=0,df,hf;function oD(t,e=!1){if(t.flags|=8,e){t.next=hf,hf=t;return}t.next=df,df=t}function KS(){aD++}function YS(){if(--aD>0)return;if(hf){let e=hf;for(hf=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;df;){let e=df;for(df=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=n}}if(t)throw t}function lD(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function uD(t){let e,n=t.depsTail,i=n;for(;i;){const s=i.prevDep;i.version===-1?(i===n&&(n=s),XS(i),P8(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}t.deps=e,t.depsTail=n}function Sb(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(cD(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function cD(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Nf))return;t.globalVersion=Nf;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Sb(t)){t.flags&=-3;return}const n=cn,i=Er;cn=t,Er=!0;try{lD(t);const s=t.fn(t._value);(e.version===0||Wo(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{cn=n,Er=i,uD(t),t.flags&=-3}}function XS(t,e=!1){const{dep:n,prevSub:i,nextSub:s}=t;if(i&&(i.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=i,t.nextSub=void 0),n.subs===t&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)XS(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function P8(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Er=!0;const dD=[];function ml(){dD.push(Er),Er=!1}function pl(){const t=dD.pop();Er=t===void 0?!0:t}function Bw(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=cn;cn=void 0;try{e()}finally{cn=n}}}let Nf=0;class D8{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class QS{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!cn||!Er||cn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==cn)n=this.activeLink=new D8(cn,this),cn.deps?(n.prevDep=cn.depsTail,cn.depsTail.nextDep=n,cn.depsTail=n):cn.deps=cn.depsTail=n,hD(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=cn.depsTail,n.nextDep=void 0,cn.depsTail.nextDep=n,cn.depsTail=n,cn.deps===n&&(cn.deps=i)}return n}trigger(e){this.version++,Nf++,this.notify(e)}notify(e){KS();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{YS()}}}function hD(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)hD(i)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Pg=new WeakMap,au=Symbol(""),Eb=Symbol(""),Mf=Symbol("");function Ui(t,e,n){if(Er&&cn){let i=Pg.get(t);i||Pg.set(t,i=new Map);let s=i.get(n);s||(i.set(n,s=new QS),s.map=i,s.key=n),s.track()}}function Fa(t,e,n,i,s,r){const a=Pg.get(t);if(!a){Nf++;return}const o=l=>{l&&l.trigger()};if(KS(),e==="clear")a.forEach(o);else{const l=gt(t),u=l&&zS(n);if(l&&n==="length"){const c=Number(i);a.forEach((d,h)=>{(h==="length"||h===Mf||!ro(h)&&h>=c)&&o(d)})}else switch((n!==void 0||a.has(void 0))&&o(a.get(n)),u&&o(a.get(Mf)),e){case"add":l?u&&o(a.get("length")):(o(a.get(au)),qc(t)&&o(a.get(Eb)));break;case"delete":l||(o(a.get(au)),qc(t)&&o(a.get(Eb)));break;case"set":qc(t)&&o(a.get(au));break}}YS()}function R8(t,e){const n=Pg.get(t);return n&&n.get(e)}function vc(t){const e=ot(t);return e===t?e:(Ui(e,"iterate",Mf),sr(t)?e:e.map($i))}function Qv(t){return Ui(t=ot(t),"iterate",Mf),t}const L8={__proto__:null,[Symbol.iterator](){return X_(this,Symbol.iterator,$i)},concat(...t){return vc(this).concat(...t.map(e=>gt(e)?vc(e):e))},entries(){return X_(this,"entries",t=>(t[1]=$i(t[1]),t))},every(t,e){return Oa(this,"every",t,e,void 0,arguments)},filter(t,e){return Oa(this,"filter",t,e,n=>n.map($i),arguments)},find(t,e){return Oa(this,"find",t,e,$i,arguments)},findIndex(t,e){return Oa(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Oa(this,"findLast",t,e,$i,arguments)},findLastIndex(t,e){return Oa(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Oa(this,"forEach",t,e,void 0,arguments)},includes(...t){return Q_(this,"includes",t)},indexOf(...t){return Q_(this,"indexOf",t)},join(t){return vc(this).join(t)},lastIndexOf(...t){return Q_(this,"lastIndexOf",t)},map(t,e){return Oa(this,"map",t,e,void 0,arguments)},pop(){return Mh(this,"pop")},push(...t){return Mh(this,"push",t)},reduce(t,...e){return Uw(this,"reduce",t,e)},reduceRight(t,...e){return Uw(this,"reduceRight",t,e)},shift(){return Mh(this,"shift")},some(t,e){return Oa(this,"some",t,e,void 0,arguments)},splice(...t){return Mh(this,"splice",t)},toReversed(){return vc(this).toReversed()},toSorted(t){return vc(this).toSorted(t)},toSpliced(...t){return vc(this).toSpliced(...t)},unshift(...t){return Mh(this,"unshift",t)},values(){return X_(this,"values",$i)}};function X_(t,e,n){const i=Qv(t),s=i[e]();return i!==t&&!sr(t)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=n(r.value)),r}),s}const O8=Array.prototype;function Oa(t,e,n,i,s,r){const a=Qv(t),o=a!==t&&!sr(t),l=a[e];if(l!==O8[e]){const d=l.apply(t,r);return o?$i(d):d}let u=n;a!==t&&(o?u=function(d,h){return n.call(this,$i(d),h,t)}:n.length>2&&(u=function(d,h){return n.call(this,d,h,t)}));const c=l.call(a,u,i);return o&&s?s(c):c}function Uw(t,e,n,i){const s=Qv(t);let r=n;return s!==t&&(sr(t)?n.length>3&&(r=function(a,o,l){return n.call(this,a,o,l,t)}):r=function(a,o,l){return n.call(this,a,$i(o),l,t)}),s[e](r,...i)}function Q_(t,e,n){const i=ot(t);Ui(i,"iterate",Mf);const s=i[e](...n);return(s===-1||s===!1)&&e1(n[0])?(n[0]=ot(n[0]),i[e](...n)):s}function Mh(t,e,n=[]){ml(),KS();const i=ot(t)[e].apply(t,n);return YS(),pl(),i}const N8=HS("__proto__,__v_isRef,__isVue"),fD=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ro));function M8(t){ro(t)||(t=String(t));const e=ot(this);return Ui(e,"has",t),e.hasOwnProperty(t)}class mD{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?W8:yD:r?vD:gD).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const a=gt(e);if(!s){let l;if(a&&(l=L8[n]))return l;if(n==="hasOwnProperty")return M8}const o=Reflect.get(e,n,an(e)?e:i);return(ro(n)?fD.has(n):N8(n))||(s||Ui(e,"get",n),r)?o:an(o)?a&&zS(n)?o:o.value:hn(o)?s?Bd(o):ai(o):o}}class pD extends mD{constructor(e=!1){super(!1,e)}set(e,n,i,s){let r=e[n];if(!this._isShallow){const l=yu(r);if(!sr(i)&&!yu(i)&&(r=ot(r),i=ot(i)),!gt(e)&&an(r)&&!an(i))return l?!1:(r.value=i,!0)}const a=gt(e)&&zS(n)?Number(n)<e.length:Yt(e,n),o=Reflect.set(e,n,i,an(e)?e:s);return e===ot(s)&&(a?Wo(i,r)&&Fa(e,"set",n,i):Fa(e,"add",n,i)),o}deleteProperty(e,n){const i=Yt(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&Fa(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!ro(n)||!fD.has(n))&&Ui(e,"has",n),i}ownKeys(e){return Ui(e,"iterate",gt(e)?"length":au),Reflect.ownKeys(e)}}class V8 extends mD{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const F8=new pD,B8=new V8,U8=new pD(!0);const Cb=t=>t,Dp=t=>Reflect.getPrototypeOf(t);function $8(t,e,n){return function(...i){const s=this.__v_raw,r=ot(s),a=qc(r),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=s[t](...i),c=n?Cb:e?wb:$i;return!e&&Ui(r,"iterate",l?Eb:au),{next(){const{value:d,done:h}=u.next();return h?{value:d,done:h}:{value:o?[c(d[0]),c(d[1])]:c(d),done:h}},[Symbol.iterator](){return this}}}}function Rp(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function H8(t,e){const n={get(s){const r=this.__v_raw,a=ot(r),o=ot(s);t||(Wo(s,o)&&Ui(a,"get",s),Ui(a,"get",o));const{has:l}=Dp(a),u=e?Cb:t?wb:$i;if(l.call(a,s))return u(r.get(s));if(l.call(a,o))return u(r.get(o));r!==a&&r.get(s)},get size(){const s=this.__v_raw;return!t&&Ui(ot(s),"iterate",au),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,a=ot(r),o=ot(s);return t||(Wo(s,o)&&Ui(a,"has",s),Ui(a,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const a=this,o=a.__v_raw,l=ot(o),u=e?Cb:t?wb:$i;return!t&&Ui(l,"iterate",au),o.forEach((c,d)=>s.call(r,u(c),u(d),a))}};return ci(n,t?{add:Rp("add"),set:Rp("set"),delete:Rp("delete"),clear:Rp("clear")}:{add(s){!e&&!sr(s)&&!yu(s)&&(s=ot(s));const r=ot(this);return Dp(r).has.call(r,s)||(r.add(s),Fa(r,"add",s,s)),this},set(s,r){!e&&!sr(r)&&!yu(r)&&(r=ot(r));const a=ot(this),{has:o,get:l}=Dp(a);let u=o.call(a,s);u||(s=ot(s),u=o.call(a,s));const c=l.call(a,s);return a.set(s,r),u?Wo(r,c)&&Fa(a,"set",s,r):Fa(a,"add",s,r),this},delete(s){const r=ot(this),{has:a,get:o}=Dp(r);let l=a.call(r,s);l||(s=ot(s),l=a.call(r,s)),o&&o.call(r,s);const u=r.delete(s);return l&&Fa(r,"delete",s,void 0),u},clear(){const s=ot(this),r=s.size!==0,a=s.clear();return r&&Fa(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=$8(s,t,e)}),n}function JS(t,e){const n=H8(t,e);return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(Yt(n,s)&&s in i?n:i,s,r)}const j8={get:JS(!1,!1)},q8={get:JS(!1,!0)},z8={get:JS(!0,!1)};const gD=new WeakMap,vD=new WeakMap,yD=new WeakMap,W8=new WeakMap;function G8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function K8(t){return t.__v_skip||!Object.isExtensible(t)?0:G8(b8(t))}function ai(t){return yu(t)?t:ZS(t,!1,F8,j8,gD)}function _D(t){return ZS(t,!1,U8,q8,vD)}function Bd(t){return ZS(t,!0,B8,z8,yD)}function ZS(t,e,n,i,s){if(!hn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const a=K8(t);if(a===0)return t;const o=new Proxy(t,a===2?i:n);return s.set(t,o),o}function Go(t){return yu(t)?Go(t.__v_raw):!!(t&&t.__v_isReactive)}function yu(t){return!!(t&&t.__v_isReadonly)}function sr(t){return!!(t&&t.__v_isShallow)}function e1(t){return t?!!t.__v_raw:!1}function ot(t){const e=t&&t.__v_raw;return e?ot(e):t}function Jv(t){return!Yt(t,"__v_skip")&&Object.isExtensible(t)&&ZP(t,"__v_skip",!0),t}const $i=t=>hn(t)?ai(t):t,wb=t=>hn(t)?Bd(t):t;function an(t){return t?t.__v_isRef===!0:!1}function Me(t){return bD(t,!1)}function Ue(t){return bD(t,!0)}function bD(t,e){return an(t)?t:new Y8(t,e)}class Y8{constructor(e,n){this.dep=new QS,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ot(e),this._value=n?e:$i(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,i=this.__v_isShallow||sr(e)||yu(e);e=i?e:ot(e),Wo(e,n)&&(this._rawValue=e,this._value=i?e:$i(e),this.dep.trigger())}}function it(t){return an(t)?t.value:t}const X8={get:(t,e,n)=>e==="__v_raw"?t:it(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return an(s)&&!an(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function TD(t){return Go(t)?t:new Proxy(t,X8)}function gl(t){const e=gt(t)?new Array(t.length):{};for(const n in t)e[n]=SD(t,n);return e}class Q8{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return R8(ot(this._object),this._key)}}class J8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function ye(t,e,n){return an(t)?t:St(t)?new J8(t):hn(t)&&arguments.length>1?SD(t,e,n):Me(t)}function SD(t,e,n){const i=t[e];return an(i)?i:new Q8(t,e,n)}class Z8{constructor(e,n,i){this.fn=e,this.setter=n,this._value=void 0,this.dep=new QS(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Nf-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&cn!==this)return oD(this,!0),!0}get value(){const e=this.dep.track();return cD(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function e6(t,e,n=!1){let i,s;return St(t)?i=t:(i=t.get,s=t.set),new Z8(i,s,n)}const Lp={},Dg=new WeakMap;let Kl;function t6(t,e=!1,n=Kl){if(n){let i=Dg.get(n);i||Dg.set(n,i=[]),i.push(t)}}function n6(t,e,n=un){const{immediate:i,deep:s,once:r,scheduler:a,augmentJob:o,call:l}=n,u=M=>s?M:sr(M)||s===!1||s===0?Ba(M,1):Ba(M);let c,d,h,f,g=!1,v=!1;if(an(t)?(d=()=>t.value,g=sr(t)):Go(t)?(d=()=>u(t),g=!0):gt(t)?(v=!0,g=t.some(M=>Go(M)||sr(M)),d=()=>t.map(M=>{if(an(M))return M.value;if(Go(M))return u(M);if(St(M))return l?l(M,2):M()})):St(t)?e?d=l?()=>l(t,2):t:d=()=>{if(h){ml();try{h()}finally{pl()}}const M=Kl;Kl=c;try{return l?l(t,3,[f]):t(f)}finally{Kl=M}}:d=oa,e&&s){const M=d,F=s===!0?1/0:s;d=()=>Ba(M(),F)}const b=sD(),I=()=>{c.stop(),b&&b.active&&qS(b.effects,c)};if(r&&e){const M=e;e=(...F)=>{M(...F),I()}}let w=v?new Array(t.length).fill(Lp):Lp;const P=M=>{if(!(!(c.flags&1)||!c.dirty&&!M))if(e){const F=c.run();if(s||g||(v?F.some((U,D)=>Wo(U,w[D])):Wo(F,w))){h&&h();const U=Kl;Kl=c;try{const D=[F,w===Lp?void 0:v&&w[0]===Lp?[]:w,f];l?l(e,3,D):e(...D),w=F}finally{Kl=U}}}else c.run()};return o&&o(P),c=new rD(d),c.scheduler=a?()=>a(P,!1):P,f=M=>t6(M,!1,c),h=c.onStop=()=>{const M=Dg.get(c);if(M){if(l)l(M,4);else for(const F of M)F();Dg.delete(c)}},e?i?P(!0):w=c.run():a?a(P.bind(null,!0),!0):c.run(),I.pause=c.pause.bind(c),I.resume=c.resume.bind(c),I.stop=I,I}function Ba(t,e=1/0,n){if(e<=0||!hn(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,an(t))Ba(t.value,e,n);else if(gt(t))for(let i=0;i<t.length;i++)Ba(t[i],e,n);else if(YP(t)||qc(t))t.forEach(i=>{Ba(i,e,n)});else if(JP(t)){for(const i in t)Ba(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Ba(t[i],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Sm(t,e,n,i){try{return i?t(...i):t()}catch(s){Zv(s,e,n)}}function Ar(t,e,n,i){if(St(t)){const s=Sm(t,e,n,i);return s&&XP(s)&&s.catch(r=>{Zv(r,e,n)}),s}if(gt(t)){const s=[];for(let r=0;r<t.length;r++)s.push(Ar(t[r],e,n,i));return s}}function Zv(t,e,n,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||un;if(e){let o=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const c=o.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,l,u)===!1)return}o=o.parent}if(r){ml(),Sm(r,null,10,[t,l,u]),pl();return}}i6(t,n,s,i,a)}function i6(t,e,n,i=!0,s=!1){if(s)throw t;console.error(t)}const ls=[];let Yr=-1;const zc=[];let Oo=null,Ic=0;const ED=Promise.resolve();let Rg=null;function kt(t){const e=Rg||ED;return t?e.then(this?t.bind(this):t):e}function s6(t){let e=Yr+1,n=ls.length;for(;e<n;){const i=e+n>>>1,s=ls[i],r=Vf(s);r<t||r===t&&s.flags&2?e=i+1:n=i}return e}function t1(t){if(!(t.flags&1)){const e=Vf(t),n=ls[ls.length-1];!n||!(t.flags&2)&&e>=Vf(n)?ls.push(t):ls.splice(s6(e),0,t),t.flags|=1,CD()}}function CD(){Rg||(Rg=ED.then(xD))}function r6(t){gt(t)?zc.push(...t):Oo&&t.id===-1?Oo.splice(Ic+1,0,t):t.flags&1||(zc.push(t),t.flags|=1),CD()}function $w(t,e,n=Yr+1){for(;n<ls.length;n++){const i=ls[n];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;ls.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function wD(t){if(zc.length){const e=[...new Set(zc)].sort((n,i)=>Vf(n)-Vf(i));if(zc.length=0,Oo){Oo.push(...e);return}for(Oo=e,Ic=0;Ic<Oo.length;Ic++){const n=Oo[Ic];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Oo=null,Ic=0}}const Vf=t=>t.id==null?t.flags&2?-1:1/0:t.id;function xD(t){try{for(Yr=0;Yr<ls.length;Yr++){const e=ls[Yr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Sm(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Yr<ls.length;Yr++){const e=ls[Yr];e&&(e.flags&=-2)}Yr=-1,ls.length=0,wD(),Rg=null,(ls.length||zc.length)&&xD()}}let oi=null,ID=null;function Lg(t){const e=oi;return oi=t,ID=t&&t.type.__scopeId||null,e}function ln(t,e=oi,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&tx(-1);const r=Lg(e);let a;try{a=t(...s)}finally{Lg(r),i._d&&tx(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function Tn(t,e){if(oi===null)return t;const n=iy(oi),i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[r,a,o,l=un]=e[s];r&&(St(r)&&(r={mounted:r,updated:r}),r.deep&&Ba(a),i.push({dir:r,instance:n,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function $l(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];r&&(o.oldValue=r[a].value);let l=o.dir[i];l&&(ml(),Ar(l,n,8,[t.el,o,t,e]),pl())}}const AD=Symbol("_vte"),kD=t=>t.__isTeleport,ff=t=>t&&(t.disabled||t.disabled===""),Hw=t=>t&&(t.defer||t.defer===""),jw=t=>typeof SVGElement<"u"&&t instanceof SVGElement,qw=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,xb=(t,e)=>{const n=t&&t.to;return On(n)?e?e(n):null:n},PD={name:"Teleport",__isTeleport:!0,process(t,e,n,i,s,r,a,o,l,u){const{mc:c,pc:d,pbc:h,o:{insert:f,querySelector:g,createText:v,createComment:b}}=u,I=ff(e.props);let{shapeFlag:w,children:P,dynamicChildren:M}=e;if(t==null){const F=e.el=v(""),U=e.anchor=v("");f(F,n,i),f(U,n,i);const D=(y,E)=>{w&16&&(s&&s.isCE&&(s.ce._teleportTarget=y),c(P,y,E,s,r,a,o,l))},S=()=>{const y=e.target=xb(e.props,g),E=DD(y,e,v,f);y&&(a!=="svg"&&jw(y)?a="svg":a!=="mathml"&&qw(y)&&(a="mathml"),I||(D(y,E),ug(e,!1)))};I&&(D(n,U),ug(e,!0)),Hw(e.props)?as(()=>{S(),e.el.__isMounted=!0},r):S()}else{if(Hw(e.props)&&!t.el.__isMounted){as(()=>{PD.process(t,e,n,i,s,r,a,o,l,u),delete t.el.__isMounted},r);return}e.el=t.el,e.targetStart=t.targetStart;const F=e.anchor=t.anchor,U=e.target=t.target,D=e.targetAnchor=t.targetAnchor,S=ff(t.props),y=S?n:U,E=S?F:D;if(a==="svg"||jw(U)?a="svg":(a==="mathml"||qw(U))&&(a="mathml"),M?(h(t.dynamicChildren,M,y,s,r,a,o),u1(t,e,!0)):l||d(t,e,y,E,s,r,a,o,!1),I)S?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Op(e,n,F,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const A=e.target=xb(e.props,g);A&&Op(e,A,null,u,0)}else S&&Op(e,U,D,u,1);ug(e,I)}},remove(t,e,n,{um:i,o:{remove:s}},r){const{shapeFlag:a,children:o,anchor:l,targetStart:u,targetAnchor:c,target:d,props:h}=t;if(d&&(s(u),s(c)),r&&s(l),a&16){const f=r||!ff(h);for(let g=0;g<o.length;g++){const v=o[g];i(v,e,n,f,!!v.dynamicChildren)}}},move:Op,hydrate:a6};function Op(t,e,n,{o:{insert:i},m:s},r=2){r===0&&i(t.targetAnchor,e,n);const{el:a,anchor:o,shapeFlag:l,children:u,props:c}=t,d=r===2;if(d&&i(a,e,n),(!d||ff(c))&&l&16)for(let h=0;h<u.length;h++)s(u[h],e,n,2);d&&i(o,e,n)}function a6(t,e,n,i,s,r,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:u,createText:c}},d){const h=e.target=xb(e.props,l);if(h){const f=ff(e.props),g=h._lpa||h.firstChild;if(e.shapeFlag&16)if(f)e.anchor=d(a(t),e,o(t),n,i,s,r),e.targetStart=g,e.targetAnchor=g&&a(g);else{e.anchor=a(t);let v=g;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,h._lpa=e.targetAnchor&&a(e.targetAnchor);break}}v=a(v)}e.targetAnchor||DD(h,e,c,u),d(g&&a(g),e,h,n,i,s,r)}ug(e,f)}return e.anchor&&a(e.anchor)}const o6=PD;function ug(t,e){const n=t.ctx;if(n&&n.ut){let i,s;for(e?(i=t.el,s=t.anchor):(i=t.targetStart,s=t.targetAnchor);i&&i!==s;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function DD(t,e,n,i){const s=e.targetStart=n(""),r=e.targetAnchor=n("");return s[AD]=r,t&&(i(s,t),i(r,t)),r}const No=Symbol("_leaveCb"),Np=Symbol("_enterCb");function RD(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ti(()=>{t.isMounted=!0}),Wn(()=>{t.isUnmounting=!0}),t}const tr=[Function,Array],LD={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tr,onEnter:tr,onAfterEnter:tr,onEnterCancelled:tr,onBeforeLeave:tr,onLeave:tr,onAfterLeave:tr,onLeaveCancelled:tr,onBeforeAppear:tr,onAppear:tr,onAfterAppear:tr,onAppearCancelled:tr},OD=t=>{const e=t.subTree;return e.component?OD(e.component):e},l6={name:"BaseTransition",props:LD,setup(t,{slots:e}){const n=Cm(),i=RD();return()=>{const s=e.default&&n1(e.default(),!0);if(!s||!s.length)return;const r=ND(s),a=ot(t),{mode:o}=a;if(i.isLeaving)return J_(r);const l=zw(r);if(!l)return J_(r);let u=Ff(l,a,i,n,d=>u=d);l.type!==zi&&_u(l,u);let c=n.subTree&&zw(n.subTree);if(c&&c.type!==zi&&!Jl(l,c)&&OD(n).type!==zi){let d=Ff(c,a,i,n);if(_u(c,d),o==="out-in"&&l.type!==zi)return i.isLeaving=!0,d.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,c=void 0},J_(r);o==="in-out"&&l.type!==zi?d.delayLeave=(h,f,g)=>{const v=MD(i,c);v[String(c.key)]=c,h[No]=()=>{f(),h[No]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{g(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return r}}};function ND(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==zi){e=n;break}}return e}const u6=l6;function MD(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function Ff(t,e,n,i,s){const{appear:r,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:g,onLeaveCancelled:v,onBeforeAppear:b,onAppear:I,onAfterAppear:w,onAppearCancelled:P}=e,M=String(t.key),F=MD(n,t),U=(y,E)=>{y&&Ar(y,i,9,E)},D=(y,E)=>{const A=E[1];U(y,E),gt(y)?y.every(k=>k.length<=1)&&A():y.length<=1&&A()},S={mode:a,persisted:o,beforeEnter(y){let E=l;if(!n.isMounted)if(r)E=b||l;else return;y[No]&&y[No](!0);const A=F[M];A&&Jl(t,A)&&A.el[No]&&A.el[No](),U(E,[y])},enter(y){let E=u,A=c,k=d;if(!n.isMounted)if(r)E=I||u,A=w||c,k=P||d;else return;let R=!1;const W=y[Np]=se=>{R||(R=!0,se?U(k,[y]):U(A,[y]),S.delayedLeave&&S.delayedLeave(),y[Np]=void 0)};E?D(E,[y,W]):W()},leave(y,E){const A=String(t.key);if(y[Np]&&y[Np](!0),n.isUnmounting)return E();U(h,[y]);let k=!1;const R=y[No]=W=>{k||(k=!0,E(),W?U(v,[y]):U(g,[y]),y[No]=void 0,F[A]===t&&delete F[A])};F[A]=t,f?D(f,[y,R]):R()},clone(y){const E=Ff(y,e,n,i,s);return s&&s(E),E}};return S}function J_(t){if(ey(t))return t=Ya(t),t.children=null,t}function zw(t){if(!ey(t))return kD(t.type)&&t.children?ND(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&St(n.default))return n.default()}}function _u(t,e){t.shapeFlag&6&&t.component?(t.transition=e,_u(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function n1(t,e=!1,n){let i=[],s=0;for(let r=0;r<t.length;r++){let a=t[r];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:r);a.type===Ye?(a.patchFlag&128&&s++,i=i.concat(n1(a.children,e,o))):(e||a.type!==zi)&&i.push(o!=null?Ya(a,{key:o}):a)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function cr(t,e){return St(t)?ci({name:t.name},e,{setup:t}):t}function hs(){const t=Cm();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function VD(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Og(t,e,n,i,s=!1){if(gt(t)){t.forEach((g,v)=>Og(g,e&&(gt(e)?e[v]:e),n,i,s));return}if(Wc(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Og(t,e,n,i.component.subTree);return}const r=i.shapeFlag&4?iy(i.component):i.el,a=s?null:r,{i:o,r:l}=t,u=e&&e.r,c=o.refs===un?o.refs={}:o.refs,d=o.setupState,h=ot(d),f=d===un?()=>!1:g=>Yt(h,g);if(u!=null&&u!==l&&(On(u)?(c[u]=null,f(u)&&(d[u]=null)):an(u)&&(u.value=null)),St(l))Sm(l,o,12,[a,c]);else{const g=On(l),v=an(l);if(g||v){const b=()=>{if(t.f){const I=g?f(l)?d[l]:c[l]:l.value;s?gt(I)&&qS(I,r):gt(I)?I.includes(r)||I.push(r):g?(c[l]=[r],f(l)&&(d[l]=c[l])):(l.value=[r],t.k&&(c[t.k]=l.value))}else g?(c[l]=a,f(l)&&(d[l]=a)):v&&(l.value=a,t.k&&(c[t.k]=a))};a?(b.id=-1,as(b,n)):b()}}}Xv().requestIdleCallback;Xv().cancelIdleCallback;const Wc=t=>!!t.type.__asyncLoader,ey=t=>t.type.__isKeepAlive;function FD(t,e){BD(t,"a",e)}function i1(t,e){BD(t,"da",e)}function BD(t,e,n=Ti){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(ty(e,i,n),n){let s=n.parent;for(;s&&s.parent;)ey(s.parent.vnode)&&c6(i,e,n,s),s=s.parent}}function c6(t,e,n,i){const s=ty(e,t,i,!0);r1(()=>{qS(i[e],s)},n)}function ty(t,e,n=Ti,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...a)=>{ml();const o=wm(n),l=Ar(e,n,t,a);return o(),pl(),l});return i?s.unshift(r):s.push(r),r}}const ao=t=>(e,n=Ti)=>{(!Uf||t==="sp")&&ty(t,(...i)=>e(...i),n)},Ud=ao("bm"),ti=ao("m"),UD=ao("bu"),s1=ao("u"),Wn=ao("bum"),r1=ao("um"),d6=ao("sp"),h6=ao("rtg"),f6=ao("rtc");function m6(t,e=Ti){ty("ec",t,e)}const a1="components",p6="directives";function qt(t,e){return o1(a1,t,!0,e)||t}const g6=Symbol.for("v-ndc");function v6(t){return On(t)&&o1(a1,t,!1)||t}function Ks(t){return o1(p6,t)}function o1(t,e,n=!0,i=!1){const s=oi||Ti;if(s){const r=s.type;if(t===a1){const o=rU(r,!1);if(o&&(o===e||o===Is(e)||o===Ta(Is(e))))return r}const a=Ww(s[t]||r[t],e)||Ww(s.appContext[t],e);return!a&&i?r:a}}function Ww(t,e){return t&&(t[e]||t[Is(e)]||t[Ta(Is(e))])}function $D(t,e,n,i){let s;const r=n,a=gt(t);if(a||On(t)){const o=a&&Go(t);let l=!1;o&&(l=!sr(t),t=Qv(t)),s=new Array(t.length);for(let u=0,c=t.length;u<c;u++)s[u]=e(l?$i(t[u]):t[u],u,void 0,r)}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,r)}else if(hn(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,r));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];s[l]=e(t[c],c,l,r)}}else s=[];return s}function y6(t,e,n={},i,s){if(oi.ce||oi.parent&&Wc(oi.parent)&&oi.parent.ce)return $n(),Cs(Ye,null,[_("slot",n,i)],64);let r=t[e];r&&r._c&&(r._d=!1),$n();const a=r&&HD(r(n)),o=n.key||a&&a.key,l=Cs(Ye,{key:(o&&!ro(o)?o:`_${e}`)+""},a||[],a&&t._===1?64:-2);return r&&r._c&&(r._d=!0),l}function HD(t){return t.some(e=>ld(e)?!(e.type===zi||e.type===Ye&&!HD(e.children)):!0)?t:null}const Ib=t=>t?oR(t)?iy(t):Ib(t.parent):null,mf=ci(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ib(t.parent),$root:t=>Ib(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>qD(t),$forceUpdate:t=>t.f||(t.f=()=>{t1(t.update)}),$nextTick:t=>t.n||(t.n=kt.bind(t.proxy)),$watch:t=>U6.bind(t)}),Z_=(t,e)=>t!==un&&!t.__isScriptSetup&&Yt(t,e),_6={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:a,type:o,appContext:l}=t;let u;if(e[0]!=="$"){const f=a[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(Z_(i,e))return a[e]=1,i[e];if(s!==un&&Yt(s,e))return a[e]=2,s[e];if((u=t.propsOptions[0])&&Yt(u,e))return a[e]=3,r[e];if(n!==un&&Yt(n,e))return a[e]=4,n[e];Ab&&(a[e]=0)}}const c=mf[e];let d,h;if(c)return e==="$attrs"&&Ui(t.attrs,"get",""),c(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(n!==un&&Yt(n,e))return a[e]=4,n[e];if(h=l.config.globalProperties,Yt(h,e))return h[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return Z_(s,e)?(s[e]=n,!0):i!==un&&Yt(i,e)?(i[e]=n,!0):Yt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:r}},a){let o;return!!n[a]||t!==un&&Yt(t,a)||Z_(e,a)||(o=r[0])&&Yt(o,a)||Yt(i,a)||Yt(mf,a)||Yt(s.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Yt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gw(t){return gt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ab=!0;function b6(t){const e=qD(t),n=t.proxy,i=t.ctx;Ab=!1,e.beforeCreate&&Kw(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:d,mounted:h,beforeUpdate:f,updated:g,activated:v,deactivated:b,beforeDestroy:I,beforeUnmount:w,destroyed:P,unmounted:M,render:F,renderTracked:U,renderTriggered:D,errorCaptured:S,serverPrefetch:y,expose:E,inheritAttrs:A,components:k,directives:R,filters:W}=e;if(u&&T6(u,i,null),a)for(const Z in a){const ne=a[Z];St(ne)&&(i[Z]=ne.bind(n))}if(s){const Z=s.call(n,n);hn(Z)&&(t.data=ai(Z))}if(Ab=!0,r)for(const Z in r){const ne=r[Z],ee=St(ne)?ne.bind(n,n):St(ne.get)?ne.get.bind(n,n):oa,Q=!St(ne)&&St(ne.set)?ne.set.bind(n):oa,j=V({get:ee,set:Q});Object.defineProperty(i,Z,{enumerable:!0,configurable:!0,get:()=>j.value,set:le=>j.value=le})}if(o)for(const Z in o)jD(o[Z],i,n,Z);if(l){const Z=St(l)?l.call(n):l;Reflect.ownKeys(Z).forEach(ne=>{Jt(ne,Z[ne])})}c&&Kw(c,t,"c");function ae(Z,ne){gt(ne)?ne.forEach(ee=>Z(ee.bind(n))):ne&&Z(ne.bind(n))}if(ae(Ud,d),ae(ti,h),ae(UD,f),ae(s1,g),ae(FD,v),ae(i1,b),ae(m6,S),ae(f6,U),ae(h6,D),ae(Wn,w),ae(r1,M),ae(d6,y),gt(E))if(E.length){const Z=t.exposed||(t.exposed={});E.forEach(ne=>{Object.defineProperty(Z,ne,{get:()=>n[ne],set:ee=>n[ne]=ee})})}else t.exposed||(t.exposed={});F&&t.render===oa&&(t.render=F),A!=null&&(t.inheritAttrs=A),k&&(t.components=k),R&&(t.directives=R),y&&VD(t)}function T6(t,e,n=oa){gt(t)&&(t=kb(t));for(const i in t){const s=t[i];let r;hn(s)?"default"in s?r=vt(s.from||i,s.default,!0):r=vt(s.from||i):r=vt(s),an(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[i]=r}}function Kw(t,e,n){Ar(gt(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function jD(t,e,n,i){let s=i.includes(".")?nR(n,i):()=>n[i];if(On(t)){const r=e[t];St(r)&&$e(s,r)}else if(St(t))$e(s,t.bind(n));else if(hn(t))if(gt(t))t.forEach(r=>jD(r,e,n,i));else{const r=St(t.handler)?t.handler.bind(n):e[t.handler];St(r)&&$e(s,r,t)}}function qD(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=t.appContext,o=r.get(e);let l;return o?l=o:!s.length&&!n&&!i?l=e:(l={},s.length&&s.forEach(u=>Ng(l,u,a,!0)),Ng(l,e,a)),hn(e)&&r.set(e,l),l}function Ng(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&Ng(t,r,n,!0),s&&s.forEach(a=>Ng(t,a,n,!0));for(const a in e)if(!(i&&a==="expose")){const o=S6[a]||n&&n[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const S6={data:Yw,props:Xw,emits:Xw,methods:Xh,computed:Xh,beforeCreate:rs,created:rs,beforeMount:rs,mounted:rs,beforeUpdate:rs,updated:rs,beforeDestroy:rs,beforeUnmount:rs,destroyed:rs,unmounted:rs,activated:rs,deactivated:rs,errorCaptured:rs,serverPrefetch:rs,components:Xh,directives:Xh,watch:C6,provide:Yw,inject:E6};function Yw(t,e){return e?t?function(){return ci(St(t)?t.call(this,this):t,St(e)?e.call(this,this):e)}:e:t}function E6(t,e){return Xh(kb(t),kb(e))}function kb(t){if(gt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function rs(t,e){return t?[...new Set([].concat(t,e))]:e}function Xh(t,e){return t?ci(Object.create(null),t,e):e}function Xw(t,e){return t?gt(t)&&gt(e)?[...new Set([...t,...e])]:ci(Object.create(null),Gw(t),Gw(e??{})):e}function C6(t,e){if(!t)return e;if(!e)return t;const n=ci(Object.create(null),t);for(const i in e)n[i]=rs(t[i],e[i]);return n}function zD(){return{app:null,config:{isNativeTag:y8,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let w6=0;function x6(t,e){return function(i,s=null){St(i)||(i=ci({},i)),s!=null&&!hn(s)&&(s=null);const r=zD(),a=new WeakSet,o=[];let l=!1;const u=r.app={_uid:w6++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:oU,get config(){return r.config},set config(c){},use(c,...d){return a.has(c)||(c&&St(c.install)?(a.add(c),c.install(u,...d)):St(c)&&(a.add(c),c(u,...d))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,d){return d?(r.components[c]=d,u):r.components[c]},directive(c,d){return d?(r.directives[c]=d,u):r.directives[c]},mount(c,d,h){if(!l){const f=u._ceVNode||_(i,s);return f.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),t(f,c,h),l=!0,u._container=c,c.__vue_app__=u,iy(f.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Ar(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return r.provides[c]=d,u},runWithContext(c){const d=ou;ou=u;try{return c()}finally{ou=d}}};return u}}let ou=null;function Jt(t,e){if(Ti){let n=Ti.provides;const i=Ti.parent&&Ti.parent.provides;i===n&&(n=Ti.provides=Object.create(i)),n[t]=e}}function vt(t,e,n=!1){const i=Ti||oi;if(i||ou){const s=ou?ou._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&St(e)?e.call(i&&i.proxy):e}}function I6(){return!!(Ti||oi||ou)}const WD={},GD=()=>Object.create(WD),KD=t=>Object.getPrototypeOf(t)===WD;function A6(t,e,n,i=!1){const s={},r=GD();t.propsDefaults=Object.create(null),YD(t,e,s,r);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);n?t.props=i?s:_D(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function k6(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:a}}=t,o=ot(s),[l]=t.propsOptions;let u=!1;if((i||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let h=c[d];if(ny(t.emitsOptions,h))continue;const f=e[h];if(l)if(Yt(r,h))f!==r[h]&&(r[h]=f,u=!0);else{const g=Is(h);s[g]=Pb(l,o,g,f,t,!1)}else f!==r[h]&&(r[h]=f,u=!0)}}}else{YD(t,e,s,r)&&(u=!0);let c;for(const d in o)(!e||!Yt(e,d)&&((c=Mu(d))===d||!Yt(e,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(s[d]=Pb(l,o,d,void 0,t,!0)):delete s[d]);if(r!==o)for(const d in r)(!e||!Yt(e,d))&&(delete r[d],u=!0)}u&&Fa(t.attrs,"set","")}function YD(t,e,n,i){const[s,r]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(cf(l))continue;const u=e[l];let c;s&&Yt(s,c=Is(l))?!r||!r.includes(c)?n[c]=u:(o||(o={}))[c]=u:ny(t.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,a=!0)}if(r){const l=ot(n),u=o||un;for(let c=0;c<r.length;c++){const d=r[c];n[d]=Pb(s,l,d,u[d],t,!Yt(u,d))}}return a}function Pb(t,e,n,i,s,r){const a=t[n];if(a!=null){const o=Yt(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&St(l)){const{propsDefaults:u}=s;if(n in u)i=u[n];else{const c=wm(s);i=u[n]=l.call(null,e),c()}}else i=l;s.ce&&s.ce._setProp(n,i)}a[0]&&(r&&!o?i=!1:a[1]&&(i===""||i===Mu(n))&&(i=!0))}return i}const P6=new WeakMap;function XD(t,e,n=!1){const i=n?P6:e.propsCache,s=i.get(t);if(s)return s;const r=t.props,a={},o=[];let l=!1;if(!St(t)){const c=d=>{l=!0;const[h,f]=XD(d,e,!0);ci(a,h),f&&o.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!r&&!l)return hn(t)&&i.set(t,jc),jc;if(gt(r))for(let c=0;c<r.length;c++){const d=Is(r[c]);Qw(d)&&(a[d]=un)}else if(r)for(const c in r){const d=Is(c);if(Qw(d)){const h=r[c],f=a[d]=gt(h)||St(h)?{type:h}:ci({},h),g=f.type;let v=!1,b=!0;if(gt(g))for(let I=0;I<g.length;++I){const w=g[I],P=St(w)&&w.name;if(P==="Boolean"){v=!0;break}else P==="String"&&(b=!1)}else v=St(g)&&g.name==="Boolean";f[0]=v,f[1]=b,(v||Yt(f,"default"))&&o.push(d)}}const u=[a,o];return hn(t)&&i.set(t,u),u}function Qw(t){return t[0]!=="$"&&!cf(t)}const QD=t=>t[0]==="_"||t==="$stable",l1=t=>gt(t)?t.map(Jr):[Jr(t)],D6=(t,e,n)=>{if(e._n)return e;const i=ln((...s)=>l1(e(...s)),n);return i._c=!1,i},JD=(t,e,n)=>{const i=t._ctx;for(const s in t){if(QD(s))continue;const r=t[s];if(St(r))e[s]=D6(s,r,i);else if(r!=null){const a=l1(r);e[s]=()=>a}}},ZD=(t,e)=>{const n=l1(e);t.slots.default=()=>n},eR=(t,e,n)=>{for(const i in e)(n||i!=="_")&&(t[i]=e[i])},R6=(t,e,n)=>{const i=t.slots=GD();if(t.vnode.shapeFlag&32){const s=e._;s?(eR(i,e,n),n&&ZP(i,"_",s,!0)):JD(e,i)}else e&&ZD(t,e)},L6=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,a=un;if(i.shapeFlag&32){const o=e._;o?n&&o===1?r=!1:eR(s,e,n):(r=!e.$stable,JD(e,s)),a=e}else e&&(ZD(t,e),a={default:1});if(r)for(const o in s)!QD(o)&&a[o]==null&&delete s[o]},as=G6;function O6(t){return N6(t)}function N6(t,e){const n=Xv();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:h,setScopeId:f=oa,insertStaticContent:g}=t,v=(z,H,X,he=null,de=null,_e=null,Oe=void 0,Re=null,me=!!H.dynamicChildren)=>{if(z===H)return;z&&!Jl(z,H)&&(he=re(z),le(z,de,_e,!0),z=null),H.patchFlag===-2&&(me=!1,H.dynamicChildren=null);const{type:Ce,ref:He,shapeFlag:ze}=H;switch(Ce){case Em:b(z,H,X,he);break;case zi:I(z,H,X,he);break;case t0:z==null&&w(H,X,he,Oe);break;case Ye:k(z,H,X,he,de,_e,Oe,Re,me);break;default:ze&1?F(z,H,X,he,de,_e,Oe,Re,me):ze&6?R(z,H,X,he,de,_e,Oe,Re,me):(ze&64||ze&128)&&Ce.process(z,H,X,he,de,_e,Oe,Re,me,Ne)}He!=null&&de&&Og(He,z&&z.ref,_e,H||z,!H)},b=(z,H,X,he)=>{if(z==null)i(H.el=o(H.children),X,he);else{const de=H.el=z.el;H.children!==z.children&&u(de,H.children)}},I=(z,H,X,he)=>{z==null?i(H.el=l(H.children||""),X,he):H.el=z.el},w=(z,H,X,he)=>{[z.el,z.anchor]=g(z.children,H,X,he,z.el,z.anchor)},P=({el:z,anchor:H},X,he)=>{let de;for(;z&&z!==H;)de=h(z),i(z,X,he),z=de;i(H,X,he)},M=({el:z,anchor:H})=>{let X;for(;z&&z!==H;)X=h(z),s(z),z=X;s(H)},F=(z,H,X,he,de,_e,Oe,Re,me)=>{H.type==="svg"?Oe="svg":H.type==="math"&&(Oe="mathml"),z==null?U(H,X,he,de,_e,Oe,Re,me):y(z,H,de,_e,Oe,Re,me)},U=(z,H,X,he,de,_e,Oe,Re)=>{let me,Ce;const{props:He,shapeFlag:ze,transition:Ze,dirs:rt}=z;if(me=z.el=a(z.type,_e,He&&He.is,He),ze&8?c(me,z.children):ze&16&&S(z.children,me,null,he,de,e0(z,_e),Oe,Re),rt&&$l(z,null,he,"created"),D(me,z,z.scopeId,Oe,he),He){for(const dt in He)dt!=="value"&&!cf(dt)&&r(me,dt,null,He[dt],_e,he);"value"in He&&r(me,"value",null,He.value,_e),(Ce=He.onVnodeBeforeMount)&&Wr(Ce,he,z)}rt&&$l(z,null,he,"beforeMount");const at=M6(de,Ze);at&&Ze.beforeEnter(me),i(me,H,X),((Ce=He&&He.onVnodeMounted)||at||rt)&&as(()=>{Ce&&Wr(Ce,he,z),at&&Ze.enter(me),rt&&$l(z,null,he,"mounted")},de)},D=(z,H,X,he,de)=>{if(X&&f(z,X),he)for(let _e=0;_e<he.length;_e++)f(z,he[_e]);if(de){let _e=de.subTree;if(H===_e||sR(_e.type)&&(_e.ssContent===H||_e.ssFallback===H)){const Oe=de.vnode;D(z,Oe,Oe.scopeId,Oe.slotScopeIds,de.parent)}}},S=(z,H,X,he,de,_e,Oe,Re,me=0)=>{for(let Ce=me;Ce<z.length;Ce++){const He=z[Ce]=Re?Mo(z[Ce]):Jr(z[Ce]);v(null,He,H,X,he,de,_e,Oe,Re)}},y=(z,H,X,he,de,_e,Oe)=>{const Re=H.el=z.el;let{patchFlag:me,dynamicChildren:Ce,dirs:He}=H;me|=z.patchFlag&16;const ze=z.props||un,Ze=H.props||un;let rt;if(X&&Hl(X,!1),(rt=Ze.onVnodeBeforeUpdate)&&Wr(rt,X,H,z),He&&$l(H,z,X,"beforeUpdate"),X&&Hl(X,!0),(ze.innerHTML&&Ze.innerHTML==null||ze.textContent&&Ze.textContent==null)&&c(Re,""),Ce?E(z.dynamicChildren,Ce,Re,X,he,e0(H,de),_e):Oe||ne(z,H,Re,null,X,he,e0(H,de),_e,!1),me>0){if(me&16)A(Re,ze,Ze,X,de);else if(me&2&&ze.class!==Ze.class&&r(Re,"class",null,Ze.class,de),me&4&&r(Re,"style",ze.style,Ze.style,de),me&8){const at=H.dynamicProps;for(let dt=0;dt<at.length;dt++){const wt=at[dt],Fn=ze[wt],En=Ze[wt];(En!==Fn||wt==="value")&&r(Re,wt,Fn,En,de,X)}}me&1&&z.children!==H.children&&c(Re,H.children)}else!Oe&&Ce==null&&A(Re,ze,Ze,X,de);((rt=Ze.onVnodeUpdated)||He)&&as(()=>{rt&&Wr(rt,X,H,z),He&&$l(H,z,X,"updated")},he)},E=(z,H,X,he,de,_e,Oe)=>{for(let Re=0;Re<H.length;Re++){const me=z[Re],Ce=H[Re],He=me.el&&(me.type===Ye||!Jl(me,Ce)||me.shapeFlag&70)?d(me.el):X;v(me,Ce,He,null,he,de,_e,Oe,!0)}},A=(z,H,X,he,de)=>{if(H!==X){if(H!==un)for(const _e in H)!cf(_e)&&!(_e in X)&&r(z,_e,H[_e],null,de,he);for(const _e in X){if(cf(_e))continue;const Oe=X[_e],Re=H[_e];Oe!==Re&&_e!=="value"&&r(z,_e,Re,Oe,de,he)}"value"in X&&r(z,"value",H.value,X.value,de)}},k=(z,H,X,he,de,_e,Oe,Re,me)=>{const Ce=H.el=z?z.el:o(""),He=H.anchor=z?z.anchor:o("");let{patchFlag:ze,dynamicChildren:Ze,slotScopeIds:rt}=H;rt&&(Re=Re?Re.concat(rt):rt),z==null?(i(Ce,X,he),i(He,X,he),S(H.children||[],X,He,de,_e,Oe,Re,me)):ze>0&&ze&64&&Ze&&z.dynamicChildren?(E(z.dynamicChildren,Ze,X,de,_e,Oe,Re),(H.key!=null||de&&H===de.subTree)&&u1(z,H,!0)):ne(z,H,X,He,de,_e,Oe,Re,me)},R=(z,H,X,he,de,_e,Oe,Re,me)=>{H.slotScopeIds=Re,z==null?H.shapeFlag&512?de.ctx.activate(H,X,he,Oe,me):W(H,X,he,de,_e,Oe,me):se(z,H,me)},W=(z,H,X,he,de,_e,Oe)=>{const Re=z.component=eU(z,he,de);if(ey(z)&&(Re.ctx.renderer=Ne),tU(Re,!1,Oe),Re.asyncDep){if(de&&de.registerDep(Re,ae,Oe),!z.el){const me=Re.subTree=_(zi);I(null,me,H,X)}}else ae(Re,z,H,X,de,_e,Oe)},se=(z,H,X)=>{const he=H.component=z.component;if(z6(z,H,X))if(he.asyncDep&&!he.asyncResolved){Z(he,H,X);return}else he.next=H,he.update();else H.el=z.el,he.vnode=H},ae=(z,H,X,he,de,_e,Oe)=>{const Re=()=>{if(z.isMounted){let{next:ze,bu:Ze,u:rt,parent:at,vnode:dt}=z;{const bt=tR(z);if(bt){ze&&(ze.el=dt.el,Z(z,ze,Oe)),bt.asyncDep.then(()=>{z.isUnmounted||Re()});return}}let wt=ze,Fn;Hl(z,!1),ze?(ze.el=dt.el,Z(z,ze,Oe)):ze=dt,Ze&&lg(Ze),(Fn=ze.props&&ze.props.onVnodeBeforeUpdate)&&Wr(Fn,at,ze,dt),Hl(z,!0);const En=Zw(z),Xn=z.subTree;z.subTree=En,v(Xn,En,d(Xn.el),re(Xn),z,de,_e),ze.el=En.el,wt===null&&W6(z,En.el),rt&&as(rt,de),(Fn=ze.props&&ze.props.onVnodeUpdated)&&as(()=>Wr(Fn,at,ze,dt),de)}else{let ze;const{el:Ze,props:rt}=H,{bm:at,m:dt,parent:wt,root:Fn,type:En}=z,Xn=Wc(H);Hl(z,!1),at&&lg(at),!Xn&&(ze=rt&&rt.onVnodeBeforeMount)&&Wr(ze,wt,H),Hl(z,!0);{Fn.ce&&Fn.ce._injectChildStyle(En);const bt=z.subTree=Zw(z);v(null,bt,X,he,z,de,_e),H.el=bt.el}if(dt&&as(dt,de),!Xn&&(ze=rt&&rt.onVnodeMounted)){const bt=H;as(()=>Wr(ze,wt,bt),de)}(H.shapeFlag&256||wt&&Wc(wt.vnode)&&wt.vnode.shapeFlag&256)&&z.a&&as(z.a,de),z.isMounted=!0,H=X=he=null}};z.scope.on();const me=z.effect=new rD(Re);z.scope.off();const Ce=z.update=me.run.bind(me),He=z.job=me.runIfDirty.bind(me);He.i=z,He.id=z.uid,me.scheduler=()=>t1(He),Hl(z,!0),Ce()},Z=(z,H,X)=>{H.component=z;const he=z.vnode.props;z.vnode=H,z.next=null,k6(z,H.props,he,X),L6(z,H.children,X),ml(),$w(z),pl()},ne=(z,H,X,he,de,_e,Oe,Re,me=!1)=>{const Ce=z&&z.children,He=z?z.shapeFlag:0,ze=H.children,{patchFlag:Ze,shapeFlag:rt}=H;if(Ze>0){if(Ze&128){Q(Ce,ze,X,he,de,_e,Oe,Re,me);return}else if(Ze&256){ee(Ce,ze,X,he,de,_e,Oe,Re,me);return}}rt&8?(He&16&&we(Ce,de,_e),ze!==Ce&&c(X,ze)):He&16?rt&16?Q(Ce,ze,X,he,de,_e,Oe,Re,me):we(Ce,de,_e,!0):(He&8&&c(X,""),rt&16&&S(ze,X,he,de,_e,Oe,Re,me))},ee=(z,H,X,he,de,_e,Oe,Re,me)=>{z=z||jc,H=H||jc;const Ce=z.length,He=H.length,ze=Math.min(Ce,He);let Ze;for(Ze=0;Ze<ze;Ze++){const rt=H[Ze]=me?Mo(H[Ze]):Jr(H[Ze]);v(z[Ze],rt,X,null,de,_e,Oe,Re,me)}Ce>He?we(z,de,_e,!0,!1,ze):S(H,X,he,de,_e,Oe,Re,me,ze)},Q=(z,H,X,he,de,_e,Oe,Re,me)=>{let Ce=0;const He=H.length;let ze=z.length-1,Ze=He-1;for(;Ce<=ze&&Ce<=Ze;){const rt=z[Ce],at=H[Ce]=me?Mo(H[Ce]):Jr(H[Ce]);if(Jl(rt,at))v(rt,at,X,null,de,_e,Oe,Re,me);else break;Ce++}for(;Ce<=ze&&Ce<=Ze;){const rt=z[ze],at=H[Ze]=me?Mo(H[Ze]):Jr(H[Ze]);if(Jl(rt,at))v(rt,at,X,null,de,_e,Oe,Re,me);else break;ze--,Ze--}if(Ce>ze){if(Ce<=Ze){const rt=Ze+1,at=rt<He?H[rt].el:he;for(;Ce<=Ze;)v(null,H[Ce]=me?Mo(H[Ce]):Jr(H[Ce]),X,at,de,_e,Oe,Re,me),Ce++}}else if(Ce>Ze)for(;Ce<=ze;)le(z[Ce],de,_e,!0),Ce++;else{const rt=Ce,at=Ce,dt=new Map;for(Ce=at;Ce<=Ze;Ce++){const Bn=H[Ce]=me?Mo(H[Ce]):Jr(H[Ce]);Bn.key!=null&&dt.set(Bn.key,Ce)}let wt,Fn=0;const En=Ze-at+1;let Xn=!1,bt=0;const Ps=new Array(En);for(Ce=0;Ce<En;Ce++)Ps[Ce]=0;for(Ce=rt;Ce<=ze;Ce++){const Bn=z[Ce];if(Fn>=En){le(Bn,de,_e,!0);continue}let mi;if(Bn.key!=null)mi=dt.get(Bn.key);else for(wt=at;wt<=Ze;wt++)if(Ps[wt-at]===0&&Jl(Bn,H[wt])){mi=wt;break}mi===void 0?le(Bn,de,_e,!0):(Ps[mi-at]=Ce+1,mi>=bt?bt=mi:Xn=!0,v(Bn,H[mi],X,null,de,_e,Oe,Re,me),Fn++)}const Ds=Xn?V6(Ps):jc;for(wt=Ds.length-1,Ce=En-1;Ce>=0;Ce--){const Bn=at+Ce,mi=H[Bn],Rs=Bn+1<He?H[Bn+1].el:he;Ps[Ce]===0?v(null,mi,X,Rs,de,_e,Oe,Re,me):Xn&&(wt<0||Ce!==Ds[wt]?j(mi,X,Rs,2):wt--)}}},j=(z,H,X,he,de=null)=>{const{el:_e,type:Oe,transition:Re,children:me,shapeFlag:Ce}=z;if(Ce&6){j(z.component.subTree,H,X,he);return}if(Ce&128){z.suspense.move(H,X,he);return}if(Ce&64){Oe.move(z,H,X,Ne);return}if(Oe===Ye){i(_e,H,X);for(let ze=0;ze<me.length;ze++)j(me[ze],H,X,he);i(z.anchor,H,X);return}if(Oe===t0){P(z,H,X);return}if(he!==2&&Ce&1&&Re)if(he===0)Re.beforeEnter(_e),i(_e,H,X),as(()=>Re.enter(_e),de);else{const{leave:ze,delayLeave:Ze,afterLeave:rt}=Re,at=()=>i(_e,H,X),dt=()=>{ze(_e,()=>{at(),rt&&rt()})};Ze?Ze(_e,at,dt):dt()}else i(_e,H,X)},le=(z,H,X,he=!1,de=!1)=>{const{type:_e,props:Oe,ref:Re,children:me,dynamicChildren:Ce,shapeFlag:He,patchFlag:ze,dirs:Ze,cacheIndex:rt}=z;if(ze===-2&&(de=!1),Re!=null&&Og(Re,null,X,z,!0),rt!=null&&(H.renderCache[rt]=void 0),He&256){H.ctx.deactivate(z);return}const at=He&1&&Ze,dt=!Wc(z);let wt;if(dt&&(wt=Oe&&Oe.onVnodeBeforeUnmount)&&Wr(wt,H,z),He&6)Le(z.component,X,he);else{if(He&128){z.suspense.unmount(X,he);return}at&&$l(z,null,H,"beforeUnmount"),He&64?z.type.remove(z,H,X,Ne,he):Ce&&!Ce.hasOnce&&(_e!==Ye||ze>0&&ze&64)?we(Ce,H,X,!1,!0):(_e===Ye&&ze&384||!de&&He&16)&&we(me,H,X),he&&pe(z)}(dt&&(wt=Oe&&Oe.onVnodeUnmounted)||at)&&as(()=>{wt&&Wr(wt,H,z),at&&$l(z,null,H,"unmounted")},X)},pe=z=>{const{type:H,el:X,anchor:he,transition:de}=z;if(H===Ye){Se(X,he);return}if(H===t0){M(z);return}const _e=()=>{s(X),de&&!de.persisted&&de.afterLeave&&de.afterLeave()};if(z.shapeFlag&1&&de&&!de.persisted){const{leave:Oe,delayLeave:Re}=de,me=()=>Oe(X,_e);Re?Re(z.el,_e,me):me()}else _e()},Se=(z,H)=>{let X;for(;z!==H;)X=h(z),s(z),z=X;s(H)},Le=(z,H,X)=>{const{bum:he,scope:de,job:_e,subTree:Oe,um:Re,m:me,a:Ce}=z;Jw(me),Jw(Ce),he&&lg(he),de.stop(),_e&&(_e.flags|=8,le(Oe,z,H,X)),Re&&as(Re,H),as(()=>{z.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},we=(z,H,X,he=!1,de=!1,_e=0)=>{for(let Oe=_e;Oe<z.length;Oe++)le(z[Oe],H,X,he,de)},re=z=>{if(z.shapeFlag&6)return re(z.component.subTree);if(z.shapeFlag&128)return z.suspense.next();const H=h(z.anchor||z.el),X=H&&H[AD];return X?h(X):H};let fe=!1;const xe=(z,H,X)=>{z==null?H._vnode&&le(H._vnode,null,null,!0):v(H._vnode||null,z,H,null,null,null,X),H._vnode=z,fe||(fe=!0,$w(),wD(),fe=!1)},Ne={p:v,um:le,m:j,r:pe,mt:W,mc:S,pc:ne,pbc:E,n:re,o:t};return{render:xe,hydrate:void 0,createApp:x6(xe)}}function e0({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Hl({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function M6(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function u1(t,e,n=!1){const i=t.children,s=e.children;if(gt(i)&&gt(s))for(let r=0;r<i.length;r++){const a=i[r];let o=s[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[r]=Mo(s[r]),o.el=a.el),!n&&o.patchFlag!==-2&&u1(a,o)),o.type===Em&&(o.el=a.el)}}function V6(t){const e=t.slice(),n=[0];let i,s,r,a,o;const l=t.length;for(i=0;i<l;i++){const u=t[i];if(u!==0){if(s=n[n.length-1],t[s]<u){e[i]=s,n.push(i);continue}for(r=0,a=n.length-1;r<a;)o=r+a>>1,t[n[o]]<u?r=o+1:a=o;u<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=e[a];return n}function tR(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:tR(e)}function Jw(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const F6=Symbol.for("v-scx"),B6=()=>vt(F6);function An(t,e){return c1(t,null,e)}function $e(t,e,n){return c1(t,e,n)}function c1(t,e,n=un){const{immediate:i,deep:s,flush:r,once:a}=n,o=ci({},n),l=e&&i||!e&&r!=="post";let u;if(Uf){if(r==="sync"){const f=B6();u=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=oa,f.resume=oa,f.pause=oa,f}}const c=Ti;o.call=(f,g,v)=>Ar(f,c,g,v);let d=!1;r==="post"?o.scheduler=f=>{as(f,c&&c.suspense)}:r!=="sync"&&(d=!0,o.scheduler=(f,g)=>{g?f():t1(f)}),o.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const h=n6(t,e,o);return Uf&&(u?u.push(h):l&&h()),h}function U6(t,e,n){const i=this.proxy,s=On(t)?t.includes(".")?nR(i,t):()=>i[t]:t.bind(i,i);let r;St(e)?r=e:(r=e.handler,n=e);const a=wm(this),o=c1(s,r.bind(i),n);return a(),o}function nR(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}const $6=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Is(e)}Modifiers`]||t[`${Mu(e)}Modifiers`];function H6(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||un;let s=n;const r=e.startsWith("update:"),a=r&&$6(i,e.slice(7));a&&(a.trim&&(s=n.map(c=>On(c)?c.trim():c)),a.number&&(s=n.map(Tb)));let o,l=i[o=G_(e)]||i[o=G_(Is(e))];!l&&r&&(l=i[o=G_(Mu(e))]),l&&Ar(l,t,6,s);const u=i[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Ar(u,t,6,s)}}function iR(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let a={},o=!1;if(!St(t)){const l=u=>{const c=iR(u,e,!0);c&&(o=!0,ci(a,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!o?(hn(t)&&i.set(t,null),null):(gt(r)?r.forEach(l=>a[l]=null):ci(a,r),hn(t)&&i.set(t,a),a)}function ny(t,e){return!t||!Gv(e)?!1:(e=e.slice(2).replace(/Once$/,""),Yt(t,e[0].toLowerCase()+e.slice(1))||Yt(t,Mu(e))||Yt(t,e))}function Zw(t){const{type:e,vnode:n,proxy:i,withProxy:s,propsOptions:[r],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:d,data:h,setupState:f,ctx:g,inheritAttrs:v}=t,b=Lg(t);let I,w;try{if(n.shapeFlag&4){const M=s||i,F=M;I=Jr(u.call(F,M,c,d,f,h,g)),w=o}else{const M=e;I=Jr(M.length>1?M(d,{attrs:o,slots:a,emit:l}):M(d,null)),w=e.props?o:j6(o)}}catch(M){pf.length=0,Zv(M,t,1),I=_(zi)}let P=I;if(w&&v!==!1){const M=Object.keys(w),{shapeFlag:F}=P;M.length&&F&7&&(r&&M.some(jS)&&(w=q6(w,r)),P=Ya(P,w,!1,!0))}return n.dirs&&(P=Ya(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&_u(P,n.transition),I=P,Lg(b),I}const j6=t=>{let e;for(const n in t)(n==="class"||n==="style"||Gv(n))&&((e||(e={}))[n]=t[n]);return e},q6=(t,e)=>{const n={};for(const i in t)(!jS(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function z6(t,e,n){const{props:i,children:s,component:r}=t,{props:a,children:o,patchFlag:l}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?ex(i,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const h=c[d];if(a[h]!==i[h]&&!ny(u,h))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?ex(i,a,u):!0:!!a;return!1}function ex(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!ny(n,r))return!0}return!1}function W6({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const sR=t=>t.__isSuspense;function G6(t,e){e&&e.pendingBranch?gt(t)?e.effects.push(...t):e.effects.push(t):r6(t)}const Ye=Symbol.for("v-fgt"),Em=Symbol.for("v-txt"),zi=Symbol.for("v-cmt"),t0=Symbol.for("v-stc"),pf=[];let Us=null;function $n(t=!1){pf.push(Us=t?null:[])}function K6(){pf.pop(),Us=pf[pf.length-1]||null}let Bf=1;function tx(t,e=!1){Bf+=t,t<0&&Us&&e&&(Us.hasOnce=!0)}function rR(t){return t.dynamicChildren=Bf>0?Us||jc:null,K6(),Bf>0&&Us&&Us.push(t),t}function Ko(t,e,n,i,s,r){return rR(la(t,e,n,i,s,r,!0))}function Cs(t,e,n,i,s){return rR(_(t,e,n,i,s,!0))}function ld(t){return t?t.__v_isVNode===!0:!1}function Jl(t,e){return t.type===e.type&&t.key===e.key}const aR=({key:t})=>t??null,cg=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?On(t)||an(t)||St(t)?{i:oi,r:t,k:e,f:!!n}:t:null);function la(t,e=null,n=null,i=0,s=null,r=t===Ye?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&aR(e),ref:e&&cg(e),scopeId:ID,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:oi};return o?(d1(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=On(n)?8:16),Bf>0&&!a&&Us&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Us.push(l),l}const _=Y6;function Y6(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===g6)&&(t=zi),ld(t)){const o=Ya(t,e,!0);return n&&d1(o,n),Bf>0&&!r&&Us&&(o.shapeFlag&6?Us[Us.indexOf(t)]=o:Us.push(o)),o.patchFlag=-2,o}if(aU(t)&&(t=t.__vccOpts),e){e=X6(e);let{class:o,style:l}=e;o&&!On(o)&&(e.class=GS(o)),hn(l)&&(e1(l)&&!gt(l)&&(l=ci({},l)),e.style=WS(l))}const a=On(t)?1:sR(t)?128:kD(t)?64:hn(t)?4:St(t)?2:0;return la(t,e,n,i,s,a,r,!0)}function X6(t){return t?e1(t)||KD(t)?ci({},t):t:null}function Ya(t,e,n=!1,i=!1){const{props:s,ref:r,patchFlag:a,children:o,transition:l}=t,u=e?Ie(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&aR(u),ref:e&&e.ref?n&&r?gt(r)?r.concat(cg(e)):[r,cg(e)]:cg(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ye?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ya(t.ssContent),ssFallback:t.ssFallback&&Ya(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&i&&_u(c,l.clone(c)),c}function zs(t=" ",e=0){return _(Em,null,t,e)}function Q6(t="",e=!1){return e?($n(),Cs(zi,null,t)):_(zi,null,t)}function Jr(t){return t==null||typeof t=="boolean"?_(zi):gt(t)?_(Ye,null,t.slice()):ld(t)?Mo(t):_(Em,null,String(t))}function Mo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ya(t)}function d1(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(gt(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),d1(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!KD(e)?e._ctx=oi:s===3&&oi&&(oi.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else St(e)?(e={default:e,_ctx:oi},n=32):(e=String(e),i&64?(n=16,e=[zs(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ie(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=GS([e.class,i.class]));else if(s==="style")e.style=WS([e.style,i.style]);else if(Gv(s)){const r=e[s],a=i[s];a&&r!==a&&!(gt(r)&&r.includes(a))&&(e[s]=r?[].concat(r,a):a)}else s!==""&&(e[s]=i[s])}return e}function Wr(t,e,n,i=null){Ar(t,e,7,[n,i])}const J6=zD();let Z6=0;function eU(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||J6,r={uid:Z6++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new iD(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:XD(i,s),emitsOptions:iR(i,s),emit:null,emitted:null,propsDefaults:un,inheritAttrs:i.inheritAttrs,ctx:un,data:un,props:un,attrs:un,slots:un,refs:un,setupState:un,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=H6.bind(null,r),t.ce&&t.ce(r),r}let Ti=null;const Cm=()=>Ti||oi;let Mg,Db;{const t=Xv(),e=(n,i)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(i),r=>{s.length>1?s.forEach(a=>a(r)):s[0](r)}};Mg=e("__VUE_INSTANCE_SETTERS__",n=>Ti=n),Db=e("__VUE_SSR_SETTERS__",n=>Uf=n)}const wm=t=>{const e=Ti;return Mg(t),t.scope.on(),()=>{t.scope.off(),Mg(e)}},nx=()=>{Ti&&Ti.scope.off(),Mg(null)};function oR(t){return t.vnode.shapeFlag&4}let Uf=!1;function tU(t,e=!1,n=!1){e&&Db(e);const{props:i,children:s}=t.vnode,r=oR(t);A6(t,i,r,e),R6(t,s,n);const a=r?nU(t,e):void 0;return e&&Db(!1),a}function nU(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,_6);const{setup:i}=n;if(i){ml();const s=t.setupContext=i.length>1?sU(t):null,r=wm(t),a=Sm(i,t,0,[t.props,s]),o=XP(a);if(pl(),r(),(o||t.sp)&&!Wc(t)&&VD(t),o){if(a.then(nx,nx),e)return a.then(l=>{ix(t,l)}).catch(l=>{Zv(l,t,0)});t.asyncDep=a}else ix(t,a)}else lR(t)}function ix(t,e,n){St(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:hn(e)&&(t.setupState=TD(e)),lR(t)}function lR(t,e,n){const i=t.type;t.render||(t.render=i.render||oa);{const s=wm(t);ml();try{b6(t)}finally{pl(),s()}}}const iU={get(t,e){return Ui(t,"get",""),t[e]}};function sU(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,iU),slots:t.slots,emit:t.emit,expose:e}}function iy(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(TD(Jv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in mf)return mf[n](t)},has(e,n){return n in e||n in mf}})):t.proxy}function rU(t,e=!0){return St(t)?t.displayName||t.name:t.name||e&&t.__name}function aU(t){return St(t)&&"__vccOpts"in t}const V=(t,e)=>e6(t,e,Uf);function Mr(t,e,n){const i=arguments.length;return i===2?hn(e)&&!gt(e)?ld(e)?_(t,null,[e]):_(t,e):_(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&ld(n)&&(n=[n]),_(t,e,n))}const oU="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rb;const sx=typeof window<"u"&&window.trustedTypes;if(sx)try{Rb=sx.createPolicy("vue",{createHTML:t=>t})}catch{}const uR=Rb?t=>Rb.createHTML(t):t=>t,lU="http://www.w3.org/2000/svg",uU="http://www.w3.org/1998/Math/MathML",Va=typeof document<"u"?document:null,rx=Va&&Va.createElement("template"),cU={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e==="svg"?Va.createElementNS(lU,t):e==="mathml"?Va.createElementNS(uU,t):n?Va.createElement(t,{is:n}):Va.createElement(t);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>Va.createTextNode(t),createComment:t=>Va.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Va.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const a=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{rx.innerHTML=uR(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const o=rx.content;if(i==="svg"||i==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},wo="transition",Vh="animation",ud=Symbol("_vtc"),cR={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},dR=ci({},LD,cR),dU=t=>(t.displayName="Transition",t.props=dR,t),nl=dU((t,{slots:e})=>Mr(u6,hR(t),e)),jl=(t,e=[])=>{gt(t)?t.forEach(n=>n(...e)):t&&t(...e)},ax=t=>t?gt(t)?t.some(e=>e.length>1):t.length>1:!1;function hR(t){const e={};for(const k in t)k in cR||(e[k]=t[k]);if(t.css===!1)return e;const{name:n="v",type:i,duration:s,enterFromClass:r=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:u=a,appearToClass:c=o,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,g=hU(s),v=g&&g[0],b=g&&g[1],{onBeforeEnter:I,onEnter:w,onEnterCancelled:P,onLeave:M,onLeaveCancelled:F,onBeforeAppear:U=I,onAppear:D=w,onAppearCancelled:S=P}=e,y=(k,R,W,se)=>{k._enterCancelled=se,Ro(k,R?c:o),Ro(k,R?u:a),W&&W()},E=(k,R)=>{k._isLeaving=!1,Ro(k,d),Ro(k,f),Ro(k,h),R&&R()},A=k=>(R,W)=>{const se=k?D:w,ae=()=>y(R,k,W);jl(se,[R,ae]),ox(()=>{Ro(R,k?l:r),Kr(R,k?c:o),ax(se)||lx(R,i,v,ae)})};return ci(e,{onBeforeEnter(k){jl(I,[k]),Kr(k,r),Kr(k,a)},onBeforeAppear(k){jl(U,[k]),Kr(k,l),Kr(k,u)},onEnter:A(!1),onAppear:A(!0),onLeave(k,R){k._isLeaving=!0;const W=()=>E(k,R);Kr(k,d),k._enterCancelled?(Kr(k,h),Lb()):(Lb(),Kr(k,h)),ox(()=>{k._isLeaving&&(Ro(k,d),Kr(k,f),ax(M)||lx(k,i,b,W))}),jl(M,[k,W])},onEnterCancelled(k){y(k,!1,void 0,!0),jl(P,[k])},onAppearCancelled(k){y(k,!0,void 0,!0),jl(S,[k])},onLeaveCancelled(k){E(k),jl(F,[k])}})}function hU(t){if(t==null)return null;if(hn(t))return[n0(t.enter),n0(t.leave)];{const e=n0(t);return[e,e]}}function n0(t){return E8(t)}function Kr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ud]||(t[ud]=new Set)).add(e)}function Ro(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const n=t[ud];n&&(n.delete(e),n.size||(t[ud]=void 0))}function ox(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let fU=0;function lx(t,e,n,i){const s=t._endId=++fU,r=()=>{s===t._endId&&i()};if(n!=null)return setTimeout(r,n);const{type:a,timeout:o,propCount:l}=fR(t,e);if(!a)return i();const u=a+"end";let c=0;const d=()=>{t.removeEventListener(u,h),r()},h=f=>{f.target===t&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},o+1),t.addEventListener(u,h)}function fR(t,e){const n=window.getComputedStyle(t),i=g=>(n[g]||"").split(", "),s=i(`${wo}Delay`),r=i(`${wo}Duration`),a=ux(s,r),o=i(`${Vh}Delay`),l=i(`${Vh}Duration`),u=ux(o,l);let c=null,d=0,h=0;e===wo?a>0&&(c=wo,d=a,h=r.length):e===Vh?u>0&&(c=Vh,d=u,h=l.length):(d=Math.max(a,u),c=d>0?a>u?wo:Vh:null,h=c?c===wo?r.length:l.length:0);const f=c===wo&&/\b(transform|all)(,|$)/.test(i(`${wo}Property`).toString());return{type:c,timeout:d,propCount:h,hasTransform:f}}function ux(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>cx(n)+cx(t[i])))}function cx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Lb(){return document.body.offsetHeight}function mU(t,e,n){const i=t[ud];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Vg=Symbol("_vod"),mR=Symbol("_vsh"),Vr={beforeMount(t,{value:e},{transition:n}){t[Vg]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Fh(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),Fh(t,!0),i.enter(t)):i.leave(t,()=>{Fh(t,!1)}):Fh(t,e))},beforeUnmount(t,{value:e}){Fh(t,e)}};function Fh(t,e){t.style.display=e?t[Vg]:"none",t[mR]=!e}const pU=Symbol(""),gU=/(^|;)\s*display\s*:/;function vU(t,e,n){const i=t.style,s=On(n);let r=!1;if(n&&!s){if(e)if(On(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&dg(i,o,"")}else for(const a in e)n[a]==null&&dg(i,a,"");for(const a in n)a==="display"&&(r=!0),dg(i,a,n[a])}else if(s){if(e!==n){const a=i[pU];a&&(n+=";"+a),i.cssText=n,r=gU.test(n)}}else e&&t.removeAttribute("style");Vg in t&&(t[Vg]=r?i.display:"",t[mR]&&(i.display="none"))}const dx=/\s*!important$/;function dg(t,e,n){if(gt(n))n.forEach(i=>dg(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=yU(t,e);dx.test(n)?t.setProperty(Mu(i),n.replace(dx,""),"important"):t[i]=n}}const hx=["Webkit","Moz","ms"],i0={};function yU(t,e){const n=i0[e];if(n)return n;let i=Is(e);if(i!=="filter"&&i in t)return i0[e]=i;i=Ta(i);for(let s=0;s<hx.length;s++){const r=hx[s]+i;if(r in t)return i0[e]=r}return e}const fx="http://www.w3.org/1999/xlink";function mx(t,e,n,i,s,r=k8(e)){i&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(fx,e.slice(6,e.length)):t.setAttributeNS(fx,e,n):n==null||r&&!eD(n)?t.removeAttribute(e):t.setAttribute(e,r?"":ro(n)?String(n):n)}function px(t,e,n,i,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?uR(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(o!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=eD(n):n==null&&o==="string"?(n="",a=!0):o==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(s||e)}function Ac(t,e,n,i){t.addEventListener(e,n,i)}function _U(t,e,n,i){t.removeEventListener(e,n,i)}const gx=Symbol("_vei");function bU(t,e,n,i,s=null){const r=t[gx]||(t[gx]={}),a=r[e];if(i&&a)a.value=i;else{const[o,l]=TU(e);if(i){const u=r[e]=CU(i,s);Ac(t,o,u,l)}else a&&(_U(t,o,a,l),r[e]=void 0)}}const vx=/(?:Once|Passive|Capture)$/;function TU(t){let e;if(vx.test(t)){e={};let i;for(;i=t.match(vx);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Mu(t.slice(2)),e]}let s0=0;const SU=Promise.resolve(),EU=()=>s0||(SU.then(()=>s0=0),s0=Date.now());function CU(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Ar(wU(i,n.value),e,5,[i])};return n.value=t,n.attached=EU(),n}function wU(t,e){if(gt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const yx=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,xU=(t,e,n,i,s,r)=>{const a=s==="svg";e==="class"?mU(t,i,a):e==="style"?vU(t,n,i):Gv(e)?jS(e)||bU(t,e,n,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):IU(t,e,i,a))?(px(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&mx(t,e,i,a,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!On(i))?px(t,Is(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),mx(t,e,i,a))};function IU(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&yx(e)&&St(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return yx(e)&&On(n)?!1:e in t}const pR=new WeakMap,gR=new WeakMap,Fg=Symbol("_moveCb"),_x=Symbol("_enterCb"),AU=t=>(delete t.props.mode,t),kU=AU({name:"TransitionGroup",props:ci({},dR,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Cm(),i=RD();let s,r;return s1(()=>{if(!s.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!LU(s[0].el,n.vnode.el,a))return;s.forEach(PU),s.forEach(DU);const o=s.filter(RU);Lb(),o.forEach(l=>{const u=l.el,c=u.style;Kr(u,a),c.transform=c.webkitTransform=c.transitionDuration="";const d=u[Fg]=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",d),u[Fg]=null,Ro(u,a))};u.addEventListener("transitionend",d)})}),()=>{const a=ot(t),o=hR(a);let l=a.tag||Ye;if(s=[],r)for(let u=0;u<r.length;u++){const c=r[u];c.el&&c.el instanceof Element&&(s.push(c),_u(c,Ff(c,o,i,n)),pR.set(c,c.el.getBoundingClientRect()))}r=e.default?n1(e.default()):[];for(let u=0;u<r.length;u++){const c=r[u];c.key!=null&&_u(c,Ff(c,o,i,n))}return _(l,null,r)}}}),h1=kU;function PU(t){const e=t.el;e[Fg]&&e[Fg](),e[_x]&&e[_x]()}function DU(t){gR.set(t,t.el.getBoundingClientRect())}function RU(t){const e=pR.get(t),n=gR.get(t),i=e.left-n.left,s=e.top-n.top;if(i||s){const r=t.el.style;return r.transform=r.webkitTransform=`translate(${i}px,${s}px)`,r.transitionDuration="0s",t}}function LU(t,e,n){const i=t.cloneNode(),s=t[ud];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),n.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(i);const{hasTransform:a}=fR(i);return r.removeChild(i),a}const bx=t=>{const e=t.props["onUpdate:modelValue"]||!1;return gt(e)?n=>lg(e,n):e};function OU(t){t.target.composing=!0}function Tx(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const r0=Symbol("_assign"),NU={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t[r0]=bx(s);const r=i||s.props&&s.props.type==="number";Ac(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;n&&(o=o.trim()),r&&(o=Tb(o)),t[r0](o)}),n&&Ac(t,"change",()=>{t.value=t.value.trim()}),e||(Ac(t,"compositionstart",OU),Ac(t,"compositionend",Tx),Ac(t,"change",Tx))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:s,number:r}},a){if(t[r0]=bx(a),t.composing)return;const o=(r||t.type==="number")&&!/^0\d/.test(t.value)?Tb(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||s&&t.value.trim()===l)||(t.value=l))}},MU=["ctrl","shift","alt","meta"],VU={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>MU.some(n=>t[`${n}Key`]&&!e.includes(n))},Oc=(t,e)=>{const n=t._withMods||(t._withMods={}),i=e.join(".");return n[i]||(n[i]=(s,...r)=>{for(let a=0;a<e.length;a++){const o=VU[e[a]];if(o&&o(s,e))return}return t(s,...r)})},FU=ci({patchProp:xU},cU);let Sx;function vR(){return Sx||(Sx=O6(FU))}const yR=(...t)=>{vR().render(...t)},BU=(...t)=>{const e=vR().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=$U(i);if(!s)return;const r=e._component;!St(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,UU(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function UU(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function $U(t){return On(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let _R;const sy=t=>_R=t,bR=Symbol();function Ob(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var gf;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(gf||(gf={}));function HU(){const t=tl(!0),e=t.run(()=>Me({}));let n=[],i=[];const s=Jv({install(r){sy(s),s._a=r,r.provide(bR,s),r.config.globalProperties.$pinia=s,i.forEach(a=>n.push(a)),i=[]},use(r){return this._a?n.push(r):i.push(r),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const TR=()=>{};function Ex(t,e,n,i=TR){t.push(e);const s=()=>{const r=t.indexOf(e);r>-1&&(t.splice(r,1),i())};return!n&&sD()&&hi(s),s}function yc(t,...e){t.slice().forEach(n=>{n(...e)})}const jU=t=>t(),Cx=Symbol(),a0=Symbol();function Nb(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,i)=>t.set(i,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n],s=t[n];Ob(s)&&Ob(i)&&t.hasOwnProperty(n)&&!an(i)&&!Go(i)?t[n]=Nb(s,i):t[n]=i}return t}const qU=Symbol();function zU(t){return!Ob(t)||!t.hasOwnProperty(qU)}const{assign:Lo}=Object;function WU(t){return!!(an(t)&&t.effect)}function GU(t,e,n,i){const{state:s,actions:r,getters:a}=e,o=n.state.value[t];let l;function u(){o||(n.state.value[t]=s?s():{});const c=gl(n.state.value[t]);return Lo(c,r,Object.keys(a||{}).reduce((d,h)=>(d[h]=Jv(V(()=>{sy(n);const f=n._s.get(t);return a[h].call(f,f)})),d),{}))}return l=SR(t,u,e,n,i,!0),l}function SR(t,e,n={},i,s,r){let a;const o=Lo({actions:{}},n),l={deep:!0};let u,c,d=[],h=[],f;const g=i.state.value[t];!r&&!g&&(i.state.value[t]={}),Me({});let v;function b(S){let y;u=c=!1,typeof S=="function"?(S(i.state.value[t]),y={type:gf.patchFunction,storeId:t,events:f}):(Nb(i.state.value[t],S),y={type:gf.patchObject,payload:S,storeId:t,events:f});const E=v=Symbol();kt().then(()=>{v===E&&(u=!0)}),c=!0,yc(d,y,i.state.value[t])}const I=r?function(){const{state:y}=n,E=y?y():{};this.$patch(A=>{Lo(A,E)})}:TR;function w(){a.stop(),d=[],h=[],i._s.delete(t)}const P=(S,y="")=>{if(Cx in S)return S[a0]=y,S;const E=function(){sy(i);const A=Array.from(arguments),k=[],R=[];function W(Z){k.push(Z)}function se(Z){R.push(Z)}yc(h,{args:A,name:E[a0],store:F,after:W,onError:se});let ae;try{ae=S.apply(this&&this.$id===t?this:F,A)}catch(Z){throw yc(R,Z),Z}return ae instanceof Promise?ae.then(Z=>(yc(k,Z),Z)).catch(Z=>(yc(R,Z),Promise.reject(Z))):(yc(k,ae),ae)};return E[Cx]=!0,E[a0]=y,E},M={_p:i,$id:t,$onAction:Ex.bind(null,h),$patch:b,$reset:I,$subscribe(S,y={}){const E=Ex(d,S,y.detached,()=>A()),A=a.run(()=>$e(()=>i.state.value[t],k=>{(y.flush==="sync"?c:u)&&S({storeId:t,type:gf.direct,events:f},k)},Lo({},l,y)));return E},$dispose:w},F=ai(M);i._s.set(t,F);const D=(i._a&&i._a.runWithContext||jU)(()=>i._e.run(()=>(a=tl()).run(()=>e({action:P}))));for(const S in D){const y=D[S];if(an(y)&&!WU(y)||Go(y))r||(g&&zU(y)&&(an(y)?y.value=g[S]:Nb(y,g[S])),i.state.value[t][S]=y);else if(typeof y=="function"){const E=P(y,S);D[S]=E,o.actions[S]=y}}return Lo(F,D),Lo(ot(F),D),Object.defineProperty(F,"$state",{get:()=>i.state.value[t],set:S=>{b(y=>{Lo(y,S)})}}),i._p.forEach(S=>{Lo(F,a.run(()=>S({store:F,app:i._a,pinia:i,options:o})))}),g&&r&&n.hydrate&&n.hydrate(F.$state,g),u=!0,c=!0,F}/*! #__NO_SIDE_EFFECTS__ */function f1(t,e,n){let i,s;const r=typeof e=="function";typeof t=="string"?(i=t,s=r?n:e):(s=t,i=t.id);function a(o,l){const u=I6();return o=o||(u?vt(bR,null):null),o&&sy(o),o=_R,o._s.has(i)||(r?SR(i,e,s,o):GU(i,s,o)),o._s.get(i)}return a.$id=i,a}const KU=()=>{};var wx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe=function(t,e){if(!t)throw $d(e)},$d=function(t){return new Error("Firebase Database ("+ER.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},YU=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],a=t[n++],o=t[n++],l=((s&7)<<18|(r&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],a=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},ry={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=r>>2,d=(r&3)<<4|o>>4;let h=(o&15)<<2|u>>6,f=u&63;l||(f=64,a||(h=64)),i.push(n[c],n[d],n[h],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||o==null||u==null||d==null)throw new XU;const h=r<<2|o>>4;if(i.push(h),u!==64){const f=o<<4&240|u>>2;if(i.push(f),d!==64){const g=u<<6&192|d;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wR=function(t){const e=CR(t);return ry.encodeByteArray(e,!0)},Bg=function(t){return wR(t).replace(/\./g,"")},Ug=function(t){try{return ry.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t){return xR(void 0,t)}function xR(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!JU(n)||(t[n]=xR(t[n],e[n]));return t}function JU(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9=()=>ZU().__FIREBASE_DEFAULTS__,t9=()=>{if(typeof process>"u"||typeof wx>"u")return;const t=wx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},n9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ug(t[1]);return e&&JSON.parse(e)},ay=()=>{try{return KU()||e9()||t9()||n9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IR=t=>{var e,n;return(n=(e=ay())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},i9=t=>{const e=IR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},AR=()=>{var t;return(t=ay())===null||t===void 0?void 0:t.config},kR=t=>{var e;return(e=ay())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bg(JSON.stringify(n)),Bg(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zi())}function r9(){var t;const e=(t=ay())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function a9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function o9(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function l9(){const t=Zi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function u9(){return ER.NODE_ADMIN===!0}function c9(){return!r9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DR(){try{return typeof indexedDB=="object"}catch{return!1}}function d9(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="FirebaseError";class Sa extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=h9,Object.setPrototypeOf(this,Sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hd.prototype.create)}}class Hd{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?f9(r,i):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Sa(s,o,i)}}function f9(t,e){return t.replace(m9,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const m9=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t){return JSON.parse(t)}function Pi(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=function(t){let e={},n={},i={},s="";try{const r=t.split(".");e=Hf(Ug(r[0])||""),n=Hf(Ug(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:s}},p9=function(t){const e=RR(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},g9=function(t){const e=RR(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function cd(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Mb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $g(t,e,n){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=e.call(n,t[s],s,t));return i}function bu(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],a=e[s];if(xx(r)&&xx(a)){if(!bu(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function xx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Qh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Jh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)i[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],a=this.chain_[2],o=this.chain_[3],l=this.chain_[4],u,c;for(let d=0;d<80;d++){d<40?d<20?(u=o^r&(a^o),c=1518500249):(u=r^a^o,c=1859775393):d<60?(u=r&a|o&(r|a),c=2400959708):(u=r^a^o,c=3395469782);const h=(s<<5|s>>>27)+u+l+c+i[d]&4294967295;l=o,o=a,a=(r<<30|r>>>2)&4294967295,r=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let a=this.inbuf_;for(;s<n;){if(a===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(r[a]=e.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(r),a=0;break}}else for(;s<n;)if(r[a]=e[s],++a,++s,a===this.blockSize){this.compress_(r),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[s]>>r&255,++i;return e}}function y9(t,e){const n=new _9(t,e);return n.subscribe.bind(n)}class _9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");b9(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=o0),s.error===void 0&&(s.error=o0),s.complete===void 0&&(s.complete=o0);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function o0(){}function T9(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,Qe(i<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(i)-56320;s=65536+(r<<10)+a}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},oy=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t){return t&&t._delegate?t._delegate:t}let kr=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new $f;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w9(e))try{this.getOrInitializeService({instanceIdentifier:Yl})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yl){return this.instances.has(e)}getOptions(e=Yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);i===o&&a.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const a=this.instances.get(s);return a&&e(a,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:C9(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Yl){return this.component?this.component.multipleInstances?e:Yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C9(t){return t===Yl?void 0:t}function w9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new E9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Lt||(Lt={}));const I9={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},A9=Lt.INFO,k9={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},P9=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=k9[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xm{constructor(e){this.name=e,this._logLevel=A9,this._logHandler=P9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}}const D9=(t,e)=>e.some(n=>t instanceof n);let Ix,Ax;function R9(){return Ix||(Ix=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function L9(){return Ax||(Ax=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LR=new WeakMap,Vb=new WeakMap,OR=new WeakMap,l0=new WeakMap,p1=new WeakMap;function O9(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(Yo(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&LR.set(n,t)}).catch(()=>{}),p1.set(e,t),e}function N9(t){if(Vb.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});Vb.set(t,e)}let Fb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function M9(t){Fb=t(Fb)}function V9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(u0(this),e,...n);return OR.set(i,e.sort?e.sort():[e]),Yo(i)}:L9().includes(t)?function(...e){return t.apply(u0(this),e),Yo(LR.get(this))}:function(...e){return Yo(t.apply(u0(this),e))}}function F9(t){return typeof t=="function"?V9(t):(t instanceof IDBTransaction&&N9(t),D9(t,R9())?new Proxy(t,Fb):t)}function Yo(t){if(t instanceof IDBRequest)return O9(t);if(l0.has(t))return l0.get(t);const e=F9(t);return e!==t&&(l0.set(t,e),p1.set(e,t)),e}const u0=t=>p1.get(t);function B9(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(t,e),o=Yo(a);return i&&a.addEventListener("upgradeneeded",l=>{i(Yo(a.result),l.oldVersion,l.newVersion,Yo(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const U9=["get","getKey","getAll","getAllKeys","count"],$9=["put","add","delete","clear"],c0=new Map;function kx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(c0.get(e))return c0.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=$9.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||U9.includes(n)))return;const r=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),s&&l.done]))[0]};return c0.set(e,r),r}M9(t=>({...t,get:(e,n,i)=>kx(e,n)||t.get(e,n,i),has:(e,n)=>!!kx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(j9(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function j9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bb="@firebase/app",Px="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=new xm("@firebase/app"),q9="@firebase/app-compat",z9="@firebase/analytics-compat",W9="@firebase/analytics",G9="@firebase/app-check-compat",K9="@firebase/app-check",Y9="@firebase/auth",X9="@firebase/auth-compat",Q9="@firebase/database",J9="@firebase/data-connect",Z9="@firebase/database-compat",e7="@firebase/functions",t7="@firebase/functions-compat",n7="@firebase/installations",i7="@firebase/installations-compat",s7="@firebase/messaging",r7="@firebase/messaging-compat",a7="@firebase/performance",o7="@firebase/performance-compat",l7="@firebase/remote-config",u7="@firebase/remote-config-compat",c7="@firebase/storage",d7="@firebase/storage-compat",h7="@firebase/firestore",f7="@firebase/vertexai",m7="@firebase/firestore-compat",p7="firebase",g7="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="[DEFAULT]",v7={[Bb]:"fire-core",[q9]:"fire-core-compat",[W9]:"fire-analytics",[z9]:"fire-analytics-compat",[K9]:"fire-app-check",[G9]:"fire-app-check-compat",[Y9]:"fire-auth",[X9]:"fire-auth-compat",[Q9]:"fire-rtdb",[J9]:"fire-data-connect",[Z9]:"fire-rtdb-compat",[e7]:"fire-fn",[t7]:"fire-fn-compat",[n7]:"fire-iid",[i7]:"fire-iid-compat",[s7]:"fire-fcm",[r7]:"fire-fcm-compat",[a7]:"fire-perf",[o7]:"fire-perf-compat",[l7]:"fire-rc",[u7]:"fire-rc-compat",[c7]:"fire-gcs",[d7]:"fire-gcs-compat",[h7]:"fire-fst",[m7]:"fire-fst-compat",[f7]:"fire-vertex","fire-js":"fire-js",[p7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg=new Map,y7=new Map,$b=new Map;function Dx(t,e){try{t.container.addComponent(e)}catch(n){Xa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fa(t){const e=t.name;if($b.has(e))return Xa.debug(`There were multiple attempts to register component ${e}.`),!1;$b.set(e,t);for(const n of Hg.values())Dx(n,t);for(const n of y7.values())Dx(n,t);return!0}function g1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ts(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xo=new Hd("app","Firebase",_7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=g7;function NR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Ub,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Xo.create("bad-app-name",{appName:String(s)});if(n||(n=AR()),!n)throw Xo.create("no-options");const r=Hg.get(s);if(r){if(bu(n,r.options)&&bu(i,r.config))return r;throw Xo.create("duplicate-app",{appName:s})}const a=new x9(s);for(const l of $b.values())a.addComponent(l);const o=new b7(n,i,a);return Hg.set(s,o),o}function v1(t=Ub){const e=Hg.get(t);if(!e&&t===Ub&&AR())return NR();if(!e)throw Xo.create("no-app",{appName:t});return e}function js(t,e,n){var i;let s=(i=v7[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xa.warn(o.join(" "));return}fa(new kr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7="firebase-heartbeat-database",S7=1,jf="firebase-heartbeat-store";let d0=null;function MR(){return d0||(d0=B9(T7,S7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xo.create("idb-open",{originalErrorMessage:t.message})})),d0}async function E7(t){try{const n=(await MR()).transaction(jf),i=await n.objectStore(jf).get(VR(t));return await n.done,i}catch(e){if(e instanceof Sa)Xa.warn(e.message);else{const n=Xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xa.warn(n.message)}}}async function Rx(t,e){try{const i=(await MR()).transaction(jf,"readwrite");await i.objectStore(jf).put(e,VR(t)),await i.done}catch(n){if(n instanceof Sa)Xa.warn(n.message);else{const i=Xo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xa.warn(i.message)}}}function VR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=1024,w7=30;class x7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new A7(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Lx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>w7){const a=k7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Xa.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lx(),{heartbeatsToSend:i,unsentEntries:s}=I7(this._heartbeatsCache.heartbeats),r=Bg(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Xa.warn(n),""}}}function Lx(){return new Date().toISOString().substring(0,10)}function I7(t,e=C7){const n=[];let i=t.slice();for(const s of t){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),Ox(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ox(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class A7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DR()?d9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await E7(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Rx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Rx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ox(t){return Bg(JSON.stringify({version:2,heartbeats:t})).length}function k7(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(t){fa(new kr("platform-logger",e=>new H9(e),"PRIVATE")),fa(new kr("heartbeat",e=>new x7(e),"PRIVATE")),js(Bb,Px,t),js(Bb,Px,"esm2017"),js("fire-js","")}P7("");function y1(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function FR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D7=FR,BR=new Hd("auth","Firebase",FR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new xm("@firebase/auth");function R7(t,...e){jg.logLevel<=Lt.WARN&&jg.warn(`Auth (${vl}): ${t}`,...e)}function hg(t,...e){jg.logLevel<=Lt.ERROR&&jg.error(`Auth (${vl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t,...e){throw _1(t,...e)}function ua(t,...e){return _1(t,...e)}function UR(t,e,n){const i=Object.assign(Object.assign({},D7()),{[e]:n});return new Hd("auth","Firebase",i).create(e,{appName:t.name})}function Wa(t){return UR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _1(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return BR.create(t,...e)}function mt(t,e,...n){if(!t)throw _1(e,...n)}function Ha(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hg(e),new Error(e)}function Qa(t,e){t||Ha(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function L7(){return Nx()==="http:"||Nx()==="https:"}function Nx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L7()||o9()||"connection"in navigator)?navigator.onLine:!0}function N7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qa(n>e,"Short delay should be less than long delay!"),this.isMobile=m1()||PR()}get(){return O7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t,e){Qa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ha("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ha("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ha("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F7=new Im(3e4,6e4);function yl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _l(t,e,n,i,s={}){return HR(t,s,async()=>{let r={},a={};i&&(e==="GET"?a=i:r={body:JSON.stringify(i)});const o=jd(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},r);return a9()||(u.referrerPolicy="no-referrer"),$R.fetch()(await jR(t,t.config.apiHost,n,o),u)})}async function HR(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},M7),e);try{const s=new U7(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Mp(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const o=r.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mp(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Mp(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Mp(t,"user-disabled",a);const c=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw UR(t,c,u);Pr(t,c)}}catch(s){if(s instanceof Sa)throw s;Pr(t,"network-request-failed",{message:String(s)})}}async function Am(t,e,n,i,s={}){const r=await _l(t,e,n,i,s);return"mfaPendingCredential"in r&&Pr(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function jR(t,e,n,i){const s=`${e}${n}?${i}`,r=t,a=r.config.emulator?b1(t.config,s):`${t.config.apiScheme}://${s}`;return V7.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function B7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class U7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ua(this.auth,"network-request-failed")),F7.get())})}}function Mp(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=ua(t,e,i);return s.customData._tokenResponse=n,s}function Mx(t){return t!==void 0&&t.enterprise!==void 0}class $7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return B7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H7(t,e){return _l(t,"GET","/v2/recaptchaConfig",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j7(t,e){return _l(t,"POST","/v1/accounts:delete",e)}async function qg(t,e){return _l(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q7(t,e=!1){const n=di(t),i=await n.getIdToken(e),s=T1(i);mt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:vf(h0(s.auth_time)),issuedAtTime:vf(h0(s.iat)),expirationTime:vf(h0(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function h0(t){return Number(t)*1e3}function T1(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return hg("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ug(n);return s?JSON.parse(s):(hg("Failed to decode base64 JWT payload"),null)}catch(s){return hg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Vx(t){const e=T1(t);return mt(e,"internal-error"),mt(typeof e.exp<"u","internal-error"),mt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qf(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Sa&&z7(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function z7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vf(this.lastLoginAt),this.creationTime=vf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zg(t){var e;const n=t.auth,i=await t.getIdToken(),s=await qf(t,qg(n,{idToken:i}));mt(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const a=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?qR(r.providerUserInfo):[],o=K7(t.providerData,a),l=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!(o!=null&&o.length),c=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new jb(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function G7(t){const e=di(t);await zg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function K7(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function qR(t){return t.map(e=>{var{providerId:n}=e,i=y1(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y7(t,e){const n=await HR(t,{},async()=>{const i=jd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,a=await jR(t,s,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",$R.fetch()(a,{method:"POST",headers:o,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function X7(t,e){return _l(t,"POST","/v2/accounts:revokeToken",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mt(e.idToken,"internal-error"),mt(typeof e.idToken<"u","internal-error"),mt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){mt(e.length!==0,"internal-error");const n=Vx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await Y7(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Gc;return i&&(mt(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(mt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(mt(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gc,this.toJSON())}_performRefresh(){return Ha("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t,e){mt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _r{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=y1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new jb(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await qf(this,this.stsTokenManager.getToken(this.auth,e));return mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q7(this,e)}reload(){return G7(this)}_assign(e){this!==e&&(mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await zg(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ts(this.auth.app))return Promise.reject(Wa(this.auth));const e=await this.getIdToken();return await qf(this,j7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,a,o,l,u,c;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,h=(s=n.email)!==null&&s!==void 0?s:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,g=(a=n.photoURL)!==null&&a!==void 0?a:void 0,v=(o=n.tenantId)!==null&&o!==void 0?o:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,I=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:P,emailVerified:M,isAnonymous:F,providerData:U,stsTokenManager:D}=n;mt(P&&D,e,"internal-error");const S=Gc.fromJSON(this.name,D);mt(typeof P=="string",e,"internal-error"),xo(d,e.name),xo(h,e.name),mt(typeof M=="boolean",e,"internal-error"),mt(typeof F=="boolean",e,"internal-error"),xo(f,e.name),xo(g,e.name),xo(v,e.name),xo(b,e.name),xo(I,e.name),xo(w,e.name);const y=new _r({uid:P,auth:e,email:h,emailVerified:M,displayName:d,isAnonymous:F,photoURL:g,phoneNumber:f,tenantId:v,stsTokenManager:S,createdAt:I,lastLoginAt:w});return U&&Array.isArray(U)&&(y.providerData=U.map(E=>Object.assign({},E))),b&&(y._redirectEventId=b),y}static async _fromIdTokenResponse(e,n,i=!1){const s=new Gc;s.updateFromServerResponse(n);const r=new _r({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await zg(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];mt(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?qR(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),o=new Gc;o.updateFromIdToken(i);const l=new _r({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new jb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new Map;function ja(t){Qa(t instanceof Function,"Expected a class definition");let e=Fx.get(t);return e?(Qa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zR.type="NONE";const Bx=zR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t,e,n){return`firebase:${t}:${e}:${n}`}class Kc{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=fg(this.userKey,s.apiKey,r),this.fullPersistenceKey=fg("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qg(this.auth,{idToken:e}).catch(()=>{});return n?_r._fromGetAccountInfoResponse(this.auth,n,e):null}return _r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Kc(ja(Bx),e,i);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=s[0]||ja(Bx);const a=fg(i,e.config.apiKey,e.name);let o=null;for(const u of n)try{const c=await u._get(a);if(c){let d;if(typeof c=="string"){const h=await qg(e,{idToken:c}).catch(()=>{});if(!h)break;d=await _r._fromGetAccountInfoResponse(e,h,c)}else d=_r._fromJSON(e,c);u!==r&&(o=d),r=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Kc(r,e,i):(r=l[0],o&&await r._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==r)try{await u._remove(a)}catch{}})),new Kc(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QR(e))return"Blackberry";if(JR(e))return"Webos";if(GR(e))return"Safari";if((e.includes("chrome/")||KR(e))&&!e.includes("edge/"))return"Chrome";if(XR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function WR(t=Zi()){return/firefox\//i.test(t)}function GR(t=Zi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KR(t=Zi()){return/crios\//i.test(t)}function YR(t=Zi()){return/iemobile/i.test(t)}function XR(t=Zi()){return/android/i.test(t)}function QR(t=Zi()){return/blackberry/i.test(t)}function JR(t=Zi()){return/webos/i.test(t)}function S1(t=Zi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Q7(t=Zi()){var e;return S1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function J7(){return l9()&&document.documentMode===10}function ZR(t=Zi()){return S1(t)||XR(t)||JR(t)||QR(t)||/windows phone/i.test(t)||YR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t,e=[]){let n;switch(t){case"Browser":n=Ux(Zi());break;case"Worker":n=`${Ux(Zi())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((a,o)=>{try{const l=e(r);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e$(t,e={}){return _l(t,"GET","/v2/passwordPolicy",yl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$=6;class n${constructor(e){var n,i,s,r;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:t$,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,r,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $x(this),this.idTokenSubscription=new $x(this),this.beforeStateQueue=new Z7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ja(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Kc.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qg(this,{idToken:e}),i=await _r._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ts(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ts(this.app))return Promise.reject(Wa(this));const n=e?di(e):null;return n&&mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&mt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ts(this.app)?Promise.reject(Wa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ts(this.app)?Promise.reject(Wa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ja(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await e$(this),n=new n$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hd("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await X7(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ja(e)||this._popupRedirectResolver;mt(n,this,"argument-error"),this.redirectPersistenceManager=await Kc.create(this,[ja(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(o,this,"internal-error"),o.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,s);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&R7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vu(t){return di(t)}class $x{constructor(e){this.auth=e,this.observer=null,this.addObserver=y9(n=>this.observer=n)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ly={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s$(t){ly=t}function tL(t){return ly.loadJS(t)}function r$(){return ly.recaptchaEnterpriseScript}function a$(){return ly.gapiScript}function o$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class l${constructor(){this.enterprise=new u$}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class u${ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const c$="recaptcha-enterprise",nL="NO_RECAPTCHA";class d${constructor(e){this.type=c$,this.auth=Vu(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,o)=>{H7(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new $7(l);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,a(u.siteKey)}}).catch(l=>{o(l)})})}function s(r,a,o){const l=window.grecaptcha;Mx(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(u=>{a(u)}).catch(()=>{a(nL)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new l$().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(o=>{if(!n&&Mx(window.grecaptcha))s(o,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=r$();l.length!==0&&(l+=o),tL(l).then(()=>{s(o,r,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function Hx(t,e,n,i=!1,s=!1){const r=new d$(t);let a;if(s)a=nL;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const o=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function qb(t,e,n,i,s){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Hx(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Hx(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t,e){const n=g1(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(bu(r,e??{}))return s;Pr(s,"already-initialized")}return n.initialize({options:e})}function h$(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ja);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function f$(t,e,n){const i=Vu(t);mt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=sL(e),{host:a,port:o}=m$(e),l=o===null?"":`:${o}`,u={url:`${r}//${a}${l}/`},c=Object.freeze({host:a,port:o,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){mt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),mt(bu(u,i.config.emulator)&&bu(c,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=c,i.settings.appVerificationDisabledForTesting=!0,p$()}function sL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function m$(t){const e=sL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:jx(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:jx(a)}}}function jx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function p$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ha("not implemented")}_getIdTokenResponse(e){return Ha("not implemented")}_linkToIdToken(e,n){return Ha("not implemented")}_getReauthenticationResolver(e){return Ha("not implemented")}}async function g$(t,e){return _l(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v$(t,e){return Am(t,"POST","/v1/accounts:signInWithPassword",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y$(t,e){return Am(t,"POST","/v1/accounts:signInWithEmailLink",yl(t,e))}async function _$(t,e){return Am(t,"POST","/v1/accounts:signInWithEmailLink",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends E1{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new zf(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new zf(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qb(e,n,"signInWithPassword",v$);case"emailLink":return y$(e,{email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qb(e,i,"signUpPassword",g$);case"emailLink":return _$(e,{idToken:n,email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t,e){return Am(t,"POST","/v1/accounts:signInWithIdp",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$="http://localhost";class Tu extends E1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Tu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=y1(n,["providerId","signInMethod"]);if(!i||!s)return null;const a=new Tu(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Yc(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Yc(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yc(e,n)}buildRequest(){const e={requestUri:b$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function S$(t){const e=Qh(Jh(t)).link,n=e?Qh(Jh(e)).deep_link_id:null,i=Qh(Jh(t)).deep_link_id;return(i?Qh(Jh(i)).link:null)||i||n||e||t}class C1{constructor(e){var n,i,s,r,a,o;const l=Qh(Jh(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(i=l.oobCode)!==null&&i!==void 0?i:null,d=T$((s=l.mode)!==null&&s!==void 0?s:null);mt(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(a=l.lang)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=S$(e);try{return new C1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.providerId=qd.PROVIDER_ID}static credential(e,n){return zf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=C1.parseLink(n);return mt(i,"argument-error"),zf._fromEmailAndCode(e,i.code,i.tenantId)}}qd.PROVIDER_ID="password";qd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends rL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends km{constructor(){super("facebook.com")}static credential(e){return Tu._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch{return null}}}Uo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Uo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends km{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Tu._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return $o.credential(n,i)}catch{return null}}}$o.GOOGLE_SIGN_IN_METHOD="google.com";$o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends km{constructor(){super("github.com")}static credential(e){return Tu._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ho.credential(e.oauthAccessToken)}catch{return null}}}Ho.GITHUB_SIGN_IN_METHOD="github.com";Ho.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends km{constructor(){super("twitter.com")}static credential(e,n){return Tu._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return jo.credential(n,i)}catch{return null}}}jo.TWITTER_SIGN_IN_METHOD="twitter.com";jo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E$(t,e){return Am(t,"POST","/v1/accounts:signUp",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await _r._fromIdTokenResponse(e,i,s),a=qx(i);return new Su({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=qx(i);return new Su({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function qx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends Sa{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Wg.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Wg(e,n,i,s)}}function aL(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Wg._fromErrorAndOperation(t,r,e,i):r})}async function C$(t,e,n=!1){const i=await qf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Su._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w$(t,e,n=!1){const{auth:i}=t;if(Ts(i.app))return Promise.reject(Wa(i));const s="reauthenticate";try{const r=await qf(t,aL(i,s,e,t),n);mt(r.idToken,i,"internal-error");const a=T1(r.idToken);mt(a,i,"internal-error");const{sub:o}=a;return mt(t.uid===o,i,"user-mismatch"),Su._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Pr(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(t,e,n=!1){if(Ts(t.app))return Promise.reject(Wa(t));const i="signIn",s=await aL(t,i,e),r=await Su._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function x$(t,e){return oL(Vu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(t){const e=Vu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function I$(t,e,n){if(Ts(t.app))return Promise.reject(Wa(t));const i=Vu(t),a=await qb(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E$).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&lL(t),l}),o=await Su._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(o.user),o}function A$(t,e,n){return Ts(t.app)?Promise.reject(Wa(t)):x$(di(t),qd.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&lL(t),i})}function uL(t,e,n,i){return di(t).onIdTokenChanged(e,n,i)}function k$(t,e,n){return di(t).beforeAuthStateChanged(e,n)}function P$(t){return di(t).signOut()}const Gg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gg,"1"),this.storage.removeItem(Gg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=1e3,R$=10;class dL extends cL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);J7()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,R$):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},D$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dL.type="LOCAL";const hL=dL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL extends cL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fL.type="SESSION";const w1=fL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new uy(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const o=Array.from(a).map(async u=>u(n.origin,r)),l=await L$(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((o,l)=>{const u=x1("",20);s.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(h.data.response);break;default:clearTimeout(c),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(){return window}function N$(t){ca().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(){return typeof ca().WorkerGlobalScope<"u"&&typeof ca().importScripts=="function"}async function M$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function F$(){return mL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="firebaseLocalStorageDb",B$=1,Kg="firebaseLocalStorage",gL="fbase_key";class Pm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cy(t,e){return t.transaction([Kg],e?"readwrite":"readonly").objectStore(Kg)}function U$(){const t=indexedDB.deleteDatabase(pL);return new Pm(t).toPromise()}function zb(){const t=indexedDB.open(pL,B$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Kg,{keyPath:gL})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Kg)?e(i):(i.close(),await U$(),e(await zb()))})})}async function zx(t,e,n){const i=cy(t,!0).put({[gL]:e,value:n});return new Pm(i).toPromise()}async function $$(t,e){const n=cy(t,!1).get(e),i=await new Pm(n).toPromise();return i===void 0?null:i.value}function Wx(t,e){const n=cy(t,!0).delete(e);return new Pm(n).toPromise()}const H$=800,j$=3;class vL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>j$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uy._getInstance(F$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await M$(),!this.activeServiceWorker)return;this.sender=new O$(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zb();return await zx(e,Gg,"1"),await Wx(e,Gg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>zx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>$$(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=cy(s,!1).getAll();return new Pm(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vL.type="LOCAL";const yL=vL;new Im(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(t,e){return e?ja(e):(mt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1 extends E1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function z$(t){return oL(t.auth,new I1(t),t.bypassAuthState)}function W$(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),w$(n,new I1(t),t.bypassAuthState)}async function G$(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),C$(n,new I1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return z$;case"linkViaPopup":case"linkViaRedirect":return G$;case"reauthViaPopup":case"reauthViaRedirect":return W$;default:Pr(this.auth,"internal-error")}}resolve(e){Qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$=new Im(2e3,1e4);class Nc extends _L{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Nc.currentPopupAction&&Nc.currentPopupAction.cancel(),Nc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mt(e,this.auth,"internal-error"),e}async onExecution(){Qa(this.filter.length===1,"Popup operations only handle one event");const e=x1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,K$.get())};e()}}Nc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$="pendingRedirect",mg=new Map;class X$ extends _L{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=mg.get(this.auth._key());if(!e){try{const i=await Q$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}mg.set(this.auth._key(),e)}return this.bypassAuthState||mg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q$(t,e){const n=eH(e),i=Z$(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function J$(t,e){mg.set(t._key(),e)}function Z$(t){return ja(t._redirectPersistence)}function eH(t){return fg(Y$,t.config.apiKey,t.name)}async function tH(t,e,n=!1){if(Ts(t.app))return Promise.reject(Wa(t));const i=Vu(t),s=q$(i,e),a=await new X$(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH=10*60*1e3;class iH{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!bL(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(ua(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nH&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gx(e))}saveEventToCache(e){this.cachedEventUids.add(Gx(e)),this.lastProcessedEventTime=Date.now()}}function Gx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bL({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bL(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rH(t,e={}){return _l(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oH=/^https?/;async function lH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rH(t);for(const n of e)try{if(uH(n))return}catch{}Pr(t,"unauthorized-domain")}function uH(t){const e=Hb(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!oH.test(n))return!1;if(aH.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH=new Im(3e4,6e4);function Kx(){const t=ca().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dH(t){return new Promise((e,n)=>{var i,s,r;function a(){Kx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kx(),n(ua(t,"network-request-failed"))},timeout:cH.get()})}if(!((s=(i=ca().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=ca().gapi)===null||r===void 0)&&r.load)a();else{const o=o$("iframefcb");return ca()[o]=()=>{gapi.load?a():n(ua(t,"network-request-failed"))},tL(`${a$()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw pg=null,e})}let pg=null;function hH(t){return pg=pg||dH(t),pg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fH=new Im(5e3,15e3),mH="__/auth/iframe",pH="emulator/auth/iframe",gH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yH(t){const e=t.config;mt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?b1(e,pH):`https://${t.config.authDomain}/${mH}`,i={apiKey:e.apiKey,appName:t.name,v:vl},s=vH.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${jd(i).slice(1)}`}async function _H(t){const e=await hH(t),n=ca().gapi;return mt(n,t,"internal-error"),e.open({where:document.body,url:yH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gH,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=ua(t,"network-request-failed"),o=ca().setTimeout(()=>{r(a)},fH.get());function l(){ca().clearTimeout(o),s(i)}i.ping(l).then(l,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TH=500,SH=600,EH="_blank",CH="http://localhost";class Yx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wH(t,e,n,i=TH,s=SH){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l=Object.assign(Object.assign({},bH),{width:i.toString(),height:s.toString(),top:r,left:a}),u=Zi().toLowerCase();n&&(o=KR(u)?EH:n),WR(u)&&(e=e||CH,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(Q7(u)&&o!=="_self")return xH(e||"",o),new Yx(null);const d=window.open(e||"",o,c);mt(d,t,"popup-blocked");try{d.focus()}catch{}return new Yx(d)}function xH(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH="__/auth/handler",AH="emulator/auth/handler",kH=encodeURIComponent("fac");async function Xx(t,e,n,i,s,r){mt(t.config.authDomain,t,"auth-domain-config-required"),mt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:vl,eventId:s};if(e instanceof rL){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Mb(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))a[c]=d}if(e instanceof km){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(a.scopes=c.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const l=await t._getAppCheckToken(),u=l?`#${kH}=${encodeURIComponent(l)}`:"";return`${PH(t)}?${jd(o).slice(1)}${u}`}function PH({config:t}){return t.emulator?b1(t,AH):`https://${t.authDomain}/${IH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="webStorageSupport";class DH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=w1,this._completeRedirectFn=tH,this._overrideRedirectResult=J$}async _openPopup(e,n,i,s){var r;Qa((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await Xx(e,n,i,Hb(),s);return wH(e,a,x1())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await Xx(e,n,i,Hb(),s);return N$(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Qa(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await _H(e),i=new iH(e);return n.register("authEvent",s=>(mt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(f0,{type:f0},s=>{var r;const a=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[f0];a!==void 0&&n(!!a),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZR()||GR()||S1()}}const TL=DH;var Qx="@firebase/auth",Jx="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OH(t){fa(new kr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;mt(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eL(t)},u=new i$(i,s,r,l);return h$(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),fa(new kr("auth-internal",e=>{const n=Vu(e.getProvider("auth").getImmediate());return(i=>new RH(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),js(Qx,Jx,LH(t)),js(Qx,Jx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=5*60,MH=kR("authIdTokenMaxAge")||NH;let Zx=null;const VH=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>MH)return;const s=n==null?void 0:n.token;Zx!==s&&(Zx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function FH(t=v1()){const e=g1(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iL(t,{popupRedirectResolver:TL,persistence:[yL,hL,w1]}),i=kR("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=VH(r.toString());k$(n,a,()=>a(n.currentUser)),uL(n,o=>a(o))}}const s=IR("auth");return s&&f$(n,`http://${s}`),n}function BH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}s$({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=ua("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",BH().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OH("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH=new Map,$H={activated:!1,tokenObservers:[]};function Dr(t){return UH.get(t)||Object.assign({},$H)}const e2={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(e,n,i,s,r){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=s,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=s,s>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new $f,this.pending.promise.catch(n=>{}),await jH(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new $f,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function jH(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Yg=new Hd("appCheck","AppCheck",qH);function SL(t){if(!Dr(t).activated)throw Yg.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH="firebase-app-check-database",WH=1,Wb="firebase-app-check-store";let Vp=null;function GH(){return Vp||(Vp=new Promise((t,e)=>{try{const n=indexedDB.open(zH,WH);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var s;e(Yg.create("storage-open",{originalErrorMessage:(s=i.target.error)===null||s===void 0?void 0:s.message}))},n.onupgradeneeded=i=>{const s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(Wb,{keyPath:"compositeKey"})}}}catch(n){e(Yg.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Vp)}function KH(t,e){return YH(XH(t),e)}async function YH(t,e){const i=(await GH()).transaction(Wb,"readwrite"),r=i.objectStore(Wb).put({compositeKey:t,value:e});return new Promise((a,o)=>{r.onsuccess=l=>{a()},i.onerror=l=>{var u;o(Yg.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}function XH(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=new xm("@firebase/app-check");function t2(t,e){return DR()?KH(t,e).catch(n=>{Gb.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH={error:"UNKNOWN_ERROR"};function JH(t){return ry.encodeString(JSON.stringify(t),!1)}async function Kb(t,e=!1,n=!1){const i=t.app;SL(i);const s=Dr(i);let r=s.token,a;if(r&&!Zh(r)&&(s.token=void 0,r=void 0),!r){const u=await s.cachedTokenPromise;u&&(Zh(u)?r=u:await t2(i,void 0))}if(!e&&r&&Zh(r))return{token:r.token};let o=!1;try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),o=!0),r=await Dr(i).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Gb.warn(u.message):n&&Gb.error(u),a=u}let l;return r?a?Zh(r)?l={token:r.token,internalError:a}:l=i2(a):(l={token:r.token},s.token=r,await t2(i,r)):l=i2(a),o&&nj(i,l),l}async function ZH(t){const e=t.app;SL(e);const{provider:n}=Dr(e);{const{token:i}=await n.getToken();return{token:i}}}function ej(t,e,n,i){const{app:s}=t,r=Dr(s),a={next:n,error:i,type:e};if(r.tokenObservers=[...r.tokenObservers,a],r.token&&Zh(r.token)){const o=r.token;Promise.resolve().then(()=>{n({token:o.token}),n2(t)}).catch(()=>{})}r.cachedTokenPromise.then(()=>n2(t))}function EL(t,e){const n=Dr(t),i=n.tokenObservers.filter(s=>s.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function n2(t){const{app:e}=t,n=Dr(e);let i=n.tokenRefresher;i||(i=tj(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function tj(t){const{app:e}=t;return new HH(async()=>{const n=Dr(e);let i;if(n.token?i=await Kb(t,!0):i=await Kb(t),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{const n=Dr(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},e2.RETRIAL_MIN_WAIT,e2.RETRIAL_MAX_WAIT)}function nj(t,e){const n=Dr(t).tokenObservers;for(const i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Zh(t){return t.expireTimeMillis-Date.now()>0}function i2(t){return{token:JH(QH),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Dr(this.app);for(const n of e)EL(this.app,n.next);return Promise.resolve()}}function sj(t,e){return new ij(t,e)}function rj(t){return{getToken:e=>Kb(t,e),getLimitedUseToken:()=>ZH(t),addTokenListener:e=>ej(t,"INTERNAL",e),removeTokenListener:e=>EL(t.app,e)}}const aj="@firebase/app-check",oj="0.8.13",lj="app-check",s2="app-check-internal";function uj(){fa(new kr(lj,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return sj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(s2).initialize()})),fa(new kr(s2,t=>{const e=t.getProvider("app-check").getImmediate();return rj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),js(aj,oj)}uj();var cj="firebase",dj="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */js(cj,dj,"app");const CL=Symbol("firebaseApp");function hj(t){return Cm()&&vt(CL,null)||v1(t)}const Fp=new WeakMap;function fj(t,e){if(!Fp.has(t)){const n=tl(!0);Fp.set(t,n);const{unmount:i}=e;e.unmount=()=>{i.call(e),n.stop(),Fp.delete(t)}}return Fp.get(t)}const mj=new WeakMap,Bp=new WeakMap;function wL(t){const e=hj(t);if(!Bp.has(e)){let n;const s=[new Promise(r=>{n=r}),r=>{Bp.set(e,r),n(r.value)}];Bp.set(e,s)}return Bp.get(e)}function pj(t){const e=wL(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function gj(t,e){uL(e,n=>{const i=wL();t.value=n,Array.isArray(i)&&i[1](t)})}var r2={};const a2="@firebase/database",o2="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xL="";function vj(t){xL=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Pi(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Hf(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return oo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yj(e)}}catch{}return new _j},eu=IL("localStorage"),bj=IL("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new xm("@firebase/database"),Tj=function(){let t=1;return function(){return t++}}(),AL=function(t){const e=S9(t),n=new v9;n.update(e);const i=n.digest();return ry.encodeByteArray(i)},Dm=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Dm.apply(null,i):typeof i=="object"?e+=Pi(i):e+=i,e+=" "}return e};let yf=null,l2=!0;const Sj=function(t,e){Qe(!0,"Can't turn on custom loggers persistently."),Xc.logLevel=Lt.VERBOSE,yf=Xc.log.bind(Xc)},Hi=function(...t){if(l2===!0&&(l2=!1,yf===null&&bj.get("logging_enabled")===!0&&Sj()),yf){const e=Dm.apply(null,t);yf(e)}},Rm=function(t){return function(...e){Hi(t,...e)}},Yb=function(...t){const e="FIREBASE INTERNAL ERROR: "+Dm(...t);Xc.error(e)},Eu=function(...t){const e=`FIREBASE FATAL ERROR: ${Dm(...t)}`;throw Xc.error(e),new Error(e)},qs=function(...t){const e="FIREBASE WARNING: "+Dm(...t);Xc.warn(e)},Ej=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&qs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},kL=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Cj=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},dd="[MIN_NAME]",Cu="[MAX_NAME]",zd=function(t,e){if(t===e)return 0;if(t===dd||e===Cu)return-1;if(e===dd||t===Cu)return 1;{const n=u2(t),i=u2(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},wj=function(t,e){return t===e?0:t<e?-1:1},Bh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Pi(e))},A1=function(t){if(typeof t!="object"||t===null)return Pi(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Pi(e[i]),n+=":",n+=A1(t[e[i]]);return n+="}",n},PL=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let s=0;s<n;s+=e)s+e>n?i.push(t.substring(s,n)):i.push(t.substring(s,s+e));return i};function ar(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const DL=function(t){Qe(!kL(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let s,r,a,o,l;t===0?(r=0,a=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(o=Math.min(Math.floor(Math.log(t)/Math.LN2),i),r=o+i,a=Math.round(t*Math.pow(2,n-o)-Math.pow(2,n))):(r=0,a=Math.round(t/Math.pow(2,1-i-n))));const u=[];for(l=n;l;l-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(l=e;l;l-=1)u.push(r%2?1:0),r=Math.floor(r/2);u.push(s?1:0),u.reverse();const c=u.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(c.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},xj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ij=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Aj=new RegExp("^-?(0*)\\d{1,10}$"),kj=-2147483648,Pj=2147483647,u2=function(t){if(Aj.test(t)){const e=Number(t);if(e>=kj&&e<=Pj)return e}return null},Lm=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw qs("Exception was thrown by user callback.",n),e},Math.floor(0))}},Dj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},_f=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Ts(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){qs(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qs(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="5",RL="v",LL="s",OL="r",NL="f",ML=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,VL="ls",FL="p",Xb="ac",BL="websocket",UL="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n,i,s,r=!1,a="",o=!1,l=!1,u=null){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=a,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=l,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=eu.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&eu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Nj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function $L(t,e,n){Qe(typeof e=="string","typeof type must == string"),Qe(typeof n=="object","typeof params must == object");let i;if(e===BL)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===UL)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Nj(t)&&(n.ns=t.namespace);const s=[];return ar(n,(r,a)=>{s.push(r+"="+a)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.counters_={}}incrementCounter(e,n=1){oo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return QU(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0={},p0={};function P1(t){const e=t.toString();return m0[e]||(m0[e]=new Mj),m0[e]}function Vj(t,e){const n=t.toString();return p0[n]||(p0[n]=e()),p0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Lm(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="start",Bj="close",Uj="pLPCommand",$j="pRTLPCB",HL="id",jL="pw",qL="ser",Hj="cb",jj="seg",qj="ts",zj="d",Wj="dframe",zL=1870,WL=30,Gj=zL-WL,Kj=25e3,Yj=3e4;class Mc{constructor(e,n,i,s,r,a,o){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=a,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rm(e),this.stats_=P1(n),this.urlFn=l=>(this.appCheckToken&&(l[Xb]=this.appCheckToken),$L(n,UL,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Fj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Yj)),Cj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new D1((...r)=>{const[a,o,l,u,c]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===c2)this.id=o,this.password=l;else if(a===Bj)o?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(o,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...r)=>{const[a,o]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(a,o)},()=>{this.onClosed_()},this.urlFn);const i={};i[c2]="t",i[qL]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Hj]=this.scriptTagHolder.uniqueCallbackIdentifier),i[RL]=k1,this.transportSessionId&&(i[LL]=this.transportSessionId),this.lastSessionId&&(i[VL]=this.lastSessionId),this.applicationId&&(i[FL]=this.applicationId),this.appCheckToken&&(i[Xb]=this.appCheckToken),typeof location<"u"&&location.hostname&&ML.test(location.hostname)&&(i[OL]=NL);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mc.forceAllow_=!0}static forceDisallow(){Mc.forceDisallow_=!0}static isAvailable(){return Mc.forceAllow_?!0:!Mc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xj()&&!Ij()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Pi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=wR(n),s=PL(i,Gj);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[Wj]="t",i[HL]=e,i[jL]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Pi(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class D1{constructor(e,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Tj(),window[Uj+this.uniqueCallbackIdentifier]=e,window[$j+this.uniqueCallbackIdentifier]=n,this.myIFrame=D1.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(o){Hi("frame writing exception"),o.stack&&Hi(o.stack),Hi(o)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Hi("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[HL]=this.myID,e[jL]=this.myPW,e[qL]=this.currentSerial;let n=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+WL+i.length<=zL;){const a=this.pendingSegs.shift();i=i+"&"+jj+s+"="+a.seg+"&"+qj+s+"="+a.ts+"&"+zj+s+"="+a.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(Kj)),r=()=>{clearTimeout(s),i()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Hi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=16384,Qj=45e3;let Xg=null;typeof MozWebSocket<"u"?Xg=MozWebSocket:typeof WebSocket<"u"&&(Xg=WebSocket);class yr{constructor(e,n,i,s,r,a,o){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rm(this.connId),this.stats_=P1(n),this.connURL=yr.connectionURL_(n,a,o,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,s,r){const a={};return a[RL]=k1,typeof location<"u"&&location.hostname&&ML.test(location.hostname)&&(a[OL]=NL),n&&(a[LL]=n),i&&(a[VL]=i),s&&(a[Xb]=s),r&&(a[FL]=r),$L(e,BL,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,eu.set("previous_websocket_failure",!0);try{let i;u9(),this.mySock=new Xg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){yr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Xg!==null&&!yr.forceDisallow_}static previouslyFailed(){return eu.isInMemoryStorage||eu.get("previous_websocket_failure")===!0}markConnectionHealthy(){eu.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Hf(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Qe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Pi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=PL(n,Xj);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Qj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}yr.responsesRequiredToBeHealthy=2;yr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{static get ALL_TRANSPORTS(){return[Mc,yr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=yr&&yr.isAvailable();let i=n&&!yr.previouslyFailed();if(e.webSocketOnly&&(n||qs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[yr];else{const s=this.transports_=[];for(const r of Wf.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);Wf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=6e4,Zj=5e3,eq=10*1024,tq=100*1024,g0="t",d2="d",nq="s",h2="r",iq="e",f2="o",m2="a",p2="n",g2="p",sq="h";class rq{constructor(e,n,i,s,r,a,o,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=a,this.onReady_=o,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rm("c:"+this.id+":"),this.transportManager_=new Wf(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=_f(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>tq?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>eq?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(g0 in e){const n=e[g0];n===m2?this.upgradeIfSecondaryHealthy_():n===h2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===f2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Bh("t",e),i=Bh("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:g2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:m2,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:p2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Bh("t",e),i=Bh("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Bh(g0,e);if(d2 in e){const i=e[d2];if(n===sq){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===p2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===nq?this.onConnectionShutdown_(i):n===h2?this.onReset_(i):n===iq?Yb("Server Error: "+i):n===f2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yb("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),k1!==i&&qs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),_f(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Jj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_f(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Zj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:g2,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(eu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{put(e,n,i,s){}merge(e,n,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.allowedEvents_=e,this.listeners_={},Qe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const s=this.getInitialEvent(e);s&&n.apply(i,s)}off(e,n,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(e){Qe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg extends KL{static getInstance(){return new Qg}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!m1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Qe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=32,y2=768;class Sn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function rn(){return new Sn("")}function Ut(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function il(t){return t.pieces_.length-t.pieceNum_}function gn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Sn(t.pieces_,e)}function YL(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function aq(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function XL(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function QL(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Sn(e,0)}function Si(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Sn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new Sn(n,0)}function Mt(t){return t.pieceNum_>=t.pieces_.length}function ir(t,e){const n=Ut(t),i=Ut(e);if(n===null)return e;if(n===i)return ir(gn(t),gn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function JL(t,e){if(il(t)!==il(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function br(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(il(t)>il(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class oq{constructor(e,n){this.errorPrefix_=n,this.parts_=XL(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=oy(this.parts_[i]);ZL(this)}}function lq(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=oy(e),ZL(t)}function uq(t){const e=t.parts_.pop();t.byteLength_-=oy(e),t.parts_.length>0&&(t.byteLength_-=1)}function ZL(t){if(t.byteLength_>y2)throw new Error(t.errorPrefix_+"has a key path longer than "+y2+" bytes ("+t.byteLength_+").");if(t.parts_.length>v2)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+v2+") or object contains a cycle "+Xl(t))}function Xl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1 extends KL{static getInstance(){return new R1}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return Qe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=1e3,cq=60*5*1e3,_2=30*1e3,dq=1.3,hq=3e4,fq="server_kill",b2=3;class Ga extends GL{constructor(e,n,i,s,r,a,o,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.authOverride_=l,this.id=Ga.nextPersistentConnectionId_++,this.log_=Rm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Uh,this.maxReconnectDelay_=cq,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");R1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Qg.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const s=++this.requestNumber_,r={r:s,a:e,b:n};this.log_(Pi(r)),Qe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const n=new $f,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const o=a.d;a.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,i,s){this.initConnection_();const r=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+r),this.listens.has(a)||this.listens.set(a,new Map),Qe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Qe(!this.listens.get(a).has(r),"listen() called twice for same path/queryId.");const o={onComplete:s,hashFn:n,query:e,tag:i};this.listens.get(a).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},a="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(a,r,o=>{const l=o.d,u=o.s;Ga.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",o),u!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&oo(e,"w")){const i=cd(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();qs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||g9(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=_2)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=p9(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,a=s.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),Qe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,n)}sendUnlisten_(e,n,i,s){this.log_("Unlisten on "+e+" for "+n);const r={p:e},a="n";s&&(r.q=i,r.t=s),this.sendRequest(a,r)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,n,i,s){this.putInternal("p",e,n,i,s)}merge(e,n,i,s){this.putInternal("m",e,n,i,s)}putInternal(e,n,i,s,r){this.initConnection_();const a={p:n,d:i};r!==void 0&&(a.h=r),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Pi(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Yb("Unrecognized action received from server: "+Pi(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Qe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Uh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Uh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hq&&(this.reconnectDelay_=Uh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*dq)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ga.nextConnectionId_++,r=this.lastSessionId;let a=!1,o=null;const l=function(){o?o.close():(a=!0,i())},u=function(d){Qe(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);a?Hi("getToken() completed but was canceled"):(Hi("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,o=new rq(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,f=>{qs(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(fq)},r))}catch(d){this.log_("Failed to get token: "+d),a||(this.repoInfo_.nodeAdmin&&qs(d),l())}}}interrupt(e){Hi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Mb(this.interruptReasons_)&&(this.reconnectDelay_=Uh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(r=>A1(r)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const i=new Sn(e).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,n){Hi("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=b2&&(this.reconnectDelay_=_2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Hi("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=b2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+xL.replace(/\./g,"-")]=1,m1()?e["framework.cordova"]=1:PR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Qg.getInstance().currentlyOnline();return Mb(this.interruptReasons_)&&e}}Ga.nextPersistentConnectionId_=0;Ga.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new $t(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new $t(dd,e),s=new $t(dd,n);return this.compare(i,s)!==0}minPost(){return $t.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Up;class eO extends dy{static get __EMPTY_NODE(){return Up}static set __EMPTY_NODE(e){Up=e}compare(e,n){return zd(e.name,n.name)}isDefinedOn(e){throw $d("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return $t.MIN}maxPost(){return new $t(Cu,Up)}makePost(e,n){return Qe(typeof e=="string","KeyIndex indexValue must always be a string."),new $t(e,Up)}toString(){return".key"}}const Qc=new eO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $p=class{constructor(e,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?i(e.key,n):1,s&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Fs=class ef{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??ef.RED,this.left=s??ea.EMPTY_NODE,this.right=r??ea.EMPTY_NODE}copy(e,n,i,s,r){return new ef(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ea.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,s;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return ea.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ef.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ef.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Fs.RED=!0;Fs.BLACK=!1;class mq{copy(e,n,i,s,r){return this}insert(e,n,i){return new Fs(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ea=class gg{constructor(e,n=gg.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new gg(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Fs.BLACK,null,null))}remove(e){return new gg(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fs.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $p(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $p(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $p(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $p(this.root_,null,this.comparator_,!0,e)}};ea.EMPTY_NODE=new mq;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(t,e){return zd(t.name,e.name)}function L1(t,e){return zd(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qb;function gq(t){Qb=t}const tO=function(t){return typeof t=="number"?"number:"+DL(t):"string:"+t},nO=function(t){if(t.isLeafNode()){const e=t.val();Qe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&oo(e,".sv"),"Priority must be a string or number.")}else Qe(t===Qb||t.isEmpty(),"priority of unexpected type.");Qe(t===Qb||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T2;class yi{static set __childrenNodeConstructor(e){T2=e}static get __childrenNodeConstructor(){return T2}constructor(e,n=yi.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Qe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),nO(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new yi(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:yi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Mt(e)?this:Ut(e)===".priority"?this.priorityNode_:yi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:yi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Ut(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(Qe(i!==".priority"||il(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,yi.__childrenNodeConstructor.EMPTY_NODE.updateChild(gn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+tO(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=DL(this.value_):e+=this.value_,this.lazyHash_=AL(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===yi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof yi.__childrenNodeConstructor?-1:(Qe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,s=yi.VALUE_TYPE_ORDER.indexOf(n),r=yi.VALUE_TYPE_ORDER.indexOf(i);return Qe(s>=0,"Unknown leaf type: "+n),Qe(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}yi.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iO,sO;function vq(t){iO=t}function yq(t){sO=t}class _q extends dy{compare(e,n){const i=e.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?zd(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return $t.MIN}maxPost(){return new $t(Cu,new yi("[PRIORITY-POST]",sO))}makePost(e,n){const i=iO(e);return new $t(n,new yi("[PRIORITY-POST]",i))}toString(){return".priority"}}const Wi=new _q;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq=Math.log(2);class Tq{constructor(e){const n=r=>parseInt(Math.log(r)/bq,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Jg=function(t,e,n,i){t.sort(e);const s=function(l,u){const c=u-l;let d,h;if(c===0)return null;if(c===1)return d=t[l],h=n?n(d):d,new Fs(h,d.node,Fs.BLACK,null,null);{const f=parseInt(c/2,10)+l,g=s(l,f),v=s(f+1,u);return d=t[f],h=n?n(d):d,new Fs(h,d.node,Fs.BLACK,g,v)}},r=function(l){let u=null,c=null,d=t.length;const h=function(g,v){const b=d-g,I=d;d-=g;const w=s(b+1,I),P=t[b],M=n?n(P):P;f(new Fs(M,P.node,v,null,w))},f=function(g){u?(u.left=g,u=g):(c=g,u=g)};for(let g=0;g<l.count;++g){const v=l.nextBitIsOne(),b=Math.pow(2,l.count-(g+1));v?h(b,Fs.BLACK):(h(b,Fs.BLACK),h(b,Fs.RED))}return c},a=new Tq(t.length),o=r(a);return new ea(i||e,o)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v0;const _c={};class qa{static get Default(){return Qe(_c&&Wi,"ChildrenNode.ts has not been loaded"),v0=v0||new qa({".priority":_c},{".priority":Wi}),v0}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=cd(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ea?n:null}hasIndex(e){return oo(this.indexSet_,e.toString())}addIndex(e,n){Qe(e!==Qc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator($t.Wrap);let a=r.getNext();for(;a;)s=s||e.isDefinedOn(a.node),i.push(a),a=r.getNext();let o;s?o=Jg(i,e.getCompare()):o=_c;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=o,new qa(c,u)}addToIndexes(e,n){const i=$g(this.indexes_,(s,r)=>{const a=cd(this.indexSet_,r);if(Qe(a,"Missing index implementation for "+r),s===_c)if(a.isDefinedOn(e.node)){const o=[],l=n.getIterator($t.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&o.push(u),u=l.getNext();return o.push(e),Jg(o,a.getCompare())}else return _c;else{const o=n.get(e.name);let l=s;return o&&(l=l.remove(new $t(e.name,o))),l.insert(e,e.node)}});return new qa(i,this.indexSet_)}removeFromIndexes(e,n){const i=$g(this.indexes_,s=>{if(s===_c)return s;{const r=n.get(e.name);return r?s.remove(new $t(e.name,r)):s}});return new qa(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h;class Xt{static get EMPTY_NODE(){return $h||($h=new Xt(new ea(L1),null,qa.Default))}constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&nO(this.priorityNode_),this.children_.isEmpty()&&Qe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$h}updatePriority(e){return this.children_.isEmpty()?this:new Xt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?$h:n}}getChild(e){const n=Ut(e);return n===null?this:this.getImmediateChild(n).getChild(gn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Qe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new $t(e,n);let s,r;n.isEmpty()?(s=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?$h:this.priorityNode_;return new Xt(s,a,r)}}updateChild(e,n){const i=Ut(e);if(i===null)return n;{Qe(Ut(e)!==".priority"||il(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(gn(e),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(Wi,(a,o)=>{n[a]=o.val(e),i++,r&&Xt.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):r=!1}),!e&&r&&s<2*i){const a=[];for(const o in n)a[o]=n[o];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+tO(this.getPriority().val())+":"),this.forEachChild(Wi,(n,i)=>{const s=i.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":AL(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new $t(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new $t(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new $t(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,$t.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,$t.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)>0;)s.getNext(),r=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Om?-1:0}withIndex(e){if(e===Qc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Xt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Qc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Wi),s=n.getIterator(Wi);let r=i.getNext(),a=s.getNext();for(;r&&a;){if(r.name!==a.name||!r.node.equals(a.node))return!1;r=i.getNext(),a=s.getNext()}return r===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Qc?null:this.indexMap_.get(e.toString())}}Xt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Sq extends Xt{constructor(){super(new ea(L1),Xt.EMPTY_NODE,qa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Xt.EMPTY_NODE}isEmpty(){return!1}}const Om=new Sq;Object.defineProperties($t,{MIN:{value:new $t(dd,Xt.EMPTY_NODE)},MAX:{value:new $t(Cu,Om)}});eO.__EMPTY_NODE=Xt.EMPTY_NODE;yi.__childrenNodeConstructor=Xt;gq(Om);yq(Om);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eq=!0;function ji(t,e=null){if(t===null)return Xt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Qe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new yi(n,ji(e))}if(!(t instanceof Array)&&Eq){const n=[];let i=!1;if(ar(t,(a,o)=>{if(a.substring(0,1)!=="."){const l=ji(o);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new $t(a,l)))}}),n.length===0)return Xt.EMPTY_NODE;const r=Jg(n,pq,a=>a.name,L1);if(i){const a=Jg(n,Wi.getCompare());return new Xt(r,ji(e),new qa({".priority":a},{".priority":Wi}))}else return new Xt(r,ji(e),qa.Default)}else{let n=Xt.EMPTY_NODE;return ar(t,(i,s)=>{if(oo(t,i)&&i.substring(0,1)!=="."){const r=ji(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(ji(e))}}vq(ji);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq extends dy{constructor(e){super(),this.indexPath_=e,Qe(!Mt(e)&&Ut(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?zd(e.name,n.name):r}makePost(e,n){const i=ji(e),s=Xt.EMPTY_NODE.updateChild(this.indexPath_,i);return new $t(n,s)}maxPost(){const e=Xt.EMPTY_NODE.updateChild(this.indexPath_,Om);return new $t(Cu,e)}toString(){return XL(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq extends dy{compare(e,n){const i=e.node.compareTo(n.node);return i===0?zd(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return $t.MIN}maxPost(){return $t.MAX}makePost(e,n){const i=ji(e);return new $t(n,i)}toString(){return".value"}}const xq=new wq;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iq(t){return{type:"value",snapshotNode:t}}function Aq(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function kq(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function S2(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Pq(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wi}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Qe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Qe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:dd}hasEnd(){return this.endSet_}getIndexEndValue(){return Qe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Qe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Qe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wi}copy(){const e=new O1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function E2(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Wi?n="$priority":t.index_===xq?n="$value":t.index_===Qc?n="$key":(Qe(t.index_ instanceof Cq,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Pi(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Pi(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Pi(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Pi(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Pi(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function C2(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Wi&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends GL{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Qe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=Rm("p:rest:"),this.listens_={}}listen(e,n,i,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const a=Zg.getListenId_(e,i),o={};this.listens_[a]=o;const l=E2(e._queryParams);this.restRequest_(r+".json",l,(u,c)=>{let d=c;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(r,d,!1,i),cd(this.listens_,a)===o){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",s(h,null)}})}unlisten(e,n){const i=Zg.getListenId_(e,n);delete this.listens_[i]}get(e){const n=E2(e._queryParams),i=e._path.toString(),s=new $f;return this.restRequest_(i+".json",n,(r,a)=>{let o=a;r===404&&(o=null,r=null),r===null?(this.onDataUpdate_(i,o,!1,null),s.resolve(o)):s.reject(new Error(o))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+jd(n);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(i&&o.readyState===4){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let l=null;if(o.status>=200&&o.status<300){try{l=Hf(o.responseText)}catch{qs("Failed to parse JSON response for "+a+": "+o.responseText)}i(null,l)}else o.status!==401&&o.status!==404&&qs("Got unsuccessful REST response for "+a+" Status: "+o.status),i(o.status);i=null}},o.open("GET",a,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(){this.rootNode_=Xt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(){return{value:null,children:new Map}}function rO(t,e,n){if(Mt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Ut(e);t.children.has(i)||t.children.set(i,ev());const s=t.children.get(i);e=gn(e),rO(s,e,n)}}function Jb(t,e,n){t.value!==null?n(e,t.value):Rq(t,(i,s)=>{const r=new Sn(e.toString()+"/"+i);Jb(s,r,n)})}function Rq(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ar(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=10*1e3,Oq=30*1e3,Nq=5*60*1e3;class Mq{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Lq(e);const i=w2+(Oq-w2)*Math.random();_f(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;ar(e,(s,r)=>{r>0&&oo(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),_f(this.reportStats_.bind(this),Math.floor(Math.random()*2*Nq))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ta;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ta||(ta={}));function aO(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function oO(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function lO(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=ta.ACK_USER_WRITE,this.source=aO()}operationForChild(e){if(Mt(this.path)){if(this.affectedTree.value!=null)return Qe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Sn(e));return new tv(rn(),n,this.revert)}}else return Qe(Ut(this.path)===e,"operationForChild called for unrelated child."),new tv(gn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=ta.OVERWRITE}operationForChild(e){return Mt(this.path)?new wu(this.source,rn(),this.snap.getImmediateChild(e)):new wu(this.source,gn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=ta.MERGE}operationForChild(e){if(Mt(this.path)){const n=this.children.subtree(new Sn(e));return n.isEmpty()?null:n.value?new wu(this.source,rn(),n.value):new Gf(this.source,rn(),n)}else return Qe(Ut(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gf(this.source,gn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Mt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ut(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Vq(t,e,n,i){const s=[],r=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&r.push(Pq(a.childName,a.snapshotNode))}),Hh(t,s,"child_removed",e,i,n),Hh(t,s,"child_added",e,i,n),Hh(t,s,"child_moved",r,i,n),Hh(t,s,"child_changed",e,i,n),Hh(t,s,"value",e,i,n),s}function Hh(t,e,n,i,s,r){const a=i.filter(o=>o.type===n);a.sort((o,l)=>Bq(t,o,l)),a.forEach(o=>{const l=Fq(t,o,r);s.forEach(u=>{u.respondsTo(o.type)&&e.push(u.createEvent(l,t.query_))})})}function Fq(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Bq(t,e,n){if(e.childName==null||n.childName==null)throw $d("Should only compare child_ events.");const i=new $t(e.childName,e.snapshotNode),s=new $t(n.childName,n.snapshotNode);return t.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t,e){return{eventCache:t,serverCache:e}}function bf(t,e,n,i){return uO(new N1(e,n,i),t.serverCache)}function cO(t,e,n,i){return uO(t.eventCache,new N1(e,n,i))}function Zb(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xu(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y0;const Uq=()=>(y0||(y0=new ea(wj)),y0);class pn{static fromObject(e){let n=new pn(null);return ar(e,(i,s)=>{n=n.set(new Sn(i),s)}),n}constructor(e,n=Uq()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:rn(),value:this.value};if(Mt(e))return null;{const i=Ut(e),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(gn(e),n);return r!=null?{path:Si(new Sn(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Mt(e))return this;{const n=Ut(e),i=this.children.get(n);return i!==null?i.subtree(gn(e)):new pn(null)}}set(e,n){if(Mt(e))return new pn(n,this.children);{const i=Ut(e),r=(this.children.get(i)||new pn(null)).set(gn(e),n),a=this.children.insert(i,r);return new pn(this.value,a)}}remove(e){if(Mt(e))return this.children.isEmpty()?new pn(null):new pn(null,this.children);{const n=Ut(e),i=this.children.get(n);if(i){const s=i.remove(gn(e));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new pn(null):new pn(this.value,r)}else return this}}get(e){if(Mt(e))return this.value;{const n=Ut(e),i=this.children.get(n);return i?i.get(gn(e)):null}}setTree(e,n){if(Mt(e))return n;{const i=Ut(e),r=(this.children.get(i)||new pn(null)).setTree(gn(e),n);let a;return r.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,r),new pn(this.value,a)}}fold(e){return this.fold_(rn(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(Si(e,s),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,rn(),n)}findOnPath_(e,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(Mt(e))return null;{const r=Ut(e),a=this.children.get(r);return a?a.findOnPath_(gn(e),Si(n,r),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,rn(),n)}foreachOnPath_(e,n,i){if(Mt(e))return this;{this.value&&i(n,this.value);const s=Ut(e),r=this.children.get(s);return r?r.foreachOnPath_(gn(e),Si(n,s),i):new pn(null)}}foreach(e){this.foreach_(rn(),e)}foreach_(e,n){this.children.inorderTraversal((i,s)=>{s.foreach_(Si(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.writeTree_=e}static empty(){return new Cr(new pn(null))}}function Tf(t,e,n){if(Mt(e))return new Cr(new pn(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let r=i.value;const a=ir(s,e);return r=r.updateChild(a,n),new Cr(t.writeTree_.set(s,r))}else{const s=new pn(n),r=t.writeTree_.setTree(e,s);return new Cr(r)}}}function x2(t,e,n){let i=t;return ar(n,(s,r)=>{i=Tf(i,Si(e,s),r)}),i}function I2(t,e){if(Mt(e))return Cr.empty();{const n=t.writeTree_.setTree(e,new pn(null));return new Cr(n)}}function eT(t,e){return Fu(t,e)!=null}function Fu(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ir(n.path,e)):null}function A2(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Wi,(i,s)=>{e.push(new $t(i,s))}):t.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new $t(i,s.value))}),e}function Qo(t,e){if(Mt(e))return t;{const n=Fu(t,e);return n!=null?new Cr(new pn(n)):new Cr(t.writeTree_.subtree(e))}}function tT(t){return t.writeTree_.isEmpty()}function hd(t,e){return dO(rn(),t.writeTree_,e)}function dO(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(Qe(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=dO(Si(t,s),r,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Si(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t,e){return vO(e,t)}function $q(t,e,n,i,s){Qe(i>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:s}),s&&(t.visibleWrites=Tf(t.visibleWrites,e,n)),t.lastWriteId=i}function Hq(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function jq(t,e){const n=t.allWrites.findIndex(o=>o.writeId===e);Qe(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let s=i.visible,r=!1,a=t.allWrites.length-1;for(;s&&a>=0;){const o=t.allWrites[a];o.visible&&(a>=n&&qq(o,i.path)?s=!1:br(i.path,o.path)&&(r=!0)),a--}if(s){if(r)return zq(t),!0;if(i.snap)t.visibleWrites=I2(t.visibleWrites,i.path);else{const o=i.children;ar(o,l=>{t.visibleWrites=I2(t.visibleWrites,Si(i.path,l))})}return!0}else return!1}function qq(t,e){if(t.snap)return br(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&br(Si(t.path,n),e))return!0;return!1}function zq(t){t.visibleWrites=fO(t.allWrites,Wq,rn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Wq(t){return t.visible}function fO(t,e,n){let i=Cr.empty();for(let s=0;s<t.length;++s){const r=t[s];if(e(r)){const a=r.path;let o;if(r.snap)br(n,a)?(o=ir(n,a),i=Tf(i,o,r.snap)):br(a,n)&&(o=ir(a,n),i=Tf(i,rn(),r.snap.getChild(o)));else if(r.children){if(br(n,a))o=ir(n,a),i=x2(i,o,r.children);else if(br(a,n))if(o=ir(a,n),Mt(o))i=x2(i,rn(),r.children);else{const l=cd(r.children,Ut(o));if(l){const u=l.getChild(gn(o));i=Tf(i,rn(),u)}}}else throw $d("WriteRecord should have .snap or .children")}}return i}function mO(t,e,n,i,s){if(!i&&!s){const r=Fu(t.visibleWrites,e);if(r!=null)return r;{const a=Qo(t.visibleWrites,e);if(tT(a))return n;if(n==null&&!eT(a,rn()))return null;{const o=n||Xt.EMPTY_NODE;return hd(a,o)}}}else{const r=Qo(t.visibleWrites,e);if(!s&&tT(r))return n;if(!s&&n==null&&!eT(r,rn()))return null;{const a=function(u){return(u.visible||s)&&(!i||!~i.indexOf(u.writeId))&&(br(u.path,e)||br(e,u.path))},o=fO(t.allWrites,a,e),l=n||Xt.EMPTY_NODE;return hd(o,l)}}}function Gq(t,e,n){let i=Xt.EMPTY_NODE;const s=Fu(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Wi,(r,a)=>{i=i.updateImmediateChild(r,a)}),i;if(n){const r=Qo(t.visibleWrites,e);return n.forEachChild(Wi,(a,o)=>{const l=hd(Qo(r,new Sn(a)),o);i=i.updateImmediateChild(a,l)}),A2(r).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{const r=Qo(t.visibleWrites,e);return A2(r).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function Kq(t,e,n,i,s){Qe(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=Si(e,n);if(eT(t.visibleWrites,r))return null;{const a=Qo(t.visibleWrites,r);return tT(a)?s.getChild(n):hd(a,s.getChild(n))}}function Yq(t,e,n,i){const s=Si(e,n),r=Fu(t.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const a=Qo(t.visibleWrites,s);return hd(a,i.getNode().getImmediateChild(n))}else return null}function Xq(t,e){return Fu(t.visibleWrites,e)}function Qq(t,e,n,i,s,r,a){let o;const l=Qo(t.visibleWrites,e),u=Fu(l,rn());if(u!=null)o=u;else if(n!=null)o=hd(l,n);else return[];if(o=o.withIndex(a),!o.isEmpty()&&!o.isLeafNode()){const c=[],d=a.getCompare(),h=r?o.getReverseIteratorFrom(i,a):o.getIteratorFrom(i,a);let f=h.getNext();for(;f&&c.length<s;)d(f,i)!==0&&c.push(f),f=h.getNext();return c}else return[]}function Jq(){return{visibleWrites:Cr.empty(),allWrites:[],lastWriteId:-1}}function nT(t,e,n,i){return mO(t.writeTree,t.treePath,e,n,i)}function pO(t,e){return Gq(t.writeTree,t.treePath,e)}function k2(t,e,n,i){return Kq(t.writeTree,t.treePath,e,n,i)}function nv(t,e){return Xq(t.writeTree,Si(t.treePath,e))}function Zq(t,e,n,i,s,r){return Qq(t.writeTree,t.treePath,e,n,i,s,r)}function M1(t,e,n){return Yq(t.writeTree,t.treePath,e,n)}function gO(t,e){return vO(Si(t.treePath,e),t.writeTree)}function vO(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;Qe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Qe(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,S2(i,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,kq(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,Aq(i,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,S2(i,e.snapshotNode,s.oldSnap));else throw $d("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const yO=new tz;class V1{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new N1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return M1(this.writes_,e,i)}}getChildAfterChild(e,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xu(this.viewCache_),r=Zq(this.writes_,s,n,1,i,e);return r.length===0?null:r[0]}}function nz(t,e){Qe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Qe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function iz(t,e,n,i,s){const r=new ez;let a,o;if(n.type===ta.OVERWRITE){const u=n;u.source.fromUser?a=iT(t,e,u.path,u.snap,i,s,r):(Qe(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.serverCache.isFiltered()&&!Mt(u.path),a=iv(t,e,u.path,u.snap,i,s,o,r))}else if(n.type===ta.MERGE){const u=n;u.source.fromUser?a=rz(t,e,u.path,u.children,i,s,r):(Qe(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.serverCache.isFiltered(),a=sT(t,e,u.path,u.children,i,s,o,r))}else if(n.type===ta.ACK_USER_WRITE){const u=n;u.revert?a=lz(t,e,u.path,i,s,r):a=az(t,e,u.path,u.affectedTree,i,s,r)}else if(n.type===ta.LISTEN_COMPLETE)a=oz(t,e,n.path,i,r);else throw $d("Unknown operation type: "+n.type);const l=r.getChanges();return sz(e,a,l),{viewCache:a,changes:l}}function sz(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=Zb(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(Iq(Zb(e)))}}function _O(t,e,n,i,s,r){const a=e.eventCache;if(nv(i,n)!=null)return e;{let o,l;if(Mt(n))if(Qe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=xu(e),c=u instanceof Xt?u:Xt.EMPTY_NODE,d=pO(i,c);o=t.filter.updateFullNode(e.eventCache.getNode(),d,r)}else{const u=nT(i,xu(e));o=t.filter.updateFullNode(e.eventCache.getNode(),u,r)}else{const u=Ut(n);if(u===".priority"){Qe(il(n)===1,"Can't have a priority with additional path components");const c=a.getNode();l=e.serverCache.getNode();const d=k2(i,n,c,l);d!=null?o=t.filter.updatePriority(c,d):o=a.getNode()}else{const c=gn(n);let d;if(a.isCompleteForChild(u)){l=e.serverCache.getNode();const h=k2(i,n,a.getNode(),l);h!=null?d=a.getNode().getImmediateChild(u).updateChild(c,h):d=a.getNode().getImmediateChild(u)}else d=M1(i,u,e.serverCache);d!=null?o=t.filter.updateChild(a.getNode(),u,d,c,s,r):o=a.getNode()}}return bf(e,o,a.isFullyInitialized()||Mt(n),t.filter.filtersNodes())}}function iv(t,e,n,i,s,r,a,o){const l=e.serverCache;let u;const c=a?t.filter:t.filter.getIndexedFilter();if(Mt(n))u=c.updateFullNode(l.getNode(),i,null);else if(c.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,i);u=c.updateFullNode(l.getNode(),f,null)}else{const f=Ut(n);if(!l.isCompleteForPath(n)&&il(n)>1)return e;const g=gn(n),b=l.getNode().getImmediateChild(f).updateChild(g,i);f===".priority"?u=c.updatePriority(l.getNode(),b):u=c.updateChild(l.getNode(),f,b,g,yO,null)}const d=cO(e,u,l.isFullyInitialized()||Mt(n),c.filtersNodes()),h=new V1(s,d,r);return _O(t,d,n,s,h,o)}function iT(t,e,n,i,s,r,a){const o=e.eventCache;let l,u;const c=new V1(s,e,r);if(Mt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),i,a),l=bf(e,u,!0,t.filter.filtersNodes());else{const d=Ut(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),i),l=bf(e,u,o.isFullyInitialized(),o.isFiltered());else{const h=gn(n),f=o.getNode().getImmediateChild(d);let g;if(Mt(h))g=i;else{const v=c.getCompleteChild(d);v!=null?YL(h)===".priority"&&v.getChild(QL(h)).isEmpty()?g=v:g=v.updateChild(h,i):g=Xt.EMPTY_NODE}if(f.equals(g))l=e;else{const v=t.filter.updateChild(o.getNode(),d,g,h,c,a);l=bf(e,v,o.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function P2(t,e){return t.eventCache.isCompleteForChild(e)}function rz(t,e,n,i,s,r,a){let o=e;return i.foreach((l,u)=>{const c=Si(n,l);P2(e,Ut(c))&&(o=iT(t,o,c,u,s,r,a))}),i.foreach((l,u)=>{const c=Si(n,l);P2(e,Ut(c))||(o=iT(t,o,c,u,s,r,a))}),o}function D2(t,e,n){return n.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function sT(t,e,n,i,s,r,a,o){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Mt(n)?u=i:u=new pn(null).setTree(n,i);const c=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(c.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),g=D2(t,f,h);l=iv(t,l,new Sn(d),g,s,r,a,o)}}),u.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!c.hasChild(d)&&!f){const g=e.serverCache.getNode().getImmediateChild(d),v=D2(t,g,h);l=iv(t,l,new Sn(d),v,s,r,a,o)}}),l}function az(t,e,n,i,s,r,a){if(nv(s,n)!=null)return e;const o=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(Mt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return iv(t,e,n,l.getNode().getChild(n),s,r,o,a);if(Mt(n)){let u=new pn(null);return l.getNode().forEachChild(Qc,(c,d)=>{u=u.set(new Sn(c),d)}),sT(t,e,n,u,s,r,o,a)}else return e}else{let u=new pn(null);return i.foreach((c,d)=>{const h=Si(n,c);l.isCompleteForPath(h)&&(u=u.set(c,l.getNode().getChild(h)))}),sT(t,e,n,u,s,r,o,a)}}function oz(t,e,n,i,s){const r=e.serverCache,a=cO(e,r.getNode(),r.isFullyInitialized()||Mt(n),r.isFiltered());return _O(t,a,n,i,yO,s)}function lz(t,e,n,i,s,r){let a;if(nv(i,n)!=null)return e;{const o=new V1(i,e,s),l=e.eventCache.getNode();let u;if(Mt(n)||Ut(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=nT(i,xu(e));else{const d=e.serverCache.getNode();Qe(d instanceof Xt,"serverChildren would be complete if leaf node"),c=pO(i,d)}c=c,u=t.filter.updateFullNode(l,c,r)}else{const c=Ut(n);let d=M1(i,c,e.serverCache);d==null&&e.serverCache.isCompleteForChild(c)&&(d=l.getImmediateChild(c)),d!=null?u=t.filter.updateChild(l,c,d,gn(n),o,r):e.eventCache.getNode().hasChild(c)?u=t.filter.updateChild(l,c,Xt.EMPTY_NODE,gn(n),o,r):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=nT(i,xu(e)),a.isLeafNode()&&(u=t.filter.updateFullNode(u,a,r)))}return a=e.serverCache.isFullyInitialized()||nv(i,rn())!=null,bf(e,u,a,t.filter.filtersNodes())}}function uz(t,e){const n=xu(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Mt(e)&&!n.getImmediateChild(Ut(e)).isEmpty())?n.getChild(e):null}function R2(t,e,n,i){e.type===ta.MERGE&&e.source.queryId!==null&&(Qe(xu(t.viewCache_),"We should always have a full cache before handling merges"),Qe(Zb(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,r=iz(t.processor_,s,e,n,i);return nz(t.processor_,r.viewCache),Qe(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,cz(t,r.changes,r.viewCache.eventCache.getNode())}function cz(t,e,n,i){const s=t.eventRegistrations_;return Vq(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L2;function dz(t){Qe(!L2,"__referenceConstructor has already been defined"),L2=t}function F1(t,e,n,i){const s=e.source.queryId;if(s!==null){const r=t.views.get(s);return Qe(r!=null,"SyncTree gave us an op for an invalid query."),R2(r,e,n,i)}else{let r=[];for(const a of t.views.values())r=r.concat(R2(a,e,n,i));return r}}function B1(t,e){let n=null;for(const i of t.views.values())n=n||uz(i,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O2;function hz(t){Qe(!O2,"__referenceConstructor has already been defined"),O2=t}class N2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pn(null),this.pendingWriteTree_=Jq(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fz(t,e,n,i,s){return $q(t.pendingWriteTree_,e,n,i,s),s?fy(t,new wu(aO(),e,n)):[]}function Vc(t,e,n=!1){const i=Hq(t.pendingWriteTree_,e);if(jq(t.pendingWriteTree_,e)){let r=new pn(null);return i.snap!=null?r=r.set(rn(),!0):ar(i.children,a=>{r=r.set(new Sn(a),!0)}),fy(t,new tv(i.path,r,n))}else return[]}function hy(t,e,n){return fy(t,new wu(oO(),e,n))}function mz(t,e,n){const i=pn.fromObject(n);return fy(t,new Gf(oO(),e,i))}function pz(t,e,n,i){const s=EO(t,i);if(s!=null){const r=CO(s),a=r.path,o=r.queryId,l=ir(a,e),u=new wu(lO(o),l,n);return wO(t,a,u)}else return[]}function gz(t,e,n,i){const s=EO(t,i);if(s){const r=CO(s),a=r.path,o=r.queryId,l=ir(a,e),u=pn.fromObject(n),c=new Gf(lO(o),l,u);return wO(t,a,c)}else return[]}function bO(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(a,o)=>{const l=ir(a,e),u=B1(o,l);if(u)return u});return mO(s,e,r,n,!0)}function fy(t,e){return TO(e,t.syncPointTree_,null,hO(t.pendingWriteTree_,rn()))}function TO(t,e,n,i){if(Mt(t.path))return SO(t,e,n,i);{const s=e.get(rn());n==null&&s!=null&&(n=B1(s,rn()));let r=[];const a=Ut(t.path),o=t.operationForChild(a),l=e.children.get(a);if(l&&o){const u=n?n.getImmediateChild(a):null,c=gO(i,a);r=r.concat(TO(o,l,u,c))}return s&&(r=r.concat(F1(s,t,i,n))),r}}function SO(t,e,n,i){const s=e.get(rn());n==null&&s!=null&&(n=B1(s,rn()));let r=[];return e.children.inorderTraversal((a,o)=>{const l=n?n.getImmediateChild(a):null,u=gO(i,a),c=t.operationForChild(a);c&&(r=r.concat(SO(c,o,l,u)))}),s&&(r=r.concat(F1(s,t,i,n))),r}function EO(t,e){return t.tagToQueryMap.get(e)}function CO(t){const e=t.indexOf("$");return Qe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Sn(t.substr(0,e))}}function wO(t,e,n){const i=t.syncPointTree_.get(e);Qe(i,"Missing sync point for query tag that we're tracking");const s=hO(t.pendingWriteTree_,e);return F1(i,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new U1(n)}node(){return this.node_}}class $1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Si(this.path_,e);return new $1(this.syncTree_,n)}node(){return bO(this.syncTree_,this.path_)}}const vz=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},M2=function(t,e,n){if(!t||typeof t!="object")return t;if(Qe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return yz(t[".sv"],e,n);if(typeof t[".sv"]=="object")return _z(t[".sv"],e);Qe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},yz=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Qe(!1,"Unexpected server value: "+t)}},_z=function(t,e,n){t.hasOwnProperty("increment")||Qe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&Qe(!1,"Unexpected increment value: "+i);const s=e.node();if(Qe(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const a=s.getValue();return typeof a!="number"?i:a+i},bz=function(t,e,n,i){return H1(e,new $1(n,t),i)},Tz=function(t,e,n){return H1(t,new U1(e),n)};function H1(t,e,n){const i=t.getPriority().val(),s=M2(i,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const a=t,o=M2(a.getValue(),e,n);return o!==a.getValue()||s!==a.getPriority().val()?new yi(o,ji(s)):t}else{const a=t;return r=a,s!==a.getPriority().val()&&(r=r.updatePriority(new yi(s))),a.forEachChild(Wi,(o,l)=>{const u=H1(l,e.getImmediateChild(o),n);u!==l&&(r=r.updateImmediateChild(o,u))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function q1(t,e){let n=e instanceof Sn?e:new Sn(e),i=t,s=Ut(n);for(;s!==null;){const r=cd(i.node.children,s)||{children:{},childCount:0};i=new j1(s,i,r),n=gn(n),s=Ut(n)}return i}function Wd(t){return t.node.value}function xO(t,e){t.node.value=e,rT(t)}function IO(t){return t.node.childCount>0}function Sz(t){return Wd(t)===void 0&&!IO(t)}function my(t,e){ar(t.node.children,(n,i)=>{e(new j1(n,t,i))})}function AO(t,e,n,i){n&&e(t),my(t,s=>{AO(s,e,!0)})}function Ez(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Nm(t){return new Sn(t.parent===null?t.name:Nm(t.parent)+"/"+t.name)}function rT(t){t.parent!==null&&Cz(t.parent,t.name,t)}function Cz(t,e,n){const i=Sz(n),s=oo(t.node.children,e);i&&s?(delete t.node.children[e],t.node.childCount--,rT(t)):!i&&!s&&(t.node.children[e]=n.node,t.node.childCount++,rT(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=/[\[\].#$\/\u0000-\u001F\u007F]/,xz=/[\[\].#$\u0000-\u001F\u007F]/,_0=10*1024*1024,kO=function(t){return typeof t=="string"&&t.length!==0&&!wz.test(t)},Iz=function(t){return typeof t=="string"&&t.length!==0&&!xz.test(t)},Az=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Iz(t)},PO=function(t,e,n){const i=n instanceof Sn?new oq(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Xl(i));if(typeof e=="function")throw new Error(t+"contains a function "+Xl(i)+" with contents = "+e.toString());if(kL(e))throw new Error(t+"contains "+e.toString()+" "+Xl(i));if(typeof e=="string"&&e.length>_0/3&&oy(e)>_0)throw new Error(t+"contains a string greater than "+_0+" utf8 bytes "+Xl(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(ar(e,(a,o)=>{if(a===".value")s=!0;else if(a!==".priority"&&a!==".sv"&&(r=!0,!kO(a)))throw new Error(t+" contains an invalid key ("+a+") "+Xl(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);lq(i,a),PO(t,o,i),uq(i)}),s&&r)throw new Error(t+' contains ".value" child '+Xl(i)+" in addition to actual children.")}},kz=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kO(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Az(n))throw new Error(T9(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Dz(t,e){let n=null;for(let i=0;i<e.length;i++){const s=e[i],r=s.getPath();n!==null&&!JL(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&t.eventLists_.push(n)}function Bu(t,e,n){Dz(t,n),Rz(t,i=>br(i,e)||br(e,i))}function Rz(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const s=t.eventLists_[i];if(s){const r=s.path;e(r)?(Lz(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Lz(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();yf&&Hi("event: "+n.toString()),Lm(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz="repo_interrupt",Nz=25;class Mz{constructor(e,n,i,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pz,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ev(),this.transactionQueueTree_=new j1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Vz(t,e,n){if(t.stats_=P1(t.repoInfo_),t.forceRestClient_||Dj())t.server_=new Zg(t.repoInfo_,(i,s,r,a)=>{V2(t,i,s,r,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>F2(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Pi(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Ga(t.repoInfo_,e,(i,s,r,a)=>{V2(t,i,s,r,a)},i=>{F2(t,i)},i=>{Bz(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=Vj(t.repoInfo_,()=>new Mq(t.stats_,t.server_)),t.infoData_=new Dq,t.infoSyncTree_=new N2({startListening:(i,s,r,a)=>{let o=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(o=hy(t.infoSyncTree_,i._path,l),setTimeout(()=>{a("ok")},0)),o},stopListening:()=>{}}),z1(t,"connected",!1),t.serverSyncTree_=new N2({startListening:(i,s,r,a)=>(t.server_.listen(i,r,s,(o,l)=>{const u=a(o,l);Bu(t.eventQueue_,i._path,u)}),[]),stopListening:(i,s)=>{t.server_.unlisten(i,s)}})}function Fz(t){const n=t.infoData_.getNode(new Sn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function DO(t){return vz({timestamp:Fz(t)})}function V2(t,e,n,i,s){t.dataUpdateCount++;const r=new Sn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(s)if(i){const l=$g(n,u=>ji(u));a=gz(t.serverSyncTree_,r,l,s)}else{const l=ji(n);a=pz(t.serverSyncTree_,r,l,s)}else if(i){const l=$g(n,u=>ji(u));a=mz(t.serverSyncTree_,r,l)}else{const l=ji(n);a=hy(t.serverSyncTree_,r,l)}let o=r;a.length>0&&(o=G1(t,r)),Bu(t.eventQueue_,o,a)}function F2(t,e){z1(t,"connected",e),e===!1&&$z(t)}function Bz(t,e){ar(e,(n,i)=>{z1(t,n,i)})}function z1(t,e,n){const i=new Sn("/.info/"+e),s=ji(n);t.infoData_.updateSnapshot(i,s);const r=hy(t.infoSyncTree_,i,s);Bu(t.eventQueue_,i,r)}function Uz(t){return t.nextWriteId_++}function $z(t){RO(t,"onDisconnectEvents");const e=DO(t),n=ev();Jb(t.onDisconnect_,rn(),(s,r)=>{const a=bz(s,r,t.serverSyncTree_,e);rO(n,s,a)});let i=[];Jb(n,rn(),(s,r)=>{i=i.concat(hy(t.serverSyncTree_,s,r));const a=zz(t,s);G1(t,a)}),t.onDisconnect_=ev(),Bu(t.eventQueue_,rn(),i)}function Hz(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Oz)}function RO(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Hi(n,...e)}function LO(t,e,n){return bO(t.serverSyncTree_,e,n)||Xt.EMPTY_NODE}function W1(t,e=t.transactionQueueTree_){if(e||py(t,e),Wd(e)){const n=NO(t,e);Qe(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&jz(t,Nm(e),n)}else IO(e)&&my(e,n=>{W1(t,n)})}function jz(t,e,n){const i=n.map(u=>u.currentWriteId),s=LO(t,e,i);let r=s;const a=s.hash();for(let u=0;u<n.length;u++){const c=n[u];Qe(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=ir(e,c.path);r=r.updateChild(d,c.currentOutputSnapshotRaw)}const o=r.val(!0),l=e;t.server_.put(l.toString(),o,u=>{RO(t,"transaction put response",{path:l.toString(),status:u});let c=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,c=c.concat(Vc(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();py(t,q1(t.transactionQueueTree_,e)),W1(t,t.transactionQueueTree_),Bu(t.eventQueue_,e,c);for(let h=0;h<d.length;h++)Lm(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{qs("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}G1(t,e)}},a)}function G1(t,e){const n=OO(t,e),i=Nm(n),s=NO(t,n);return qz(t,s,i),i}function qz(t,e,n){if(e.length===0)return;const i=[];let s=[];const a=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const l=e[o],u=ir(n,l.path);let c=!1,d;if(Qe(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)c=!0,d=l.abortReason,s=s.concat(Vc(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Nz)c=!0,d="maxretry",s=s.concat(Vc(t.serverSyncTree_,l.currentWriteId,!0));else{const h=LO(t,l.path,a);l.currentInputSnapshot=h;const f=e[o].update(h.val());if(f!==void 0){PO("transaction failed: Data returned ",f,l.path);let g=ji(f);typeof f=="object"&&f!=null&&oo(f,".priority")||(g=g.updatePriority(h.getPriority()));const b=l.currentWriteId,I=DO(t),w=Tz(g,h,I);l.currentOutputSnapshotRaw=g,l.currentOutputSnapshotResolved=w,l.currentWriteId=Uz(t),a.splice(a.indexOf(b),1),s=s.concat(fz(t.serverSyncTree_,l.path,w,l.currentWriteId,l.applyLocally)),s=s.concat(Vc(t.serverSyncTree_,b,!0))}else c=!0,d="nodata",s=s.concat(Vc(t.serverSyncTree_,l.currentWriteId,!0))}Bu(t.eventQueue_,n,s),s=[],c&&(e[o].status=2,function(h){setTimeout(h,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(d==="nodata"?i.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):i.push(()=>e[o].onComplete(new Error(d),!1,null))))}py(t,t.transactionQueueTree_);for(let o=0;o<i.length;o++)Lm(i[o]);W1(t,t.transactionQueueTree_)}function OO(t,e){let n,i=t.transactionQueueTree_;for(n=Ut(e);n!==null&&Wd(i)===void 0;)i=q1(i,n),e=gn(e),n=Ut(e);return i}function NO(t,e){const n=[];return MO(t,e,n),n.sort((i,s)=>i.order-s.order),n}function MO(t,e,n){const i=Wd(e);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);my(e,s=>{MO(t,s,n)})}function py(t,e){const n=Wd(e);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,xO(e,n.length>0?n:void 0)}my(e,i=>{py(t,i)})}function zz(t,e){const n=Nm(OO(t,e)),i=q1(t.transactionQueueTree_,e);return Ez(i,s=>{b0(t,s)}),b0(t,i),AO(i,s=>{b0(t,s)}),n}function b0(t,e){const n=Wd(e);if(n){const i=[];let s=[],r=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(Qe(r===a-1,"All SENT items should be at beginning of queue."),r=a,n[a].status=3,n[a].abortReason="set"):(Qe(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),s=s.concat(Vc(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&i.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));r===-1?xO(e,void 0):n.length=r+1,Bu(t.eventQueue_,Nm(e),s);for(let a=0;a<i.length;a++)Lm(i[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wz(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Gz(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):qs(`Invalid query segment '${n}' in query '${t}'`)}return e}const B2=function(t,e){const n=Kz(t),i=n.namespace;n.domain==="firebase.com"&&Eu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Eu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Ej();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Oj(n.host,n.secure,i,s,e,"",i!==n.subdomain),path:new Sn(n.pathString)}},Kz=function(t){let e="",n="",i="",s="",r="",a=!0,o="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(o=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");c===-1&&(c=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(s=Wz(t.substring(c,d)));const h=Gz(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(a=o==="https"||o==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const g=e.indexOf(".");i=e.substring(0,g).toLowerCase(),n=e.substring(g+1),r=i}"ns"in h&&(r=h.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:a,scheme:o,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n,i,s){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return Mt(this._path)?null:YL(this._path)}get ref(){return new Gd(this._repo,this._path)}get _queryIdentifier(){const e=C2(this._queryParams),n=A1(e);return n==="{}"?"default":n}get _queryObject(){return C2(this._queryParams)}isEqual(e){if(e=di(e),!(e instanceof K1))return!1;const n=this._repo===e._repo,i=JL(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+aq(this._path)}}class Gd extends K1{constructor(e,n){super(e,n,new O1,!1)}get parent(){const e=QL(this._path);return e===null?null:new Gd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}dz(Gd);hz(Gd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz="FIREBASE_DATABASE_EMULATOR_HOST",aT={};let Xz=!1;function Qz(t,e,n,i,s){let r=i||t.options.databaseURL;r===void 0&&(t.options.projectId||Eu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hi("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=B2(r,s),o=a.repoInfo,l;typeof process<"u"&&r2&&(l=r2[Yz]),l?(r=`http://${l}?ns=${o.namespace}`,a=B2(r,s),o=a.repoInfo):a.repoInfo.secure;const u=new Lj(t.name,t.options,e);kz("Invalid Firebase Database URL",a),Mt(a.path)||Eu("Database URL must point to the root of a Firebase Database (not including a child path).");const c=Zz(o,t,u,new Rj(t,n));return new eW(c,t)}function Jz(t,e){const n=aT[e];(!n||n[t.key]!==t)&&Eu(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Hz(t),delete n[t.key]}function Zz(t,e,n,i){let s=aT[e.name];s||(s={},aT[e.name]=s);let r=s[t.toURLString()];return r&&Eu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Mz(t,Xz,n,i),s[t.toURLString()]=r,r}class eW{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Vz(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gd(this._repo,rn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Jz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Eu("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tW(t){vj(vl),fa(new kr("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return Qz(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),js(a2,o2,t),js(a2,o2,"esm2017")}Ga.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ga.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};tW();var U2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jo,VO;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function y(){}y.prototype=S.prototype,D.D=S.prototype,D.prototype=new y,D.prototype.constructor=D,D.C=function(E,A,k){for(var R=Array(arguments.length-2),W=2;W<arguments.length;W++)R[W-2]=arguments[W];return S.prototype[A].apply(E,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,S,y){y||(y=0);var E=Array(16);if(typeof S=="string")for(var A=0;16>A;++A)E[A]=S.charCodeAt(y++)|S.charCodeAt(y++)<<8|S.charCodeAt(y++)<<16|S.charCodeAt(y++)<<24;else for(A=0;16>A;++A)E[A]=S[y++]|S[y++]<<8|S[y++]<<16|S[y++]<<24;S=D.g[0],y=D.g[1],A=D.g[2];var k=D.g[3],R=S+(k^y&(A^k))+E[0]+3614090360&4294967295;S=y+(R<<7&4294967295|R>>>25),R=k+(A^S&(y^A))+E[1]+3905402710&4294967295,k=S+(R<<12&4294967295|R>>>20),R=A+(y^k&(S^y))+E[2]+606105819&4294967295,A=k+(R<<17&4294967295|R>>>15),R=y+(S^A&(k^S))+E[3]+3250441966&4294967295,y=A+(R<<22&4294967295|R>>>10),R=S+(k^y&(A^k))+E[4]+4118548399&4294967295,S=y+(R<<7&4294967295|R>>>25),R=k+(A^S&(y^A))+E[5]+1200080426&4294967295,k=S+(R<<12&4294967295|R>>>20),R=A+(y^k&(S^y))+E[6]+2821735955&4294967295,A=k+(R<<17&4294967295|R>>>15),R=y+(S^A&(k^S))+E[7]+4249261313&4294967295,y=A+(R<<22&4294967295|R>>>10),R=S+(k^y&(A^k))+E[8]+1770035416&4294967295,S=y+(R<<7&4294967295|R>>>25),R=k+(A^S&(y^A))+E[9]+2336552879&4294967295,k=S+(R<<12&4294967295|R>>>20),R=A+(y^k&(S^y))+E[10]+4294925233&4294967295,A=k+(R<<17&4294967295|R>>>15),R=y+(S^A&(k^S))+E[11]+2304563134&4294967295,y=A+(R<<22&4294967295|R>>>10),R=S+(k^y&(A^k))+E[12]+1804603682&4294967295,S=y+(R<<7&4294967295|R>>>25),R=k+(A^S&(y^A))+E[13]+4254626195&4294967295,k=S+(R<<12&4294967295|R>>>20),R=A+(y^k&(S^y))+E[14]+2792965006&4294967295,A=k+(R<<17&4294967295|R>>>15),R=y+(S^A&(k^S))+E[15]+1236535329&4294967295,y=A+(R<<22&4294967295|R>>>10),R=S+(A^k&(y^A))+E[1]+4129170786&4294967295,S=y+(R<<5&4294967295|R>>>27),R=k+(y^A&(S^y))+E[6]+3225465664&4294967295,k=S+(R<<9&4294967295|R>>>23),R=A+(S^y&(k^S))+E[11]+643717713&4294967295,A=k+(R<<14&4294967295|R>>>18),R=y+(k^S&(A^k))+E[0]+3921069994&4294967295,y=A+(R<<20&4294967295|R>>>12),R=S+(A^k&(y^A))+E[5]+3593408605&4294967295,S=y+(R<<5&4294967295|R>>>27),R=k+(y^A&(S^y))+E[10]+38016083&4294967295,k=S+(R<<9&4294967295|R>>>23),R=A+(S^y&(k^S))+E[15]+3634488961&4294967295,A=k+(R<<14&4294967295|R>>>18),R=y+(k^S&(A^k))+E[4]+3889429448&4294967295,y=A+(R<<20&4294967295|R>>>12),R=S+(A^k&(y^A))+E[9]+568446438&4294967295,S=y+(R<<5&4294967295|R>>>27),R=k+(y^A&(S^y))+E[14]+3275163606&4294967295,k=S+(R<<9&4294967295|R>>>23),R=A+(S^y&(k^S))+E[3]+4107603335&4294967295,A=k+(R<<14&4294967295|R>>>18),R=y+(k^S&(A^k))+E[8]+1163531501&4294967295,y=A+(R<<20&4294967295|R>>>12),R=S+(A^k&(y^A))+E[13]+2850285829&4294967295,S=y+(R<<5&4294967295|R>>>27),R=k+(y^A&(S^y))+E[2]+4243563512&4294967295,k=S+(R<<9&4294967295|R>>>23),R=A+(S^y&(k^S))+E[7]+1735328473&4294967295,A=k+(R<<14&4294967295|R>>>18),R=y+(k^S&(A^k))+E[12]+2368359562&4294967295,y=A+(R<<20&4294967295|R>>>12),R=S+(y^A^k)+E[5]+4294588738&4294967295,S=y+(R<<4&4294967295|R>>>28),R=k+(S^y^A)+E[8]+2272392833&4294967295,k=S+(R<<11&4294967295|R>>>21),R=A+(k^S^y)+E[11]+1839030562&4294967295,A=k+(R<<16&4294967295|R>>>16),R=y+(A^k^S)+E[14]+4259657740&4294967295,y=A+(R<<23&4294967295|R>>>9),R=S+(y^A^k)+E[1]+2763975236&4294967295,S=y+(R<<4&4294967295|R>>>28),R=k+(S^y^A)+E[4]+1272893353&4294967295,k=S+(R<<11&4294967295|R>>>21),R=A+(k^S^y)+E[7]+4139469664&4294967295,A=k+(R<<16&4294967295|R>>>16),R=y+(A^k^S)+E[10]+3200236656&4294967295,y=A+(R<<23&4294967295|R>>>9),R=S+(y^A^k)+E[13]+681279174&4294967295,S=y+(R<<4&4294967295|R>>>28),R=k+(S^y^A)+E[0]+3936430074&4294967295,k=S+(R<<11&4294967295|R>>>21),R=A+(k^S^y)+E[3]+3572445317&4294967295,A=k+(R<<16&4294967295|R>>>16),R=y+(A^k^S)+E[6]+76029189&4294967295,y=A+(R<<23&4294967295|R>>>9),R=S+(y^A^k)+E[9]+3654602809&4294967295,S=y+(R<<4&4294967295|R>>>28),R=k+(S^y^A)+E[12]+3873151461&4294967295,k=S+(R<<11&4294967295|R>>>21),R=A+(k^S^y)+E[15]+530742520&4294967295,A=k+(R<<16&4294967295|R>>>16),R=y+(A^k^S)+E[2]+3299628645&4294967295,y=A+(R<<23&4294967295|R>>>9),R=S+(A^(y|~k))+E[0]+4096336452&4294967295,S=y+(R<<6&4294967295|R>>>26),R=k+(y^(S|~A))+E[7]+1126891415&4294967295,k=S+(R<<10&4294967295|R>>>22),R=A+(S^(k|~y))+E[14]+2878612391&4294967295,A=k+(R<<15&4294967295|R>>>17),R=y+(k^(A|~S))+E[5]+4237533241&4294967295,y=A+(R<<21&4294967295|R>>>11),R=S+(A^(y|~k))+E[12]+1700485571&4294967295,S=y+(R<<6&4294967295|R>>>26),R=k+(y^(S|~A))+E[3]+2399980690&4294967295,k=S+(R<<10&4294967295|R>>>22),R=A+(S^(k|~y))+E[10]+4293915773&4294967295,A=k+(R<<15&4294967295|R>>>17),R=y+(k^(A|~S))+E[1]+2240044497&4294967295,y=A+(R<<21&4294967295|R>>>11),R=S+(A^(y|~k))+E[8]+1873313359&4294967295,S=y+(R<<6&4294967295|R>>>26),R=k+(y^(S|~A))+E[15]+4264355552&4294967295,k=S+(R<<10&4294967295|R>>>22),R=A+(S^(k|~y))+E[6]+2734768916&4294967295,A=k+(R<<15&4294967295|R>>>17),R=y+(k^(A|~S))+E[13]+1309151649&4294967295,y=A+(R<<21&4294967295|R>>>11),R=S+(A^(y|~k))+E[4]+4149444226&4294967295,S=y+(R<<6&4294967295|R>>>26),R=k+(y^(S|~A))+E[11]+3174756917&4294967295,k=S+(R<<10&4294967295|R>>>22),R=A+(S^(k|~y))+E[2]+718787259&4294967295,A=k+(R<<15&4294967295|R>>>17),R=y+(k^(A|~S))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(A+(R<<21&4294967295|R>>>11))&4294967295,D.g[2]=D.g[2]+A&4294967295,D.g[3]=D.g[3]+k&4294967295}i.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var y=S-this.blockSize,E=this.B,A=this.h,k=0;k<S;){if(A==0)for(;k<=y;)s(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<S;)if(E[A++]=D.charCodeAt(k++),A==this.blockSize){s(this,E),A=0;break}}else for(;k<S;)if(E[A++]=D[k++],A==this.blockSize){s(this,E),A=0;break}}this.h=A,this.o+=S},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var y=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=y&255,y/=256;for(this.u(D),D=Array(16),S=y=0;4>S;++S)for(var E=0;32>E;E+=8)D[y++]=this.g[S]>>>E&255;return D};function r(D,S){var y=o;return Object.prototype.hasOwnProperty.call(y,D)?y[D]:y[D]=S(D)}function a(D,S){this.h=S;for(var y=[],E=!0,A=D.length-1;0<=A;A--){var k=D[A]|0;E&&k==S||(y[A]=k,E=!1)}this.g=y}var o={};function l(D){return-128<=D&&128>D?r(D,function(S){return new a([S|0],0>S?-1:0)}):new a([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return d;if(0>D)return b(u(-D));for(var S=[],y=1,E=0;D>=y;E++)S[E]=D/y|0,y*=4294967296;return new a(S,0)}function c(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return b(c(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(S,8)),E=d,A=0;A<D.length;A+=8){var k=Math.min(8,D.length-A),R=parseInt(D.substring(A,A+k),S);8>k?(k=u(Math.pow(S,k)),E=E.j(k).add(u(R))):(E=E.j(y),E=E.add(u(R)))}return E}var d=l(0),h=l(1),f=l(16777216);t=a.prototype,t.m=function(){if(v(this))return-b(this).m();for(var D=0,S=1,y=0;y<this.g.length;y++){var E=this.i(y);D+=(0<=E?E:4294967296+E)*S,S*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(g(this))return"0";if(v(this))return"-"+b(this).toString(D);for(var S=u(Math.pow(D,6)),y=this,E="";;){var A=M(y,S).g;y=I(y,A.j(S));var k=((0<y.g.length?y.g[0]:y.h)>>>0).toString(D);if(y=A,g(y))return k+E;for(;6>k.length;)k="0"+k;E=k+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function g(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function v(D){return D.h==-1}t.l=function(D){return D=I(this,D),v(D)?-1:g(D)?0:1};function b(D){for(var S=D.g.length,y=[],E=0;E<S;E++)y[E]=~D.g[E];return new a(y,~D.h).add(h)}t.abs=function(){return v(this)?b(this):this},t.add=function(D){for(var S=Math.max(this.g.length,D.g.length),y=[],E=0,A=0;A<=S;A++){var k=E+(this.i(A)&65535)+(D.i(A)&65535),R=(k>>>16)+(this.i(A)>>>16)+(D.i(A)>>>16);E=R>>>16,k&=65535,R&=65535,y[A]=R<<16|k}return new a(y,y[y.length-1]&-2147483648?-1:0)};function I(D,S){return D.add(b(S))}t.j=function(D){if(g(this)||g(D))return d;if(v(this))return v(D)?b(this).j(b(D)):b(b(this).j(D));if(v(D))return b(this.j(b(D)));if(0>this.l(f)&&0>D.l(f))return u(this.m()*D.m());for(var S=this.g.length+D.g.length,y=[],E=0;E<2*S;E++)y[E]=0;for(E=0;E<this.g.length;E++)for(var A=0;A<D.g.length;A++){var k=this.i(E)>>>16,R=this.i(E)&65535,W=D.i(A)>>>16,se=D.i(A)&65535;y[2*E+2*A]+=R*se,w(y,2*E+2*A),y[2*E+2*A+1]+=k*se,w(y,2*E+2*A+1),y[2*E+2*A+1]+=R*W,w(y,2*E+2*A+1),y[2*E+2*A+2]+=k*W,w(y,2*E+2*A+2)}for(E=0;E<S;E++)y[E]=y[2*E+1]<<16|y[2*E];for(E=S;E<2*S;E++)y[E]=0;return new a(y,0)};function w(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function P(D,S){this.g=D,this.h=S}function M(D,S){if(g(S))throw Error("division by zero");if(g(D))return new P(d,d);if(v(D))return S=M(b(D),S),new P(b(S.g),b(S.h));if(v(S))return S=M(D,b(S)),new P(b(S.g),S.h);if(30<D.g.length){if(v(D)||v(S))throw Error("slowDivide_ only works with positive integers.");for(var y=h,E=S;0>=E.l(D);)y=F(y),E=F(E);var A=U(y,1),k=U(E,1);for(E=U(E,2),y=U(y,2);!g(E);){var R=k.add(E);0>=R.l(D)&&(A=A.add(y),k=R),E=U(E,1),y=U(y,1)}return S=I(D,A.j(S)),new P(A,S)}for(A=d;0<=D.l(S);){for(y=Math.max(1,Math.floor(D.m()/S.m())),E=Math.ceil(Math.log(y)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),k=u(y),R=k.j(S);v(R)||0<R.l(D);)y-=E,k=u(y),R=k.j(S);g(k)&&(k=h),A=A.add(k),D=I(D,R)}return new P(A,D)}t.A=function(D){return M(this,D).h},t.and=function(D){for(var S=Math.max(this.g.length,D.g.length),y=[],E=0;E<S;E++)y[E]=this.i(E)&D.i(E);return new a(y,this.h&D.h)},t.or=function(D){for(var S=Math.max(this.g.length,D.g.length),y=[],E=0;E<S;E++)y[E]=this.i(E)|D.i(E);return new a(y,this.h|D.h)},t.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),y=[],E=0;E<S;E++)y[E]=this.i(E)^D.i(E);return new a(y,this.h^D.h)};function F(D){for(var S=D.g.length+1,y=[],E=0;E<S;E++)y[E]=D.i(E)<<1|D.i(E-1)>>>31;return new a(y,D.h)}function U(D,S){var y=S>>5;S%=32;for(var E=D.g.length-y,A=[],k=0;k<E;k++)A[k]=0<S?D.i(k+y)>>>S|D.i(k+y+1)<<32-S:D.i(k+y);return new a(A,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,VO=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=c,Jo=a}).apply(typeof U2<"u"?U2:typeof self<"u"?self:typeof window<"u"?window:{});var Hp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FO,tf,BO,vg,oT,UO,$O,HO;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,L,B){return m==Array.prototype||m==Object.prototype||(m[L]=B.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hp=="object"&&Hp];for(var L=0;L<m.length;++L){var B=m[L];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var i=n(this);function s(m,L){if(L)e:{var B=i;m=m.split(".");for(var G=0;G<m.length-1;G++){var ge=m[G];if(!(ge in B))break e;B=B[ge]}m=m[m.length-1],G=B[m],L=L(G),L!=G&&L!=null&&e(B,m,{configurable:!0,writable:!0,value:L})}}function r(m,L){m instanceof String&&(m+="");var B=0,G=!1,ge={next:function(){if(!G&&B<m.length){var Ae=B++;return{value:L(Ae,m[Ae]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}s("Array.prototype.values",function(m){return m||function(){return r(this,function(L,B){return B})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(m){var L=typeof m;return L=L!="object"?L:m?Array.isArray(m)?"array":L:"null",L=="array"||L=="object"&&typeof m.length=="number"}function u(m){var L=typeof m;return L=="object"&&m!=null||L=="function"}function c(m,L,B){return m.call.apply(m.bind,arguments)}function d(m,L,B){if(!m)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,G),m.apply(L,ge)}}return function(){return m.apply(L,arguments)}}function h(m,L,B){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,h.apply(null,arguments)}function f(m,L){var B=Array.prototype.slice.call(arguments,1);return function(){var G=B.slice();return G.push.apply(G,arguments),m.apply(this,G)}}function g(m,L){function B(){}B.prototype=L.prototype,m.aa=L.prototype,m.prototype=new B,m.prototype.constructor=m,m.Qb=function(G,ge,Ae){for(var Ge=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)Ge[Gt-2]=arguments[Gt];return L.prototype[ge].apply(G,Ge)}}function v(m){const L=m.length;if(0<L){const B=Array(L);for(let G=0;G<L;G++)B[G]=m[G];return B}return[]}function b(m,L){for(let B=1;B<arguments.length;B++){const G=arguments[B];if(l(G)){const ge=m.length||0,Ae=G.length||0;m.length=ge+Ae;for(let Ge=0;Ge<Ae;Ge++)m[ge+Ge]=G[Ge]}else m.push(G)}}class I{constructor(L,B){this.i=L,this.j=B,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function w(m){return/^[\s\xa0]*$/.test(m)}function P(){var m=o.navigator;return m&&(m=m.userAgent)?m:""}function M(m){return M[" "](m),m}M[" "]=function(){};var F=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function U(m,L,B){for(const G in m)L.call(B,m[G],G,m)}function D(m,L){for(const B in m)L.call(void 0,m[B],B,m)}function S(m){const L={};for(const B in m)L[B]=m[B];return L}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(m,L){let B,G;for(let ge=1;ge<arguments.length;ge++){G=arguments[ge];for(B in G)m[B]=G[B];for(let Ae=0;Ae<y.length;Ae++)B=y[Ae],Object.prototype.hasOwnProperty.call(G,B)&&(m[B]=G[B])}}function A(m){var L=1;m=m.split(":");const B=[];for(;0<L&&m.length;)B.push(m.shift()),L--;return m.length&&B.push(m.join(":")),B}function k(m){o.setTimeout(()=>{throw m},0)}function R(){var m=ee;let L=null;return m.g&&(L=m.g,m.g=m.g.next,m.g||(m.h=null),L.next=null),L}class W{constructor(){this.h=this.g=null}add(L,B){const G=se.get();G.set(L,B),this.h?this.h.next=G:this.g=G,this.h=G}}var se=new I(()=>new ae,m=>m.reset());class ae{constructor(){this.next=this.g=this.h=null}set(L,B){this.h=L,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ne=!1,ee=new W,Q=()=>{const m=o.Promise.resolve(void 0);Z=()=>{m.then(j)}};var j=()=>{for(var m;m=R();){try{m.h.call(m.g)}catch(B){k(B)}var L=se;L.j(m),100>L.h&&(L.h++,m.next=L.g,L.g=m)}ne=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(m,L){this.type=m,this.g=this.target=L,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,L=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const B=()=>{};o.addEventListener("test",B,L),o.removeEventListener("test",B,L)}catch{}return m}();function Le(m,L){if(pe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var B=this.type=m.type,G=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=L,L=m.relatedTarget){if(F){e:{try{M(L.nodeName);var ge=!0;break e}catch{}ge=!1}ge||(L=null)}}else B=="mouseover"?L=m.fromElement:B=="mouseout"&&(L=m.toElement);this.relatedTarget=L,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:we[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Le.aa.h.call(this)}}g(Le,pe);var we={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),fe=0;function xe(m,L,B,G,ge){this.listener=m,this.proxy=null,this.src=L,this.type=B,this.capture=!!G,this.ha=ge,this.key=++fe,this.da=this.fa=!1}function Ne(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function be(m){this.src=m,this.g={},this.h=0}be.prototype.add=function(m,L,B,G,ge){var Ae=m.toString();m=this.g[Ae],m||(m=this.g[Ae]=[],this.h++);var Ge=H(m,L,G,ge);return-1<Ge?(L=m[Ge],B||(L.fa=!1)):(L=new xe(L,this.src,Ae,!!G,ge),L.fa=B,m.push(L)),L};function z(m,L){var B=L.type;if(B in m.g){var G=m.g[B],ge=Array.prototype.indexOf.call(G,L,void 0),Ae;(Ae=0<=ge)&&Array.prototype.splice.call(G,ge,1),Ae&&(Ne(L),m.g[B].length==0&&(delete m.g[B],m.h--))}}function H(m,L,B,G){for(var ge=0;ge<m.length;++ge){var Ae=m[ge];if(!Ae.da&&Ae.listener==L&&Ae.capture==!!B&&Ae.ha==G)return ge}return-1}var X="closure_lm_"+(1e6*Math.random()|0),he={};function de(m,L,B,G,ge){if(Array.isArray(L)){for(var Ae=0;Ae<L.length;Ae++)de(m,L[Ae],B,G,ge);return null}return B=rt(B),m&&m[re]?m.K(L,B,u(G)?!!G.capture:!1,ge):_e(m,L,B,!1,G,ge)}function _e(m,L,B,G,ge,Ae){if(!L)throw Error("Invalid event type");var Ge=u(ge)?!!ge.capture:!!ge,Gt=ze(m);if(Gt||(m[X]=Gt=new be(m)),B=Gt.add(L,B,G,Ge,Ae),B.proxy)return B;if(G=Oe(),B.proxy=G,G.src=m,G.listener=B,m.addEventListener)Se||(ge=Ge),ge===void 0&&(ge=!1),m.addEventListener(L.toString(),G,ge);else if(m.attachEvent)m.attachEvent(Ce(L.toString()),G);else if(m.addListener&&m.removeListener)m.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return B}function Oe(){function m(B){return L.call(m.src,m.listener,B)}const L=He;return m}function Re(m,L,B,G,ge){if(Array.isArray(L))for(var Ae=0;Ae<L.length;Ae++)Re(m,L[Ae],B,G,ge);else G=u(G)?!!G.capture:!!G,B=rt(B),m&&m[re]?(m=m.i,L=String(L).toString(),L in m.g&&(Ae=m.g[L],B=H(Ae,B,G,ge),-1<B&&(Ne(Ae[B]),Array.prototype.splice.call(Ae,B,1),Ae.length==0&&(delete m.g[L],m.h--)))):m&&(m=ze(m))&&(L=m.g[L.toString()],m=-1,L&&(m=H(L,B,G,ge)),(B=-1<m?L[m]:null)&&me(B))}function me(m){if(typeof m!="number"&&m&&!m.da){var L=m.src;if(L&&L[re])z(L.i,m);else{var B=m.type,G=m.proxy;L.removeEventListener?L.removeEventListener(B,G,m.capture):L.detachEvent?L.detachEvent(Ce(B),G):L.addListener&&L.removeListener&&L.removeListener(G),(B=ze(L))?(z(B,m),B.h==0&&(B.src=null,L[X]=null)):Ne(m)}}}function Ce(m){return m in he?he[m]:he[m]="on"+m}function He(m,L){if(m.da)m=!0;else{L=new Le(L,this);var B=m.listener,G=m.ha||m.src;m.fa&&me(m),m=B.call(G,L)}return m}function ze(m){return m=m[X],m instanceof be?m:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function rt(m){return typeof m=="function"?m:(m[Ze]||(m[Ze]=function(L){return m.handleEvent(L)}),m[Ze])}function at(){le.call(this),this.i=new be(this),this.M=this,this.F=null}g(at,le),at.prototype[re]=!0,at.prototype.removeEventListener=function(m,L,B,G){Re(this,m,L,B,G)};function dt(m,L){var B,G=m.F;if(G)for(B=[];G;G=G.F)B.push(G);if(m=m.M,G=L.type||L,typeof L=="string")L=new pe(L,m);else if(L instanceof pe)L.target=L.target||m;else{var ge=L;L=new pe(G,m),E(L,ge)}if(ge=!0,B)for(var Ae=B.length-1;0<=Ae;Ae--){var Ge=L.g=B[Ae];ge=wt(Ge,G,!0,L)&&ge}if(Ge=L.g=m,ge=wt(Ge,G,!0,L)&&ge,ge=wt(Ge,G,!1,L)&&ge,B)for(Ae=0;Ae<B.length;Ae++)Ge=L.g=B[Ae],ge=wt(Ge,G,!1,L)&&ge}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var m=this.i,L;for(L in m.g){for(var B=m.g[L],G=0;G<B.length;G++)Ne(B[G]);delete m.g[L],m.h--}}this.F=null},at.prototype.K=function(m,L,B,G){return this.i.add(String(m),L,!1,B,G)},at.prototype.L=function(m,L,B,G){return this.i.add(String(m),L,!0,B,G)};function wt(m,L,B,G){if(L=m.i.g[String(L)],!L)return!0;L=L.concat();for(var ge=!0,Ae=0;Ae<L.length;++Ae){var Ge=L[Ae];if(Ge&&!Ge.da&&Ge.capture==B){var Gt=Ge.listener,ri=Ge.ha||Ge.src;Ge.fa&&z(m.i,Ge),ge=Gt.call(ri,G)!==!1&&ge}}return ge&&!G.defaultPrevented}function Fn(m,L,B){if(typeof m=="function")B&&(m=h(m,B));else if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:o.setTimeout(m,L||0)}function En(m){m.g=Fn(()=>{m.g=null,m.i&&(m.i=!1,En(m))},m.l);const L=m.h;m.h=null,m.m.apply(null,L)}class Xn extends le{constructor(L,B){super(),this.m=L,this.l=B,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:En(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bt(m){le.call(this),this.h=m,this.g={}}g(bt,le);var Ps=[];function Ds(m){U(m.g,function(L,B){this.g.hasOwnProperty(B)&&me(L)},m),m.g={}}bt.prototype.N=function(){bt.aa.N.call(this),Ds(this)},bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=o.JSON.stringify,mi=o.JSON.parse,Rs=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function ho(){}ho.prototype.h=null;function fo(m){return m.h||(m.h=m.i())}function Il(){}var mo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $(){pe.call(this,"d")}g($,pe);function q(){pe.call(this,"c")}g(q,pe);var oe={},Ee=null;function je(){return Ee=Ee||new at}oe.La="serverreachability";function ht(m){pe.call(this,oe.La,m)}g(ht,pe);function jt(m){const L=je();dt(L,new ht(L))}oe.STAT_EVENT="statevent";function ii(m,L){pe.call(this,oe.STAT_EVENT,m),this.stat=L}g(ii,pe);function on(m){const L=je();dt(L,new ii(L,m))}oe.Ma="timingevent";function Ni(m,L){pe.call(this,oe.Ma,m),this.size=L}g(Ni,pe);function pi(m,L){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},L)}function Ii(){this.g=!0}Ii.prototype.xa=function(){this.g=!1};function fs(m,L,B,G,ge,Ae){m.info(function(){if(m.g)if(Ae)for(var Ge="",Gt=Ae.split("&"),ri=0;ri<Gt.length;ri++){var Ft=Gt[ri].split("=");if(1<Ft.length){var gi=Ft[0];Ft=Ft[1];var Qn=gi.split("_");Ge=2<=Qn.length&&Qn[1]=="type"?Ge+(gi+"="+Ft+"&"):Ge+(gi+"=redacted&")}}else Ge=null;else Ge=Ae;return"XMLHTTP REQ ("+G+") [attempt "+ge+"]: "+L+`
`+B+`
`+Ge})}function Cn(m,L,B,G,ge,Ae,Ge){m.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ge+"]: "+L+`
`+B+`
`+Ae+" "+Ge})}function si(m,L,B,G){m.info(function(){return"XMLHTTP TEXT ("+L+"): "+Zs(m,B)+(G?" "+G:"")})}function fr(m,L){m.info(function(){return"TIMEOUT: "+L})}Ii.prototype.info=function(){};function Zs(m,L){if(!m.g)return L;if(!L)return null;try{var B=JSON.parse(L);if(B){for(m=0;m<B.length;m++)if(Array.isArray(B[m])){var G=B[m];if(!(2>G.length)){var ge=G[1];if(Array.isArray(ge)&&!(1>ge.length)){var Ae=ge[0];if(Ae!="noop"&&Ae!="stop"&&Ae!="close")for(var Ge=1;Ge<ge.length;Ge++)ge[Ge]=""}}}}return Bn(B)}catch{return L}}var Wt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ur={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pt;function Aa(){}g(Aa,ho),Aa.prototype.g=function(){return new XMLHttpRequest},Aa.prototype.i=function(){return{}},Pt=new Aa;function Ls(m,L,B,G){this.j=m,this.i=L,this.l=B,this.R=G||1,this.U=new bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Al}function Al(){this.i=null,this.g="",this.h=!1}var dp={},mr={};function nn(m,L,B){m.L=1,m.v=rc(ms(L)),m.m=B,m.P=!0,dh(m,null)}function dh(m,L){m.F=Date.now(),Zu(m),m.A=ms(m.v);var B=m.A,G=m.R;Array.isArray(G)||(G=[String(G)]),gp(B.i,"t",G),m.C=0,B=m.j.J,m.h=new Al,m.g=qr(m.j,B?L:null,!m.m),0<m.O&&(m.M=new Xn(h(m.Y,m,m.g),m.O)),L=m.U,B=m.g,G=m.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(Ps[0]=ge.toString()),ge=Ps);for(var Ae=0;Ae<ge.length;Ae++){var Ge=de(B,ge[Ae],G||L.handleEvent,!1,L.h||L);if(!Ge)break;L.g[Ge.key]=Ge}L=m.H?S(m.H):{},m.m?(m.u||(m.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,L)):(m.u="GET",m.g.ea(m.A,m.u,null,L)),jt(),fs(m.i,m.u,m.A,m.l,m.R,m.m)}Ls.prototype.ca=function(m){m=m.target;const L=this.M;L&&ps(m)==3?L.j():this.Y(m)},Ls.prototype.Y=function(m){try{if(m==this.g)e:{const Qn=ps(this.g);var L=this.g.Ba();const So=this.g.Z();if(!(3>Qn)&&(Qn!=3||this.g&&(this.h.h||this.g.oa()||Tp(this.g)))){this.J||Qn!=4||L==7||(L==8||0>=So?jt(3):jt(2)),ec(this);var B=this.g.Z();this.X=B;t:if(kl(this)){var G=Tp(this.g);m="";var ge=G.length,Ae=ps(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),ka(this);var Ge="";break t}this.h.i=new o.TextDecoder}for(L=0;L<ge;L++)this.h.h=!0,m+=this.h.i.decode(G[L],{stream:!(Ae&&L==ge-1)});G.length=0,this.h.g+=m,this.C=0,Ge=this.h.g}else Ge=this.g.oa();if(this.o=B==200,Cn(this.i,this.u,this.A,this.l,this.R,Qn,B),this.o){if(this.T&&!this.K){t:{if(this.g){var Gt,ri=this.g;if((Gt=ri.g?ri.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Gt)){var Ft=Gt;break t}}Ft=null}if(B=Ft)si(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tc(this,B);else{this.o=!1,this.s=3,on(12),pr(this),ka(this);break e}}if(this.P){B=!0;let vs;for(;!this.J&&this.C<Ge.length;)if(vs=D_(this,Ge),vs==mr){Qn==4&&(this.s=4,on(14),B=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(vs==dp){this.s=4,on(15),si(this.i,this.l,Ge,"[Invalid Chunk]"),B=!1;break}else si(this.i,this.l,vs,null),tc(this,vs);if(kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qn!=4||Ge.length!=0||this.h.h||(this.s=1,on(16),B=!1),this.o=this.o&&B,!B)si(this.i,this.l,Ge,"[Invalid Chunked Response]"),pr(this),ka(this);else if(0<Ge.length&&!this.W){this.W=!0;var gi=this.j;gi.g==this&&gi.ba&&!gi.M&&(gi.j.info("Great, no buffering proxy detected. Bytes received: "+Ge.length),Eh(gi),gi.M=!0,on(11))}}else si(this.i,this.l,Ge,null),tc(this,Ge);Qn==4&&pr(this),this.o&&!this.J&&(Qn==4?Ch(this.j,this):(this.o=!1,Zu(this)))}else U_(this.g),B==400&&0<Ge.indexOf("Unknown SID")?(this.s=3,on(12)):(this.s=0,on(13)),pr(this),ka(this)}}}catch{}finally{}};function kl(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function D_(m,L){var B=m.C,G=L.indexOf(`
`,B);return G==-1?mr:(B=Number(L.substring(B,G)),isNaN(B)?dp:(G+=1,G+B>L.length?mr:(L=L.slice(G,G+B),m.C=G+B,L)))}Ls.prototype.cancel=function(){this.J=!0,pr(this)};function Zu(m){m.S=Date.now()+m.I,hp(m,m.I)}function hp(m,L){if(m.B!=null)throw Error("WatchDog timer not null");m.B=pi(h(m.ba,m),L)}function ec(m){m.B&&(o.clearTimeout(m.B),m.B=null)}Ls.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(fr(this.i,this.A),this.L!=2&&(jt(),on(17)),pr(this),this.s=2,ka(this)):hp(this,this.S-m)};function ka(m){m.j.G==0||m.J||Ch(m.j,m)}function pr(m){ec(m);var L=m.M;L&&typeof L.ma=="function"&&L.ma(),m.M=null,Ds(m.U),m.g&&(L=m.g,m.g=null,L.abort(),L.ma())}function tc(m,L){try{var B=m.j;if(B.G!=0&&(B.g==m||nc(B.h,m))){if(!m.K&&nc(B.h,m)&&B.G==3){try{var G=B.Da.g.parse(L)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ge=G;if(ge[0]==0){e:if(!B.u){if(B.g)if(B.g.F+3e3<m.F)fc(B),La(B);else break e;Sh(B),on(18)}}else B.za=ge[1],0<B.za-B.T&&37500>ge[2]&&B.F&&B.v==0&&!B.C&&(B.C=pi(h(B.Za,B),6e3));if(1>=Dl(B.h)&&B.ca){try{B.ca()}catch{}B.ca=void 0}}else er(B,11)}else if((m.K||B.g==m)&&fc(B),!w(L))for(ge=B.Da.g.parse(L),L=0;L<ge.length;L++){let Ft=ge[L];if(B.T=Ft[0],Ft=Ft[1],B.G==2)if(Ft[0]=="c"){B.K=Ft[1],B.ia=Ft[2];const gi=Ft[3];gi!=null&&(B.la=gi,B.j.info("VER="+B.la));const Qn=Ft[4];Qn!=null&&(B.Aa=Qn,B.j.info("SVER="+B.Aa));const So=Ft[5];So!=null&&typeof So=="number"&&0<So&&(G=1.5*So,B.L=G,B.j.info("backChannelRequestTimeoutMs_="+G)),G=B;const vs=m.g;if(vs){const mc=vs.g?vs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mc){var Ae=G.h;Ae.g||mc.indexOf("spdy")==-1&&mc.indexOf("quic")==-1&&mc.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(Pa(Ae,Ae.h),Ae.h=null))}if(G.D){const Ih=vs.g?vs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ih&&(G.ya=Ih,Rt(G.I,G.D,Ih))}}B.G=3,B.l&&B.l.ua(),B.ba&&(B.R=Date.now()-m.F,B.j.info("Handshake RTT: "+B.R+"ms")),G=B;var Ge=m;if(G.qa=Fl(G,G.J?G.ia:null,G.W),Ge.K){po(G.h,Ge);var Gt=Ge,ri=G.L;ri&&(Gt.I=ri),Gt.B&&(ec(Gt),Zu(Gt)),G.g=Ge}else Th(G);0<B.i.length&&jr(B)}else Ft[0]!="stop"&&Ft[0]!="close"||er(B,7);else B.G==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?er(B,7):bh(B):Ft[0]!="noop"&&B.l&&B.l.ta(Ft),B.v=0)}}jt(4)}catch{}}var R_=class{constructor(m,L){this.g=m,this.map=L}};function fp(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Dl(m){return m.h?1:m.g?m.g.size:0}function nc(m,L){return m.h?m.h==L:m.g?m.g.has(L):!1}function Pa(m,L){m.g?m.g.add(L):m.h=L}function po(m,L){m.h&&m.h==L?m.h=null:m.g&&m.g.has(L)&&m.g.delete(L)}fp.prototype.cancel=function(){if(this.i=go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function go(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let L=m.i;for(const B of m.g.values())L=L.concat(B.D);return L}return v(m.i)}function Rl(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(l(m)){for(var L=[],B=m.length,G=0;G<B;G++)L.push(m[G]);return L}L=[],B=0;for(G in m)L[B++]=m[G];return L}function L_(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(l(m)||typeof m=="string"){var L=[];m=m.length;for(var B=0;B<m;B++)L.push(B);return L}L=[],B=0;for(const G in m)L[B++]=G;return L}}}function hh(m,L){if(m.forEach&&typeof m.forEach=="function")m.forEach(L,void 0);else if(l(m)||typeof m=="string")Array.prototype.forEach.call(m,L,void 0);else for(var B=L_(m),G=Rl(m),ge=G.length,Ae=0;Ae<ge;Ae++)L.call(void 0,G[Ae],B&&B[Ae],m)}var mp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function O_(m,L){if(m){m=m.split("&");for(var B=0;B<m.length;B++){var G=m[B].indexOf("="),ge=null;if(0<=G){var Ae=m[B].substring(0,G);ge=m[B].substring(G+1)}else Ae=m[B];L(Ae,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function Mi(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Mi){this.h=m.h,ic(this,m.j),this.o=m.o,this.g=m.g,vo(this,m.s),this.l=m.l;var L=m.i,B=new Ll;B.i=L.i,L.g&&(B.g=new Map(L.g),B.h=L.h),sc(this,B),this.m=m.m}else m&&(L=String(m).match(mp))?(this.h=!1,ic(this,L[1]||"",!0),this.o=$r(L[2]||""),this.g=$r(L[3]||"",!0),vo(this,L[4]),this.l=$r(L[5]||"",!0),sc(this,L[6]||"",!0),this.m=$r(L[7]||"")):(this.h=!1,this.i=new Ll(null,this.h))}Mi.prototype.toString=function(){var m=[],L=this.j;L&&m.push(gr(L,Da,!0),":");var B=this.g;return(B||L=="file")&&(m.push("//"),(L=this.o)&&m.push(gr(L,Da,!0),"@"),m.push(encodeURIComponent(String(B)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.s,B!=null&&m.push(":",String(B))),(B=this.l)&&(this.g&&B.charAt(0)!="/"&&m.push("/"),m.push(gr(B,B.charAt(0)=="/"?pp:fh,!0))),(B=this.i.toString())&&m.push("?",B),(B=this.m)&&m.push("#",gr(B,N_)),m.join("")};function ms(m){return new Mi(m)}function ic(m,L,B){m.j=B?$r(L,!0):L,m.j&&(m.j=m.j.replace(/:$/,""))}function vo(m,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);m.s=L}else m.s=null}function sc(m,L,B){L instanceof Ll?(m.i=L,M_(m.i,m.h)):(B||(L=gr(L,mh)),m.i=new Ll(L,m.h))}function Rt(m,L,B){m.i.set(L,B)}function rc(m){return Rt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function $r(m,L){return m?L?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function gr(m,L,B){return typeof m=="string"?(m=encodeURI(m).replace(L,ac),B&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function ac(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Da=/[#\/\?@]/g,fh=/[#\?:]/g,pp=/[#\?]/g,mh=/[#\?@]/g,N_=/#/g;function Ll(m,L){this.h=this.g=null,this.i=m||null,this.j=!!L}function Hr(m){m.g||(m.g=new Map,m.h=0,m.i&&O_(m.i,function(L,B){m.add(decodeURIComponent(L.replace(/\+/g," ")),B)}))}t=Ll.prototype,t.add=function(m,L){Hr(this),this.i=null,m=Ra(this,m);var B=this.g.get(m);return B||this.g.set(m,B=[]),B.push(L),this.h+=1,this};function Ol(m,L){Hr(m),L=Ra(m,L),m.g.has(L)&&(m.i=null,m.h-=m.g.get(L).length,m.g.delete(L))}function ph(m,L){return Hr(m),L=Ra(m,L),m.g.has(L)}t.forEach=function(m,L){Hr(this),this.g.forEach(function(B,G){B.forEach(function(ge){m.call(L,ge,G,this)},this)},this)},t.na=function(){Hr(this);const m=Array.from(this.g.values()),L=Array.from(this.g.keys()),B=[];for(let G=0;G<L.length;G++){const ge=m[G];for(let Ae=0;Ae<ge.length;Ae++)B.push(L[G])}return B},t.V=function(m){Hr(this);let L=[];if(typeof m=="string")ph(this,m)&&(L=L.concat(this.g.get(Ra(this,m))));else{m=Array.from(this.g.values());for(let B=0;B<m.length;B++)L=L.concat(m[B])}return L},t.set=function(m,L){return Hr(this),this.i=null,m=Ra(this,m),ph(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[L]),this.h+=1,this},t.get=function(m,L){return m?(m=this.V(m),0<m.length?String(m[0]):L):L};function gp(m,L,B){Ol(m,L),0<B.length&&(m.i=null,m.g.set(Ra(m,L),v(B)),m.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],L=Array.from(this.g.keys());for(var B=0;B<L.length;B++){var G=L[B];const Ae=encodeURIComponent(String(G)),Ge=this.V(G);for(G=0;G<Ge.length;G++){var ge=Ae;Ge[G]!==""&&(ge+="="+encodeURIComponent(String(Ge[G]))),m.push(ge)}}return this.i=m.join("&")};function Ra(m,L){return L=String(L),m.j&&(L=L.toLowerCase()),L}function M_(m,L){L&&!m.j&&(Hr(m),m.i=null,m.g.forEach(function(B,G){var ge=G.toLowerCase();G!=ge&&(Ol(this,G),gp(this,ge,B))},m)),m.j=L}function vp(m,L){const B=new Ii;if(o.Image){const G=new Image;G.onload=f(Os,B,"TestLoadImage: loaded",!0,L,G),G.onerror=f(Os,B,"TestLoadImage: error",!1,L,G),G.onabort=f(Os,B,"TestLoadImage: abort",!1,L,G),G.ontimeout=f(Os,B,"TestLoadImage: timeout",!1,L,G),o.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=m}else L(!1)}function V_(m,L){const B=new Ii,G=new AbortController,ge=setTimeout(()=>{G.abort(),Os(B,"TestPingServer: timeout",!1,L)},1e4);fetch(m,{signal:G.signal}).then(Ae=>{clearTimeout(ge),Ae.ok?Os(B,"TestPingServer: ok",!0,L):Os(B,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(ge),Os(B,"TestPingServer: error",!1,L)})}function Os(m,L,B,G,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),G(B)}catch{}}function oc(){this.g=new Rs}function yp(m,L,B){const G=B||"";try{hh(m,function(ge,Ae){let Ge=ge;u(ge)&&(Ge=Bn(ge)),L.push(G+Ae+"="+encodeURIComponent(Ge))})}catch(ge){throw L.push(G+"type="+encodeURIComponent("_badmap")),ge}}function lc(m){this.l=m.Ub||null,this.j=m.eb||!1}g(lc,ho),lc.prototype.g=function(){return new uc(this.l,this.j)},lc.prototype.i=function(m){return function(){return m}}({});function uc(m,L){at.call(this),this.D=m,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(uc,at),t=uc.prototype,t.open=function(m,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=L,this.readyState=1,Nl(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(L.body=m),(this.D||o).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Nl(this)),this.g&&(this.readyState=3,Nl(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gh(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function gh(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var L=m.value?m.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!m.done}))&&(this.response=this.responseText+=L)}m.done?yo(this):Nl(this),this.readyState==3&&gh(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,yo(this))},t.Qa=function(m){this.g&&(this.response=m,yo(this))},t.ga=function(){this.g&&yo(this)};function yo(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Nl(m)}t.setRequestHeader=function(m,L){this.u.append(m,L)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],L=this.h.entries();for(var B=L.next();!B.done;)B=B.value,m.push(B[0]+": "+B[1]),B=L.next();return m.join(`\r
`)};function Nl(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function vh(m){let L="";return U(m,function(B,G){L+=G,L+=":",L+=B,L+=`\r
`}),L}function yh(m,L,B){e:{for(G in B){var G=!1;break e}G=!0}G||(B=vh(B),typeof m=="string"?B!=null&&encodeURIComponent(String(B)):Rt(m,L,B))}function wn(m){at.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(wn,at);var F_=/^https?$/i,B_=["POST","PUT"];t=wn.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,L,B,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);L=L?L.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pt.g(),this.v=this.o?fo(this.o):fo(Pt),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(L,String(m),!0),this.B=!1}catch(Ae){_p(this,Ae);return}if(m=B||"",B=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ge in G)B.set(ge,G[ge]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const Ae of G.keys())B.set(Ae,G.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(B.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),ge=o.FormData&&m instanceof o.FormData,!(0<=Array.prototype.indexOf.call(B_,L,void 0))||G||ge||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,Ge]of B)this.g.setRequestHeader(Ae,Ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_h(this),this.u=!0,this.g.send(m),this.u=!1}catch(Ae){_p(this,Ae)}};function _p(m,L){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=L,m.m=5,bp(m),dc(m)}function bp(m){m.A||(m.A=!0,dt(m,"complete"),dt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,dt(this,"complete"),dt(this,"abort"),dc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dc(this,!0)),wn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cc(this):this.bb())},t.bb=function(){cc(this)};function cc(m){if(m.h&&typeof a<"u"&&(!m.v[1]||ps(m)!=4||m.Z()!=2)){if(m.u&&ps(m)==4)Fn(m.Ea,0,m);else if(dt(m,"readystatechange"),ps(m)==4){m.h=!1;try{const Ge=m.Z();e:switch(Ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var B;if(!(B=L)){var G;if(G=Ge===0){var ge=String(m.D).match(mp)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),G=!F_.test(ge?ge.toLowerCase():"")}B=G}if(B)dt(m,"complete"),dt(m,"success");else{m.m=6;try{var Ae=2<ps(m)?m.g.statusText:""}catch{Ae=""}m.l=Ae+" ["+m.Z()+"]",bp(m)}}finally{dc(m)}}}}function dc(m,L){if(m.g){_h(m);const B=m.g,G=m.v[0]?()=>{}:null;m.g=null,m.v=null,L||dt(m,"ready");try{B.onreadystatechange=G}catch{}}}function _h(m){m.I&&(o.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function ps(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<ps(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var L=this.g.responseText;return m&&L.indexOf(m)==0&&(L=L.substring(m.length)),mi(L)}};function Tp(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function U_(m){const L={};m=(m.g&&2<=ps(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<m.length;G++){if(w(m[G]))continue;var B=A(m[G]);const ge=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const Ae=L[ge]||[];L[ge]=Ae,Ae.push(B)}D(L,function(G){return G.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ml(m,L,B){return B&&B.internalChannelParams&&B.internalChannelParams[m]||L}function Sp(m){this.Aa=0,this.i=[],this.j=new Ii,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ml("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ml("baseRetryDelayMs",5e3,m),this.cb=Ml("retryDelaySeedMs",1e4,m),this.Wa=Ml("forwardChannelMaxRetries",2,m),this.wa=Ml("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new fp(m&&m.concurrentRequestLimit),this.Da=new oc,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sp.prototype,t.la=8,t.G=1,t.connect=function(m,L,B,G){on(0),this.W=m,this.H=L||{},B&&G!==void 0&&(this.H.OSID=B,this.H.OAID=G),this.F=this.X,this.I=Fl(this,null,this.W),jr(this)};function bh(m){if(_o(m),m.G==3){var L=m.U++,B=ms(m.I);if(Rt(B,"SID",m.K),Rt(B,"RID",L),Rt(B,"TYPE","terminate"),ts(m,B),L=new Ls(m,m.j,L),L.L=2,L.v=rc(ms(B)),B=!1,o.navigator&&o.navigator.sendBeacon)try{B=o.navigator.sendBeacon(L.v.toString(),"")}catch{}!B&&o.Image&&(new Image().src=L.v,B=!0),B||(L.g=qr(L.j,null),L.g.ea(L.v)),L.F=Date.now(),Zu(L)}bo(m)}function La(m){m.g&&(Eh(m),m.g.cancel(),m.g=null)}function _o(m){La(m),m.u&&(o.clearTimeout(m.u),m.u=null),fc(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&o.clearTimeout(m.s),m.s=null)}function jr(m){if(!Pl(m.h)&&!m.s){m.s=!0;var L=m.Ga;Z||Q(),ne||(Z(),ne=!0),ee.add(L,m),m.B=0}}function hc(m,L){return Dl(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=L.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=pi(h(m.Ga,m,L),wh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ge=new Ls(this,this.j,m);let Ae=this.o;if(this.S&&(Ae?(Ae=S(Ae),E(Ae,this.S)):Ae=this.S),this.m!==null||this.O||(ge.H=Ae,Ae=null),this.P)e:{for(var L=0,B=0;B<this.i.length;B++){t:{var G=this.i[B];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(L+=G,4096<L){L=B;break e}if(L===4096||B===this.i.length-1){L=B+1;break e}}L=1e3}else L=1e3;L=Vl(this,ge,L),B=ms(this.I),Rt(B,"RID",m),Rt(B,"CVER",22),this.D&&Rt(B,"X-HTTP-Session-Id",this.D),ts(this,B),Ae&&(this.O?L="headers="+encodeURIComponent(String(vh(Ae)))+"&"+L:this.m&&yh(B,this.m,Ae)),Pa(this.h,ge),this.Ua&&Rt(B,"TYPE","init"),this.P?(Rt(B,"$req",L),Rt(B,"SID","null"),ge.T=!0,nn(ge,B,null)):nn(ge,B,L),this.G=2}}else this.G==3&&(m?gs(this,m):this.i.length==0||Pl(this.h)||gs(this))};function gs(m,L){var B;L?B=L.l:B=m.U++;const G=ms(m.I);Rt(G,"SID",m.K),Rt(G,"RID",B),Rt(G,"AID",m.T),ts(m,G),m.m&&m.o&&yh(G,m.m,m.o),B=new Ls(m,m.j,B,m.B+1),m.m===null&&(B.H=m.o),L&&(m.i=L.D.concat(m.i)),L=Vl(m,B,1e3),B.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Pa(m.h,B),nn(B,G,L)}function ts(m,L){m.H&&U(m.H,function(B,G){Rt(L,G,B)}),m.l&&hh({},function(B,G){Rt(L,G,B)})}function Vl(m,L,B){B=Math.min(m.i.length,B);var G=m.l?h(m.l.Na,m.l,m):null;e:{var ge=m.i;let Ae=-1;for(;;){const Ge=["count="+B];Ae==-1?0<B?(Ae=ge[0].g,Ge.push("ofs="+Ae)):Ae=0:Ge.push("ofs="+Ae);let Gt=!0;for(let ri=0;ri<B;ri++){let Ft=ge[ri].g;const gi=ge[ri].map;if(Ft-=Ae,0>Ft)Ae=Math.max(0,ge[ri].g-100),Gt=!1;else try{yp(gi,Ge,"req"+Ft+"_")}catch{G&&G(gi)}}if(Gt){G=Ge.join("&");break e}}}return m=m.i.splice(0,B),L.D=m,G}function Th(m){if(!m.g&&!m.u){m.Y=1;var L=m.Fa;Z||Q(),ne||(Z(),ne=!0),ee.add(L,m),m.v=0}}function Sh(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=pi(h(m.Fa,m),wh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,Ep(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=pi(h(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,on(10),La(this),Ep(this))};function Eh(m){m.A!=null&&(o.clearTimeout(m.A),m.A=null)}function Ep(m){m.g=new Ls(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var L=ms(m.qa);Rt(L,"RID","rpc"),Rt(L,"SID",m.K),Rt(L,"AID",m.T),Rt(L,"CI",m.F?"0":"1"),!m.F&&m.ja&&Rt(L,"TO",m.ja),Rt(L,"TYPE","xmlhttp"),ts(m,L),m.m&&m.o&&yh(L,m.m,m.o),m.L&&(m.g.I=m.L);var B=m.g;m=m.ia,B.L=1,B.v=rc(ms(L)),B.m=null,B.P=!0,dh(B,m)}t.Za=function(){this.C!=null&&(this.C=null,La(this),Sh(this),on(19))};function fc(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function Ch(m,L){var B=null;if(m.g==L){fc(m),Eh(m),m.g=null;var G=2}else if(nc(m.h,L))B=L.D,po(m.h,L),G=1;else return;if(m.G!=0){if(L.o)if(G==1){B=L.m?L.m.length:0,L=Date.now()-L.F;var ge=m.B;G=je(),dt(G,new Ni(G,B)),jr(m)}else Th(m);else if(ge=L.s,ge==3||ge==0&&0<L.X||!(G==1&&hc(m,L)||G==2&&Sh(m)))switch(B&&0<B.length&&(L=m.h,L.i=L.i.concat(B)),ge){case 1:er(m,5);break;case 4:er(m,10);break;case 3:er(m,6);break;default:er(m,2)}}}function wh(m,L){let B=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(B*=2),B*L}function er(m,L){if(m.j.info("Error code "+L),L==2){var B=h(m.fb,m),G=m.Xa;const ge=!G;G=new Mi(G||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ic(G,"https"),rc(G),ge?vp(G.toString(),B):V_(G.toString(),B)}else on(2);m.G=0,m.l&&m.l.sa(L),bo(m),_o(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function bo(m){if(m.G=0,m.ka=[],m.l){const L=go(m.h);(L.length!=0||m.i.length!=0)&&(b(m.ka,L),b(m.ka,m.i),m.h.i.length=0,v(m.i),m.i.length=0),m.l.ra()}}function Fl(m,L,B){var G=B instanceof Mi?ms(B):new Mi(B);if(G.g!="")L&&(G.g=L+"."+G.g),vo(G,G.s);else{var ge=o.location;G=ge.protocol,L=L?L+"."+ge.hostname:ge.hostname,ge=+ge.port;var Ae=new Mi(null);G&&ic(Ae,G),L&&(Ae.g=L),ge&&vo(Ae,ge),B&&(Ae.l=B),G=Ae}return B=m.D,L=m.ya,B&&L&&Rt(G,B,L),Rt(G,"VER",m.la),ts(m,G),G}function qr(m,L,B){if(L&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=m.Ca&&!m.pa?new wn(new lc({eb:B})):new wn(m.pa),L.Ha(m.J),L}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cp(){}t=Cp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bl(){}Bl.prototype.g=function(m,L){return new Vi(m,L)};function Vi(m,L){at.call(this),this.g=new Sp(L),this.l=m,this.h=L&&L.messageUrlParams||null,m=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(m?m["X-WebChannel-Content-Type"]=L.messageContentType:m={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(m?m["X-WebChannel-Client-Profile"]=L.va:m={"X-WebChannel-Client-Profile":L.va}),this.g.S=m,(m=L&&L.Sb)&&!w(m)&&(this.g.m=m),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!w(L)&&(this.g.D=L,m=this.h,m!==null&&L in m&&(m=this.h,L in m&&delete m[L])),this.j=new To(this)}g(Vi,at),Vi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vi.prototype.close=function(){bh(this.g)},Vi.prototype.o=function(m){var L=this.g;if(typeof m=="string"){var B={};B.__data__=m,m=B}else this.u&&(B={},B.__data__=Bn(m),m=B);L.i.push(new R_(L.Ya++,m)),L.G==3&&jr(L)},Vi.prototype.N=function(){this.g.l=null,delete this.j,bh(this.g),delete this.g,Vi.aa.N.call(this)};function xh(m){$.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var L=m.__sm__;if(L){e:{for(const B in L){m=B;break e}m=void 0}(this.i=m)&&(m=this.i,L=L!==null&&m in L?L[m]:void 0),this.data=L}else this.data=m}g(xh,$);function wp(){q.call(this),this.status=1}g(wp,q);function To(m){this.g=m}g(To,Cp),To.prototype.ua=function(){dt(this.g,"a")},To.prototype.ta=function(m){dt(this.g,new xh(m))},To.prototype.sa=function(m){dt(this.g,new wp)},To.prototype.ra=function(){dt(this.g,"b")},Bl.prototype.createWebChannel=Bl.prototype.g,Vi.prototype.send=Vi.prototype.o,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,HO=function(){return new Bl},$O=function(){return je()},UO=oe,oT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wt.NO_ERROR=0,Wt.TIMEOUT=8,Wt.HTTP_ERROR=6,vg=Wt,Ur.COMPLETE="complete",BO=Ur,Il.EventType=mo,mo.OPEN="a",mo.CLOSE="b",mo.ERROR="c",mo.MESSAGE="d",at.prototype.listen=at.prototype.K,tf=Il,wn.prototype.listenOnce=wn.prototype.L,wn.prototype.getLastError=wn.prototype.Ka,wn.prototype.getLastErrorCode=wn.prototype.Ba,wn.prototype.getStatus=wn.prototype.Z,wn.prototype.getResponseJson=wn.prototype.Oa,wn.prototype.getResponseText=wn.prototype.oa,wn.prototype.send=wn.prototype.ea,wn.prototype.setWithCredentials=wn.prototype.Ha,FO=wn}).apply(typeof Hp<"u"?Hp:typeof self<"u"?self:typeof window<"u"?window:{});const $2="@firebase/firestore",H2="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bi.UNAUTHENTICATED=new Bi(null),Bi.GOOGLE_CREDENTIALS=new Bi("google-credentials-uid"),Bi.FIRST_PARTY=new Bi("first-party-uid"),Bi.MOCK_USER=new Bi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new xm("@firebase/firestore");function kc(){return Iu.logLevel}function tt(t,...e){if(Iu.logLevel<=Lt.DEBUG){const n=e.map(Y1);Iu.debug(`Firestore (${Kd}): ${t}`,...n)}}function Ja(t,...e){if(Iu.logLevel<=Lt.ERROR){const n=e.map(Y1);Iu.error(`Firestore (${Kd}): ${t}`,...n)}}function fd(t,...e){if(Iu.logLevel<=Lt.WARN){const n=e.map(Y1);Iu.warn(`Firestore (${Kd}): ${t}`,...n)}}function Y1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,jO(t,i,n)}function jO(t,e,n){let i=`FIRESTORE (${Kd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ja(i),new Error(i)}function Zt(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||jO(e,s,i)}function Et(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends Sa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bi.UNAUTHENTICATED))}shutdown(){}}class iW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sW{constructor(e){this.t=e,this.currentUser=Bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Zt(this.o===void 0,42304);let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new lu;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new lu,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new lu)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Zt(typeof i.accessToken=="string",31837,{l:i}),new qO(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string",2055,{h:e}),new Bi(e)}}class rW{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Bi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aW{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new rW(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oW{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ts(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Zt(this.o===void 0,3512);const i=r=>{r.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,tt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new j2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Zt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new j2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=lW(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function At(t,e){return t<e?-1:t>e?1:0}function lT(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return At(i,s);{const r=zO(),a=uW(r.encode(q2(t,n)),r.encode(q2(e,n)));return a!==0?a:At(i,s)}}n+=i>65535?2:1}return At(t.length,e.length)}function q2(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function uW(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return At(t[n],e[n]);return At(t.length,e.length)}function md(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=-62135596800,W2=1e6;class li{static now(){return li.fromMillis(Date.now())}static fromDate(e){return li.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*W2);return new li(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new st(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new st(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<z2)throw new st(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W2}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-z2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new li(0,0))}static max(){return new Tt(new li(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="__name__";class Xr{constructor(e,n,i){n===void 0?n=0:n>e.length&&pt(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&pt(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=Xr.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return At(e.length,n.length)}static compareSegments(e,n){const i=Xr.isNumericId(e),s=Xr.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Xr.extractNumericId(e).compare(Xr.extractNumericId(n)):lT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jo.fromString(e.substring(4,e.length-2))}}class vn extends Xr{construct(e,n,i){return new vn(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new st(Be.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new vn(n)}static emptyPath(){return new vn([])}}const cW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Di extends Xr{construct(e,n,i){return new Di(e,n,i)}static isValidIdentifier(e){return cW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Di.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G2}static keyField(){return new Di([G2])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new st(Be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new st(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new st(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(i+=o,s++):(r(),s++)}if(r(),a)throw new st(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Di(n)}static emptyPath(){return new Di([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(vn.fromString(e))}static fromName(e){return new ut(vn.fromString(e).popFirst(5))}static empty(){return new ut(vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new vn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=-1;function dW(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Tt.fromTimestamp(i===1e9?new li(n+1,0):new li(n,i));return new sl(s,ut.empty(),e)}function hW(t){return new sl(t.readTime,t.key,Kf)}class sl{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new sl(Tt.min(),ut.empty(),Kf)}static max(){return new sl(Tt.max(),ut.empty(),Kf)}}function fW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:At(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yd(t){if(t.code!==Be.FAILED_PRECONDITION||t.message!==mW)throw t;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Fe((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Fe?n:Fe.resolve(n)}catch(n){return Fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Fe.reject(n)}static resolve(e){return new Fe((n,i)=>{n(e)})}static reject(e){return new Fe((n,i)=>{i(e)})}static waitFor(e){return new Fe((n,i)=>{let s=0,r=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++r,a&&r===s&&n()},l=>i(l))}),a=!0,r===s&&n()})}static or(e){let n=Fe.resolve(!1);for(const i of e)n=n.next(s=>s?Fe.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new Fe((i,s)=>{const r=e.length,a=new Array(r);let o=0;for(let l=0;l<r;l++){const u=l;n(e[u]).next(c=>{a[u]=c,++o,o===r&&i(a)},c=>s(c))}})}static doWhile(e,n){return new Fe((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function gW(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}gy.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=-1;function vy(t){return t==null}function sv(t){return t===0&&1/t==-1/0}function vW(t){return typeof t=="number"&&Number.isInteger(t)&&!sv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="";function yW(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=K2(e)),e=_W(t.get(n),e);return K2(e)}function _W(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case GO:n+="";break;default:n+=r}}return n}function K2(t){return t+GO+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){this.comparator=e,this.root=n||ki.EMPTY}insert(e,n){return new Nn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ki.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jp(this.root,e,this.comparator,!1)}getReverseIterator(){return new jp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jp(this.root,e,this.comparator,!0)}}class jp{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ki{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??ki.RED,this.left=s??ki.EMPTY,this.right=r??ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new ki(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ki.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pt(27949);return e+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1;ki.EMPTY=new class{constructor(){this.size=0}get key(){throw pt(57766)}get value(){throw pt(16141)}get color(){throw pt(16727)}get left(){throw pt(29726)}get right(){throw pt(36894)}copy(e,n,i,s,r){return this}insert(e,n,i){return new ki(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new X2(this.data.getIterator())}getIteratorFrom(e){return new X2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ui)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ui(this.comparator);return n.data=e,n}}class X2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.fields=e,e.sort(Di.comparator)}static empty(){return new $s([])}unionWith(e){let n=new ui(Di.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new $s(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return md(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new YO("Invalid base64 string: "+r):r}}(e);return new Ri(n)}static fromUint8Array(e){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(e);return new Ri(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ri.EMPTY_BYTE_STRING=new Ri("");const bW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rl(t){if(Zt(!!t,39018),typeof t=="string"){let e=0;const n=bW.exec(t);if(Zt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:jn(t.seconds),nanos:jn(t.nanos)}}function jn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function al(t){return typeof t=="string"?Ri.fromBase64String(t):Ri.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO="server_timestamp",QO="__type__",JO="__previous_value__",ZO="__local_write_time__";function Q1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[QO])===null||n===void 0?void 0:n.stringValue)===XO}function yy(t){const e=t.mapValue.fields[JO];return Q1(e)?yy(e):e}function Yf(t){const e=rl(t.mapValue.fields[ZO].timestampValue);return new li(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(e,n,i,s,r,a,o,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u}}const rv="(default)";class Xf{constructor(e,n){this.projectId=e,this.database=n||rv}static empty(){return new Xf("","")}get isDefaultDatabase(){return this.database===rv}isEqual(e){return e instanceof Xf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="__type__",SW="__max__",qp={mapValue:{}},tN="__vector__",av="value";function ol(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Q1(t)?4:CW(t)?9007199254740991:EW(t)?10:11:pt(28295,{value:t})}function ma(t,e){if(t===e)return!0;const n=ol(t);if(n!==ol(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yf(t).isEqual(Yf(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=rl(s.timestampValue),o=rl(r.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return al(s.bytesValue).isEqual(al(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return jn(s.geoPointValue.latitude)===jn(r.geoPointValue.latitude)&&jn(s.geoPointValue.longitude)===jn(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return jn(s.integerValue)===jn(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=jn(s.doubleValue),o=jn(r.doubleValue);return a===o?sv(a)===sv(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return md(t.arrayValue.values||[],e.arrayValue.values||[],ma);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},o=r.mapValue.fields||{};if(Y2(a)!==Y2(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!ma(a[l],o[l])))return!1;return!0}(t,e);default:return pt(52216,{left:t})}}function Qf(t,e){return(t.values||[]).find(n=>ma(n,e))!==void 0}function pd(t,e){if(t===e)return 0;const n=ol(t),i=ol(e);if(n!==i)return At(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return At(t.booleanValue,e.booleanValue);case 2:return function(r,a){const o=jn(r.integerValue||r.doubleValue),l=jn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return Q2(t.timestampValue,e.timestampValue);case 4:return Q2(Yf(t),Yf(e));case 5:return lT(t.stringValue,e.stringValue);case 6:return function(r,a){const o=al(r),l=al(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const o=r.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const c=At(o[u],l[u]);if(c!==0)return c}return At(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const o=At(jn(r.latitude),jn(a.latitude));return o!==0?o:At(jn(r.longitude),jn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return J2(t.arrayValue,e.arrayValue);case 10:return function(r,a){var o,l,u,c;const d=r.fields||{},h=a.fields||{},f=(o=d[av])===null||o===void 0?void 0:o.arrayValue,g=(l=h[av])===null||l===void 0?void 0:l.arrayValue,v=At(((u=f==null?void 0:f.values)===null||u===void 0?void 0:u.length)||0,((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0);return v!==0?v:J2(f,g)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===qp.mapValue&&a===qp.mapValue)return 0;if(r===qp.mapValue)return 1;if(a===qp.mapValue)return-1;const o=r.fields||{},l=Object.keys(o),u=a.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const h=lT(l[d],c[d]);if(h!==0)return h;const f=pd(o[l[d]],u[c[d]]);if(f!==0)return f}return At(l.length,c.length)}(t.mapValue,e.mapValue);default:throw pt(23264,{Pe:n})}}function Q2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return At(t,e);const n=rl(t),i=rl(e),s=At(n.seconds,i.seconds);return s!==0?s:At(n.nanos,i.nanos)}function J2(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=pd(n[s],i[s]);if(r)return r}return At(n.length,i.length)}function gd(t){return uT(t)}function uT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=rl(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return al(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ut.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=uT(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${uT(n.fields[a])}`;return s+"}"}(t.mapValue):pt(61005,{value:t})}function yg(t){switch(ol(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yy(t);return e?16+yg(e):16;case 5:return 2*t.stringValue.length;case 6:return al(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+yg(r),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return bl(i.fields,(r,a)=>{s+=r.length+yg(a)}),s}(t.mapValue);default:throw pt(13486,{value:t})}}function Z2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cT(t){return!!t&&"integerValue"in t}function J1(t){return!!t&&"arrayValue"in t}function eI(t){return!!t&&"nullValue"in t}function tI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _g(t){return!!t&&"mapValue"in t}function EW(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[eN])===null||n===void 0?void 0:n.stringValue)===tN}function Sf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bl(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Sf(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function CW(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===SW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!_g(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sf(n)}setAll(e){let n=Di.emptyPath(),i={},s=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=o.popLast()}a?i[o.lastSegment()]=Sf(a):s.push(o.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());_g(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ma(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];_g(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){bl(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Ss(Sf(this.value))}}function nN(t){const e=[];return bl(t.fields,(n,i)=>{const s=new Di([n]);if(_g(i)){const r=nN(i.mapValue).fields;if(r.length===0)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)}),new $s(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,i,s,r,a,o){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=o}static newInvalidDocument(e){return new qi(e,0,Tt.min(),Tt.min(),Tt.min(),Ss.empty(),0)}static newFoundDocument(e,n,i,s){return new qi(e,1,n,Tt.min(),i,s,0)}static newNoDocument(e,n){return new qi(e,2,n,Tt.min(),Tt.min(),Ss.empty(),0)}static newUnknownDocument(e,n){return new qi(e,3,n,Tt.min(),Tt.min(),Ss.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.position=e,this.inclusive=n}}function nI(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],a=t.position[s];if(r.field.isKeyField()?i=ut.comparator(ut.fromName(a.referenceValue),n.key):i=pd(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function iI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ma(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n="asc"){this.field=e,this.dir=n}}function wW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{}class ei extends iN{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new IW(e,n,i):n==="array-contains"?new PW(e,i):n==="in"?new DW(e,i):n==="not-in"?new RW(e,i):n==="array-contains-any"?new LW(e,i):new ei(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new AW(e,i):new kW(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pd(n,this.value)):n!==null&&ol(this.value)===ol(n)&&this.matchesComparison(pd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rr extends iN{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Rr(e,n)}matches(e){return sN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function sN(t){return t.op==="and"}function rN(t){return xW(t)&&sN(t)}function xW(t){for(const e of t.filters)if(e instanceof Rr)return!1;return!0}function dT(t){if(t instanceof ei)return t.field.canonicalString()+t.op.toString()+gd(t.value);if(rN(t))return t.filters.map(e=>dT(e)).join(",");{const e=t.filters.map(n=>dT(n)).join(",");return`${t.op}(${e})`}}function aN(t,e){return t instanceof ei?function(i,s){return s instanceof ei&&i.op===s.op&&i.field.isEqual(s.field)&&ma(i.value,s.value)}(t,e):t instanceof Rr?function(i,s){return s instanceof Rr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,o)=>r&&aN(a,s.filters[o]),!0):!1}(t,e):void pt(19439)}function oN(t){return t instanceof ei?function(n){return`${n.field.canonicalString()} ${n.op} ${gd(n.value)}`}(t):t instanceof Rr?function(n){return n.op.toString()+" {"+n.getFilters().map(oN).join(" ,")+"}"}(t):"Filter"}class IW extends ei{constructor(e,n,i){super(e,n,i),this.key=ut.fromName(i.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class AW extends ei{constructor(e,n){super(e,"in",n),this.keys=lN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kW extends ei{constructor(e,n){super(e,"not-in",n),this.keys=lN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ut.fromName(i.referenceValue))}class PW extends ei{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return J1(n)&&Qf(n.arrayValue,this.value)}}class DW extends ei{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qf(this.value.arrayValue,n)}}class RW extends ei{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qf(this.value.arrayValue,n)}}class LW extends ei{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!J1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Qf(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e,n=null,i=[],s=[],r=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=o,this.Ie=null}}function sI(t,e=null,n=[],i=[],s=null,r=null,a=null){return new OW(t,e,n,i,s,r,a)}function Z1(t){const e=Et(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>dT(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),vy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>gd(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>gd(i)).join(",")),e.Ie=n}return e.Ie}function eE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iI(t.startAt,e.startAt)&&iI(t.endAt,e.endAt)}function hT(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n=null,i=[],s=[],r=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=o,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function NW(t,e,n,i,s,r,a,o){return new Qd(t,e,n,i,s,r,a,o)}function tE(t){return new Qd(t)}function rI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uN(t){return t.collectionGroup!==null}function Ef(t){const e=Et(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ee.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new ui(Di.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ee.push(new Jf(r,i))}),n.has(Di.keyField().canonicalString())||e.Ee.push(new Jf(Di.keyField(),i))}return e.Ee}function da(t){const e=Et(t);return e.de||(e.de=MW(e,Ef(t))),e.de}function MW(t,e){if(t.limitType==="F")return sI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Jf(s.field,r)});const n=t.endAt?new ov(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ov(t.startAt.position,t.startAt.inclusive):null;return sI(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function fT(t,e){const n=t.filters.concat([e]);return new Qd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mT(t,e,n){return new Qd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _y(t,e){return eE(da(t),da(e))&&t.limitType===e.limitType}function cN(t){return`${Z1(da(t))}|lt:${t.limitType}`}function Pc(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>oN(s)).join(", ")}]`),vy(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>gd(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>gd(s)).join(",")),`Target(${i})`}(da(t))}; limitType=${t.limitType})`}function by(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):ut.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of Ef(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(a,o,l){const u=nI(a,o,l);return a.inclusive?u<=0:u<0}(i.startAt,Ef(i),s)||i.endAt&&!function(a,o,l){const u=nI(a,o,l);return a.inclusive?u>=0:u>0}(i.endAt,Ef(i),s))}(t,e)}function VW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dN(t){return(e,n)=>{let i=!1;for(const s of Ef(t)){const r=FW(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function FW(t,e,n){const i=t.field.isKeyField()?ut.comparator(e.key,n.key):function(r,a,o){const l=a.data.field(r),u=o.data.field(r);return l!==null&&u!==null?pd(l,u):pt(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return pt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){bl(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return KO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BW=new Nn(ut.comparator);function Za(){return BW}const hN=new Nn(ut.comparator);function nf(...t){let e=hN;for(const n of t)e=e.insert(n.key,n);return e}function fN(t){let e=hN;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function tu(){return Cf()}function mN(){return Cf()}function Cf(){return new Uu(t=>t.toString(),(t,e)=>t.isEqual(e))}const UW=new Nn(ut.comparator),$W=new ui(ut.comparator);function Nt(...t){let e=$W;for(const n of t)e=e.add(n);return e}const HW=new ui(At);function jW(){return HW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sv(e)?"-0":e}}function pN(t){return{integerValue:""+t}}function qW(t,e){return vW(e)?pN(e):nE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this._=void 0}}function zW(t,e,n){return t instanceof Zf?function(s,r){const a={fields:{[QO]:{stringValue:XO},[ZO]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Q1(r)&&(r=yy(r)),r&&(a.fields[JO]=r),{mapValue:a}}(n,e):t instanceof em?vN(t,e):t instanceof tm?yN(t,e):function(s,r){const a=gN(s,r),o=aI(a)+aI(s.Re);return cT(a)&&cT(s.Re)?pN(o):nE(s.serializer,o)}(t,e)}function WW(t,e,n){return t instanceof em?vN(t,e):t instanceof tm?yN(t,e):n}function gN(t,e){return t instanceof lv?function(i){return cT(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class Zf extends Ty{}class em extends Ty{constructor(e){super(),this.elements=e}}function vN(t,e){const n=_N(e);for(const i of t.elements)n.some(s=>ma(s,i))||n.push(i);return{arrayValue:{values:n}}}class tm extends Ty{constructor(e){super(),this.elements=e}}function yN(t,e){let n=_N(e);for(const i of t.elements)n=n.filter(s=>!ma(s,i));return{arrayValue:{values:n}}}class lv extends Ty{constructor(e,n){super(),this.serializer=e,this.Re=n}}function aI(t){return jn(t.integerValue||t.doubleValue)}function _N(t){return J1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(e,n){this.field=e,this.transform=n}}function KW(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof em&&s instanceof em||i instanceof tm&&s instanceof tm?md(i.elements,s.elements,ma):i instanceof lv&&s instanceof lv?ma(i.Re,s.Re):i instanceof Zf&&s instanceof Zf}(t.transform,e.transform)}class YW{constructor(e,n){this.version=e,this.transformResults=n}}class wr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sy{}function bN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new iE(t.key,wr.none()):new Mm(t.key,t.data,wr.none());{const n=t.data,i=Ss.empty();let s=new ui(Di.comparator);for(let r of e.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new Tl(t.key,i,new $s(s.toArray()),wr.none())}}function XW(t,e,n){t instanceof Mm?function(s,r,a){const o=s.value.clone(),l=lI(s.fieldTransforms,r,a.transformResults);o.setAll(l),r.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Tl?function(s,r,a){if(!bg(s.precondition,r))return void r.convertToUnknownDocument(a.version);const o=lI(s.fieldTransforms,r,a.transformResults),l=r.data;l.setAll(TN(s)),l.setAll(o),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function wf(t,e,n,i){return t instanceof Mm?function(r,a,o,l){if(!bg(r.precondition,a))return o;const u=r.value.clone(),c=uI(r.fieldTransforms,l,a);return u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof Tl?function(r,a,o,l){if(!bg(r.precondition,a))return o;const u=uI(r.fieldTransforms,l,a),c=a.data;return c.setAll(TN(r)),c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(r,a,o){return bg(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function QW(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=gN(i.transform,s||null);r!=null&&(n===null&&(n=Ss.empty()),n.set(i.field,r))}return n||null}function oI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&md(i,s,(r,a)=>KW(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mm extends Sy{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Tl extends Sy{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function TN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function lI(t,e,n){const i=new Map;Zt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const r=t[s],a=r.transform,o=e.data.field(r.field);i.set(r.field,WW(a,o,n[s]))}return i}function uI(t,e,n){const i=new Map;for(const s of t){const r=s.transform,a=n.data.field(s.field);i.set(s.field,zW(r,a,e))}return i}class iE extends Sy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JW extends Sy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZW{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&XW(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=wf(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=wf(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=mN();return this.mutations.forEach(s=>{const r=e.get(s.key),a=r.overlayedDocument;let o=this.applyToLocalView(a,r.mutatedFields);o=n.has(s.key)?null:o;const l=bN(a,o);l!==null&&i.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Tt.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Nt())}isEqual(e){return this.batchId===e.batchId&&md(this.mutations,e.mutations,(n,i)=>oI(n,i))&&md(this.baseMutations,e.baseMutations,(n,i)=>oI(n,i))}}class sE{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Zt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let s=function(){return UW}();const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new sE(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn,Bt;function nG(t){switch(t){case Be.OK:return pt(64938);case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0;default:return pt(15467,{code:t})}}function SN(t){if(t===void 0)return Ja("GRPC error has no .code"),Be.UNKNOWN;switch(t){case Jn.OK:return Be.OK;case Jn.CANCELLED:return Be.CANCELLED;case Jn.UNKNOWN:return Be.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return Be.INTERNAL;case Jn.UNAVAILABLE:return Be.UNAVAILABLE;case Jn.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case Jn.NOT_FOUND:return Be.NOT_FOUND;case Jn.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case Jn.ABORTED:return Be.ABORTED;case Jn.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case Jn.DATA_LOSS:return Be.DATA_LOSS;default:return pt(39323,{code:t})}}(Bt=Jn||(Jn={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG=new Jo([4294967295,4294967295],0);function cI(t){const e=zO().encode(t),n=new VO;return n.update(e),new Uint8Array(n.digest())}function dI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Jo([n,i],0),new Jo([s,r],0)]}class rE{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new sf(`Invalid padding: ${n}`);if(i<0)throw new sf(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new sf(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new sf(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Jo.fromNumber(this.pe)}we(e,n,i){let s=e.add(n.multiply(Jo.fromNumber(i)));return s.compare(iG)===1&&(s=new Jo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=cI(e),[i,s]=dI(n);for(let r=0;r<this.hashCount;r++){const a=this.we(i,s,r);if(!this.be(a))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new rE(r,s,n);return i.forEach(o=>a.insert(o)),a}insert(e){if(this.pe===0)return;const n=cI(e),[i,s]=dI(n);for(let r=0;r<this.hashCount;r++){const a=this.we(i,s,r);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class sf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Vm.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ey(Tt.min(),s,new Nn(At),Za(),Nt())}}class Vm{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Vm(i,n,Nt(),Nt(),Nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,i,s){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=s}}class EN{constructor(e,n){this.targetId=e,this.Ce=n}}class CN{constructor(e,n,i=Ri.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class hI{constructor(){this.Fe=0,this.Me=fI(),this.xe=Ri.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Nt(),n=Nt(),i=Nt();return this.Me.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:pt(38017,{changeType:r})}}),new Vm(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=fI()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Zt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class sG{constructor(e){this.ze=e,this.je=new Map,this.He=Za(),this.Je=zp(),this.Ye=zp(),this.Ze=new Nn(At)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:pt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,i=e.Ce.count,s=this._t(n);if(s){const r=s.target;if(hT(r))if(i===0){const a=new ut(r.path);this.tt(n,a,qi.newNoDocument(a,Tt.min()))}else Zt(i===1,20013,{expectedCount:i});else{const a=this.ut(n);if(a!==i){const o=this.ct(e),l=o?this.lt(o,e,a):1;if(l!==0){this.st(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,o;try{a=al(i).toUint8Array()}catch(l){if(l instanceof YO)return fd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new rE(a,s,r)}catch(l){return fd(l instanceof sf?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.pe===0?null:o}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.ze.Pt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(o)||(this.tt(n,r,null),s++)}),s}It(e){const n=new Map;this.je.forEach((r,a)=>{const o=this._t(a);if(o){if(r.current&&hT(o.target)){const l=new ut(o.target.path);this.Et(l).has(a)||this.dt(a,l)||this.tt(a,l,qi.newNoDocument(l,e))}r.Le&&(n.set(a,r.qe()),r.Qe())}});let i=Nt();this.Ye.forEach((r,a)=>{let o=!0;a.forEachWhile(l=>{const u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(r))}),this.He.forEach((r,a)=>a.setReadTime(e));const s=new Ey(e,n,this.Ze,this.He,i);return this.He=Za(),this.Je=zp(),this.Ye=zp(),this.Ze=new Nn(At),s}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new hI,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new ui(At),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new ui(At),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||tt("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new hI),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function zp(){return new Nn(ut.comparator)}function fI(){return new Nn(ut.comparator)}const rG={asc:"ASCENDING",desc:"DESCENDING"},aG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oG={and:"AND",or:"OR"};class lG{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pT(t,e){return t.useProto3Json||vy(e)?e:{value:e}}function uv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uG(t,e){return uv(t,e.toTimestamp())}function ha(t){return Zt(!!t,49232),Tt.fromTimestamp(function(n){const i=rl(n);return new li(i.seconds,i.nanos)}(t))}function aE(t,e){return gT(t,e).canonicalString()}function gT(t,e){const n=function(s){return new vn(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xN(t){const e=vn.fromString(t);return Zt(DN(e),10190,{key:e.toString()}),e}function vT(t,e){return aE(t.databaseId,e.path)}function T0(t,e){const n=xN(e);if(n.get(1)!==t.databaseId.projectId)throw new st(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new st(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut(AN(n))}function IN(t,e){return aE(t.databaseId,e)}function cG(t){const e=xN(t);return e.length===4?vn.emptyPath():AN(e)}function yT(t){return new vn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AN(t){return Zt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mI(t,e,n){return{name:vT(t,e),fields:n.value.mapValue.fields}}function dG(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:pt(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(u,c){return u.useProto3Json?(Zt(c===void 0||typeof c=="string",58123),Ri.fromBase64String(c||"")):(Zt(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Ri.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const c=u.code===void 0?Be.UNKNOWN:SN(u.code);return new st(c,u.message||"")}(a);n=new CN(i,s,r,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=T0(t,i.document.name),r=ha(i.document.updateTime),a=i.document.createTime?ha(i.document.createTime):Tt.min(),o=new Ss({mapValue:{fields:i.document.fields}}),l=qi.newFoundDocument(s,r,a,o),u=i.targetIds||[],c=i.removedTargetIds||[];n=new Tg(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=T0(t,i.document),r=i.readTime?ha(i.readTime):Tt.min(),a=qi.newNoDocument(s,r),o=i.removedTargetIds||[];n=new Tg([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=T0(t,i.document),r=i.removedTargetIds||[];n=new Tg([],r,s,null)}else{if(!("filter"in e))return pt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new tG(s,r),o=i.targetId;n=new EN(o,a)}}return n}function hG(t,e){let n;if(e instanceof Mm)n={update:mI(t,e.key,e.value)};else if(e instanceof iE)n={delete:vT(t,e.key)};else if(e instanceof Tl)n={update:mI(t,e.key,e.data),updateMask:TG(e.fieldMask)};else{if(!(e instanceof JW))return pt(16599,{ft:e.type});n={verify:vT(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,a){const o=a.transform;if(o instanceof Zf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof em)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof tm)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof lv)return{fieldPath:a.field.canonicalString(),increment:o.Re};throw pt(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:uG(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:pt(27497)}(t,e.precondition)),n}function fG(t,e){return t&&t.length>0?(Zt(e!==void 0,14353),t.map(n=>function(s,r){let a=s.updateTime?ha(s.updateTime):ha(r);return a.isEqual(Tt.min())&&(a=ha(r)),new YW(a,s.transformResults||[])}(n,e))):[]}function mG(t,e){return{documents:[IN(t,e.path)]}}function pG(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=IN(t,s);const r=function(u){if(u.length!==0)return PN(Rr.create(u,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(u){if(u.length!==0)return u.map(c=>function(h){return{field:Dc(h.field),direction:yG(h.dir)}}(c))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=pT(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:n,parent:s}}function gG(t){let e=cG(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Zt(i===1,65062);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let r=[];n.where&&(r=function(d){const h=kN(d);return h instanceof Rr&&rN(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(h=>function(g){return new Jf(Rc(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let o=null;n.limit&&(o=function(d){let h;return h=typeof d=="object"?d.value:d,vy(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new ov(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const h=!d.before,f=d.values||[];return new ov(f,h)}(n.endAt)),NW(e,s,a,r,o,"F",l,u)}function vG(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Rc(n.unaryFilter.field);return ei.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Rc(n.unaryFilter.field);return ei.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Rc(n.unaryFilter.field);return ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Rc(n.unaryFilter.field);return ei.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pt(61313);default:return pt(60726)}}(t):t.fieldFilter!==void 0?function(n){return ei.create(Rc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pt(58110);default:return pt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rr.create(n.compositeFilter.filters.map(i=>kN(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pt(1026)}}(n.compositeFilter.op))}(t):pt(30097,{filter:t})}function yG(t){return rG[t]}function _G(t){return aG[t]}function bG(t){return oG[t]}function Dc(t){return{fieldPath:t.canonicalString()}}function Rc(t){return Di.fromServerFormat(t.fieldPath)}function PN(t){return t instanceof ei?function(n){if(n.op==="=="){if(tI(n.value))return{unaryFilter:{field:Dc(n.field),op:"IS_NAN"}};if(eI(n.value))return{unaryFilter:{field:Dc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tI(n.value))return{unaryFilter:{field:Dc(n.field),op:"IS_NOT_NAN"}};if(eI(n.value))return{unaryFilter:{field:Dc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dc(n.field),op:_G(n.op),value:n.value}}}(t):t instanceof Rr?function(n){const i=n.getFilters().map(s=>PN(s));return i.length===1?i[0]:{compositeFilter:{op:bG(n.op),filters:i}}}(t):pt(54877,{filter:t})}function TG(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,i,s,r=Tt.min(),a=Tt.min(),o=Ri.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SG{constructor(e){this.wt=e}}function EG(t){const e=gG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(){this.yn=new wG}addToCollectionParentIndex(e,n){return this.yn.add(n),Fe.resolve()}getCollectionParents(e,n){return Fe.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return Fe.resolve()}deleteFieldIndex(e,n){return Fe.resolve()}deleteAllFieldIndexes(e){return Fe.resolve()}createTargetIndexes(e,n){return Fe.resolve()}getDocumentsMatchingTarget(e,n){return Fe.resolve(null)}getIndexType(e,n){return Fe.resolve(0)}getFieldIndexes(e,n){return Fe.resolve([])}getNextCollectionGroupToUpdate(e){return Fe.resolve(null)}getMinOffset(e,n){return Fe.resolve(sl.min())}getMinOffsetFromCollectionGroup(e,n){return Fe.resolve(sl.min())}updateCollectionGroup(e,n,i){return Fe.resolve()}updateIndexEntries(e,n){return Fe.resolve()}}class wG{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new ui(vn.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ui(vn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RN=41943040;class _s{static withCacheSize(e){return new _s(e,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s.DEFAULT_COLLECTION_PERCENTILE=10,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_s.DEFAULT=new _s(RN,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_s.DISABLED=new _s(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new vd(0)}static ir(){return new vd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="LruGarbageCollector",xG=1048576;function vI([t,e],[n,i]){const s=At(t,n);return s===0?At(e,i):s}class IG{constructor(e){this.cr=e,this.buffer=new ui(vI),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();vI(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class AG{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){tt(gI,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xd(n)?tt(gI,"Ignoring IndexedDB error during garbage collection: ",n):await Yd(n)}await this.Ir(3e5)})}}class kG{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Fe.resolve(gy.le);const i=new IG(n);return this.Er.forEachTarget(e,s=>i.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>i.Pr(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Er.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),Fe.resolve(pI)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pI):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let i,s,r,a,o,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,a=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(i=d,o=Date.now(),this.removeTargets(e,i,n))).next(d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(u=Date.now(),kc()<=Lt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${r} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),Fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:d})))}}function PG(t,e){return new kG(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(){this.changes=new Uu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Fe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&wf(i.mutation,s,$s.empty(),li.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Nt()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Nt()){const s=tu();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let a=nf();return r.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=tu();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Nt()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,i,s){let r=Za();const a=Cf(),o=function(){return Cf()}();return n.forEach((l,u)=>{const c=i.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof Tl)?r=r.insert(u.key,u):c!==void 0?(a.set(u.key,c.mutation.getFieldMask()),wf(c.mutation,u,c.mutation.getFieldMask(),li.now())):a.set(u.key,$s.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((u,c)=>a.set(u,c)),n.forEach((u,c)=>{var d;return o.set(u,new RG(c,(d=a.get(u))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,n){const i=Cf();let s=new Nn((a,o)=>a-o),r=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=i.get(l)||$s.empty();c=o.applyToLocalView(u,c),i.set(l,c);const d=(s.get(o.batchId)||Nt()).add(l);s=s.insert(o.batchId,d)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,c=l.value,d=mN();c.forEach(h=>{if(!r.has(h)){const f=bN(n.get(h),i.get(h));f!==null&&d.set(h,f),r=r.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Fe.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(a){return ut.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):Fe.resolve(tu());let o=Kf,l=r;return a.next(u=>Fe.forEach(u,(c,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),r.get(c)?Fe.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,r)).next(()=>this.computeViews(e,l,u,Nt())).next(c=>({batchId:o,changes:fN(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(i=>{let s=nf();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let a=nf();return this.indexManager.getCollectionParents(e,r).next(o=>Fe.forEach(o,l=>{const u=function(d,h){return new Qd(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,u,i,s).next(c=>{c.forEach((d,h)=>{a=a.insert(d,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(a=>{r.forEach((l,u)=>{const c=u.getKey();a.get(c)===null&&(a=a.insert(c,qi.newInvalidDocument(c)))});let o=nf();return a.forEach((l,u)=>{const c=r.get(l);c!==void 0&&wf(c.mutation,u,$s.empty(),li.now()),by(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return Fe.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ha(s.createTime)}}(n)),Fe.resolve()}getNamedQuery(e,n){return Fe.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:EG(s.bundledQuery),readTime:ha(s.readTime)}}(n)),Fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NG{constructor(){this.overlays=new Nn(ut.comparator),this.Or=new Map}getOverlay(e,n){return Fe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=tu();return Fe.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.St(e,n,r)}),Fe.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Or.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Or.delete(i)),Fe.resolve()}getOverlaysForCollection(e,n,i){const s=tu(),r=n.length+1,a=new ut(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return Fe.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new Nn((u,c)=>u-c);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let c=r.get(u.largestBatchId);c===null&&(c=tu(),r=r.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const o=tu(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>o.set(u,c)),!(o.size()>=s)););return Fe.resolve(o)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Or.get(s.largestBatchId).delete(i.key);this.Or.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new eG(n,i));let r=this.Or.get(n);r===void 0&&(r=Nt(),this.Or.set(n,r)),this.Or.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(){this.sessionToken=Ri.EMPTY_BYTE_STRING}getSessionToken(e){return Fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.Nr=new ui(_i.Br),this.Lr=new ui(_i.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const i=new _i(e,n);this.Nr=this.Nr.add(i),this.Lr=this.Lr.add(i)}qr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Qr(new _i(e,n))}$r(e,n){e.forEach(i=>this.removeReference(i,n))}Ur(e){const n=new ut(new vn([])),i=new _i(n,e),s=new _i(n,e+1),r=[];return this.Lr.forEachInRange([i,s],a=>{this.Qr(a),r.push(a.key)}),r}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new ut(new vn([])),i=new _i(n,e),s=new _i(n,e+1);let r=Nt();return this.Lr.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new _i(e,0),i=this.Nr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class _i{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return ut.comparator(e.key,n.key)||At(e.Gr,n.Gr)}static kr(e,n){return At(e.Gr,n.Gr)||ut.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new ui(_i.Br)}checkEmpty(e){return Fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ZW(r,n,i,s);this.mutationQueue.push(a);for(const o of s)this.zr=this.zr.add(new _i(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Fe.resolve(a)}lookupMutationBatch(e,n){return Fe.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Hr(i),r=s<0?0:s;return Fe.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Fe.resolve(this.mutationQueue.length===0?X1:this.Jn-1)}getAllMutationBatches(e){return Fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new _i(n,0),s=new _i(n,Number.POSITIVE_INFINITY),r=[];return this.zr.forEachInRange([i,s],a=>{const o=this.jr(a.Gr);r.push(o)}),Fe.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ui(At);return n.forEach(s=>{const r=new _i(s,0),a=new _i(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([r,a],o=>{i=i.add(o.Gr)})}),Fe.resolve(this.Jr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;ut.isDocumentKey(r)||(r=r.child(""));const a=new _i(new ut(r),0);let o=new ui(At);return this.zr.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===s&&(o=o.add(l.Gr)),!0)},a),Fe.resolve(this.Jr(o))}Jr(e){const n=[];return e.forEach(i=>{const s=this.jr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Zt(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.zr;return Fe.forEach(n.mutations,s=>{const r=new _i(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=i})}Xn(e){}containsKey(e,n){const i=new _i(n,0),s=this.zr.firstAfterOrEqual(i);return Fe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fe.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FG{constructor(e){this.Zr=e,this.docs=function(){return new Nn(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.Zr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Fe.resolve(i?i.document.mutableCopy():qi.newInvalidDocument(n))}getEntries(e,n){let i=Za();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():qi.newInvalidDocument(s))}),Fe.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=Za();const a=n.path,o=new ut(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||fW(hW(c),i)<=0||(s.has(c.key)||by(n,c))&&(r=r.insert(c.key,c.mutableCopy()))}return Fe.resolve(r)}getAllFromCollectionGroup(e,n,i,s){pt(9500)}Xr(e,n){return Fe.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new BG(this)}getSize(e){return Fe.resolve(this.size)}}class BG extends DG{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(e,s)):this.vr.removeEntry(i)}),Fe.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(e){this.persistence=e,this.ei=new Uu(n=>Z1(n),eE),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.ti=0,this.ni=new oE,this.targetCount=0,this.ri=vd.rr()}forEachTarget(e,n){return this.ei.forEach((i,s)=>n(s)),Fe.resolve()}getLastRemoteSnapshotVersion(e){return Fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fe.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),Fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ti&&(this.ti=n),Fe.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new vd(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,Fe.resolve()}updateTargetData(e,n){return this.ar(n),Fe.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,Fe.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.ei.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.ei.delete(a),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Fe.waitFor(r).next(()=>s)}getTargetCount(e){return Fe.resolve(this.targetCount)}getTargetData(e,n){const i=this.ei.get(n)||null;return Fe.resolve(i)}addMatchingKeys(e,n,i){return this.ni.qr(n,i),Fe.resolve()}removeMatchingKeys(e,n,i){this.ni.$r(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(e,a))}),Fe.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),Fe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ni.Wr(n);return Fe.resolve(i)}containsKey(e,n){return Fe.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.ii={},this.overlays={},this.si=new gy(0),this.oi=!1,this.oi=!0,this._i=new MG,this.referenceDelegate=e(this),this.ai=new UG(this),this.indexManager=new CG,this.remoteDocumentCache=function(s){return new FG(s)}(i=>this.referenceDelegate.ui(i)),this.serializer=new SG(n),this.ci=new OG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ii[e.toKey()];return i||(i=new VG(n,this.referenceDelegate),this.ii[e.toKey()]=i),i}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,i){tt("MemoryPersistence","Starting transaction:",e);const s=new $G(this.si.next());return this.referenceDelegate.li(),i(s).next(r=>this.referenceDelegate.hi(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Pi(e,n){return Fe.or(Object.values(this.ii).map(i=>()=>i.containsKey(e,n)))}}class $G extends pW{constructor(e){super(),this.currentSequenceNumber=e}}class lE{constructor(e){this.persistence=e,this.Ti=new oE,this.Ii=null}static Ei(e){return new lE(e)}get di(){if(this.Ii)return this.Ii;throw pt(60996)}addReference(e,n,i){return this.Ti.addReference(i,n),this.di.delete(i.toString()),Fe.resolve()}removeReference(e,n,i){return this.Ti.removeReference(i,n),this.di.add(i.toString()),Fe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Fe.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.di.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fe.forEach(this.di,i=>{const s=ut.fromPath(i);return this.Ai(e,s).next(r=>{r||n.removeEntry(s,Tt.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return Fe.or([()=>Fe.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class cv{constructor(e,n){this.persistence=e,this.Ri=new Uu(i=>yW(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=PG(this,n)}static Ei(e,n){return new cv(e,n)}li(){}hi(e){return Fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}Vr(e){let n=0;return this.Ar(e,i=>{n++}).next(()=>n)}Ar(e,n){return Fe.forEach(this.Ri,(i,s)=>this.gr(e,i,s).next(r=>r?Fe.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.Xr(e,a=>this.gr(e,a,n).next(o=>{o||(i++,r.removeEntry(a,Tt.min()))})).next(()=>r.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),Fe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.Ri.set(i,e.currentSequenceNumber),Fe.resolve()}removeReference(e,n,i){return this.Ri.set(i,e.currentSequenceNumber),Fe.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),Fe.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yg(e.data.value)),n}gr(e,n,i){return Fe.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.Ri.get(n);return Fe.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.ls=i,this.hs=s}static Ps(e,n){let i=Nt(),s=Nt();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new uE(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jG{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return c9()?8:gW(Zi())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.Rs(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.Vs(e,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new HG;return this.fs(e,n,a).next(o=>{if(r.result=o,this.Is)return this.gs(e,n,a,o.size)})}).next(()=>r.result)}gs(e,n,i,s){return i.documentReadCount<this.Es?(kc()<=Lt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Pc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),Fe.resolve()):(kc()<=Lt.DEBUG&&tt("QueryEngine","Query:",Pc(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(kc()<=Lt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Pc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,da(n))):Fe.resolve())}Rs(e,n){if(rI(n))return Fe.resolve(null);let i=da(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=mT(n,null,"F"),i=da(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const a=Nt(...r);return this.As.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ps(n,o);return this.ys(n,u,a,l.readTime)?this.Rs(e,mT(n,null,"F")):this.ws(e,u,n,l)}))})))}Vs(e,n,i,s){return rI(n)||s.isEqual(Tt.min())?Fe.resolve(null):this.As.getDocuments(e,i).next(r=>{const a=this.ps(n,r);return this.ys(n,a,i,s)?Fe.resolve(null):(kc()<=Lt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pc(n)),this.ws(e,a,n,dW(s,Kf)).next(o=>o))})}ps(e,n){let i=new ui(dN(e));return n.forEach((s,r)=>{by(e,r)&&(i=i.add(r))}),i}ys(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}fs(e,n,i){return kc()<=Lt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Pc(n)),this.As.getDocumentsMatchingQuery(e,n,sl.min(),i)}ws(e,n,i,s){return this.As.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="LocalStore",qG=3e8;class zG{constructor(e,n,i,s){this.persistence=e,this.bs=n,this.serializer=s,this.Ss=new Nn(At),this.Ds=new Uu(r=>Z1(r),eE),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(i)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LG(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function WG(t,e,n,i){return new zG(t,e,n,i)}async function ON(t,e){const n=Et(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Fs(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],o=[];let l=Nt();for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of r){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(i,l).next(u=>({Ms:u,removedBatchIds:a,addedBatchIds:o}))})})}function GG(t,e){const n=Et(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.Cs.newChangeBuffer({trackRemovals:!0});return function(o,l,u,c){const d=u.batch,h=d.keys();let f=Fe.resolve();return h.forEach(g=>{f=f.next(()=>c.getEntry(l,g)).next(v=>{const b=u.docVersions.get(g);Zt(b!==null,48541),v.version.compareTo(b)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),c.addEntry(v)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=Nt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function NN(t){const e=Et(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function KG(t,e){const n=Et(t),i=e.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const o=[];e.targetChanges.forEach((c,d)=>{const h=s.get(d);if(!h)return;o.push(n.ai.removeMatchingKeys(r,c.removedDocuments,d).next(()=>n.ai.addMatchingKeys(r,c.addedDocuments,d)));let f=h.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Ri.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,i)),s=s.insert(d,f),function(v,b,I){return v.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=qG?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(h,f,c)&&o.push(n.ai.updateTargetData(r,f))});let l=Za(),u=Nt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(r,c))}),o.push(YG(r,a,e.documentUpdates).next(c=>{l=c.xs,u=c.Os})),!i.isEqual(Tt.min())){const c=n.ai.getLastRemoteSnapshotVersion(r).next(d=>n.ai.setTargetsMetadata(r,r.currentSequenceNumber,i));o.push(c)}return Fe.waitFor(o).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,u)).next(()=>l)}).then(r=>(n.Ss=s,r))}function YG(t,e,n){let i=Nt(),s=Nt();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let a=Za();return n.forEach((o,l)=>{const u=r.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Tt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):tt(cE,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{xs:a,Os:s}})}function XG(t,e){const n=Et(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=X1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function QG(t,e){const n=Et(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.ai.getTargetData(i,e).next(r=>r?(s=r,Fe.resolve(s)):n.ai.allocateTargetId(i).next(a=>(s=new zo(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.ai.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ss.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(i.targetId,i),n.Ds.set(e,i.targetId)),i})}async function _T(t,e,n){const i=Et(t),s=i.Ss.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Xd(a))throw a;tt(cE,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(s.target)}function yI(t,e,n){const i=Et(t);let s=Tt.min(),r=Nt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,c){const d=Et(l),h=d.Ds.get(c);return h!==void 0?Fe.resolve(d.Ss.get(h)):d.ai.getTargetData(u,c)}(i,a,da(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(a,o.targetId).next(l=>{r=l})}).next(()=>i.bs.getDocumentsMatchingQuery(a,e,n?s:Tt.min(),n?r:Nt())).next(o=>(JG(i,VW(e),o),{documents:o,Ns:r})))}function JG(t,e,n){let i=t.vs.get(e)||Tt.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.vs.set(e,i)}class _I{constructor(){this.activeTargetIds=jW()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZG{constructor(){this.So=new _I,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,i){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new _I,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="ConnectivityMonitor";class TI{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){tt(bI,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){tt(bI,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wp=null;function bT(){return Wp===null?Wp=function(){return 268435456+Math.round(2147483648*Math.random())}():Wp++,"0x"+Wp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="RestConnection",tK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nK{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${i}/databases/${s}`,this.qo=this.databaseId.database===rv?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Qo(e,n,i,s,r){const a=bT(),o=this.$o(e,n.toUriEncodedString());tt(S0,`Sending RPC '${e}' ${a}:`,o,i);const l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(l,s,r),this.Ko(e,o,l,i).then(u=>(tt(S0,`Received RPC '${e}' ${a}: `,u),u),u=>{throw fd(S0,`RPC '${e}' ${a} failed with error: `,u,"url: ",o,"request:",i),u})}Wo(e,n,i,s,r,a){return this.Qo(e,n,i,s,r)}Uo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}$o(e,n){const i=tK[e];return`${this.Lo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="WebChannelConnection";class sK extends nK{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,i,s){const r=bT();return new Promise((a,o)=>{const l=new FO;l.setWithCredentials(!0),l.listenOnce(BO.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vg.NO_ERROR:const c=l.getResponseJson();tt(Fi,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(c)),a(c);break;case vg.TIMEOUT:tt(Fi,`RPC '${e}' ${r} timed out`),o(new st(Be.DEADLINE_EXCEEDED,"Request time out"));break;case vg.HTTP_ERROR:const d=l.getStatus();if(tt(Fi,`RPC '${e}' ${r} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const g=function(b){const I=b.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(I)>=0?I:Be.UNKNOWN}(f.status);o(new st(g,f.message))}else o(new st(Be.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new st(Be.UNAVAILABLE,"Connection failed."));break;default:pt(9055,{s_:e,streamId:r,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{tt(Fi,`RPC '${e}' ${r} completed.`)}});const u=JSON.stringify(s);tt(Fi,`RPC '${e}' ${r} sending request:`,s),l.send(n,"POST",u,i,15)})}a_(e,n,i){const s=bT(),r=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=HO(),o=$O(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const c=r.join("");tt(Fi,`Creating RPC '${e}' stream ${s}: ${c}`,l);const d=a.createWebChannel(c,l);let h=!1,f=!1;const g=new iK({Go:b=>{f?tt(Fi,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(h||(tt(Fi,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),tt(Fi,`RPC '${e}' stream ${s} sending:`,b),d.send(b))},zo:()=>d.close()}),v=(b,I,w)=>{b.listen(I,P=>{try{w(P)}catch(M){setTimeout(()=>{throw M},0)}})};return v(d,tf.EventType.OPEN,()=>{f||(tt(Fi,`RPC '${e}' stream ${s} transport opened.`),g.t_())}),v(d,tf.EventType.CLOSE,()=>{f||(f=!0,tt(Fi,`RPC '${e}' stream ${s} transport closed`),g.r_())}),v(d,tf.EventType.ERROR,b=>{f||(f=!0,fd(Fi,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),g.r_(new st(Be.UNAVAILABLE,"The operation could not be completed")))}),v(d,tf.EventType.MESSAGE,b=>{var I;if(!f){const w=b.data[0];Zt(!!w,16349);const P=w,M=(P==null?void 0:P.error)||((I=P[0])===null||I===void 0?void 0:I.error);if(M){tt(Fi,`RPC '${e}' stream ${s} received error:`,M);const F=M.status;let U=function(y){const E=Jn[y];if(E!==void 0)return SN(E)}(F),D=M.message;U===void 0&&(U=Be.INTERNAL,D="Unknown error status: "+F+" with message "+M.message),f=!0,g.r_(new st(U,D)),d.close()}else tt(Fi,`RPC '${e}' stream ${s} received:`,w),g.i_(w)}}),v(o,UO.STAT_EVENT,b=>{b.stat===oT.PROXY?tt(Fi,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===oT.NOPROXY&&tt(Fi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.n_()},0),g}}function E0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){return new lG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,i=1e3,s=1.5,r=6e4){this.bi=e,this.timerId=n,this.u_=i,this.c_=s,this.l_=r,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),i=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-i);s>0&&tt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="PersistentStream";class VN{constructor(e,n,i,s,r,a,o,l){this.bi=e,this.R_=i,this.V_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new MN(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Ja(n.toString()),Ja("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.m_===n&&this.B_(i,s)},i=>{e(()=>{const s=new st(Be.UNKNOWN,"Fetching auth token failed: "+i.message);return this.L_(s)})})}B_(e,n){const i=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{i(()=>this.listener.jo())}),this.stream.Jo(()=>{i(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{i(()=>this.L_(s))}),this.stream.onMessage(s=>{i(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return tt(SI,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(tt(SI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rK extends VN{constructor(e,n,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=dG(this.serializer,e),i=function(r){if(!("targetChange"in r))return Tt.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?Tt.min():a.readTime?ha(a.readTime):Tt.min()}(e);return this.listener.Q_(n,i)}U_(e){const n={};n.database=yT(this.serializer),n.addTarget=function(r,a){let o;const l=a.target;if(o=hT(l)?{documents:mG(r,l)}:{query:pG(r,l).gt},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=wN(r,a.resumeToken);const u=pT(r,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Tt.min())>0){o.readTime=uv(r,a.snapshotVersion.toTimestamp());const u=pT(r,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const i=vG(this.serializer,e);i&&(n.labels=i),this.F_(n)}K_(e){const n={};n.database=yT(this.serializer),n.removeTarget=e,this.F_(n)}}class aK extends VN{constructor(e,n,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return Zt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Zt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=fG(e.writeResults,e.commitTime),i=ha(e.commitTime);return this.listener.j_(i,n)}H_(){const e={};e.database=yT(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>hG(this.serializer,i))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{}class lK extends oK{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new st(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Qo(e,gT(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new st(Be.UNKNOWN,r.toString())})}Wo(e,n,i,s,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Wo(e,gT(n,i),s,a,o,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(Be.UNKNOWN,a.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class uK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Ja(n),this.ea=!1):tt("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au="RemoteStore";class cK{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=r,this.ca.vo(a=>{i.enqueueAndForget(async()=>{$u(this)&&(tt(Au,"Restarting streams for network reachability change."),await async function(l){const u=Et(l);u.aa.add(4),await Fm(u),u.la.set("Unknown"),u.aa.delete(4),await wy(u)}(this))})}),this.la=new uK(i,s)}}async function wy(t){if($u(t))for(const e of t.ua)await e(!0)}async function Fm(t){for(const e of t.ua)await e(!1)}function FN(t,e){const n=Et(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),mE(n)?fE(n):Jd(n).b_()&&hE(n,e))}function dE(t,e){const n=Et(t),i=Jd(n);n._a.delete(e),i.b_()&&BN(n,e),n._a.size===0&&(i.b_()?i.v_():$u(n)&&n.la.set("Unknown"))}function hE(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Jd(t).U_(e)}function BN(t,e){t.ha.Ke(e),Jd(t).K_(e)}function fE(t){t.ha=new sG({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Jd(t).start(),t.la.ta()}function mE(t){return $u(t)&&!Jd(t).w_()&&t._a.size>0}function $u(t){return Et(t).aa.size===0}function UN(t){t.ha=void 0}async function dK(t){t.la.set("Online")}async function hK(t){t._a.forEach((e,n)=>{hE(t,e)})}async function fK(t,e){UN(t),mE(t)?(t.la.ia(e),fE(t)):t.la.set("Unknown")}async function mK(t,e,n){if(t.la.set("Online"),e instanceof CN&&e.state===2&&e.cause)try{await async function(s,r){const a=r.cause;for(const o of r.targetIds)s._a.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s._a.delete(o),s.ha.removeTarget(o))}(t,e)}catch(i){tt(Au,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await dv(t,i)}else if(e instanceof Tg?t.ha.Xe(e):e instanceof EN?t.ha.ot(e):t.ha.nt(e),!n.isEqual(Tt.min()))try{const i=await NN(t.localStore);n.compareTo(i)>=0&&await function(r,a){const o=r.ha.It(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=r._a.get(u);c&&r._a.set(u,c.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const c=r._a.get(l);if(!c)return;r._a.set(l,c.withResumeToken(Ri.EMPTY_BYTE_STRING,c.snapshotVersion)),BN(r,l);const d=new zo(c.target,l,u,c.sequenceNumber);hE(r,d)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){tt(Au,"Failed to raise snapshot:",i),await dv(t,i)}}async function dv(t,e,n){if(!Xd(e))throw e;t.aa.add(1),await Fm(t),t.la.set("Offline"),n||(n=()=>NN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{tt(Au,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await wy(t)})}function $N(t,e){return e().catch(n=>dv(t,n,e))}async function xy(t){const e=Et(t),n=ll(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:X1;for(;pK(e);)try{const s=await XG(e.localStore,i);if(s===null){e.oa.length===0&&n.v_();break}i=s.batchId,gK(e,s)}catch(s){await dv(e,s)}HN(e)&&jN(e)}function pK(t){return $u(t)&&t.oa.length<10}function gK(t,e){t.oa.push(e);const n=ll(t);n.b_()&&n.W_&&n.G_(e.mutations)}function HN(t){return $u(t)&&!ll(t).w_()&&t.oa.length>0}function jN(t){ll(t).start()}async function vK(t){ll(t).H_()}async function yK(t){const e=ll(t);for(const n of t.oa)e.G_(n.mutations)}async function _K(t,e,n){const i=t.oa.shift(),s=sE.from(i,e,n);await $N(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await xy(t)}async function bK(t,e){e&&ll(t).W_&&await async function(i,s){if(function(a){return nG(a)&&a!==Be.ABORTED}(s.code)){const r=i.oa.shift();ll(i).D_(),await $N(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await xy(i)}}(t,e),HN(t)&&jN(t)}async function EI(t,e){const n=Et(t);n.asyncQueue.verifyOperationInProgress(),tt(Au,"RemoteStore received new credentials");const i=$u(n);n.aa.add(3),await Fm(n),i&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await wy(n)}async function TK(t,e){const n=Et(t);e?(n.aa.delete(2),await wy(n)):e||(n.aa.add(2),await Fm(n),n.la.set("Unknown"))}function Jd(t){return t.Pa||(t.Pa=function(n,i,s){const r=Et(n);return r.Y_(),new rK(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{jo:dK.bind(null,t),Jo:hK.bind(null,t),Zo:fK.bind(null,t),Q_:mK.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),mE(t)?fE(t):t.la.set("Unknown")):(await t.Pa.stop(),UN(t))})),t.Pa}function ll(t){return t.Ta||(t.Ta=function(n,i,s){const r=Et(n);return r.Y_(),new aK(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:vK.bind(null,t),Zo:bK.bind(null,t),z_:yK.bind(null,t),j_:_K.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await xy(t)):(await t.Ta.stop(),t.oa.length>0&&(tt(Au,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new lu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const a=Date.now()+i,o=new pE(e,n,a,s,r);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(Be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gE(t,e){if(Ja("AsyncQueue",`${e}: ${t}`),Xd(t))return new st(Be.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{static emptySet(e){return new Jc(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ut.comparator(n.key,i.key):(n,i)=>ut.comparator(n.key,i.key),this.keyedMap=nf(),this.sortedSet=new Nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Jc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.Ia=new Nn(ut.comparator)}track(e){const n=e.doc.key,i=this.Ia.get(n);i?e.type!==0&&i.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&i.type!==1?this.Ia=this.Ia.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Ia=this.Ia.remove(n):e.type===1&&i.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):pt(63341,{Vt:e,Ea:i}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,i)=>{e.push(i)}),e}}class yd{constructor(e,n,i,s,r,a,o,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,s,r){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new yd(e,n,Jc.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_y(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class EK{constructor(){this.queries=wI(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,i){const s=Et(n),r=s.queries;s.queries=wI(),r.forEach((a,o)=>{for(const l of o.Ra)l.onError(i)})})(this,new st(Be.ABORTED,"Firestore shutting down"))}}function wI(){return new Uu(t=>cN(t),_y)}async function CK(t,e){const n=Et(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.Va()&&e.ma()&&(i=2):(r=new SK,i=e.ma()?0:1);try{switch(i){case 0:r.Aa=await n.onListen(s,!0);break;case 1:r.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const o=gE(a,`Initialization of query '${Pc(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,r),r.Ra.push(e),e.ga(n.onlineState),r.Aa&&e.pa(r.Aa)&&vE(n)}async function wK(t,e){const n=Et(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Ra.indexOf(e);a>=0&&(r.Ra.splice(a,1),r.Ra.length===0?s=e.ma()?0:1:!r.Va()&&e.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function xK(t,e){const n=Et(t);let i=!1;for(const s of e){const r=s.query,a=n.queries.get(r);if(a){for(const o of a.Ra)o.pa(s)&&(i=!0);a.Aa=s}}i&&vE(n)}function IK(t,e,n){const i=Et(t),s=i.queries.get(e);if(s)for(const r of s.Ra)r.onError(n);i.queries.delete(e)}function vE(t){t.fa.forEach(e=>{e.next()})}var TT,xI;(xI=TT||(TT={})).ya="default",xI.Cache="cache";class AK{constructor(e,n,i){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=i||{}}pa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new yd(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const i=n!=="Offline";return(!this.options.Fa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=yd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==TT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.key=e}}class zN{constructor(e){this.key=e}}class kK{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Nt(),this.mutatedKeys=Nt(),this.Ua=dN(e),this.Ka=new Jc(this.Ua)}get Wa(){return this.qa}Ga(e,n){const i=n?n.za:new CI,s=n?n.Ka:this.Ka;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,d)=>{const h=s.get(c),f=by(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let b=!1;h&&f?h.data.isEqual(f.data)?g!==v&&(i.track({type:3,doc:f}),b=!0):this.ja(h,f)||(i.track({type:2,doc:f}),b=!0,(l&&this.Ua(f,l)>0||u&&this.Ua(f,u)<0)&&(o=!0)):!h&&f?(i.track({type:0,doc:f}),b=!0):h&&!f&&(i.track({type:1,doc:h}),b=!0,(l||u)&&(o=!0)),b&&(f?(a=a.add(f),r=v?r.add(c):r.delete(c)):(a=a.delete(c),r=r.delete(c)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),r=r.delete(c.key),i.track({type:1,doc:c})}return{Ka:a,za:i,ys:o,mutatedKeys:r}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort((c,d)=>function(f,g){const v=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt(20277,{Vt:b})}};return v(f)-v(g)}(c.type,d.type)||this.Ua(c.doc,d.doc)),this.Ha(i),s=s!=null&&s;const o=n&&!s?this.Ja():[],l=this.$a.size===0&&this.current&&!s?1:0,u=l!==this.Qa;return this.Qa=l,a.length!==0||u?{snapshot:new yd(this.query,e.Ka,r,a,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ya:o}:{Ya:o}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new CI,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Nt(),this.Ka.forEach(i=>{this.Za(i.key)&&(this.$a=this.$a.add(i.key))});const n=[];return e.forEach(i=>{this.$a.has(i)||n.push(new zN(i))}),this.$a.forEach(i=>{e.has(i)||n.push(new qN(i))}),n}Xa(e){this.qa=e.Ns,this.$a=Nt();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return yd.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const yE="SyncEngine";class PK{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class DK{constructor(e){this.key=e,this.tu=!1}}class RK{constructor(e,n,i,s,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Uu(o=>cN(o),_y),this.iu=new Map,this.su=new Set,this.ou=new Nn(ut.comparator),this._u=new Map,this.au=new oE,this.uu={},this.cu=new Map,this.lu=vd.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function LK(t,e,n=!0){const i=QN(t);let s;const r=i.ru.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.eu()):s=await WN(i,e,n,!0),s}async function OK(t,e){const n=QN(t);await WN(n,e,!0,!1)}async function WN(t,e,n,i){const s=await QG(t.localStore,da(e)),r=s.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let o;return i&&(o=await NK(t,e,r,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&FN(t.remoteStore,s),o}async function NK(t,e,n,i,s){t.Pu=(d,h,f)=>async function(v,b,I,w){let P=b.view.Ga(I);P.ys&&(P=await yI(v.localStore,b.query,!1).then(({documents:D})=>b.view.Ga(D,P)));const M=w&&w.targetChanges.get(b.targetId),F=w&&w.targetMismatches.get(b.targetId)!=null,U=b.view.applyChanges(P,v.isPrimaryClient,M,F);return AI(v,b.targetId,U.Ya),U.snapshot}(t,d,h,f);const r=await yI(t.localStore,e,!0),a=new kK(e,r.Ns),o=a.Ga(r.documents),l=Vm.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),u=a.applyChanges(o,t.isPrimaryClient,l);AI(t,n,u.Ya);const c=new PK(e,n,a);return t.ru.set(e,c),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),u.snapshot}async function MK(t,e,n){const i=Et(t),s=i.ru.get(e),r=i.iu.get(s.targetId);if(r.length>1)return i.iu.set(s.targetId,r.filter(a=>!_y(a,e))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await _T(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&dE(i.remoteStore,s.targetId),ST(i,s.targetId)}).catch(Yd)):(ST(i,s.targetId),await _T(i.localStore,s.targetId,!0))}async function VK(t,e){const n=Et(t),i=n.ru.get(e),s=n.iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),dE(n.remoteStore,i.targetId))}async function FK(t,e,n){const i=zK(t);try{const s=await function(a,o){const l=Et(a),u=li.now(),c=o.reduce((f,g)=>f.add(g.key),Nt());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=Za(),v=Nt();return l.Cs.getEntries(f,c).next(b=>{g=b,g.forEach((I,w)=>{w.isValidDocument()||(v=v.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,g)).next(b=>{d=b;const I=[];for(const w of o){const P=QW(w,d.get(w.key).overlayedDocument);P!=null&&I.push(new Tl(w.key,P,nN(P.value.mapValue),wr.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,I,o)}).next(b=>{h=b;const I=b.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(f,b.batchId,I)})}).then(()=>({batchId:h.batchId,changes:fN(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let u=a.uu[a.currentUser.toKey()];u||(u=new Nn(At)),u=u.insert(o,l),a.uu[a.currentUser.toKey()]=u}(i,s.batchId,n),await Bm(i,s.changes),await xy(i.remoteStore)}catch(s){const r=gE(s,"Failed to persist write");n.reject(r)}}async function GN(t,e){const n=Et(t);try{const i=await KG(n.localStore,e);e.targetChanges.forEach((s,r)=>{const a=n._u.get(r);a&&(Zt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.tu=!0:s.modifiedDocuments.size>0?Zt(a.tu,14607):s.removedDocuments.size>0&&(Zt(a.tu,42227),a.tu=!1))}),await Bm(n,i,e)}catch(i){await Yd(i)}}function II(t,e,n){const i=Et(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.ru.forEach((r,a)=>{const o=a.view.ga(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Et(a);l.onlineState=o;let u=!1;l.queries.forEach((c,d)=>{for(const h of d.Ra)h.ga(o)&&(u=!0)}),u&&vE(l)}(i.eventManager,e),s.length&&i.nu.Q_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function BK(t,e,n){const i=Et(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i._u.get(e),r=s&&s.key;if(r){let a=new Nn(ut.comparator);a=a.insert(r,qi.newNoDocument(r,Tt.min()));const o=Nt().add(r),l=new Ey(Tt.min(),new Map,new Nn(At),a,o);await GN(i,l),i.ou=i.ou.remove(r),i._u.delete(e),_E(i)}else await _T(i.localStore,e,!1).then(()=>ST(i,e,n)).catch(Yd)}async function UK(t,e){const n=Et(t),i=e.batch.batchId;try{const s=await GG(n.localStore,e);YN(n,i,null),KN(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Bm(n,s)}catch(s){await Yd(s)}}async function $K(t,e,n){const i=Et(t);try{const s=await function(a,o){const l=Et(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,o).next(d=>(Zt(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(i.localStore,e);YN(i,e,n),KN(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Bm(i,s)}catch(s){await Yd(s)}}function KN(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function YN(t,e,n){const i=Et(t);let s=i.uu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.uu[i.currentUser.toKey()]=s}}function ST(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.iu.get(e))t.ru.delete(i),n&&t.nu.Tu(i,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(i=>{t.au.containsKey(i)||XN(t,i)})}function XN(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(dE(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),_E(t))}function AI(t,e,n){for(const i of n)i instanceof qN?(t.au.addReference(i.key,e),HK(t,i)):i instanceof zN?(tt(yE,"Document no longer in limbo: "+i.key),t.au.removeReference(i.key,e),t.au.containsKey(i.key)||XN(t,i.key)):pt(19791,{Iu:i})}function HK(t,e){const n=e.key,i=n.path.canonicalString();t.ou.get(n)||t.su.has(i)||(tt(yE,"New document in limbo: "+n),t.su.add(i),_E(t))}function _E(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new ut(vn.fromString(e)),i=t.lu.next();t._u.set(i,new DK(n)),t.ou=t.ou.insert(n,i),FN(t.remoteStore,new zo(da(tE(n.path)),i,"TargetPurposeLimboResolution",gy.le))}}async function Bm(t,e,n){const i=Et(t),s=[],r=[],a=[];i.ru.isEmpty()||(i.ru.forEach((o,l)=>{a.push(i.Pu(l,e,n).then(u=>{var c;if((u||n)&&i.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){s.push(u);const d=uE.Ps(l.targetId,u);r.push(d)}}))}),await Promise.all(a),i.nu.Q_(s),await async function(l,u){const c=Et(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Fe.forEach(u,h=>Fe.forEach(h.ls,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>Fe.forEach(h.hs,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Xd(d))throw d;tt(cE,"Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const f=c.Ss.get(h),g=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(g);c.Ss=c.Ss.insert(h,v)}}}(i.localStore,r))}async function jK(t,e){const n=Et(t);if(!n.currentUser.isEqual(e)){tt(yE,"User change. New user:",e.toKey());const i=await ON(n.localStore,e);n.currentUser=e,function(r,a){r.cu.forEach(o=>{o.forEach(l=>{l.reject(new st(Be.CANCELLED,a))})}),r.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bm(n,i.Ms)}}function qK(t,e){const n=Et(t),i=n._u.get(e);if(i&&i.tu)return Nt().add(i.key);{let s=Nt();const r=n.iu.get(e);if(!r)return s;for(const a of r){const o=n.ru.get(a);s=s.unionWith(o.view.Wa)}return s}}function QN(t){const e=Et(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BK.bind(null,e),e.nu.Q_=xK.bind(null,e.eventManager),e.nu.Tu=IK.bind(null,e.eventManager),e}function zK(t){const e=Et(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$K.bind(null,e),e}class hv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cy(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return WG(this.persistence,new jG,e.initialUser,this.serializer)}Ru(e){return new LN(lE.Ei,this.serializer)}Au(e){return new ZG}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hv.provider={build:()=>new hv};class WK extends hv{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){Zt(this.persistence.referenceDelegate instanceof cv,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new AG(i,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?_s.withCacheSize(this.cacheSizeBytes):_s.DEFAULT;return new LN(i=>cv.Ei(i,n),this.serializer)}}class ET{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>II(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jK.bind(null,this.syncEngine),await TK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EK}()}createDatastore(e){const n=Cy(e.databaseInfo.databaseId),i=function(r){return new sK(r)}(e.databaseInfo);return function(r,a,o,l){return new lK(r,a,o,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,a,o){return new cK(i,s,r,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>II(this.syncEngine,n,0),function(){return TI.C()?new TI:new eK}())}createSyncEngine(e,n){return function(s,r,a,o,l,u,c){const d=new RK(s,r,a,o,l,u);return c&&(d.hu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=Et(s);tt(Au,"RemoteStore shutting down."),r.aa.add(5),await Fm(r),r.ca.shutdown(),r.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ET.provider={build:()=>new ET};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Ja("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul="FirestoreClient";class KK{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Bi.UNAUTHENTICATED,this.clientId=WO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{tt(ul,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(tt(ul,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=gE(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function C0(t,e){t.asyncQueue.verifyOperationInProgress(),tt(ul,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await ON(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YK(t);tt(ul,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>EI(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>EI(e.remoteStore,s)),t._onlineComponents=e}async function YK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){tt(ul,"Using user provided OfflineComponentProvider");try{await C0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Be.FAILED_PRECONDITION||s.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fd("Error using user provided cache. Falling back to memory cache: "+n),await C0(t,new hv)}}else tt(ul,"Using default OfflineComponentProvider"),await C0(t,new WK(void 0));return t._offlineComponents}async function JN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(tt(ul,"Using user provided OnlineComponentProvider"),await kI(t,t._uninitializedComponentsProvider._online)):(tt(ul,"Using default OnlineComponentProvider"),await kI(t,new ET))),t._onlineComponents}function XK(t){return JN(t).then(e=>e.syncEngine)}async function PI(t){const e=await JN(t),n=e.eventManager;return n.onListen=LK.bind(null,e.syncEngine),n.onUnlisten=MK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VK.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t,e,n){if(!n)throw new st(Be.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QK(t,e,n,i){if(e===!0&&i===!0)throw new st(Be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RI(t){if(!ut.isDocumentKey(t))throw new st(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LI(t){if(ut.isDocumentKey(t))throw new st(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Iy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pt(12329,{type:typeof t})}function Zo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new st(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Iy(t);throw new st(Be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM="firestore.googleapis.com",OI=!0;class NI{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new st(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tM,this.ssl=OI}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:OI;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xG)throw new st(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZN((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new st(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new st(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new st(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ay{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new nW;switch(i.type){case"firstParty":return new aW(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new st(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=DI.get(n);i&&(tt("ComponentProvider","Removing Datastore"),DI.delete(n),i.terminate())}(this),Promise.resolve()}}function JK(t,e,n,i={}){var s;const r=(t=Zo(t,Ay))._getSettings(),a=Object.assign(Object.assign({},r),{emulatorOptions:t._getEmulatorOptions()}),o=`${e}:${n}`;r.host!==tM&&r.host!==o&&fd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},r),{host:o,ssl:!1,emulatorOptions:i});if(!bu(l,a)&&(t._setSettings(l),i.mockUserToken)){let u,c;if(typeof i.mockUserToken=="string")u=i.mockUserToken,c=Bi.MOCK_USER;else{u=s9(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new st(Be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Bi(d)}t._authCredentials=new iW(new qO(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hu(this.firestore,e,this._query)}}class ws{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new el(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ws(this.firestore,e,this._key)}}class el extends Hu{constructor(e,n,i){super(e,n,tE(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ws(this.firestore,null,new ut(e))}withConverter(e){return new el(this.firestore,e,this._path)}}function MI(t,e,...n){if(t=di(t),eM("collection","path",e),t instanceof Ay){const i=vn.fromString(e,...n);return LI(i),new el(t,null,i)}{if(!(t instanceof ws||t instanceof el))throw new st(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vn.fromString(e,...n));return LI(i),new el(t.firestore,null,i)}}function CT(t,e,...n){if(t=di(t),arguments.length===1&&(e=WO.newId()),eM("doc","path",e),t instanceof Ay){const i=vn.fromString(e,...n);return RI(i),new ws(t,null,new ut(i))}{if(!(t instanceof ws||t instanceof el))throw new st(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vn.fromString(e,...n));return RI(i),new ws(t.firestore,t instanceof el?t.converter:null,new ut(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="AsyncQueue";class FI{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new MN(this,"async_queue_retry"),this.ju=()=>{const i=E0();i&&tt(VI,"Visibility state changed to "+i.visibilityState),this.y_.A_()},this.Hu=e;const n=E0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=E0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new lu;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Xd(e))throw e;tt(VI,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(i=>{throw this.Ku=i,this.Wu=!1,Ja("INTERNAL UNHANDLED ERROR: ",BI(i)),i}).then(i=>(this.Wu=!1,i))));return this.Hu=n,n}enqueueAfterDelay(e,n,i){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const s=pE.createAndSchedule(this,e,n,i,r=>this.Xu(r));return this.Uu.push(s),s}Ju(){this.Ku&&pt(47125,{ec:BI(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function BI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class _d extends Ay{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new FI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FI(e),this._firestoreClient=void 0,await e}}}function ZK(t,e){const n=typeof t=="object"?t:v1(),i=typeof t=="string"?t:rv,s=g1(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=i9("firestore");r&&JK(s,...r)}return s}function nM(t){if(t._terminated)throw new st(Be.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eY(t),t._firestoreClient}function eY(t){var e,n,i;const s=t._freezeSettings(),r=function(o,l,u,c){return new TW(o,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,ZN(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new KK(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bd(Ri.fromBase64String(e))}catch(n){throw new st(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bd(Ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new st(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new st(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new st(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tY=/^__.*__$/;class nY{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Tl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mm(e,this.data,n,this.fieldTransforms)}}class iM{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Tl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt(40011,{oc:t})}}class SE{constructor(e,n,i,s,r,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this._c(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new SE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:i,cc:!1});return s.lc(e),s}hc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:i,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return fv(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(sM(this.oc)&&tY.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class iY{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Cy(e)}dc(e,n,i,s=!1){return new SE({oc:e,methodName:n,Ec:i,path:Di.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function EE(t){const e=t._freezeSettings(),n=Cy(t._databaseId);return new iY(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sY(t,e,n,i,s,r={}){const a=t.dc(r.merge||r.mergeFields?2:0,e,n,s);wE("Data must be an object, but it was:",a,i);const o=rM(i,a);let l,u;if(r.merge)l=new $s(a.fieldMask),u=a.fieldTransforms;else if(r.mergeFields){const c=[];for(const d of r.mergeFields){const h=wT(e,d,n);if(!a.contains(h))throw new st(Be.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);oM(c,h)||c.push(h)}l=new $s(c),u=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=a.fieldTransforms;return new nY(new Ss(o),l,u)}class Dy extends Py{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dy}}class CE extends Py{_toFieldTransform(e){return new GW(e.path,new Zf)}isEqual(e){return e instanceof CE}}function rY(t,e,n,i){const s=t.dc(1,e,n);wE("Data must be an object, but it was:",s,i);const r=[],a=Ss.empty();bl(i,(l,u)=>{const c=xE(e,l,n);u=di(u);const d=s.hc(c);if(u instanceof Dy)r.push(c);else{const h=Um(u,d);h!=null&&(r.push(c),a.set(c,h))}});const o=new $s(r);return new iM(a,o,s.fieldTransforms)}function aY(t,e,n,i,s,r){const a=t.dc(1,e,n),o=[wT(e,i,n)],l=[s];if(r.length%2!=0)throw new st(Be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<r.length;h+=2)o.push(wT(e,r[h])),l.push(r[h+1]);const u=[],c=Ss.empty();for(let h=o.length-1;h>=0;--h)if(!oM(u,o[h])){const f=o[h];let g=l[h];g=di(g);const v=a.hc(f);if(g instanceof Dy)u.push(f);else{const b=Um(g,v);b!=null&&(u.push(f),c.set(f,b))}}const d=new $s(u);return new iM(c,d,a.fieldTransforms)}function oY(t,e,n,i=!1){return Um(n,t.dc(i?4:3,e))}function Um(t,e){if(aM(t=di(t)))return wE("Unsupported field value:",e,t),rM(t,e);if(t instanceof Py)return function(i,s){if(!sM(s.oc))throw s.Tc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const o of i){let l=Um(o,s.Pc(a));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),a++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=di(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qW(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=li.fromDate(i);return{timestampValue:uv(s.serializer,r)}}if(i instanceof li){const r=new li(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:uv(s.serializer,r)}}if(i instanceof bE)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof bd)return{bytesValue:wN(s.serializer,i._byteString)};if(i instanceof ws){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Tc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:aE(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof TE)return function(a,o){return{mapValue:{fields:{[eN]:{stringValue:tN},[av]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Tc("VectorValues must only contain numeric values.");return nE(o.serializer,u)})}}}}}}(i,s);throw s.Tc(`Unsupported field value: ${Iy(i)}`)}(t,e)}function rM(t,e){const n={};return KO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bl(t,(i,s)=>{const r=Um(s,e.uc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function aM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof li||t instanceof bE||t instanceof bd||t instanceof ws||t instanceof Py||t instanceof TE)}function wE(t,e,n){if(!aM(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=Iy(n);throw i==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+i)}}function wT(t,e,n){if((e=di(e))instanceof ky)return e._internalPath;if(typeof e=="string")return xE(t,e);throw fv("Field path arguments must be of type string or ",t,!1,void 0,n)}const lY=new RegExp("[~\\*/\\[\\]]");function xE(t,e,n){if(e.search(lY)>=0)throw fv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ky(...e.split("."))._internalPath}catch{throw fv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fv(t,e,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(r||a)&&(l+=" (found",r&&(l+=` in field ${i}`),a&&(l+=` in document ${s}`),l+=")"),new st(Be.INVALID_ARGUMENT,o+t+l)}function oM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ws(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ry("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uY extends lM{data(){return super.data()}}function Ry(t,e){return typeof e=="string"?xE(t,e):e instanceof ky?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cY(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new st(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class IE{}class uM extends IE{}function $I(t,e,...n){let i=[];e instanceof IE&&i.push(e),i=i.concat(n),function(r){const a=r.filter(l=>l instanceof AE).length,o=r.filter(l=>l instanceof Ly).length;if(a>1||a>0&&o>0)throw new st(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Ly extends uM{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ly(e,n,i)}_apply(e){const n=this._parse(e);return cM(e._query,n),new Hu(e.firestore,e.converter,fT(e._query,n))}_parse(e){const n=EE(e.firestore);return function(r,a,o,l,u,c,d){let h;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new st(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){qI(d,c);const g=[];for(const v of d)g.push(jI(l,r,v));h={arrayValue:{values:g}}}else h=jI(l,r,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||qI(d,c),h=oY(o,a,d,c==="in"||c==="not-in");return ei.create(u,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function HI(t,e,n){const i=e,s=Ry("where",t);return Ly._create(s,i,n)}class AE extends IE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new AE(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let a=s;const o=r.getFlattenedFilters();for(const l of o)cM(a,l),a=fT(a,l)}(e._query,n),new Hu(e.firestore,e.converter,fT(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kE extends uM{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kE(e,n)}_apply(e){const n=function(s,r,a){if(s.startAt!==null)throw new st(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new st(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jf(r,a)}(e._query,this._field,this._direction);return new Hu(e.firestore,e.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new Qd(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function dY(t,e="asc"){const n=e,i=Ry("orderBy",t);return kE._create(i,n)}function jI(t,e,n){if(typeof(n=di(n))=="string"){if(n==="")throw new st(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uN(e)&&n.indexOf("/")!==-1)throw new st(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(vn.fromString(n));if(!ut.isDocumentKey(i))throw new st(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Z2(t,new ut(i))}if(n instanceof ws)return Z2(t,n._key);throw new st(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iy(n)}.`)}function qI(t,e){if(!Array.isArray(t)||t.length===0)throw new st(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cM(t,e){const n=function(s,r){for(const a of s)for(const o of a.getFlattenedFilters())if(r.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new st(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hY{convertValue(e,n="none"){switch(ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(al(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return bl(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var n,i,s;const r=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[av].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>jn(a.doubleValue));return new TE(r)}convertGeoPoint(e){return new bE(jn(e.latitude),jn(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=yy(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Yf(e));default:return null}}convertTimestamp(e){const n=rl(e);return new li(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=vn.fromString(e);Zt(DN(i),9688,{name:e});const s=new Xf(i.get(1),i.get(3)),r=new ut(i.popFirst(5));return s.isEqual(n)||Ja(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fY(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dM extends lM{constructor(e,n,i,s,r,a){super(e,n,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Ry("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Sg extends dM{data(e={}){return super.data(e)}}class mY{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new rf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Sg(this._firestore,this._userDataWriter,i.key,i,new rf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new st(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new Sg(s._firestore,s._userDataWriter,o.doc.key,o.doc,new rf(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const l=new Sg(s._firestore,s._userDataWriter,o.doc.key,o.doc,new rf(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,c=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),c=a.indexOf(o.doc.key)),{type:pY(o.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function pY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt(61501,{type:t})}}class hM extends hY{constructor(e){super(),this.firestore=e}convertBytes(e){return new bd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ws(this.firestore,null,n)}}function gY(t,e,n,...i){t=Zo(t,ws);const s=Zo(t.firestore,_d),r=EE(s);let a;return a=typeof(e=di(e))=="string"||e instanceof ky?aY(r,"updateDoc",t._key,e,n,i):rY(r,"updateDoc",t._key,e),PE(s,[a.toMutation(t._key,wr.exists(!0))])}function vY(t){return PE(Zo(t.firestore,_d),[new iE(t._key,wr.none())])}function yY(t,e){const n=Zo(t.firestore,_d),i=CT(t),s=fY(t.converter,e);return PE(n,[sY(EE(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,wr.exists(!1))]).then(()=>i)}function _Y(t,...e){var n,i,s;t=di(t);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||UI(e[a])||(r=e[a],a++);const o={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(UI(e[a])){const d=e[a];e[a]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[a+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[a+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,u,c;if(t instanceof ws)u=Zo(t.firestore,_d),c=tE(t._key.path),l={next:d=>{e[a]&&e[a](bY(u,t,d))},error:e[a+1],complete:e[a+2]};else{const d=Zo(t,Hu);u=Zo(d.firestore,_d),c=d._query;const h=new hM(u);l={next:f=>{e[a]&&e[a](new mY(u,h,d,f))},error:e[a+1],complete:e[a+2]},cY(t._query)}return function(h,f,g,v){const b=new GK(v),I=new AK(f,b,g);return h.asyncQueue.enqueueAndForget(async()=>CK(await PI(h),I)),()=>{b.yu(),h.asyncQueue.enqueueAndForget(async()=>wK(await PI(h),I))}}(nM(u),c,o,l)}function PE(t,e){return function(i,s){const r=new lu;return i.asyncQueue.enqueueAndForget(async()=>FK(await XK(i),s,r)),r.promise}(nM(t),e)}function bY(t,e,n){const i=n.docs.get(e._key),s=new hM(t);return new dM(t,s,e._key,i,new rf(n.hasPendingWrites,n.fromCache),e.converter)}function w0(){return new CE("serverTimestamp")}(function(e,n=!0){(function(s){Kd=s})(vl),fa(new kr("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),o=new _d(new sW(i.getProvider("auth-internal")),new oW(a,i.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new st(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xf(u.options.projectId,c)}(a,s),a);return r=Object.assign({useFetchStreams:n},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),js($2,H2,e),js($2,H2,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="firebasestorage.googleapis.com",TY="storageBucket",SY=2*60*1e3,EY=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends Sa{constructor(e,n,i=0){super(x0(e),`Firebase Storage: ${n} (${x0(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ea.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return x0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pa;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pa||(pa={}));function x0(t){return"storage/"+t}function CY(){const t="An unknown error occurred, please check the error payload for server response.";return new Ea(pa.UNKNOWN,t)}function wY(){return new Ea(pa.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xY(){return new Ea(pa.CANCELED,"User canceled the upload/download.")}function IY(t){return new Ea(pa.INVALID_URL,"Invalid URL '"+t+"'.")}function AY(t){return new Ea(pa.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function zI(t){return new Ea(pa.INVALID_ARGUMENT,t)}function mM(){return new Ea(pa.APP_DELETED,"The Firebase app was deleted.")}function kY(t){return new Ea(pa.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Tr.makeFromUrl(e,n)}catch{return new Tr(e,"")}if(i.path==="")return i;throw AY(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function u(M){M.path_=decodeURIComponent(M.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${c}/b/${s}/o${h}`,"i"),g={bucket:1,path:3},v=n===fM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",I=new RegExp(`^https?://${v}/${s}/${b}`,"i"),P=[{regex:o,indices:l,postModify:r},{regex:f,indices:g,postModify:u},{regex:I,indices:{bucket:1,path:2},postModify:u}];for(let M=0;M<P.length;M++){const F=P[M],U=F.regex.exec(e);if(U){const D=U[F.indices.bucket];let S=U[F.indices.path];S||(S=""),i=new Tr(D,S),F.postModify(i);break}}if(i==null)throw IY(e);return i}}class PY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DY(t,e,n){let i=1,s=null,r=null,a=!1,o=0;function l(){return o===2}let u=!1;function c(...b){u||(u=!0,e.apply(null,b))}function d(b){s=setTimeout(()=>{s=null,t(f,l())},b)}function h(){r&&clearTimeout(r)}function f(b,...I){if(u){h();return}if(b){h(),c.call(null,b,...I);return}if(l()||a){h(),c.call(null,b,...I);return}i<64&&(i*=2);let P;o===1?(o=2,P=0):P=(i+Math.random())*1e3,d(P)}let g=!1;function v(b){g||(g=!0,h(),!u&&(s!==null?(b||(o=2),clearTimeout(s),d(0)):b||(o=1)))}return d(0),r=setTimeout(()=>{a=!0,v(!0)},n),v}function RY(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LY(t){return t!==void 0}function WI(t,e,n,i){if(i<e)throw zI(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw zI(`Invalid value for '${t}'. Expected ${n} or less.`)}function OY(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var mv;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(mv||(mv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NY(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY{constructor(e,n,i,s,r,a,o,l,u,c,d,h=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,g)=>{this.resolve_=f,this.reject_=g,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Gp(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&r.addUploadProgressListener(a),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(a),this.pendingConnection_=null;const o=r.getErrorCode()===mv.NO_ERROR,l=r.getStatus();if(!o||NY(l,this.additionalRetryCodes_)&&this.retry){const c=r.getErrorCode()===mv.ABORT;i(!1,new Gp(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;i(!0,new Gp(u,r))})},n=(i,s)=>{const r=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());LY(l)?r(l):r()}catch(l){a(l)}else if(o!==null){const l=CY();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?mM():xY();a(l)}else{const l=wY();a(l)}};this.canceled_?n(!1,new Gp(!1,null,!0)):this.backoffId_=DY(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RY(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gp{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function VY(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function FY(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function UY(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $Y(t,e,n,i,s,r,a=!0){const o=OY(t.urlParams),l=t.url+o,u=Object.assign({},t.headers);return BY(u,e),VY(u,n),FY(u,r),UY(u,i),new MY(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HY(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jY(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n){this._service=e,n instanceof Tr?this._location=n:this._location=Tr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new pv(e,n)}get root(){const e=new Tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jY(this._location.path)}get storage(){return this._service}get parent(){const e=HY(this._location.path);if(e===null)return null;const n=new Tr(this._location.bucket,e);return new pv(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw kY(e)}}function GI(t,e){const n=e==null?void 0:e[TY];return n==null?null:Tr.makeFromBucketSpec(n,t)}class qY{constructor(e,n,i,s,r){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=fM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SY,this._maxUploadRetryTime=EY,this._requests=new Set,s!=null?this._bucket=Tr.makeFromBucketSpec(s,this._host):this._bucket=GI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tr.makeFromBucketSpec(this._url,e):this._bucket=GI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){WI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){WI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pv(this,e)}_makeRequest(e,n,i,s,r=!0){if(this._deleted)return new PY(mM());{const a=$Y(e,this._appId,i,s,n,this._firebaseVersion,r);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const KI="@firebase/storage",YI="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zY="storage";function WY(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new qY(n,i,s,e,vl)}function GY(){fa(new kr(zY,WY,"PUBLIC").setMultipleInstances(!0)),js(KI,YI,""),js(KI,YI,"esm2017")}GY();function KY(t){return XY({initialUser:t,dependencies:{popupRedirectResolver:TL,persistence:[yL,hL,w1]}})}const YY=Symbol("VueFireAuth");function XY({dependencies:t,initialUser:e}){return(n,i)=>{const[s,r]=QY(n,i,e,t);gj(s,r)}}function QY(t,e,n,i,s=iL(t,i)){const r=fj(t,e).run(()=>Me(n));return mj.set(t,r),e.provide(YY,s),[r,s]}function JY(t,{firebaseApp:e,modules:n=[]}){t.provide(CL,e);for(const i of n)i(e,t)}const Sr=f1("authStore",{state:()=>({isAuthenticated:!1,currentUser:void 0,theme:localStorage.getItem("theme")??void 0}),actions:{async checkAuth(t=1){return!this.isAuthenticated||!this.currentUser?t?(await this.refreshCurrentUser(),await this.checkAuth(t--)):!1:!0},async refreshCurrentUser(){const t=await pj();this.currentUser=t,this.isAuthenticated=!!t},setTheme(t){localStorage.setItem("theme",t),this.theme=t}}});var ZY="M12,19.2C9.5,19.2 7.29,17.92 6,16C6.03,14 10,12.9 12,12.9C14,12.9 17.97,14 18,16C16.71,17.92 14.5,19.2 12,19.2M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z",eX="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",tX="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z",nX="M11 7L9.6 8.4L12.2 11H2V13H12.2L9.6 15.6L11 17L16 12L11 7M20 19H12V21H20C21.1 21 22 20.1 22 19V5C22 3.9 21.1 3 20 3H12V5H20V19Z",iX="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12M4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",sX="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",rX="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",aX="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",oX="M7.5,2C5.71,3.15 4.5,5.18 4.5,7.5C4.5,9.82 5.71,11.85 7.53,13C4.46,13 2,10.54 2,7.5A5.5,5.5 0 0,1 7.5,2M19.07,3.5L20.5,4.93L4.93,20.5L3.5,19.07L19.07,3.5M12.89,5.93L11.41,5L9.97,6L10.39,4.3L9,3.24L10.75,3.12L11.33,1.47L12,3.1L13.73,3.13L12.38,4.26L12.89,5.93M9.59,9.54L8.43,8.81L7.31,9.59L7.65,8.27L6.56,7.44L7.92,7.35L8.37,6.06L8.88,7.33L10.24,7.36L9.19,8.23L9.59,9.54M19,13.5A5.5,5.5 0 0,1 13.5,19C12.28,19 11.15,18.6 10.24,17.93L17.93,10.24C18.6,11.15 19,12.28 19,13.5M14.6,20.08L17.37,18.93L17.13,22.28L14.6,20.08M18.93,17.38L20.08,14.61L22.28,17.15L18.93,17.38M20.08,12.42L18.94,9.64L22.28,9.88L20.08,12.42M9.63,18.93L12.4,20.08L9.87,22.27L9.63,18.93Z",lX="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z",uX="M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z";function ds(t,e){let n;function i(){n=tl(),n.run(()=>e.length?e(()=>{n==null||n.stop(),i()}):e())}$e(t,s=>{s&&!n?i():s||(n==null||n.stop(),n=void 0)},{immediate:!0}),hi(()=>{n==null||n.stop()})}const Vt=typeof window<"u",DE=Vt&&"IntersectionObserver"in window,cX=Vt&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),XI=Vt&&"EyeDropper"in window;function QI(t,e,n){dX(t,e),e.set(t,n)}function dX(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hX(t,e,n){return t.set(pM(t,e),n),n}function ql(t,e){return t.get(pM(t,e))}function pM(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function gM(t,e,n){const i=e.length-1;if(i<0)return t===void 0?n:t;for(let s=0;s<i;s++){if(t==null)return n;t=t[e[s]]}return t==null||t[e[i]]===void 0?n:t[e[i]]}function Yi(t,e){if(t===e)return!0;if(t instanceof Date&&e instanceof Date&&t.getTime()!==e.getTime()||t!==Object(t)||e!==Object(e))return!1;const n=Object.keys(t);return n.length!==Object.keys(e).length?!1:n.every(i=>Yi(t[i],e[i]))}function ku(t,e,n){return t==null||!e||typeof e!="string"?n:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),gM(t,e.split("."),n))}function qn(t,e,n){if(e===!0)return t===void 0?n:t;if(e==null||typeof e=="boolean")return n;if(t!==Object(t)){if(typeof e!="function")return n;const s=e(t,n);return typeof s>"u"?n:s}if(typeof e=="string")return ku(t,e,n);if(Array.isArray(e))return gM(t,e,n);if(typeof e!="function")return n;const i=e(t,n);return typeof i>"u"?n:i}function na(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(n,i)=>e+i)}function We(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(t==null||t==="")return;const n=Number(t);return isNaN(n)?String(t):isFinite(n)?`${n}${e}`:void 0}function RE(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function JI(t){let e;return t!==null&&typeof t=="object"&&((e=Object.getPrototypeOf(t))===Object.prototype||e===null)}function LE(t){if(t&&"$el"in t){const e=t.$el;return(e==null?void 0:e.nodeType)===Node.TEXT_NODE?e.nextElementSibling:e}return t}const ZI=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),xT=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function vM(t){return Object.keys(t)}function nu(t,e){return e.every(n=>t.hasOwnProperty(n))}function Sl(t,e){const n={};for(const i of e)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function IT(t,e,n){const i=Object.create(null),s=Object.create(null);for(const r in t)e.some(a=>a instanceof RegExp?a.test(r):a===r)?i[r]=t[r]:s[r]=t[r];return[i,s]}function kn(t,e){const n={...t};return e.forEach(i=>delete n[i]),n}const yM=/^on[^a-z]/,OE=t=>yM.test(t),fX=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],mX=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function pX(t){return t.isComposing&&mX.includes(t.key)}function El(t){const[e,n]=IT(t,[yM]),i=kn(e,fX),[s,r]=IT(n,["class","style","id",/^data-/]);return Object.assign(s,e),Object.assign(r,i),[s,r]}function bn(t){return t==null?[]:Array.isArray(t)?t:[t]}function gX(t,e){let n=0;const i=function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];clearTimeout(n),n=setTimeout(()=>t(...r),it(e))};return i.clear=()=>{clearTimeout(n)},i.immediate=t,i}function _n(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(n,t))}function eA(t){const e=t.toString().trim();return e.includes(".")?e.length-e.indexOf(".")-1:0}function tA(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return t+n.repeat(Math.max(0,e-t.length))}function nA(t,e){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,e-t.length))+t}function vX(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let i=0;for(;i<t.length;)n.push(t.substr(i,e)),i+=e;return n}function iA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(t<e)return`${t} B`;const n=e===1024?["Ki","Mi","Gi"]:["k","M","G"];let i=-1;for(;Math.abs(t)>=e&&i<n.length-1;)t/=e,++i;return`${t.toFixed(1)} ${n[i]}B`}function Gi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i={};for(const s in t)i[s]=t[s];for(const s in e){const r=t[s],a=e[s];if(JI(r)&&JI(a)){i[s]=Gi(r,a,n);continue}if(n&&Array.isArray(r)&&Array.isArray(a)){i[s]=n(r,a);continue}i[s]=a}return i}function _M(t){return t.map(e=>e.type===Ye?_M(e.children):e).flat()}function uu(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(uu.cache.has(t))return uu.cache.get(t);const e=t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return uu.cache.set(t,e),e}uu.cache=new Map;function Fc(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(n=>Fc(t,n)).flat(1);if(e.suspense)return Fc(t,e.ssContent);if(Array.isArray(e.children))return e.children.map(n=>Fc(t,n)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return Fc(t,e.component.subTree).flat(1)}return[]}var Kp=new WeakMap,bc=new WeakMap;class yX{constructor(e){QI(this,Kp,[]),QI(this,bc,0),this.size=e}push(e){ql(Kp,this)[ql(bc,this)]=e,hX(bc,this,(ql(bc,this)+1)%this.size)}values(){return ql(Kp,this).slice(ql(bc,this)).concat(ql(Kp,this).slice(0,ql(bc,this)))}}function _X(t){return"touches"in t?{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:{clientX:t.clientX,clientY:t.clientY}}function NE(t){const e=ai({}),n=V(t);return An(()=>{for(const i in n.value)e[i]=n.value[i]},{flush:"sync"}),gl(e)}function gv(t,e){return t.includes(e)}function bM(t){return t[2].toLowerCase()+t.slice(3)}const wi=()=>[Function,Array];function sA(t,e){return e="on"+Ta(e),!!(t[e]||t[`${e}Once`]||t[`${e}Capture`]||t[`${e}OnceCapture`]||t[`${e}CaptureOnce`])}function Oy(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(Array.isArray(t))for(const s of t)s(...n);else typeof t=="function"&&t(...n)}function nm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(i=>`${i}${e?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...t.querySelectorAll(n)]}function TM(t,e,n){let i,s=t.indexOf(document.activeElement);const r=e==="next"?1:-1;do s+=r,i=t[s];while((!i||i.offsetParent==null||!((n==null?void 0:n(i))??!0))&&s<t.length&&s>=0);return i}function cu(t,e){var i,s,r,a;const n=nm(t);if(!e)(t===document.activeElement||!t.contains(document.activeElement))&&((i=n[0])==null||i.focus());else if(e==="first")(s=n[0])==null||s.focus();else if(e==="last")(r=n.at(-1))==null||r.focus();else if(typeof e=="number")(a=n[e])==null||a.focus();else{const o=TM(n,e);o?o.focus():cu(t,e==="next"?"first":"last")}}function Yp(t){return t==null||typeof t=="string"&&t.trim()===""}function SM(){}function Td(t,e){if(!(Vt&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${e})`)))return null;try{return!!t&&t.matches(e)}catch{return null}}function Ny(t){return t.some(e=>ld(e)?e.type===zi?!1:e.type!==Ye||Ny(e.children):!0)?t:null}function bX(t,e){if(!Vt||t===0)return e(),()=>{};const n=window.setTimeout(e,t);return()=>window.clearTimeout(n)}function TX(t,e){const n=t.clientX,i=t.clientY,s=e.getBoundingClientRect(),r=s.left,a=s.top,o=s.right,l=s.bottom;return n>=r&&n<=o&&i>=a&&i<=l}function vv(){const t=Ue(),e=n=>{t.value=n};return Object.defineProperty(e,"value",{enumerable:!0,get:()=>t.value,set:n=>t.value=n}),Object.defineProperty(e,"el",{enumerable:!0,get:()=>LE(t.value)}),e}function Sd(t){const e=t.key.length===1,n=!t.ctrlKey&&!t.metaKey&&!t.altKey;return e&&n}function EM(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="bigint"}const CM=["top","bottom"],SX=["start","end","left","right"];function AT(t,e){let[n,i]=t.split(" ");return i||(i=gv(CM,n)?"start":gv(SX,n)?"top":"center"),{side:kT(n,e),align:kT(i,e)}}function kT(t,e){return t==="start"?e?"right":"left":t==="end"?e?"left":"right":t}function I0(t){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.side],align:t.align}}function A0(t){return{side:t.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.align]}}function rA(t){return{side:t.align,align:t.side}}function aA(t){return gv(CM,t.side)?"y":"x"}class du{constructor(e){let{x:n,y:i,width:s,height:r}=e;this.x=n,this.y=i,this.width=s,this.height=r}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function oA(t,e){return{x:{before:Math.max(0,e.left-t.left),after:Math.max(0,t.right-e.right)},y:{before:Math.max(0,e.top-t.top),after:Math.max(0,t.bottom-e.bottom)}}}function wM(t){return Array.isArray(t)?new du({x:t[0],y:t[1],width:0,height:0}):t.getBoundingClientRect()}function ME(t){const e=t.getBoundingClientRect(),n=getComputedStyle(t),i=n.transform;if(i){let s,r,a,o,l;if(i.startsWith("matrix3d("))s=i.slice(9,-1).split(/, /),r=Number(s[0]),a=Number(s[5]),o=Number(s[12]),l=Number(s[13]);else if(i.startsWith("matrix("))s=i.slice(7,-1).split(/, /),r=Number(s[0]),a=Number(s[3]),o=Number(s[4]),l=Number(s[5]);else return new du(e);const u=n.transformOrigin,c=e.x-o-(1-r)*parseFloat(u),d=e.y-l-(1-a)*parseFloat(u.slice(u.indexOf(" ")+1)),h=r?e.width/r:t.offsetWidth+1,f=a?e.height/a:t.offsetHeight+1;return new du({x:c,y:d,width:h,height:f})}else return new du(e)}function iu(t,e,n){if(typeof t.animate>"u")return{finished:Promise.resolve()};let i;try{i=t.animate(e,n)}catch{return{finished:Promise.resolve()}}return typeof i.finished>"u"&&(i.finished=new Promise(s=>{i.onfinish=()=>{s(i)}})),i}const Eg=new WeakMap;function EX(t,e){Object.keys(e).forEach(n=>{if(OE(n)){const i=bM(n),s=Eg.get(t);if(e[n]==null)s==null||s.forEach(r=>{const[a,o]=r;a===i&&(t.removeEventListener(i,o),s.delete(r))});else if(!s||![...s].some(r=>r[0]===i&&r[1]===e[n])){t.addEventListener(i,e[n]);const r=s||new Set;r.add([i,e[n]]),Eg.has(t)||Eg.set(t,r)}}else e[n]==null?t.removeAttribute(n):t.setAttribute(n,e[n])})}function CX(t,e){Object.keys(e).forEach(n=>{if(OE(n)){const i=bM(n),s=Eg.get(t);s==null||s.forEach(r=>{const[a,o]=r;a===i&&(t.removeEventListener(i,o),s.delete(r))})}else t.removeAttribute(n)})}const Tc=2.4,lA=.2126729,uA=.7151522,cA=.072175,wX=.55,xX=.58,IX=.57,AX=.62,Xp=.03,dA=1.45,kX=5e-4,PX=1.25,DX=1.25,RX=.078,hA=12.82051282051282,Qp=.06,LX=.001;function fA(t,e){const n=(t.r/255)**Tc,i=(t.g/255)**Tc,s=(t.b/255)**Tc,r=(e.r/255)**Tc,a=(e.g/255)**Tc,o=(e.b/255)**Tc;let l=n*lA+i*uA+s*cA,u=r*lA+a*uA+o*cA;if(l<=Xp&&(l+=(Xp-l)**dA),u<=Xp&&(u+=(Xp-u)**dA),Math.abs(u-l)<kX)return 0;let c;if(u>l){const d=(u**wX-l**xX)*PX;c=d<LX?0:d<RX?d-d*hA*Qp:d-Qp}else{const d=(u**AX-l**IX)*DX;c=d>-.001?0:d>-.078?d-d*hA*Qp:d+Qp}return c*100}function OX(t,e){e=Array.isArray(e)?e.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${e.at(-1)}'`:`'${e}'`}const yv=.20689655172413793,NX=t=>t>yv**3?Math.cbrt(t):t/(3*yv**2)+4/29,MX=t=>t>yv?t**3:3*yv**2*(t-4/29);function xM(t){const e=NX,n=e(t[1]);return[116*n-16,500*(e(t[0]/.95047)-n),200*(n-e(t[2]/1.08883))]}function IM(t){const e=MX,n=(t[0]+16)/116;return[e(n+t[1]/500)*.95047,e(n),e(n-t[2]/200)*1.08883]}const VX=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],FX=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,BX=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],UX=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function AM(t){const e=Array(3),n=FX,i=VX;for(let s=0;s<3;++s)e[s]=Math.round(_n(n(i[s][0]*t[0]+i[s][1]*t[1]+i[s][2]*t[2]))*255);return{r:e[0],g:e[1],b:e[2]}}function VE(t){let{r:e,g:n,b:i}=t;const s=[0,0,0],r=UX,a=BX;e=r(e/255),n=r(n/255),i=r(i/255);for(let o=0;o<3;++o)s[o]=a[o][0]*e+a[o][1]*n+a[o][2]*i;return s}function PT(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function $X(t){return PT(t)&&!/^((rgb|hsl)a?\()?var\(--/.test(t)}const mA=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,HX={rgb:(t,e,n,i)=>({r:t,g:e,b:n,a:i}),rgba:(t,e,n,i)=>({r:t,g:e,b:n,a:i}),hsl:(t,e,n,i)=>pA({h:t,s:e,l:n,a:i}),hsla:(t,e,n,i)=>pA({h:t,s:e,l:n,a:i}),hsv:(t,e,n,i)=>ga({h:t,s:e,v:n,a:i}),hsva:(t,e,n,i)=>ga({h:t,s:e,v:n,a:i})};function Hs(t){if(typeof t=="number")return{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"&&mA.test(t)){const{groups:e}=t.match(mA),{fn:n,values:i}=e,s=i.split(/,\s*|\s*\/\s*|\s+/).map((r,a)=>r.endsWith("%")||a>0&&a<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(r)/100:parseFloat(r));return HX[n](...s)}else if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;return[3,4].includes(e.length)?e=e.split("").map(n=>n+n).join(""):[6,8].includes(e.length),RM(e)}else if(typeof t=="object"){if(nu(t,["r","g","b"]))return t;if(nu(t,["h","s","l"]))return ga(FE(t));if(nu(t,["h","s","v"]))return ga(t)}throw new TypeError(`Invalid color: ${t==null?t:String(t)||t.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function ga(t){const{h:e,s:n,v:i,a:s}=t,r=o=>{const l=(o+e/60)%6;return i-i*n*Math.max(Math.min(l,4-l,1),0)},a=[r(5),r(3),r(1)].map(o=>Math.round(o*255));return{r:a[0],g:a[1],b:a[2],a:s}}function pA(t){return ga(FE(t))}function $m(t){if(!t)return{h:0,s:1,v:1,a:1};const e=t.r/255,n=t.g/255,i=t.b/255,s=Math.max(e,n,i),r=Math.min(e,n,i);let a=0;s!==r&&(s===e?a=60*(0+(n-i)/(s-r)):s===n?a=60*(2+(i-e)/(s-r)):s===i&&(a=60*(4+(e-n)/(s-r)))),a<0&&(a=a+360);const o=s===0?0:(s-r)/s,l=[a,o,s];return{h:l[0],s:l[1],v:l[2],a:t.a}}function DT(t){const{h:e,s:n,v:i,a:s}=t,r=i-i*n/2,a=r===1||r===0?0:(i-r)/Math.min(r,1-r);return{h:e,s:a,l:r,a:s}}function FE(t){const{h:e,s:n,l:i,a:s}=t,r=i+n*Math.min(i,1-i),a=r===0?0:2-2*i/r;return{h:e,s:a,v:r,a:s}}function kM(t){let{r:e,g:n,b:i,a:s}=t;return s===void 0?`rgb(${e}, ${n}, ${i})`:`rgba(${e}, ${n}, ${i}, ${s})`}function PM(t){return kM(ga(t))}function Jp(t){const e=Math.round(t).toString(16);return("00".substr(0,2-e.length)+e).toUpperCase()}function DM(t){let{r:e,g:n,b:i,a:s}=t;return`#${[Jp(e),Jp(n),Jp(i),s!==void 0?Jp(Math.round(s*255)):""].join("")}`}function RM(t){t=qX(t);let[e,n,i,s]=vX(t,2).map(r=>parseInt(r,16));return s=s===void 0?s:s/255,{r:e,g:n,b:i,a:s}}function jX(t){const e=RM(t);return $m(e)}function LM(t){return DM(ga(t))}function qX(t){return t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/([^0-9a-f])/gi,"F"),(t.length===3||t.length===4)&&(t=t.split("").map(e=>e+e).join("")),t.length!==6&&(t=tA(tA(t,6),8,"F")),t}function zX(t,e){const n=xM(VE(t));return n[0]=n[0]+e*10,AM(IM(n))}function WX(t,e){const n=xM(VE(t));return n[0]=n[0]-e*10,AM(IM(n))}function RT(t){const e=Hs(t);return VE(e)[1]}function GX(t,e){const n=RT(t),i=RT(e),s=Math.max(n,i),r=Math.min(n,i);return(s+.05)/(r+.05)}function OM(t){const e=Math.abs(fA(Hs(0),Hs(t)));return Math.abs(fA(Hs(16777215),Hs(t)))>Math.min(e,50)?"#fff":"#000"}function ue(t,e){return n=>Object.keys(t).reduce((i,s)=>{const a=typeof t[s]=="object"&&t[s]!=null&&!Array.isArray(t[s])?t[s]:{type:t[s]};return n&&s in n?i[s]={...a,default:n[s]}:i[s]=a,e&&!i[s].source&&(i[s].source=e),i},{})}const Ke=ue({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Vn(t,e){const n=Cm();if(!n)throw new Error(`[Vuetify] ${t} must be called from inside a setup function`);return n}function Ca(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const e=Vn(t).type;return uu((e==null?void 0:e.aliasName)||(e==null?void 0:e.name))}function KX(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vn("injectSelf");const{provides:n}=e;if(n&&t in n)return n[t]}const Ed=Symbol.for("vuetify:defaults");function YX(t){return Me(t)}function BE(){const t=vt(Ed);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function Pn(t,e){const n=BE(),i=Me(t),s=V(()=>{if(it(e==null?void 0:e.disabled))return n.value;const a=it(e==null?void 0:e.scoped),o=it(e==null?void 0:e.reset),l=it(e==null?void 0:e.root);if(i.value==null&&!(a||o||l))return n.value;let u=Gi(i.value,{prev:n.value});if(a)return u;if(o||l){const c=Number(o||1/0);for(let d=0;d<=c&&!(!u||!("prev"in u));d++)u=u.prev;return u&&typeof l=="string"&&l in u&&(u=Gi(Gi(u,{prev:u}),u[l])),u}return u.prev?Gi(u.prev,u):u});return Jt(Ed,s),s}function XX(t,e){var n,i;return typeof((n=t.props)==null?void 0:n[e])<"u"||typeof((i=t.props)==null?void 0:i[uu(e)])<"u"}function QX(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:BE();const i=Vn("useDefaults");if(e=e??i.type.name??i.type.__name,!e)throw new Error("[Vuetify] Could not determine component name");const s=V(()=>{var l;return(l=n.value)==null?void 0:l[t._as??e]}),r=new Proxy(t,{get(l,u){var d,h,f,g,v,b,I;const c=Reflect.get(l,u);return u==="class"||u==="style"?[(d=s.value)==null?void 0:d[u],c].filter(w=>w!=null):typeof u=="string"&&!XX(i.vnode,u)?((h=s.value)==null?void 0:h[u])!==void 0?(f=s.value)==null?void 0:f[u]:((v=(g=n.value)==null?void 0:g.global)==null?void 0:v[u])!==void 0?(I=(b=n.value)==null?void 0:b.global)==null?void 0:I[u]:c:c}}),a=Ue();An(()=>{if(s.value){const l=Object.entries(s.value).filter(u=>{let[c]=u;return c.startsWith(c[0].toUpperCase())});a.value=l.length?Object.fromEntries(l):void 0}else a.value=void 0});function o(){const l=KX(Ed,i);Jt(Ed,V(()=>a.value?Gi((l==null?void 0:l.value)??{},a.value):l==null?void 0:l.value))}return{props:r,provideSubDefaults:o}}function Ys(t){if(t._setup=t._setup??t.setup,!t.name)return t;if(t._setup){t.props=ue(t.props??{},t.name)();const e=Object.keys(t.props).filter(n=>n!=="class"&&n!=="style");t.filterProps=function(i){return Sl(i,e)},t.props._as=String,t.setup=function(i,s){const r=BE();if(!r.value)return t._setup(i,s);const{props:a,provideSubDefaults:o}=QX(i,i._as??t.name,r),l=t._setup(a,s);return o(),l}}return t}function Te(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?Ys:cr)(e)}function JX(t,e){return e.props=t,e}function wa(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return Te()({name:n??Ta(Is(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e},...Ke()},setup(i,s){let{slots:r}=s;return()=>{var a;return Mr(i.tag,{class:[t,i.class],style:i.style},(a=r.default)==null?void 0:a.call(r))}}})}function NM(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}const im="cubic-bezier(0.4, 0, 0.2, 1)",ZX="cubic-bezier(0.0, 0, 0.2, 1)",eQ="cubic-bezier(0.4, 0, 1, 1)";function gA(t,e,n){return Object.keys(t).filter(i=>OE(i)&&i.endsWith(e)).reduce((i,s)=>(i[s.slice(0,-e.length)]=r=>t[s](r,n(r)),i),{})}function UE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;t;){if(e?tQ(t):$E(t))return t;t=t.parentElement}return document.scrollingElement}function _v(t,e){const n=[];if(e&&t&&!e.contains(t))return n;for(;t&&($E(t)&&n.push(t),t!==e);)t=t.parentElement;return n}function $E(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return e.overflowY==="scroll"||e.overflowY==="auto"&&t.scrollHeight>t.clientHeight}function tQ(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return["scroll","auto"].includes(e.overflowY)}function nQ(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}function Pe(t){const e=Vn("useRender");e.render=t}function et(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:d=>d,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:d=>d;const r=Vn("useProxiedModel"),a=Me(t[e]!==void 0?t[e]:n),o=uu(e),u=V(o!==e?()=>{var d,h,f,g;return t[e],!!(((d=r.vnode.props)!=null&&d.hasOwnProperty(e)||(h=r.vnode.props)!=null&&h.hasOwnProperty(o))&&((f=r.vnode.props)!=null&&f.hasOwnProperty(`onUpdate:${e}`)||(g=r.vnode.props)!=null&&g.hasOwnProperty(`onUpdate:${o}`)))}:()=>{var d,h;return t[e],!!((d=r.vnode.props)!=null&&d.hasOwnProperty(e)&&((h=r.vnode.props)!=null&&h.hasOwnProperty(`onUpdate:${e}`)))});ds(()=>!u.value,()=>{$e(()=>t[e],d=>{a.value=d})});const c=V({get(){const d=t[e];return i(u.value?d:a.value)},set(d){const h=s(d),f=ot(u.value?t[e]:a.value);f===h||i(f)===d||(a.value=h,r==null||r.emit(`update:${e}`,h))}});return Object.defineProperty(c,"externalValue",{get:()=>u.value?t[e]:a.value}),c}const iQ={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"}},vA="$vuetify.",yA=(t,e)=>t.replace(/\{(\d+)\}/g,(n,i)=>String(e[Number(i)])),MM=(t,e,n)=>function(i){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];if(!i.startsWith(vA))return yA(i,r);const o=i.replace(vA,""),l=t.value&&n.value[t.value],u=e.value&&n.value[e.value];let c=ku(l,o,null);return c||(`${i}${t.value}`,c=ku(u,o,null)),c||(c=i),typeof c!="string"&&(c=i),yA(c,r)};function VM(t,e){return(n,i)=>new Intl.NumberFormat([t.value,e.value],i).format(n)}function k0(t,e,n){const i=et(t,e,t[e]??n.value);return i.value=t[e]??n.value,$e(n,s=>{t[e]==null&&(i.value=n.value)}),i}function FM(t){return e=>{const n=k0(e,"locale",t.current),i=k0(e,"fallback",t.fallback),s=k0(e,"messages",t.messages);return{name:"vuetify",current:n,fallback:i,messages:s,t:MM(n,i,s),n:VM(n,i),provide:FM({current:n,fallback:i,messages:s})}}}function sQ(t){const e=Ue((t==null?void 0:t.locale)??"en"),n=Ue((t==null?void 0:t.fallback)??"en"),i=Me({en:iQ,...t==null?void 0:t.messages});return{name:"vuetify",current:e,fallback:n,messages:i,t:MM(e,n,i),n:VM(e,n),provide:FM({current:e,fallback:n,messages:i})}}const Cd=Symbol.for("vuetify:locale");function rQ(t){return t.name!=null}function aQ(t){const e=t!=null&&t.adapter&&rQ(t==null?void 0:t.adapter)?t==null?void 0:t.adapter:sQ(t),n=uQ(e,t);return{...e,...n}}function Dn(){const t=vt(Cd);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");return t}function oQ(t){const e=vt(Cd);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");const n=e.provide(t),i=cQ(n,e.rtl,t),s={...n,...i};return Jt(Cd,s),s}function lQ(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function uQ(t,e){const n=Me((e==null?void 0:e.rtl)??lQ()),i=V(()=>n.value[t.current.value]??!1);return{isRtl:i,rtl:n,rtlClasses:V(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function cQ(t,e,n){const i=V(()=>n.rtl??e.value[t.current.value]??!1);return{isRtl:i,rtl:e,rtlClasses:V(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function Gn(){const t=vt(Cd);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}function Hm(t){const e=t.slice(-2).toUpperCase();switch(!0){case t==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case t==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(e):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(e):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(e):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(e):return{firstDay:6,firstWeekSize:1};case e==="MV":return{firstDay:5,firstWeekSize:1};case e==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function dQ(t,e,n){var c;const i=[];let s=[];const r=BM(t),a=UM(t),o=n??((c=Hm(e))==null?void 0:c.firstDay)??0,l=(r.getDay()-o+7)%7,u=(a.getDay()-o+7)%7;for(let d=0;d<l;d++){const h=new Date(r);h.setDate(h.getDate()-(l-d)),s.push(h)}for(let d=1;d<=a.getDate();d++){const h=new Date(t.getFullYear(),t.getMonth(),d);s.push(h),s.length===7&&(i.push(s),s=[])}for(let d=1;d<7-u;d++){const h=new Date(a);h.setDate(h.getDate()+d),s.push(h)}return s.length>0&&i.push(s),i}function LT(t,e,n){var r;const i=n??((r=Hm(e))==null?void 0:r.firstDay)??0,s=new Date(t);for(;s.getDay()!==i;)s.setDate(s.getDate()-1);return s}function hQ(t,e){var s;const n=new Date(t),i=((((s=Hm(e))==null?void 0:s.firstDay)??0)+6)%7;for(;n.getDay()!==i;)n.setDate(n.getDate()+1);return n}function BM(t){return new Date(t.getFullYear(),t.getMonth(),1)}function UM(t){return new Date(t.getFullYear(),t.getMonth()+1,0)}function fQ(t){const e=t.split("-").map(Number);return new Date(e[0],e[1]-1,e[2])}const mQ=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function $M(t){if(t==null)return new Date;if(t instanceof Date)return t;if(typeof t=="string"){let e;if(mQ.test(t))return fQ(t);if(e=Date.parse(t),!isNaN(e))return new Date(e)}return null}const _A=new Date(2e3,0,2);function pQ(t,e){var i;const n=e??((i=Hm(t))==null?void 0:i.firstDay)??0;return na(7).map(s=>{const r=new Date(_A);return r.setDate(_A.getDate()+n+s),new Intl.DateTimeFormat(t,{weekday:"narrow"}).format(r)})}function gQ(t,e,n,i){const s=$M(t)??new Date,r=i==null?void 0:i[e];if(typeof r=="function")return r(s,e,n);let a={};switch(e){case"fullDate":a={year:"numeric",month:"long",day:"numeric"};break;case"fullDateWithWeekday":a={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const o=s.getDate(),l=new Intl.DateTimeFormat(n,{month:"long"}).format(s);return`${o} ${l}`;case"normalDateWithWeekday":a={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":a={month:"short",day:"numeric"};break;case"year":a={year:"numeric"};break;case"month":a={month:"long"};break;case"monthShort":a={month:"short"};break;case"monthAndYear":a={month:"long",year:"numeric"};break;case"monthAndDate":a={month:"long",day:"numeric"};break;case"weekday":a={weekday:"long"};break;case"weekdayShort":a={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(s.getDate());case"hours12h":a={hour:"numeric",hour12:!0};break;case"hours24h":a={hour:"numeric",hour12:!1};break;case"minutes":a={minute:"numeric"};break;case"seconds":a={second:"numeric"};break;case"fullTime":a={hour:"numeric",minute:"numeric"};break;case"fullTime12h":a={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":a={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":a={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,a).format(s).replace(/, /g," ");case"keyboardDateTime12h":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,a).format(s).replace(/, /g," ");case"keyboardDateTime24h":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,a).format(s).replace(/, /g," ");default:a=r??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,a).format(s)}function vQ(t,e){const n=t.toJsDate(e),i=n.getFullYear(),s=nA(String(n.getMonth()+1),2,"0"),r=nA(String(n.getDate()),2,"0");return`${i}-${s}-${r}`}function yQ(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i)}function _Q(t,e){const n=new Date(t);return n.setMinutes(n.getMinutes()+e),n}function bQ(t,e){const n=new Date(t);return n.setHours(n.getHours()+e),n}function Cg(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function TQ(t,e){const n=new Date(t);return n.setDate(n.getDate()+e*7),n}function SQ(t,e){const n=new Date(t);return n.setDate(1),n.setMonth(n.getMonth()+e),n}function OT(t){return t.getFullYear()}function EQ(t){return t.getMonth()}function CQ(t,e,n,i){const s=Hm(e),r=n??(s==null?void 0:s.firstDay)??0,a=i??(s==null?void 0:s.firstWeekSize)??1;function o(f){const g=new Date(f,0,1);return 7-NT(g,LT(g,e,r),"days")}let l=OT(t);const u=Cg(LT(t,e,r),6);l<OT(u)&&o(l+1)>=a&&l++;const c=new Date(l,0,1),d=o(l),h=d>=a?Cg(c,d-7):Cg(c,d);return 1+NT(t,h,"weeks")}function wQ(t){return t.getDate()}function xQ(t){return new Date(t.getFullYear(),t.getMonth()+1,1)}function IQ(t){return new Date(t.getFullYear(),t.getMonth()-1,1)}function AQ(t){return t.getHours()}function kQ(t){return t.getMinutes()}function PQ(t){return new Date(t.getFullYear(),0,1)}function DQ(t){return new Date(t.getFullYear(),11,31)}function RQ(t,e){return bv(t,e[0])&&NQ(t,e[1])}function LQ(t){const e=new Date(t);return e instanceof Date&&!isNaN(e.getTime())}function bv(t,e){return t.getTime()>e.getTime()}function OQ(t,e){return bv(MT(t),MT(e))}function NQ(t,e){return t.getTime()<e.getTime()}function bA(t,e){return t.getTime()===e.getTime()}function MQ(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function VQ(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function FQ(t,e){return t.getFullYear()===e.getFullYear()}function NT(t,e,n){const i=new Date(t),s=new Date(e);switch(n){case"years":return i.getFullYear()-s.getFullYear();case"quarters":return Math.floor((i.getMonth()-s.getMonth()+(i.getFullYear()-s.getFullYear())*12)/4);case"months":return i.getMonth()-s.getMonth()+(i.getFullYear()-s.getFullYear())*12;case"weeks":return Math.floor((i.getTime()-s.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((i.getTime()-s.getTime())/(1e3*60*60*24));case"hours":return Math.floor((i.getTime()-s.getTime())/(1e3*60*60));case"minutes":return Math.floor((i.getTime()-s.getTime())/(1e3*60));case"seconds":return Math.floor((i.getTime()-s.getTime())/1e3);default:return i.getTime()-s.getTime()}}function BQ(t,e){const n=new Date(t);return n.setHours(e),n}function UQ(t,e){const n=new Date(t);return n.setMinutes(e),n}function $Q(t,e){const n=new Date(t);return n.setMonth(e),n}function HQ(t,e){const n=new Date(t);return n.setDate(e),n}function jQ(t,e){const n=new Date(t);return n.setFullYear(e),n}function MT(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0)}function qQ(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999)}class zQ{constructor(e){this.locale=e.locale,this.formats=e.formats}date(e){return $M(e)}toJsDate(e){return e}toISO(e){return vQ(this,e)}parseISO(e){return yQ(e)}addMinutes(e,n){return _Q(e,n)}addHours(e,n){return bQ(e,n)}addDays(e,n){return Cg(e,n)}addWeeks(e,n){return TQ(e,n)}addMonths(e,n){return SQ(e,n)}getWeekArray(e,n){const i=n!==void 0?Number(n):void 0;return dQ(e,this.locale,i)}startOfWeek(e,n){const i=n!==void 0?Number(n):void 0;return LT(e,this.locale,i)}endOfWeek(e){return hQ(e,this.locale)}startOfMonth(e){return BM(e)}endOfMonth(e){return UM(e)}format(e,n){return gQ(e,n,this.locale,this.formats)}isEqual(e,n){return bA(e,n)}isValid(e){return LQ(e)}isWithinRange(e,n){return RQ(e,n)}isAfter(e,n){return bv(e,n)}isAfterDay(e,n){return OQ(e,n)}isBefore(e,n){return!bv(e,n)&&!bA(e,n)}isSameDay(e,n){return MQ(e,n)}isSameMonth(e,n){return VQ(e,n)}isSameYear(e,n){return FQ(e,n)}setMinutes(e,n){return UQ(e,n)}setHours(e,n){return BQ(e,n)}setMonth(e,n){return $Q(e,n)}setDate(e,n){return HQ(e,n)}setYear(e,n){return jQ(e,n)}getDiff(e,n,i){return NT(e,n,i)}getWeekdays(e){const n=e!==void 0?Number(e):void 0;return pQ(this.locale,n)}getYear(e){return OT(e)}getMonth(e){return EQ(e)}getWeek(e,n,i){const s=n!==void 0?Number(n):void 0;return CQ(e,this.locale,s,i)}getDate(e){return wQ(e)}getNextMonth(e){return xQ(e)}getPreviousMonth(e){return IQ(e)}getHours(e){return AQ(e)}getMinutes(e){return kQ(e)}startOfDay(e){return MT(e)}endOfDay(e){return qQ(e)}startOfYear(e){return PQ(e)}endOfYear(e){return DQ(e)}}const HM=Symbol.for("vuetify:date-options"),TA=Symbol.for("vuetify:date-adapter");function WQ(t,e){const n=Gi({adapter:zQ,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},t);return{options:n,instance:jM(n,e)}}function jM(t,e){const n=ai(typeof t.adapter=="function"?new t.adapter({locale:t.locale[e.current.value]??e.current.value,formats:t.formats}):t.adapter);return $e(e.current,i=>{n.locale=t.locale[i]??i??n.locale}),n}function jm(){const t=vt(HM);if(!t)throw new Error("[Vuetify] Could not find injected date options");const e=Dn();return jM(t,e)}const My=["sm","md","lg","xl","xxl"],VT=Symbol.for("vuetify:display"),SA={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},GQ=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SA;return Gi(SA,t)};function EA(t){return Vt&&!t?window.innerWidth:typeof t=="object"&&t.clientWidth||0}function CA(t){return Vt&&!t?window.innerHeight:typeof t=="object"&&t.clientHeight||0}function wA(t){const e=Vt&&!t?window.navigator.userAgent:"ssr";function n(g){return!!e.match(g)}const i=n(/android/i),s=n(/iphone|ipad|ipod/i),r=n(/cordova/i),a=n(/electron/i),o=n(/chrome/i),l=n(/edge/i),u=n(/firefox/i),c=n(/opera/i),d=n(/win/i),h=n(/mac/i),f=n(/linux/i);return{android:i,ios:s,cordova:r,electron:a,chrome:o,edge:l,firefox:u,opera:c,win:d,mac:h,linux:f,touch:cX,ssr:e==="ssr"}}function KQ(t,e){const{thresholds:n,mobileBreakpoint:i}=GQ(t),s=Ue(CA(e)),r=Ue(wA(e)),a=ai({}),o=Ue(EA(e));function l(){s.value=CA(),o.value=EA()}function u(){l(),r.value=wA()}return An(()=>{const c=o.value<n.sm,d=o.value<n.md&&!c,h=o.value<n.lg&&!(d||c),f=o.value<n.xl&&!(h||d||c),g=o.value<n.xxl&&!(f||h||d||c),v=o.value>=n.xxl,b=c?"xs":d?"sm":h?"md":f?"lg":g?"xl":"xxl",I=typeof i=="number"?i:n[i],w=o.value<I;a.xs=c,a.sm=d,a.md=h,a.lg=f,a.xl=g,a.xxl=v,a.smAndUp=!c,a.mdAndUp=!(c||d),a.lgAndUp=!(c||d||h),a.xlAndUp=!(c||d||h||f),a.smAndDown=!(h||f||g||v),a.mdAndDown=!(f||g||v),a.lgAndDown=!(g||v),a.xlAndDown=!v,a.name=b,a.height=s.value,a.width=o.value,a.mobile=w,a.mobileBreakpoint=i,a.platform=r.value,a.thresholds=n}),Vt&&(window.addEventListener("resize",l,{passive:!0}),hi(()=>{window.removeEventListener("resize",l)},!0)),{...gl(a),update:u,ssr:!!e}}const ju=ue({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function As(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca();const n=vt(VT);if(!n)throw new Error("Could not find Vuetify display injection");const i=V(()=>t.mobile?!0:typeof t.mobileBreakpoint=="number"?n.width.value<t.mobileBreakpoint:t.mobileBreakpoint?n.width.value<n.thresholds.value[t.mobileBreakpoint]:t.mobile===null?n.mobile.value:!1),s=V(()=>e?{[`${e}--mobile`]:i.value}:{});return{...n,displayClasses:s,mobile:i}}const qM=Symbol.for("vuetify:goto");function zM(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:t=>t,easeInQuad:t=>t**2,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t**2:-1+(4-2*t)*t,easeInCubic:t=>t**3,easeOutCubic:t=>--t**3+1,easeInOutCubic:t=>t<.5?4*t**3:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t**4,easeOutQuart:t=>1- --t**4,easeInOutQuart:t=>t<.5?8*t**4:1-8*--t**4,easeInQuint:t=>t**5,easeOutQuint:t=>1+--t**5,easeInOutQuint:t=>t<.5?16*t**5:1+16*--t**5}}}function YQ(t){return HE(t)??(document.scrollingElement||document.body)}function HE(t){return typeof t=="string"?document.querySelector(t):LE(t)}function P0(t,e,n){if(typeof t=="number")return e&&n?-t:t;let i=HE(t),s=0;for(;i;)s+=e?i.offsetLeft:i.offsetTop,i=i.offsetParent;return s}function XQ(t,e){return{rtl:e.isRtl,options:Gi(zM(),t)}}async function xA(t,e,n,i){const s=n?"scrollLeft":"scrollTop",r=Gi((i==null?void 0:i.options)??zM(),e),a=i==null?void 0:i.rtl.value,o=(typeof t=="number"?t:HE(t))??0,l=r.container==="parent"&&o instanceof HTMLElement?o.parentElement:YQ(r.container),u=typeof r.easing=="function"?r.easing:r.patterns[r.easing];if(!u)throw new TypeError(`Easing function "${r.easing}" not found.`);let c;if(typeof o=="number")c=P0(o,n,a);else if(c=P0(o,n,a)-P0(l,n,a),r.layout){const g=window.getComputedStyle(o).getPropertyValue("--v-layout-top");g&&(c-=parseInt(g,10))}c+=r.offset,c=JQ(l,c,!!a,!!n);const d=l[s]??0;if(c===d)return Promise.resolve(c);const h=performance.now();return new Promise(f=>requestAnimationFrame(function g(v){const I=(v-h)/r.duration,w=Math.floor(d+(c-d)*u(_n(I,0,1)));if(l[s]=w,I>=1&&Math.abs(w-l[s])<10)return f(c);if(I>2)return f(l[s]);requestAnimationFrame(g)}))}function QQ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=vt(qM),{isRtl:n}=Gn();if(!e)throw new Error("[Vuetify] Could not find injected goto instance");const i={...e,rtl:V(()=>e.rtl.value||n.value)};async function s(r,a){return xA(r,Gi(t,a),!1,i)}return s.horizontal=async(r,a)=>xA(r,Gi(t,a),!0,i),s}function JQ(t,e,n,i){const{scrollWidth:s,scrollHeight:r}=t,[a,o]=t===document.scrollingElement?[window.innerWidth,window.innerHeight]:[t.offsetWidth,t.offsetHeight];let l,u;return i?n?(l=-(s-a),u=0):(l=0,u=s-a):(l=0,u=r+-o),Math.max(Math.min(e,u),l)}const ZQ={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload"},eJ={component:t=>Mr(jE,{...t,class:"mdi"})},nt=[String,Function,Object,Array],FT=Symbol.for("vuetify:icons"),Vy=ue({icon:{type:nt},tag:{type:[String,Object,Function],required:!0}},"icon"),BT=Te()({name:"VComponentIcon",props:Vy(),setup(t,e){let{slots:n}=e;return()=>{const i=t.icon;return _(t.tag,null,{default:()=>{var s;return[t.icon?_(i,null,null):(s=n.default)==null?void 0:s.call(n)]}})}}}),Fy=Ys({name:"VSvgIcon",inheritAttrs:!1,props:Vy(),setup(t,e){let{attrs:n}=e;return()=>_(t.tag,Ie(n,{style:null}),{default:()=>[_("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(t.icon)?t.icon.map(i=>Array.isArray(i)?_("path",{d:i[0],"fill-opacity":i[1]},null):_("path",{d:i},null)):_("path",{d:t.icon},null)])]})}}),tJ=Ys({name:"VLigatureIcon",props:Vy(),setup(t){return()=>_(t.tag,null,{default:()=>[t.icon]})}}),jE=Ys({name:"VClassIcon",props:Vy(),setup(t){return()=>_(t.tag,{class:t.icon},null)}});function nJ(){return{svg:{component:Fy},class:{component:jE}}}function iJ(t){const e=nJ(),n=(t==null?void 0:t.defaultSet)??"mdi";return n==="mdi"&&!e.mdi&&(e.mdi=eJ),Gi({defaultSet:n,sets:e,aliases:{...ZQ,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},t)}const sJ=t=>{const e=vt(FT);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:V(()=>{var l;const i=it(t);if(!i)return{component:BT};let s=i;if(typeof s=="string"&&(s=s.trim(),s.startsWith("$")&&(s=(l=e.aliases)==null?void 0:l[s.slice(1)])),Array.isArray(s))return{component:Fy,icon:s};if(typeof s!="string")return{component:BT,icon:s};const r=Object.keys(e.sets).find(u=>typeof s=="string"&&s.startsWith(`${u}:`)),a=r?s.slice(r.length+1):s;return{component:e.sets[r??e.defaultSet].component,icon:a}})}},sm=Symbol.for("vuetify:theme"),Dt=ue({theme:String},"theme");function IA(){return{defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet"}}function rJ(){var i,s;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IA();const e=IA();if(!t)return{...e,isDisabled:!0};const n={};for(const[r,a]of Object.entries(t.themes??{})){const o=a.dark||r==="dark"?(i=e.themes)==null?void 0:i.dark:(s=e.themes)==null?void 0:s.light;n[r]=Gi(o,a)}return Gi(e,{...t,themes:n})}function zl(t,e,n,i){t.push(`${uJ(e,i)} {
`,...n.map(s=>`  ${s};
`),`}
`)}function AA(t){const e=t.dark?2:1,n=t.dark?1:2,i=[];for(const[s,r]of Object.entries(t.colors)){const a=Hs(r);i.push(`--v-theme-${s}: ${a.r},${a.g},${a.b}`),s.startsWith("on-")||i.push(`--v-theme-${s}-overlay-multiplier: ${RT(r)>.18?e:n}`)}for(const[s,r]of Object.entries(t.variables)){const a=typeof r=="string"&&r.startsWith("#")?Hs(r):void 0,o=a?`${a.r}, ${a.g}, ${a.b}`:void 0;i.push(`--v-${s}: ${o??r}`)}return i}function aJ(t,e,n){const i={};if(n)for(const s of["lighten","darken"]){const r=s==="lighten"?zX:WX;for(const a of na(n[s],1))i[`${t}-${s}-${a}`]=DM(r(Hs(e),a))}return i}function oJ(t,e){if(!e)return{};let n={};for(const i of e.colors){const s=t[i];s&&(n={...n,...aJ(i,s,e)})}return n}function lJ(t){const e={};for(const n of Object.keys(t)){if(n.startsWith("on-")||t[`on-${n}`])continue;const i=`on-${n}`,s=Hs(t[n]);e[i]=OM(s)}return e}function uJ(t,e){if(!e)return t;const n=`:where(${e})`;return t===":root"?n:`${n} ${t}`}function cJ(t,e){t&&(t.innerHTML=e)}function dJ(t,e){if(!Vt)return null;let n=document.getElementById(t);return n||(n=document.createElement("style"),n.id=t,n.type="text/css",e&&n.setAttribute("nonce",e),document.head.appendChild(n)),n}function hJ(t){const e=rJ(t),n=Ue(e.defaultTheme),i=Me(e.themes),s=V(()=>{const u={};for(const[c,d]of Object.entries(i.value)){const h={...d.colors,...oJ(d.colors,e.variations)};u[c]={...d,colors:{...h,...lJ(h)}}}return u}),r=V(()=>s.value[n.value]),a=V(()=>{var f;const u=[];(f=r.value)!=null&&f.dark&&zl(u,":root",["color-scheme: dark"],e.scope),zl(u,":root",AA(r.value),e.scope);for(const[g,v]of Object.entries(s.value))zl(u,`.v-theme--${g}`,[`color-scheme: ${v.dark?"dark":"normal"}`,...AA(v)],e.scope);const c=[],d=[],h=new Set(Object.values(s.value).flatMap(g=>Object.keys(g.colors)));for(const g of h)g.startsWith("on-")?zl(d,`.${g}`,[`color: rgb(var(--v-theme-${g})) !important`],e.scope):(zl(c,`.bg-${g}`,[`--v-theme-overlay-multiplier: var(--v-theme-${g}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${g})) !important`,`color: rgb(var(--v-theme-on-${g})) !important`],e.scope),zl(d,`.text-${g}`,[`color: rgb(var(--v-theme-${g})) !important`],e.scope),zl(d,`.border-${g}`,[`--v-border-color: var(--v-theme-${g})`],e.scope));return u.push(...c,...d),u.map((g,v)=>v===0?g:`    ${g}`).join("")});function o(u){if(e.isDisabled)return;const c=u._context.provides.usehead;if(c){let f=function(){return{style:[{textContent:a.value,id:e.stylesheetId,nonce:e.cspNonce||!1}]}};var d=f;if(c.push){const g=c.push(f);Vt&&$e(a,()=>{g.patch(f)})}else Vt?(c.addHeadObjs(V(f)),An(()=>c.updateDOM())):c.addHeadObjs(f())}else{let f=function(){cJ(dJ(e.stylesheetId,e.cspNonce),a.value)};var h=f;Vt?$e(a,f,{immediate:!0}):f()}}const l=V(()=>e.isDisabled?void 0:`v-theme--${n.value}`);return{install:o,isDisabled:e.isDisabled,name:n,themes:i,current:r,computedThemes:s,themeClasses:l,styles:a,global:{name:n,current:r}}}function zt(t){Vn("provideTheme");const e=vt(sm,null);if(!e)throw new Error("Could not find Vuetify theme injection");const n=V(()=>t.theme??e.name.value),i=V(()=>e.themes.value[n.value]),s=V(()=>e.isDisabled?void 0:`v-theme--${n.value}`),r={...e,name:n,current:i,themeClasses:s};return Jt(sm,r),r}function qm(){Vn("useTheme");const t=vt(sm,null);if(!t)throw new Error("Could not find Vuetify theme injection");return t}function Lr(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=vv(),i=Me();if(Vt){const s=new ResizeObserver(r=>{t==null||t(r,s),r.length&&(e==="content"?i.value=r[0].contentRect:i.value=r[0].target.getBoundingClientRect())});Wn(()=>{s.disconnect()}),$e(()=>n.el,(r,a)=>{a&&(s.unobserve(a),i.value=void 0),r&&s.observe(r)},{flush:"post"})}return{resizeRef:n,contentRect:Bd(i)}}const rm=Symbol.for("vuetify:layout"),WM=Symbol.for("vuetify:layout-item"),kA=1e3,GM=ue({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),qu=ue({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function KM(){const t=vt(rm);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}function zu(t){const e=vt(rm);if(!e)throw new Error("[Vuetify] Could not find injected layout");const n=t.id??`layout-item-${hs()}`,i=Vn("useLayoutItem");Jt(WM,{id:n});const s=Ue(!1);i1(()=>s.value=!0),FD(()=>s.value=!1);const{layoutItemStyles:r,layoutItemScrimStyles:a}=e.register(i,{...t,active:V(()=>s.value?!1:t.active.value),id:n});return Wn(()=>e.unregister(n)),{layoutItemStyles:r,layoutRect:e.layoutRect,layoutItemScrimStyles:a}}const fJ=(t,e,n,i)=>{let s={top:0,left:0,right:0,bottom:0};const r=[{id:"",layer:{...s}}];for(const a of t){const o=e.get(a),l=n.get(a),u=i.get(a);if(!o||!l||!u)continue;const c={...s,[o.value]:parseInt(s[o.value],10)+(u.value?parseInt(l.value,10):0)};r.push({id:a,layer:c}),s=c}return r};function YM(t){const e=vt(rm,null),n=V(()=>e?e.rootZIndex.value-100:kA),i=Me([]),s=ai(new Map),r=ai(new Map),a=ai(new Map),o=ai(new Map),l=ai(new Map),{resizeRef:u,contentRect:c}=Lr(),d=V(()=>{const U=new Map,D=t.overlaps??[];for(const S of D.filter(y=>y.includes(":"))){const[y,E]=S.split(":");if(!i.value.includes(y)||!i.value.includes(E))continue;const A=s.get(y),k=s.get(E),R=r.get(y),W=r.get(E);!A||!k||!R||!W||(U.set(E,{position:A.value,amount:parseInt(R.value,10)}),U.set(y,{position:k.value,amount:-parseInt(W.value,10)}))}return U}),h=V(()=>{const U=[...new Set([...a.values()].map(S=>S.value))].sort((S,y)=>S-y),D=[];for(const S of U){const y=i.value.filter(E=>{var A;return((A=a.get(E))==null?void 0:A.value)===S});D.push(...y)}return fJ(D,s,r,o)}),f=V(()=>!Array.from(l.values()).some(U=>U.value)),g=V(()=>h.value[h.value.length-1].layer),v=V(()=>({"--v-layout-left":We(g.value.left),"--v-layout-right":We(g.value.right),"--v-layout-top":We(g.value.top),"--v-layout-bottom":We(g.value.bottom),...f.value?void 0:{transition:"none"}})),b=V(()=>h.value.slice(1).map((U,D)=>{let{id:S}=U;const{layer:y}=h.value[D],E=r.get(S),A=s.get(S);return{id:S,...y,size:Number(E.value),position:A.value}})),I=U=>b.value.find(D=>D.id===U),w=Vn("createLayout"),P=Ue(!1);ti(()=>{P.value=!0}),Jt(rm,{register:(U,D)=>{let{id:S,order:y,position:E,layoutSize:A,elementSize:k,active:R,disableTransitions:W,absolute:se}=D;a.set(S,y),s.set(S,E),r.set(S,A),o.set(S,R),W&&l.set(S,W);const Z=Fc(WM,w==null?void 0:w.vnode).indexOf(U);Z>-1?i.value.splice(Z,0,S):i.value.push(S);const ne=V(()=>b.value.findIndex(le=>le.id===S)),ee=V(()=>n.value+h.value.length*2-ne.value*2),Q=V(()=>{const le=E.value==="left"||E.value==="right",pe=E.value==="right",Se=E.value==="bottom",Le=k.value??A.value,we=Le===0?"%":"px",re={[E.value]:0,zIndex:ee.value,transform:`translate${le?"X":"Y"}(${(R.value?0:-(Le===0?100:Le))*(pe||Se?-1:1)}${we})`,position:se.value||n.value!==kA?"absolute":"fixed",...f.value?void 0:{transition:"none"}};if(!P.value)return re;const fe=b.value[ne.value];if(!fe)throw new Error(`[Vuetify] Could not find layout item "${S}"`);const xe=d.value.get(S);return xe&&(fe[xe.position]+=xe.amount),{...re,height:le?`calc(100% - ${fe.top}px - ${fe.bottom}px)`:k.value?`${k.value}px`:void 0,left:pe?void 0:`${fe.left}px`,right:pe?`${fe.right}px`:void 0,top:E.value!=="bottom"?`${fe.top}px`:void 0,bottom:E.value!=="top"?`${fe.bottom}px`:void 0,width:le?k.value?`${k.value}px`:void 0:`calc(100% - ${fe.left}px - ${fe.right}px)`}}),j=V(()=>({zIndex:ee.value-1}));return{layoutItemStyles:Q,layoutItemScrimStyles:j,zIndex:ee}},unregister:U=>{a.delete(U),s.delete(U),r.delete(U),o.delete(U),l.delete(U),i.value=i.value.filter(D=>D!==U)},mainRect:g,mainStyles:v,getLayoutItem:I,items:b,layoutRect:c,rootZIndex:n});const M=V(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),F=V(()=>({zIndex:e?n.value:void 0,position:e?"relative":void 0,overflow:e?"hidden":void 0}));return{layoutClasses:M,layoutStyles:F,getLayoutItem:I,items:b,layoutRect:c,layoutRef:u}}function XM(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...n}=t,i=Gi(e,n),{aliases:s={},components:r={},directives:a={}}=i,o=tl();return o.run(()=>{const l=YX(i.defaults),u=KQ(i.display,i.ssr),c=hJ(i.theme),d=iJ(i.icons),h=aQ(i.locale),f=WQ(i.date,h),g=XQ(i.goTo,h);function v(I){for(const P in a)I.directive(P,a[P]);for(const P in r)I.component(P,r[P]);for(const P in s)I.component(P,Ys({...s[P],name:P,aliasName:s[P].name}));const w=tl();if(w.run(()=>{c.install(I)}),I.onUnmount(()=>w.stop()),I.provide(Ed,l),I.provide(VT,u),I.provide(sm,c),I.provide(FT,d),I.provide(Cd,h),I.provide(HM,f.options),I.provide(TA,f.instance),I.provide(qM,g),Vt&&i.ssr)if(I.$nuxt)I.$nuxt.hook("app:suspense:resolve",()=>{u.update()});else{const{mount:P}=I;I.mount=function(){const M=P(...arguments);return kt(()=>u.update()),I.mount=P,M}}I.mixin({computed:{$vuetify(){return ai({defaults:Sc.call(this,Ed),display:Sc.call(this,VT),theme:Sc.call(this,sm),icons:Sc.call(this,FT),locale:Sc.call(this,Cd),date:Sc.call(this,TA)})}}})}function b(){o.stop()}return{install:v,unmount:b,defaults:l,display:u,theme:c,icons:d,locale:h,date:f,goTo:g}})}const mJ="3.8.2";XM.version=mJ;function Sc(t){var i,s;const e=this.$,n=((i=e.parent)==null?void 0:i.provides)??((s=e.vnode.appContext)==null?void 0:s.provides);if(n&&t in n)return n[t]}const pJ=cr({__name:"AppBar",setup(t){const{mdAndUp:e}=As(),n=Sr(),i=qm();function s(){n.setTheme(i.global.current.value.dark?"light":"dark"),i.global.name.value=n.theme}return(r,a)=>{const o=qt("v-autocomplete"),l=qt("v-form"),u=qt("v-app-bar-title"),c=qt("v-btn"),d=qt("v-list-item-title"),h=qt("v-list-item"),f=qt("v-list"),g=qt("v-menu"),v=qt("v-app-bar");return $n(),Cs(v,{color:it(i).current.value.dark?null:"primary","scroll-behavior":it(e)?null:"hide"},{append:ln(()=>[_(c,{active:!1,icon:it(uX),to:"/"},null,8,["icon"]),_(g,null,{activator:ln(({props:b})=>[_(c,Ie({icon:it(ZY)},b),null,16,["icon"])]),default:ln(()=>[_(f,null,{default:ln(()=>[_(h,{"prepend-icon":it(n).isAuthenticated?it(iX):it(nX),to:"/login"},{default:ln(()=>[_(d,null,{default:ln(()=>[zs(Ir(`Log${it(n).isAuthenticated?"out":"in"}`),1)]),_:1})]),_:1},8,["prepend-icon"]),_(h,{"prepend-icon":it(oX),onClick:s},{default:ln(()=>[_(d,null,{default:ln(()=>a[0]||(a[0]=[zs("Toggle theme")])),_:1})]),_:1},8,["prepend-icon"])]),_:1})]),_:1})]),default:ln(()=>[_(u,null,{default:ln(()=>[_(l,null,{default:ln(()=>[_(o,{disabled:!it(n).isAuthenticated,items:[],"prepend-inner-icon":it(sX),width:it(e)?"25%":"100%","auto-select-first":"",class:"mt-5",density:"comfortable","menu-icon":"",placeholder:"Search",rounded:"",variant:"outlined"},null,8,["disabled","prepend-inner-icon","width"])]),_:1})]),_:1})]),_:1},8,["color","scroll-behavior"])}}}),xf=f1("snackBarStore",{state:()=>({message:null,color:null}),actions:{displayMessage(t){this.clear(),this.message=t},displayError(t){this.displayMessage(t),this.color="error"},clear(){this.message=null,this.color=null}}}),gJ={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},vJ={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},yJ={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},_J={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},bJ={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},TJ={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},SJ={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},EJ={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},CJ={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},wJ={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},xJ={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},IJ={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},AJ={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},kJ={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},PJ={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},DJ={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},RJ={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},LJ={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},OJ={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},NJ={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},Tv={red:gJ,pink:vJ,purple:yJ,deepPurple:_J,indigo:bJ,blue:TJ,lightBlue:SJ,cyan:EJ,teal:CJ,green:wJ,lightGreen:xJ,lime:IJ,yellow:AJ,amber:kJ,orange:PJ,deepOrange:DJ,brown:RJ,blueGrey:LJ,grey:OJ,shades:NJ};function MJ(t){return new Promise(e=>setTimeout(e,t))}function qE(t){return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t.trim())}function PA(t){if(!t)return!1;try{const e=new URL(t),n=["youtube.com","www.youtube.com","youtu.be","m.youtube.com"].includes(e.hostname),i=e.pathname==="/watch"&&e.searchParams.has("v"),s=e.hostname==="youtu.be"&&e.pathname.length>1;return n&&(i||s)}catch{return!1}}function QM(t){return t&&!/^https?:\/\//i.test(t.trim())?`https://${t.trim()}`:t}function zE(t,e){const n=[...t].reduce((r,a)=>a.charCodeAt(0)+((r<<5)-r),0),i=Object.keys(Tv),s=Tv[i[Math.abs(n%i.length)]];return(s==null?void 0:s[e==="dark"?"lighten3":"darken4"])||null}const VJ=cr({__name:"AppSnackBar",setup(t){const{mdAndUp:e}=As(),n=xf(),i=Me(!1);$e(n,({message:o})=>i.value=!!o);function s(o){o||a()}function r(){i.value=!1,a()}async function a(){await MJ(300),n.clear()}return(o,l)=>{const u=qt("v-btn"),c=qt("v-snackbar");return $n(),Cs(c,{modelValue:i.value,"onUpdate:modelValue":[l[0]||(l[0]=d=>i.value=d),s],color:it(n).color,text:it(n).message,timeout:2e3,"content-class":"ma-8",rounded:"pill",transition:"slide-y-reverse-transition"},{actions:ln(()=>[_(u,{icon:it(e)?null:it(eX),text:it(e)?"Close":null,onClick:r},null,8,["icon","text"])]),_:1},8,["modelValue","color","text"])}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Lc=typeof document<"u";function JM(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function FJ(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&JM(t.default)}const Kt=Object.assign;function D0(t,e){const n={};for(const i in e){const s=e[i];n[i]=Or(s)?s.map(t):t(s)}return n}const If=()=>{},Or=Array.isArray,ZM=/#/g,BJ=/&/g,UJ=/\//g,$J=/=/g,HJ=/\?/g,eV=/\+/g,jJ=/%5B/g,qJ=/%5D/g,tV=/%5E/g,zJ=/%60/g,nV=/%7B/g,WJ=/%7C/g,iV=/%7D/g,GJ=/%20/g;function WE(t){return encodeURI(""+t).replace(WJ,"|").replace(jJ,"[").replace(qJ,"]")}function KJ(t){return WE(t).replace(nV,"{").replace(iV,"}").replace(tV,"^")}function UT(t){return WE(t).replace(eV,"%2B").replace(GJ,"+").replace(ZM,"%23").replace(BJ,"%26").replace(zJ,"`").replace(nV,"{").replace(iV,"}").replace(tV,"^")}function YJ(t){return UT(t).replace($J,"%3D")}function XJ(t){return WE(t).replace(ZM,"%23").replace(HJ,"%3F")}function QJ(t){return t==null?"":XJ(t).replace(UJ,"%2F")}function am(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const JJ=/\/$/,ZJ=t=>t.replace(JJ,"");function R0(t,e,n="/"){let i,s={},r="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,o>-1?o:e.length),s=t(r)),o>-1&&(i=i||e.slice(0,o),a=e.slice(o,e.length)),i=iZ(i??e,n),{fullPath:i+(r&&"?")+r+a,path:i,query:s,hash:am(a)}}function eZ(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function DA(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function tZ(t,e,n){const i=e.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&wd(e.matched[i],n.matched[s])&&sV(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function wd(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function sV(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!nZ(t[n],e[n]))return!1;return!0}function nZ(t,e){return Or(t)?RA(t,e):Or(e)?RA(e,t):t===e}function RA(t,e){return Or(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function iZ(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=n.length-1,a,o;for(a=0;a<i.length;a++)if(o=i[a],o!==".")if(o==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(a).join("/")}const Io={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var om;(function(t){t.pop="pop",t.push="push"})(om||(om={}));var Af;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Af||(Af={}));function sZ(t){if(!t)if(Lc){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),ZJ(t)}const rZ=/^[^#]+#/;function aZ(t,e){return t.replace(rZ,"#")+e}function oZ(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const By=()=>({left:window.scrollX,top:window.scrollY});function lZ(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=oZ(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function LA(t,e){return(history.state?history.state.position-e:-1)+t}const $T=new Map;function uZ(t,e){$T.set(t,e)}function cZ(t){const e=$T.get(t);return $T.delete(t),e}let dZ=()=>location.protocol+"//"+location.host;function rV(t,e){const{pathname:n,search:i,hash:s}=e,r=t.indexOf("#");if(r>-1){let o=s.includes(t.slice(r))?t.slice(r).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),DA(l,"")}return DA(n,t)+i+s}function hZ(t,e,n,i){let s=[],r=[],a=null;const o=({state:h})=>{const f=rV(t,location),g=n.value,v=e.value;let b=0;if(h){if(n.value=f,e.value=h,a&&a===g){a=null;return}b=v?h.position-v.position:0}else i(f);s.forEach(I=>{I(n.value,g,{delta:b,type:om.pop,direction:b?b>0?Af.forward:Af.back:Af.unknown})})};function l(){a=n.value}function u(h){s.push(h);const f=()=>{const g=s.indexOf(h);g>-1&&s.splice(g,1)};return r.push(f),f}function c(){const{history:h}=window;h.state&&h.replaceState(Kt({},h.state,{scroll:By()}),"")}function d(){for(const h of r)h();r=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function OA(t,e,n,i=!1,s=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:s?By():null}}function fZ(t){const{history:e,location:n}=window,i={value:rV(t,n)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,u,c){const d=t.indexOf("#"),h=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:dZ()+t+l;try{e[c?"replaceState":"pushState"](u,"",h),s.value=u}catch(f){console.error(f),n[c?"replace":"assign"](h)}}function a(l,u){const c=Kt({},e.state,OA(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});r(l,c,!0),i.value=l}function o(l,u){const c=Kt({},s.value,e.state,{forward:l,scroll:By()});r(c.current,c,!0);const d=Kt({},OA(i.value,l,null),{position:c.position+1},u);r(l,d,!1),i.value=l}return{location:i,state:s,push:o,replace:a}}function mZ(t){t=sZ(t);const e=fZ(t),n=hZ(t,e.state,e.location,e.replace);function i(r,a=!0){a||n.pauseListeners(),history.go(r)}const s=Kt({location:"",base:t,go:i,createHref:aZ.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function pZ(t){return typeof t=="string"||t&&typeof t=="object"}function aV(t){return typeof t=="string"||typeof t=="symbol"}const oV=Symbol("");var NA;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NA||(NA={}));function xd(t,e){return Kt(new Error,{type:t,[oV]:!0},e)}function Na(t,e){return t instanceof Error&&oV in t&&(e==null||!!(t.type&e))}const MA="[^/]+?",gZ={sensitive:!1,strict:!1,start:!0,end:!0},vZ=/[.+*?^${}()[\]/\\]/g;function yZ(t,e){const n=Kt({},gZ,e),i=[];let s=n.start?"^":"";const r=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const h=u[d];let f=40+(n.sensitive?.25:0);if(h.type===0)d||(s+="/"),s+=h.value.replace(vZ,"\\$&"),f+=40;else if(h.type===1){const{value:g,repeatable:v,optional:b,regexp:I}=h;r.push({name:g,repeatable:v,optional:b});const w=I||MA;if(w!==MA){f+=10;try{new RegExp(`(${w})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${g}" (${w}): `+M.message)}}let P=v?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;d||(P=b&&u.length<2?`(?:/${P})`:"/"+P),b&&(P+="?"),s+=P,f+=20,b&&(f+=-8),v&&(f+=-20),w===".*"&&(f+=-50)}c.push(f)}i.push(c)}if(n.strict&&n.end){const u=i.length-1;i[u][i[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function o(u){const c=u.match(a),d={};if(!c)return null;for(let h=1;h<c.length;h++){const f=c[h]||"",g=r[h-1];d[g.name]=f&&g.repeatable?f.split("/"):f}return d}function l(u){let c="",d=!1;for(const h of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const f of h)if(f.type===0)c+=f.value;else if(f.type===1){const{value:g,repeatable:v,optional:b}=f,I=g in u?u[g]:"";if(Or(I)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const w=Or(I)?I.join("/"):I;if(!w)if(b)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);c+=w}}return c||"/"}return{re:a,score:i,keys:r,parse:o,stringify:l}}function _Z(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function lV(t,e){let n=0;const i=t.score,s=e.score;for(;n<i.length&&n<s.length;){const r=_Z(i[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-i.length)===1){if(VA(i))return 1;if(VA(s))return-1}return s.length-i.length}function VA(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const bZ={type:0,value:""},TZ=/[a-zA-Z0-9_]/;function SZ(t){if(!t)return[[]];if(t==="/")return[[bZ]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${u}": ${f}`)}let n=0,i=n;const s=[];let r;function a(){r&&s.push(r),r=[]}let o=0,l,u="",c="";function d(){u&&(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),a()):l===":"?(d(),n=1):h();break;case 4:h(),n=i;break;case 1:l==="("?n=2:TZ.test(l)?h():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),a(),s}function EZ(t,e,n){const i=yZ(SZ(t.path),n),s=Kt(i,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function CZ(t,e){const n=[],i=new Map;e=$A({strict:!1,end:!0,sensitive:!1},e);function s(d){return i.get(d)}function r(d,h,f){const g=!f,v=BA(d);v.aliasOf=f&&f.record;const b=$A(e,d),I=[v];if("alias"in d){const M=typeof d.alias=="string"?[d.alias]:d.alias;for(const F of M)I.push(BA(Kt({},v,{components:f?f.record.components:v.components,path:F,aliasOf:f?f.record:v})))}let w,P;for(const M of I){const{path:F}=M;if(h&&F[0]!=="/"){const U=h.record.path,D=U[U.length-1]==="/"?"":"/";M.path=h.record.path+(F&&D+F)}if(w=EZ(M,h,b),f?f.alias.push(w):(P=P||w,P!==w&&P.alias.push(w),g&&d.name&&!UA(w)&&a(d.name)),uV(w)&&l(w),v.children){const U=v.children;for(let D=0;D<U.length;D++)r(U[D],w,f&&f.children[D])}f=f||w}return P?()=>{a(P)}:If}function a(d){if(aV(d)){const h=i.get(d);h&&(i.delete(d),n.splice(n.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=n.indexOf(d);h>-1&&(n.splice(h,1),d.record.name&&i.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return n}function l(d){const h=IZ(d,n);n.splice(h,0,d),d.record.name&&!UA(d)&&i.set(d.record.name,d)}function u(d,h){let f,g={},v,b;if("name"in d&&d.name){if(f=i.get(d.name),!f)throw xd(1,{location:d});b=f.record.name,g=Kt(FA(h.params,f.keys.filter(P=>!P.optional).concat(f.parent?f.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),d.params&&FA(d.params,f.keys.map(P=>P.name))),v=f.stringify(g)}else if(d.path!=null)v=d.path,f=n.find(P=>P.re.test(v)),f&&(g=f.parse(v),b=f.record.name);else{if(f=h.name?i.get(h.name):n.find(P=>P.re.test(h.path)),!f)throw xd(1,{location:d,currentLocation:h});b=f.record.name,g=Kt({},h.params,d.params),v=f.stringify(g)}const I=[];let w=f;for(;w;)I.unshift(w.record),w=w.parent;return{name:b,path:v,params:g,matched:I,meta:xZ(I)}}t.forEach(d=>r(d));function c(){n.length=0,i.clear()}return{addRoute:r,resolve:u,removeRoute:a,clearRoutes:c,getRoutes:o,getRecordMatcher:s}}function FA(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function BA(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:wZ(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function wZ(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="object"?n[i]:n;return e}function UA(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function xZ(t){return t.reduce((e,n)=>Kt(e,n.meta),{})}function $A(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function IZ(t,e){let n=0,i=e.length;for(;n!==i;){const r=n+i>>1;lV(t,e[r])<0?i=r:n=r+1}const s=AZ(t);return s&&(i=e.lastIndexOf(s,i-1)),i}function AZ(t){let e=t;for(;e=e.parent;)if(uV(e)&&lV(t,e)===0)return e}function uV({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function kZ(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(eV," "),a=r.indexOf("="),o=am(a<0?r:r.slice(0,a)),l=a<0?null:am(r.slice(a+1));if(o in e){let u=e[o];Or(u)||(u=e[o]=[u]),u.push(l)}else e[o]=l}return e}function HA(t){let e="";for(let n in t){const i=t[n];if(n=YJ(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(Or(i)?i.map(r=>r&&UT(r)):[i&&UT(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function PZ(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=Or(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const DZ=Symbol(""),jA=Symbol(""),GE=Symbol(""),KE=Symbol(""),HT=Symbol("");function jh(){let t=[];function e(i){return t.push(i),()=>{const s=t.indexOf(i);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Vo(t,e,n,i,s,r=a=>a()){const a=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const u=h=>{h===!1?l(xd(4,{from:n,to:e})):h instanceof Error?l(h):pZ(h)?l(xd(2,{from:e,to:h})):(a&&i.enterCallbacks[s]===a&&typeof h=="function"&&a.push(h),o())},c=r(()=>t.call(i&&i.instances[s],e,n,u));let d=Promise.resolve(c);t.length<3&&(d=d.then(u)),d.catch(h=>l(h))})}function L0(t,e,n,i,s=r=>r()){const r=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(JM(l)){const c=(l.__vccOpts||l)[e];c&&r.push(Vo(c,n,i,a,o,s))}else{let u=l();r.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const d=FJ(c)?c.default:c;a.mods[o]=c,a.components[o]=d;const f=(d.__vccOpts||d)[e];return f&&Vo(f,n,i,a,o,s)()}))}}return r}function qA(t){const e=vt(GE),n=vt(KE),i=V(()=>{const l=it(t.to);return e.resolve(l)}),s=V(()=>{const{matched:l}=i.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const h=d.findIndex(wd.bind(null,c));if(h>-1)return h;const f=zA(l[u-2]);return u>1&&zA(c)===f&&d[d.length-1].path!==f?d.findIndex(wd.bind(null,l[u-2])):h}),r=V(()=>s.value>-1&&MZ(n.params,i.value.params)),a=V(()=>s.value>-1&&s.value===n.matched.length-1&&sV(n.params,i.value.params));function o(l={}){if(NZ(l)){const u=e[it(t.replace)?"replace":"push"](it(t.to)).catch(If);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:i,href:V(()=>i.value.href),isActive:r,isExactActive:a,navigate:o}}function RZ(t){return t.length===1?t[0]:t}const LZ=cr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qA,setup(t,{slots:e}){const n=ai(qA(t)),{options:i}=vt(GE),s=V(()=>({[WA(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[WA(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&RZ(e.default(n));return t.custom?r:Mr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),OZ=LZ;function NZ(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function MZ(t,e){for(const n in e){const i=e[n],s=t[n];if(typeof i=="string"){if(i!==s)return!1}else if(!Or(s)||s.length!==i.length||i.some((r,a)=>r!==s[a]))return!1}return!0}function zA(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const WA=(t,e,n)=>t??e??n,VZ=cr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=vt(HT),s=V(()=>t.route||i.value),r=vt(jA,0),a=V(()=>{let u=it(r);const{matched:c}=s.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),o=V(()=>s.value.matched[a.value]);Jt(jA,V(()=>a.value+1)),Jt(DZ,o),Jt(HT,s);const l=Me();return $e(()=>[l.value,o.value,t.name],([u,c,d],[h,f,g])=>{c&&(c.instances[d]=u,f&&f!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),u&&c&&(!f||!wd(c,f)||!h)&&(c.enterCallbacks[d]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=s.value,c=t.name,d=o.value,h=d&&d.components[c];if(!h)return GA(n.default,{Component:h,route:u});const f=d.props[c],g=f?f===!0?u.params:typeof f=="function"?f(u):f:null,b=Mr(h,Kt({},g,e,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return GA(n.default,{Component:b,route:u})||b}}});function GA(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const cV=VZ;function FZ(t){const e=CZ(t.routes,t),n=t.parseQuery||kZ,i=t.stringifyQuery||HA,s=t.history,r=jh(),a=jh(),o=jh(),l=Ue(Io);let u=Io;Lc&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=D0.bind(null,re=>""+re),d=D0.bind(null,QJ),h=D0.bind(null,am);function f(re,fe){let xe,Ne;return aV(re)?(xe=e.getRecordMatcher(re),Ne=fe):Ne=re,e.addRoute(Ne,xe)}function g(re){const fe=e.getRecordMatcher(re);fe&&e.removeRoute(fe)}function v(){return e.getRoutes().map(re=>re.record)}function b(re){return!!e.getRecordMatcher(re)}function I(re,fe){if(fe=Kt({},fe||l.value),typeof re=="string"){const X=R0(n,re,fe.path),he=e.resolve({path:X.path},fe),de=s.createHref(X.fullPath);return Kt(X,he,{params:h(he.params),hash:am(X.hash),redirectedFrom:void 0,href:de})}let xe;if(re.path!=null)xe=Kt({},re,{path:R0(n,re.path,fe.path).path});else{const X=Kt({},re.params);for(const he in X)X[he]==null&&delete X[he];xe=Kt({},re,{params:d(X)}),fe.params=d(fe.params)}const Ne=e.resolve(xe,fe),be=re.hash||"";Ne.params=c(h(Ne.params));const z=eZ(i,Kt({},re,{hash:KJ(be),path:Ne.path})),H=s.createHref(z);return Kt({fullPath:z,hash:be,query:i===HA?PZ(re.query):re.query||{}},Ne,{redirectedFrom:void 0,href:H})}function w(re){return typeof re=="string"?R0(n,re,l.value.path):Kt({},re)}function P(re,fe){if(u!==re)return xd(8,{from:fe,to:re})}function M(re){return D(re)}function F(re){return M(Kt(w(re),{replace:!0}))}function U(re){const fe=re.matched[re.matched.length-1];if(fe&&fe.redirect){const{redirect:xe}=fe;let Ne=typeof xe=="function"?xe(re):xe;return typeof Ne=="string"&&(Ne=Ne.includes("?")||Ne.includes("#")?Ne=w(Ne):{path:Ne},Ne.params={}),Kt({query:re.query,hash:re.hash,params:Ne.path!=null?{}:re.params},Ne)}}function D(re,fe){const xe=u=I(re),Ne=l.value,be=re.state,z=re.force,H=re.replace===!0,X=U(xe);if(X)return D(Kt(w(X),{state:typeof X=="object"?Kt({},be,X.state):be,force:z,replace:H}),fe||xe);const he=xe;he.redirectedFrom=fe;let de;return!z&&tZ(i,Ne,xe)&&(de=xd(16,{to:he,from:Ne}),j(Ne,Ne,!0,!1)),(de?Promise.resolve(de):E(he,Ne)).catch(_e=>Na(_e)?Na(_e,2)?_e:Q(_e):ne(_e,he,Ne)).then(_e=>{if(_e){if(Na(_e,2))return D(Kt({replace:H},w(_e.to),{state:typeof _e.to=="object"?Kt({},be,_e.to.state):be,force:z}),fe||he)}else _e=k(he,Ne,!0,H,be);return A(he,Ne,_e),_e})}function S(re,fe){const xe=P(re,fe);return xe?Promise.reject(xe):Promise.resolve()}function y(re){const fe=Se.values().next().value;return fe&&typeof fe.runWithContext=="function"?fe.runWithContext(re):re()}function E(re,fe){let xe;const[Ne,be,z]=BZ(re,fe);xe=L0(Ne.reverse(),"beforeRouteLeave",re,fe);for(const X of Ne)X.leaveGuards.forEach(he=>{xe.push(Vo(he,re,fe))});const H=S.bind(null,re,fe);return xe.push(H),we(xe).then(()=>{xe=[];for(const X of r.list())xe.push(Vo(X,re,fe));return xe.push(H),we(xe)}).then(()=>{xe=L0(be,"beforeRouteUpdate",re,fe);for(const X of be)X.updateGuards.forEach(he=>{xe.push(Vo(he,re,fe))});return xe.push(H),we(xe)}).then(()=>{xe=[];for(const X of z)if(X.beforeEnter)if(Or(X.beforeEnter))for(const he of X.beforeEnter)xe.push(Vo(he,re,fe));else xe.push(Vo(X.beforeEnter,re,fe));return xe.push(H),we(xe)}).then(()=>(re.matched.forEach(X=>X.enterCallbacks={}),xe=L0(z,"beforeRouteEnter",re,fe,y),xe.push(H),we(xe))).then(()=>{xe=[];for(const X of a.list())xe.push(Vo(X,re,fe));return xe.push(H),we(xe)}).catch(X=>Na(X,8)?X:Promise.reject(X))}function A(re,fe,xe){o.list().forEach(Ne=>y(()=>Ne(re,fe,xe)))}function k(re,fe,xe,Ne,be){const z=P(re,fe);if(z)return z;const H=fe===Io,X=Lc?history.state:{};xe&&(Ne||H?s.replace(re.fullPath,Kt({scroll:H&&X&&X.scroll},be)):s.push(re.fullPath,be)),l.value=re,j(re,fe,xe,H),Q()}let R;function W(){R||(R=s.listen((re,fe,xe)=>{if(!Le.listening)return;const Ne=I(re),be=U(Ne);if(be){D(Kt(be,{replace:!0,force:!0}),Ne).catch(If);return}u=Ne;const z=l.value;Lc&&uZ(LA(z.fullPath,xe.delta),By()),E(Ne,z).catch(H=>Na(H,12)?H:Na(H,2)?(D(Kt(w(H.to),{force:!0}),Ne).then(X=>{Na(X,20)&&!xe.delta&&xe.type===om.pop&&s.go(-1,!1)}).catch(If),Promise.reject()):(xe.delta&&s.go(-xe.delta,!1),ne(H,Ne,z))).then(H=>{H=H||k(Ne,z,!1),H&&(xe.delta&&!Na(H,8)?s.go(-xe.delta,!1):xe.type===om.pop&&Na(H,20)&&s.go(-1,!1)),A(Ne,z,H)}).catch(If)}))}let se=jh(),ae=jh(),Z;function ne(re,fe,xe){Q(re);const Ne=ae.list();return Ne.length?Ne.forEach(be=>be(re,fe,xe)):console.error(re),Promise.reject(re)}function ee(){return Z&&l.value!==Io?Promise.resolve():new Promise((re,fe)=>{se.add([re,fe])})}function Q(re){return Z||(Z=!re,W(),se.list().forEach(([fe,xe])=>re?xe(re):fe()),se.reset()),re}function j(re,fe,xe,Ne){const{scrollBehavior:be}=t;if(!Lc||!be)return Promise.resolve();const z=!xe&&cZ(LA(re.fullPath,0))||(Ne||!xe)&&history.state&&history.state.scroll||null;return kt().then(()=>be(re,fe,z)).then(H=>H&&lZ(H)).catch(H=>ne(H,re,fe))}const le=re=>s.go(re);let pe;const Se=new Set,Le={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:b,getRoutes:v,resolve:I,options:t,push:M,replace:F,go:le,back:()=>le(-1),forward:()=>le(1),beforeEach:r.add,beforeResolve:a.add,afterEach:o.add,onError:ae.add,isReady:ee,install(re){const fe=this;re.component("RouterLink",OZ),re.component("RouterView",cV),re.config.globalProperties.$router=fe,Object.defineProperty(re.config.globalProperties,"$route",{enumerable:!0,get:()=>it(l)}),Lc&&!pe&&l.value===Io&&(pe=!0,M(s.location).catch(be=>{}));const xe={};for(const be in Io)Object.defineProperty(xe,be,{get:()=>l.value[be],enumerable:!0});re.provide(GE,fe),re.provide(KE,_D(xe)),re.provide(HT,l);const Ne=re.unmount;Se.add(re),re.unmount=function(){Se.delete(re),Se.size<1&&(u=Io,R&&R(),R=null,l.value=Io,pe=!1,Z=!1),Ne()}}};function we(re){return re.reduce((fe,xe)=>fe.then(()=>y(xe)),Promise.resolve())}return Le}function BZ(t,e){const n=[],i=[],s=[],r=Math.max(e.matched.length,t.matched.length);for(let a=0;a<r;a++){const o=e.matched[a];o&&(t.matched.find(u=>wd(u,o))?i.push(o):n.push(o));const l=t.matched[a];l&&(e.matched.find(u=>wd(u,l))||s.push(l))}return[n,i,s]}function dV(t){return vt(KE)}const UZ=cr({__name:"App",setup(t){const e=Sr(),n=qm(),i=window.matchMedia("(prefers-color-scheme: dark)");e.theme||s(i.matches),i.addEventListener("change",r=>{s(r.matches)});function s(r){e.setTheme(r?"dark":"light"),n.global.name.value=e.theme}return(r,a)=>{const o=qt("v-main"),l=qt("v-app");return $n(),Cs(l,null,{default:ln(()=>[_(pJ),_(o,null,{default:ln(()=>[_(it(cV))]),_:1}),_(VJ)]),_:1})}}}),KA={offset:"16",contentClass:"rounded-xl"},$Z={VSheet:{class:"text-center pa-sm-6 pa-4 mx-auto",rounded:"xl"},VExpansionPanels:{rounded:"xl"},VMenu:KA,VAutocomplete:{menuProps:{...KA}}},hV=NR({apiKey:"AIzaSyDllpIfSF7Ccchfi4cyRP-FMFLa8Hg2Q-U",authDomain:"myli-f8c54.firebaseapp.com",projectId:"myli-f8c54",storageBucket:"myli-f8c54.firebasestorage.app",messagingSenderId:"455641696425",appId:"1:455641696425:web:5128a6005d8f816a4801b8",measurementId:"G-5L9ZC0TFBE"}),Zp=ZK(hV),HZ={class:"d-flex align-center justify-space-between"},jZ={key:0},qZ={key:2},zZ=cr({__name:"LoginView",setup(t){const e=FH(),n=dV(),i=Sr(),s=xf(),r=Me(""),a=Me("");i.refreshCurrentUser(),$e(i,({isAuthenticated:d,currentUser:h})=>{r.value=d?h.email:"",a.value=d?"xxxxxxxxxxxx":""},{immediate:!0});async function o(){try{await I$(e,r.value,a.value),await i.refreshCurrentUser(),s.displayMessage("Account successfully created"),c()}catch({message:d}){s.displayError(d)}}async function l(){try{await A$(e,r.value,a.value),await i.refreshCurrentUser(),c()}catch({message:d}){s.displayError(d)}}async function u(){try{await P$(e),await i.refreshCurrentUser(),s.displayMessage("You have successfully sign out")}catch({message:d}){s.displayError(d)}}function c(){l_.push(n.query.redirect||"/")}return(d,h)=>{const f=qt("v-text-field"),g=qt("v-btn"),v=qt("v-form"),b=qt("v-sheet"),I=qt("v-container");return $n(),Cs(I,{class:"fill-height"},{default:ln(()=>[_(b,{class:"pa-md-12 mb-16"},{default:ln(()=>[h[2]||(h[2]=la("h1",null,"Connection",-1)),h[3]||(h[3]=la("p",null,"This app requires an account to save and manage your own links",-1)),_(v,{class:"mt-4",onSubmit:Oc(l,["prevent"])},{default:ln(()=>[_(f,{modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=w=>r.value=w),disabled:it(i).isAuthenticated,autofocus:"",label:"Email",rounded:"",type:"email",variant:"outlined"},null,8,["modelValue","disabled"]),_(f,{modelValue:a.value,"onUpdate:modelValue":h[1]||(h[1]=w=>a.value=w),disabled:it(i).isAuthenticated,label:"Password",rounded:"",type:"password",variant:"outlined"},null,8,["modelValue","disabled"]),la("div",HZ,[it(i).isAuthenticated?($n(),Ko("p",jZ," You are currently logged in ")):($n(),Cs(g,{key:1,rounded:"",text:"Create account",variant:"text",onClick:o})),it(i).isAuthenticated?($n(),Ko("div",qZ,[_(g,{rounded:"",text:"Go back",variant:"text",onClick:c}),_(g,{class:"me-2",color:"primary",rounded:"",text:"Logout",onClick:u})])):($n(),Cs(g,{key:3,color:"primary",rounded:"",text:"Login",type:"submit"}))])]),_:1})]),_:1})]),_:1})}}});var Sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function fV(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}var O0,YA;function Uy(){if(YA)return O0;YA=1;var t;return typeof window<"u"?t=window:typeof Sv<"u"?t=Sv:typeof self<"u"?t=self:t={},O0=t,O0}var WZ=Uy();const te=zm(WZ),GZ={},KZ=Object.freeze(Object.defineProperty({__proto__:null,default:GZ},Symbol.toStringTag,{value:"Module"})),YZ=fV(KZ);var N0,XA;function mV(){if(XA)return N0;XA=1;var t=typeof Sv<"u"?Sv:typeof window<"u"?window:{},e=YZ,n;return typeof document<"u"?n=document:(n=t["__GLOBAL_DOCUMENT_CACHE@4"],n||(n=t["__GLOBAL_DOCUMENT_CACHE@4"]=e)),N0=n,N0}var XZ=mV();const qe=zm(XZ);var eg={exports:{}},M0={exports:{}},QA;function QZ(){return QA||(QA=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)({}).hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(M0)),M0.exports}var V0,JA;function JZ(){if(JA)return V0;JA=1,V0=e;var t=Object.prototype.toString;function e(n){if(!n)return!1;var i=t.call(n);return i==="[object Function]"||typeof n=="function"&&i!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}return V0}var F0,ZA;function ZZ(){if(ZA)return F0;ZA=1;function t(s,r){var a=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(a)return(a=a.call(s)).next.bind(a);if(Array.isArray(s)||(a=e(s))||r){a&&(s=a);var o=0;return function(){return o>=s.length?{done:!0}:{done:!1,value:s[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(s,r){if(s){if(typeof s=="string")return n(s,r);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(s,r)}}function n(s,r){(r==null||r>s.length)&&(r=s.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=s[a];return o}var i=function(){function s(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var r=s.prototype;return r.getIsEnabled=function(){return this.enabled_},r.enable=function(){this.enabled_=!0},r.disable=function(){this.enabled_=!1},r.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},r.addInterceptor=function(o,l){this.typeToInterceptorsMap_.has(o)||this.typeToInterceptorsMap_.set(o,new Set);var u=this.typeToInterceptorsMap_.get(o);return u.has(l)?!1:(u.add(l),!0)},r.removeInterceptor=function(o,l){var u=this.typeToInterceptorsMap_.get(o);return u&&u.has(l)?(u.delete(l),!0):!1},r.clearInterceptorsByType=function(o){var l=this.typeToInterceptorsMap_.get(o);return l?(this.typeToInterceptorsMap_.delete(o),this.typeToInterceptorsMap_.set(o,new Set),!0):!1},r.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},r.getForType=function(o){return this.typeToInterceptorsMap_.get(o)||new Set},r.execute=function(o,l){for(var u=this.getForType(o),c=t(u),d;!(d=c()).done;){var h=d.value;try{l=h(l)}catch{}}return l},s}();return F0=i,F0}var B0,ek;function eee(){if(ek)return B0;ek=1;var t=function(){function n(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var i=n.prototype;return i.getIsEnabled=function(){return this.enabled_},i.enable=function(){this.enabled_=!0},i.disable=function(){this.enabled_=!1},i.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},i.getMaxAttempts=function(){return this.maxAttempts_},i.setMaxAttempts=function(r){this.maxAttempts_=r},i.getDelayFactor=function(){return this.delayFactor_},i.setDelayFactor=function(r){this.delayFactor_=r},i.getFuzzFactor=function(){return this.fuzzFactor_},i.setFuzzFactor=function(r){this.fuzzFactor_=r},i.getInitialDelay=function(){return this.initialDelay_},i.setInitialDelay=function(r){this.initialDelay_=r},i.createRetry=function(r){var a=r===void 0?{}:r,o=a.maxAttempts,l=a.delayFactor,u=a.fuzzFactor,c=a.initialDelay;return new e({maxAttempts:o||this.maxAttempts_,delayFactor:l||this.delayFactor_,fuzzFactor:u||this.fuzzFactor_,initialDelay:c||this.initialDelay_})},n}(),e=function(){function n(s){this.maxAttempts_=s.maxAttempts,this.delayFactor_=s.delayFactor,this.fuzzFactor_=s.fuzzFactor,this.currentDelay_=s.initialDelay,this.currentAttempt_=1}var i=n.prototype;return i.moveToNextAttempt=function(){this.currentAttempt_++;var r=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+r},i.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},i.getCurrentDelay=function(){return this.currentDelay_},i.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},i.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},i.getCurrentFuzzedDelay=function(){var r=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return r+Math.random()*(a-r)},n}();return B0=t,B0}var U0,tk;function tee(){if(tk)return U0;tk=1;var t=Uy(),e=function(s,r){return r===void 0&&(r=!1),function(a,o,l){if(a){s(a);return}if(o.statusCode>=400&&o.statusCode<=599){var u=l;if(r)if(t.TextDecoder){var c=n(o.headers&&o.headers["content-type"]);try{u=new TextDecoder(c).decode(l)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(l));s({cause:u});return}s(null,l)}};function n(i){return i===void 0&&(i=""),i.toLowerCase().split(";").reduce(function(s,r){var a=r.split("="),o=a[0],l=a[1];return o.trim()==="charset"?l.trim():s},"utf-8")}return U0=e,U0}var nk;function nee(){if(nk)return eg.exports;nk=1;var t=Uy(),e=QZ(),n=JZ(),i=ZZ(),s=eee();u.httpHandler=tee(),u.requestInterceptorsStorage=new i,u.responseInterceptorsStorage=new i,u.retryManager=new s;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var r=function(g){var v={};return g&&g.trim().split(`
`).forEach(function(b){var I=b.indexOf(":"),w=b.slice(0,I).trim().toLowerCase(),P=b.slice(I+1).trim();typeof v[w]>"u"?v[w]=P:Array.isArray(v[w])?v[w].push(P):v[w]=[v[w],P]}),v};eg.exports=u,eg.exports.default=u,u.XMLHttpRequest=t.XMLHttpRequest||h,u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:t.XDomainRequest,a(["get","put","post","patch","head","delete"],function(f){u[f==="delete"?"del":f]=function(g,v,b){return v=l(g,v,b),v.method=f.toUpperCase(),c(v)}});function a(f,g){for(var v=0;v<f.length;v++)g(f[v])}function o(f){for(var g in f)if(f.hasOwnProperty(g))return!1;return!0}function l(f,g,v){var b=f;return n(g)?(v=g,typeof f=="string"&&(b={uri:f})):b=e({},g,{uri:f}),b.callback=v,b}function u(f,g,v){return g=l(f,g,v),c(g)}function c(f){if(typeof f.callback>"u")throw new Error("callback argument missing");if(f.requestType&&u.requestInterceptorsStorage.getIsEnabled()){var g={uri:f.uri||f.url,headers:f.headers||{},body:f.body,metadata:f.metadata||{},retry:f.retry,timeout:f.timeout},v=u.requestInterceptorsStorage.execute(f.requestType,g);f.uri=v.uri,f.headers=v.headers,f.body=v.body,f.metadata=v.metadata,f.retry=v.retry,f.timeout=v.timeout}var b=!1,I=function(ne,ee,Q){b||(b=!0,f.callback(ne,ee,Q))};function w(){U.readyState===4&&!u.responseInterceptorsStorage.getIsEnabled()&&setTimeout(F,0)}function P(){var Z=void 0;if(U.response?Z=U.response:Z=U.responseText||d(U),W)try{Z=JSON.parse(Z)}catch{}return Z}function M(Z){if(clearTimeout(se),clearTimeout(f.retryTimeout),Z instanceof Error||(Z=new Error(""+(Z||"Unknown XMLHttpRequest Error"))),Z.statusCode=0,!S&&u.retryManager.getIsEnabled()&&f.retry&&f.retry.shouldRetry()){f.retryTimeout=setTimeout(function(){f.retry.moveToNextAttempt(),f.xhr=U,c(f)},f.retry.getCurrentFuzzedDelay());return}if(f.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var ne={headers:ae.headers||{},body:ae.body,responseUrl:U.responseURL,responseType:U.responseType},ee=u.responseInterceptorsStorage.execute(f.requestType,ne);ae.body=ee.body,ae.headers=ee.headers}return I(Z,ae)}function F(){if(!S){var Z;clearTimeout(se),clearTimeout(f.retryTimeout),f.useXDR&&U.status===void 0?Z=200:Z=U.status===1223?204:U.status;var ne=ae,ee=null;if(Z!==0?(ne={body:P(),statusCode:Z,method:E,headers:{},url:y,rawRequest:U},U.getAllResponseHeaders&&(ne.headers=r(U.getAllResponseHeaders()))):ee=new Error("Internal XMLHttpRequest Error"),f.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var Q={headers:ne.headers||{},body:ne.body,responseUrl:U.responseURL,responseType:U.responseType},j=u.responseInterceptorsStorage.execute(f.requestType,Q);ne.body=j.body,ne.headers=j.headers}return I(ee,ne,ne.body)}}var U=f.xhr||null;U||(f.cors||f.useXDR?U=new u.XDomainRequest:U=new u.XMLHttpRequest);var D,S,y=U.url=f.uri||f.url,E=U.method=f.method||"GET",A=f.body||f.data,k=U.headers=f.headers||{},R=!!f.sync,W=!1,se,ae={body:void 0,headers:{},statusCode:0,method:E,url:y,rawRequest:U};if("json"in f&&f.json!==!1&&(W=!0,k.accept||k.Accept||(k.Accept="application/json"),E!=="GET"&&E!=="HEAD"&&(k["content-type"]||k["Content-Type"]||(k["Content-Type"]="application/json"),A=JSON.stringify(f.json===!0?A:f.json))),U.onreadystatechange=w,U.onload=F,U.onerror=M,U.onprogress=function(){},U.onabort=function(){S=!0,clearTimeout(f.retryTimeout)},U.ontimeout=M,U.open(E,y,!R,f.username,f.password),R||(U.withCredentials=!!f.withCredentials),!R&&f.timeout>0&&(se=setTimeout(function(){if(!S){S=!0,U.abort("timeout");var Z=new Error("XMLHttpRequest timeout");Z.code="ETIMEDOUT",M(Z)}},f.timeout)),U.setRequestHeader)for(D in k)k.hasOwnProperty(D)&&U.setRequestHeader(D,k[D]);else if(f.headers&&!o(f.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in f&&(U.responseType=f.responseType),"beforeSend"in f&&typeof f.beforeSend=="function"&&f.beforeSend(U),U.send(A||null),U}function d(f){try{if(f.responseType==="document")return f.responseXML;var g=f.responseXML&&f.responseXML.documentElement.nodeName==="parsererror";if(f.responseType===""&&!g)return f.responseXML}catch{}return null}function h(){}return eg.exports}var iee=nee();const pV=zm(iee);var $0={exports:{}},H0,ik;function see(){if(ik)return H0;ik=1;var t=mV(),e=Object.create||function(){function y(){}return function(E){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return y.prototype=E,new y}}();function n(y,E){this.name="ParsingError",this.code=y.code,this.message=E||y.message}n.prototype=e(Error.prototype),n.prototype.constructor=n,n.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function i(y){function E(k,R,W,se){return(k|0)*3600+(R|0)*60+(W|0)+(se|0)/1e3}var A=y.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return A?A[3]?E(A[1],A[2],A[3].replace(":",""),A[4]):A[1]>59?E(A[1],A[2],0,A[4]):E(0,A[1],A[2],A[4]):null}function s(){this.values=e(null)}s.prototype={set:function(y,E){!this.get(y)&&E!==""&&(this.values[y]=E)},get:function(y,E,A){return A?this.has(y)?this.values[y]:E[A]:this.has(y)?this.values[y]:E},has:function(y){return y in this.values},alt:function(y,E,A){for(var k=0;k<A.length;++k)if(E===A[k]){this.set(y,E);break}},integer:function(y,E){/^-?\d+$/.test(E)&&this.set(y,parseInt(E,10))},percent:function(y,E){return E.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(E=parseFloat(E),E>=0&&E<=100)?(this.set(y,E),!0):!1}};function r(y,E,A,k){var R=k?y.split(k):[y];for(var W in R)if(typeof R[W]=="string"){var se=R[W].split(A);if(se.length===2){var ae=se[0].trim(),Z=se[1].trim();E(ae,Z)}}}function a(y,E,A){var k=y;function R(){var ae=i(y);if(ae===null)throw new n(n.Errors.BadTimeStamp,"Malformed timestamp: "+k);return y=y.replace(/^[^\sa-zA-Z-]+/,""),ae}function W(ae,Z){var ne=new s;r(ae,function(ee,Q){switch(ee){case"region":for(var j=A.length-1;j>=0;j--)if(A[j].id===Q){ne.set(ee,A[j].region);break}break;case"vertical":ne.alt(ee,Q,["rl","lr"]);break;case"line":var le=Q.split(","),pe=le[0];ne.integer(ee,pe),ne.percent(ee,pe)&&ne.set("snapToLines",!1),ne.alt(ee,pe,["auto"]),le.length===2&&ne.alt("lineAlign",le[1],["start","center","end"]);break;case"position":le=Q.split(","),ne.percent(ee,le[0]),le.length===2&&ne.alt("positionAlign",le[1],["start","center","end"]);break;case"size":ne.percent(ee,Q);break;case"align":ne.alt(ee,Q,["start","center","end","left","right"]);break}},/:/,/\s/),Z.region=ne.get("region",null),Z.vertical=ne.get("vertical","");try{Z.line=ne.get("line","auto")}catch{}Z.lineAlign=ne.get("lineAlign","start"),Z.snapToLines=ne.get("snapToLines",!0),Z.size=ne.get("size",100);try{Z.align=ne.get("align","center")}catch{Z.align=ne.get("align","middle")}try{Z.position=ne.get("position","auto")}catch{Z.position=ne.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Z.align)}Z.positionAlign=ne.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Z.align)}function se(){y=y.replace(/^\s+/,"")}if(se(),E.startTime=R(),se(),y.substr(0,3)!=="-->")throw new n(n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+k);y=y.substr(3),se(),E.endTime=R(),se(),W(y,E)}var o=t.createElement&&t.createElement("textarea"),l={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},c={v:"title",lang:"lang"},d={rt:"ruby"};function h(y,E){function A(){if(!E)return null;function pe(Le){return E=E.substr(Le.length),Le}var Se=E.match(/^([^<]*)(<[^>]*>?)?/);return pe(Se[1]?Se[1]:Se[2])}function k(pe){return o.innerHTML=pe,pe=o.textContent,o.textContent="",pe}function R(pe,Se){return!d[Se.localName]||d[Se.localName]===pe.localName}function W(pe,Se){var Le=l[pe];if(!Le)return null;var we=y.document.createElement(Le),re=c[pe];return re&&Se&&(we[re]=Se.trim()),we}for(var se=y.document.createElement("div"),ae=se,Z,ne=[];(Z=A())!==null;){if(Z[0]==="<"){if(Z[1]==="/"){ne.length&&ne[ne.length-1]===Z.substr(2).replace(">","")&&(ne.pop(),ae=ae.parentNode);continue}var ee=i(Z.substr(1,Z.length-2)),Q;if(ee){Q=y.document.createProcessingInstruction("timestamp",ee),ae.appendChild(Q);continue}var j=Z.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!j||(Q=W(j[1],j[3]),!Q)||!R(ae,Q))continue;if(j[2]){var le=j[2].split(".");le.forEach(function(pe){var Se=/^bg_/.test(pe),Le=Se?pe.slice(3):pe;if(u.hasOwnProperty(Le)){var we=Se?"background-color":"color",re=u[Le];Q.style[we]=re}}),Q.className=le.join(" ")}ne.push(j[1]),ae.appendChild(Q),ae=Q;continue}ae.appendChild(y.document.createTextNode(k(Z)))}return se}var f=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function g(y){for(var E=0;E<f.length;E++){var A=f[E];if(y>=A[0]&&y<=A[1])return!0}return!1}function v(y){var E=[],A="",k;if(!y||!y.childNodes)return"ltr";function R(ae,Z){for(var ne=Z.childNodes.length-1;ne>=0;ne--)ae.push(Z.childNodes[ne])}function W(ae){if(!ae||!ae.length)return null;var Z=ae.pop(),ne=Z.textContent||Z.innerText;if(ne){var ee=ne.match(/^.*(\n|\r)/);return ee?(ae.length=0,ee[0]):ne}if(Z.tagName==="ruby")return W(ae);if(Z.childNodes)return R(ae,Z),W(ae)}for(R(E,y);A=W(E);)for(var se=0;se<A.length;se++)if(k=A.charCodeAt(se),g(k))return"rtl";return"ltr"}function b(y){if(typeof y.line=="number"&&(y.snapToLines||y.line>=0&&y.line<=100))return y.line;if(!y.track||!y.track.textTrackList||!y.track.textTrackList.mediaElement)return-1;for(var E=y.track,A=E.textTrackList,k=0,R=0;R<A.length&&A[R]!==E;R++)A[R].mode==="showing"&&k++;return++k*-1}function I(){}I.prototype.applyStyles=function(y,E){E=E||this.div;for(var A in y)y.hasOwnProperty(A)&&(E.style[A]=y[A])},I.prototype.formatStyle=function(y,E){return y===0?0:y+E};function w(y,E,A){I.call(this),this.cue=E,this.cueDiv=h(y,E.text);var k={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:E.vertical===""?"horizontal-tb":E.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(k,this.cueDiv),this.div=y.document.createElement("div"),k={direction:v(this.cueDiv),writingMode:E.vertical===""?"horizontal-tb":E.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:E.align==="middle"?"center":E.align,font:A.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(k),this.div.appendChild(this.cueDiv);var R=0;switch(E.positionAlign){case"start":case"line-left":R=E.position;break;case"center":R=E.position-E.size/2;break;case"end":case"line-right":R=E.position-E.size;break}E.vertical===""?this.applyStyles({left:this.formatStyle(R,"%"),width:this.formatStyle(E.size,"%")}):this.applyStyles({top:this.formatStyle(R,"%"),height:this.formatStyle(E.size,"%")}),this.move=function(W){this.applyStyles({top:this.formatStyle(W.top,"px"),bottom:this.formatStyle(W.bottom,"px"),left:this.formatStyle(W.left,"px"),right:this.formatStyle(W.right,"px"),height:this.formatStyle(W.height,"px"),width:this.formatStyle(W.width,"px")})}}w.prototype=e(I.prototype),w.prototype.constructor=w;function P(y){var E,A,k,R;if(y.div){A=y.div.offsetHeight,k=y.div.offsetWidth,R=y.div.offsetTop;var W=(W=y.div.childNodes)&&(W=W[0])&&W.getClientRects&&W.getClientRects();y=y.div.getBoundingClientRect(),E=W?Math.max(W[0]&&W[0].height||0,y.height/W.length):0}this.left=y.left,this.right=y.right,this.top=y.top||R,this.height=y.height||A,this.bottom=y.bottom||R+(y.height||A),this.width=y.width||k,this.lineHeight=E!==void 0?E:y.lineHeight}P.prototype.move=function(y,E){switch(E=E!==void 0?E:this.lineHeight,y){case"+x":this.left+=E,this.right+=E;break;case"-x":this.left-=E,this.right-=E;break;case"+y":this.top+=E,this.bottom+=E;break;case"-y":this.top-=E,this.bottom-=E;break}},P.prototype.overlaps=function(y){return this.left<y.right&&this.right>y.left&&this.top<y.bottom&&this.bottom>y.top},P.prototype.overlapsAny=function(y){for(var E=0;E<y.length;E++)if(this.overlaps(y[E]))return!0;return!1},P.prototype.within=function(y){return this.top>=y.top&&this.bottom<=y.bottom&&this.left>=y.left&&this.right<=y.right},P.prototype.overlapsOppositeAxis=function(y,E){switch(E){case"+x":return this.left<y.left;case"-x":return this.right>y.right;case"+y":return this.top<y.top;case"-y":return this.bottom>y.bottom}},P.prototype.intersectPercentage=function(y){var E=Math.max(0,Math.min(this.right,y.right)-Math.max(this.left,y.left)),A=Math.max(0,Math.min(this.bottom,y.bottom)-Math.max(this.top,y.top)),k=E*A;return k/(this.height*this.width)},P.prototype.toCSSCompatValues=function(y){return{top:this.top-y.top,bottom:y.bottom-this.bottom,left:this.left-y.left,right:y.right-this.right,height:this.height,width:this.width}},P.getSimpleBoxPosition=function(y){var E=y.div?y.div.offsetHeight:y.tagName?y.offsetHeight:0,A=y.div?y.div.offsetWidth:y.tagName?y.offsetWidth:0,k=y.div?y.div.offsetTop:y.tagName?y.offsetTop:0;y=y.div?y.div.getBoundingClientRect():y.tagName?y.getBoundingClientRect():y;var R={left:y.left,right:y.right,top:y.top||k,height:y.height||E,bottom:y.bottom||k+(y.height||E),width:y.width||A};return R};function M(y,E,A,k){function R(Le,we){for(var re,fe=new P(Le),xe=1,Ne=0;Ne<we.length;Ne++){for(;Le.overlapsOppositeAxis(A,we[Ne])||Le.within(A)&&Le.overlapsAny(k);)Le.move(we[Ne]);if(Le.within(A))return Le;var be=Le.intersectPercentage(A);xe>be&&(re=new P(Le),xe=be),Le=new P(fe)}return re||fe}var W=new P(E),se=E.cue,ae=b(se),Z=[];if(se.snapToLines){var ne;switch(se.vertical){case"":Z=["+y","-y"],ne="height";break;case"rl":Z=["+x","-x"],ne="width";break;case"lr":Z=["-x","+x"],ne="width";break}var ee=W.lineHeight,Q=ee*Math.round(ae),j=A[ne]+ee,le=Z[0];Math.abs(Q)>j&&(Q=Q<0?-1:1,Q*=Math.ceil(j/ee)*ee),ae<0&&(Q+=se.vertical===""?A.height:A.width,Z=Z.reverse()),W.move(le,Q)}else{var pe=W.lineHeight/A.height*100;switch(se.lineAlign){case"center":ae-=pe/2;break;case"end":ae-=pe;break}switch(se.vertical){case"":E.applyStyles({top:E.formatStyle(ae,"%")});break;case"rl":E.applyStyles({left:E.formatStyle(ae,"%")});break;case"lr":E.applyStyles({right:E.formatStyle(ae,"%")});break}Z=["+y","-x","+x","-y"],W=new P(E)}var Se=R(W,Z);E.move(Se.toCSSCompatValues(A))}function F(){}F.StringDecoder=function(){return{decode:function(y){if(!y)return"";if(typeof y!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(y))}}},F.convertCueToDOMTree=function(y,E){return!y||!E?null:h(y,E)};var U=.05,D="sans-serif",S="1.5%";return F.processCues=function(y,E,A){if(!y||!E||!A)return null;for(;A.firstChild;)A.removeChild(A.firstChild);var k=y.document.createElement("div");k.style.position="absolute",k.style.left="0",k.style.right="0",k.style.top="0",k.style.bottom="0",k.style.margin=S,A.appendChild(k);function R(ee){for(var Q=0;Q<ee.length;Q++)if(ee[Q].hasBeenReset||!ee[Q].displayState)return!0;return!1}if(!R(E)){for(var W=0;W<E.length;W++)k.appendChild(E[W].displayState);return}var se=[],ae=P.getSimpleBoxPosition(k),Z=Math.round(ae.height*U*100)/100,ne={font:Z+"px "+D};(function(){for(var ee,Q,j=0;j<E.length;j++)Q=E[j],ee=new w(y,Q,ne),k.appendChild(ee.div),M(y,ee,ae,se),Q.displayState=ee.div,se.push(P.getSimpleBoxPosition(ee))})()},F.Parser=function(y,E,A){A||(A=E,E={}),E||(E={}),this.window=y,this.vttjs=E,this.state="INITIAL",this.buffer="",this.decoder=A||new TextDecoder("utf8"),this.regionList=[]},F.Parser.prototype={reportOrThrowError:function(y){if(y instanceof n)this.onparsingerror&&this.onparsingerror(y);else throw y},parse:function(y){var E=this;y&&(E.buffer+=E.decoder.decode(y,{stream:!0}));function A(){for(var ee=E.buffer,Q=0;Q<ee.length&&ee[Q]!=="\r"&&ee[Q]!==`
`;)++Q;var j=ee.substr(0,Q);return ee[Q]==="\r"&&++Q,ee[Q]===`
`&&++Q,E.buffer=ee.substr(Q),j}function k(ee){var Q=new s;if(r(ee,function(le,pe){switch(le){case"id":Q.set(le,pe);break;case"width":Q.percent(le,pe);break;case"lines":Q.integer(le,pe);break;case"regionanchor":case"viewportanchor":var Se=pe.split(",");if(Se.length!==2)break;var Le=new s;if(Le.percent("x",Se[0]),Le.percent("y",Se[1]),!Le.has("x")||!Le.has("y"))break;Q.set(le+"X",Le.get("x")),Q.set(le+"Y",Le.get("y"));break;case"scroll":Q.alt(le,pe,["up"]);break}},/=/,/\s/),Q.has("id")){var j=new(E.vttjs.VTTRegion||E.window.VTTRegion);j.width=Q.get("width",100),j.lines=Q.get("lines",3),j.regionAnchorX=Q.get("regionanchorX",0),j.regionAnchorY=Q.get("regionanchorY",100),j.viewportAnchorX=Q.get("viewportanchorX",0),j.viewportAnchorY=Q.get("viewportanchorY",100),j.scroll=Q.get("scroll",""),E.onregion&&E.onregion(j),E.regionList.push({id:Q.get("id"),region:j})}}function R(ee){var Q=new s;r(ee,function(j,le){switch(j){case"MPEGT":Q.integer(j+"S",le);break;case"LOCA":Q.set(j+"L",i(le));break}},/[^\d]:/,/,/),E.ontimestampmap&&E.ontimestampmap({MPEGTS:Q.get("MPEGTS"),LOCAL:Q.get("LOCAL")})}function W(ee){ee.match(/X-TIMESTAMP-MAP/)?r(ee,function(Q,j){switch(Q){case"X-TIMESTAMP-MAP":R(j);break}},/=/):r(ee,function(Q,j){switch(Q){case"Region":k(j);break}},/:/)}try{var se;if(E.state==="INITIAL"){if(!/\r\n|\n/.test(E.buffer))return this;se=A();var ae=se.match(/^WEBVTT([ \t].*)?$/);if(!ae||!ae[0])throw new n(n.Errors.BadSignature);E.state="HEADER"}for(var Z=!1;E.buffer;){if(!/\r\n|\n/.test(E.buffer))return this;switch(Z?Z=!1:se=A(),E.state){case"HEADER":/:/.test(se)?W(se):se||(E.state="ID");continue;case"NOTE":se||(E.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(se)){E.state="NOTE";break}if(!se)continue;E.cue=new(E.vttjs.VTTCue||E.window.VTTCue)(0,0,"");try{E.cue.align="center"}catch{E.cue.align="middle"}if(E.state="CUE",se.indexOf("-->")===-1){E.cue.id=se;continue}case"CUE":try{a(se,E.cue,E.regionList)}catch(ee){E.reportOrThrowError(ee),E.cue=null,E.state="BADCUE";continue}E.state="CUETEXT";continue;case"CUETEXT":var ne=se.indexOf("-->")!==-1;if(!se||ne&&(Z=!0)){E.oncue&&E.oncue(E.cue),E.cue=null,E.state="ID";continue}E.cue.text&&(E.cue.text+=`
`),E.cue.text+=se.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":se||(E.state="ID");continue}}}catch(ee){E.reportOrThrowError(ee),E.state==="CUETEXT"&&E.cue&&E.oncue&&E.oncue(E.cue),E.cue=null,E.state=E.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var y=this;try{if(y.buffer+=y.decoder.decode(),(y.cue||y.state==="HEADER")&&(y.buffer+=`

`,y.parse()),y.state==="INITIAL")throw new n(n.Errors.BadSignature)}catch(E){y.reportOrThrowError(E)}return y.onflush&&y.onflush(),this}},H0=F,H0}var j0,sk;function ree(){if(sk)return j0;sk=1;var t="auto",e={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function i(a){if(typeof a!="string")return!1;var o=e[a.toLowerCase()];return o?a.toLowerCase():!1}function s(a){if(typeof a!="string")return!1;var o=n[a.toLowerCase()];return o?a.toLowerCase():!1}function r(a,o,l){this.hasBeenReset=!1;var u="",c=!1,d=a,h=o,f=l,g=null,v="",b=!0,I="auto",w="start",P="auto",M="auto",F=100,U="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return u},set:function(D){u=""+D}},pauseOnExit:{enumerable:!0,get:function(){return c},set:function(D){c=!!D}},startTime:{enumerable:!0,get:function(){return d},set:function(D){if(typeof D!="number")throw new TypeError("Start time must be set to a number.");d=D,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return h},set:function(D){if(typeof D!="number")throw new TypeError("End time must be set to a number.");h=D,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return f},set:function(D){f=""+D,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return g},set:function(D){g=D,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return v},set:function(D){var S=i(D);if(S===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");v=S,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return b},set:function(D){b=!!D,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return I},set:function(D){if(typeof D!="number"&&D!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");I=D,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return w},set:function(D){var S=s(D);S?(w=S,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return P},set:function(D){if(D<0||D>100)throw new Error("Position must be between 0 and 100.");P=D,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return M},set:function(D){var S=s(D);S?(M=S,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return F},set:function(D){if(D<0||D>100)throw new Error("Size must be between 0 and 100.");F=D,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return U},set:function(D){var S=s(D);if(!S)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");U=S,this.hasBeenReset=!0}}}),this.displayState=void 0}return r.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},j0=r,j0}var q0,rk;function aee(){if(rk)return q0;rk=1;var t={"":!0,up:!0};function e(s){if(typeof s!="string")return!1;var r=t[s.toLowerCase()];return r?s.toLowerCase():!1}function n(s){return typeof s=="number"&&s>=0&&s<=100}function i(){var s=100,r=3,a=0,o=100,l=0,u=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return s},set:function(d){if(!n(d))throw new Error("Width must be between 0 and 100.");s=d}},lines:{enumerable:!0,get:function(){return r},set:function(d){if(typeof d!="number")throw new TypeError("Lines must be set to a number.");r=d}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(d){if(!n(d))throw new Error("RegionAnchorX must be between 0 and 100.");o=d}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(d){if(!n(d))throw new Error("RegionAnchorY must be between 0 and 100.");a=d}},viewportAnchorY:{enumerable:!0,get:function(){return u},set:function(d){if(!n(d))throw new Error("ViewportAnchorY must be between 0 and 100.");u=d}},viewportAnchorX:{enumerable:!0,get:function(){return l},set:function(d){if(!n(d))throw new Error("ViewportAnchorX must be between 0 and 100.");l=d}},scroll:{enumerable:!0,get:function(){return c},set:function(d){var h=e(d);h===!1?console.warn("Scroll: an invalid or illegal string was specified."):c=h}}})}return q0=i,q0}var ak;function oee(){if(ak)return $0.exports;ak=1;var t=Uy(),e=$0.exports={WebVTT:see(),VTTCue:ree(),VTTRegion:aee()};t.vttjs=e,t.WebVTT=e.WebVTT;var n=e.VTTCue,i=e.VTTRegion,s=t.VTTCue,r=t.VTTRegion;return e.shim=function(){t.VTTCue=n,t.VTTRegion=i},e.restore=function(){t.VTTCue=s,t.VTTRegion=r},t.VTTCue||e.shim(),$0.exports}var lee=oee();const ok=zm(lee);function zn(){return zn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zn.apply(null,arguments)}var lk="https://example.com",$y=function(e,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(e)&&(e=te.location&&te.location.href||"");var i=/^\/\//.test(e),s=!te.location&&!/\/\//i.test(e);e=new te.URL(e,te.location||lk);var r=new URL(n,e);return s?r.href.slice(lk.length):i?r.href.slice(r.protocol.length):r.href},YE=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(i,s){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(s)},e.off=function(i,s){if(!this.listeners[i])return!1;var r=this.listeners[i].indexOf(s);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(r,1),r>-1},e.trigger=function(i){var s=this.listeners[i];if(s)if(arguments.length===2)for(var r=s.length,a=0;a<r;++a)s[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=s.length,u=0;u<l;++u)s[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(s){i.push(s)})},t}(),uee=function(e){return te.atob?te.atob(e):Buffer.from(e,"base64").toString("binary")};function gV(t){for(var e=uee(t),n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class cee extends YE{constructor(){super(),this.buffer=""}push(e){let n;for(this.buffer+=e,n=this.buffer.indexOf(`
`);n>-1;n=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)}}const dee="	",z0=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),n={};return e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),n},hee=function(){const n="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+n+")")},is=function(t){const e={};if(!t)return e;const n=t.split(hee());let i=n.length,s;for(;i--;)n[i]!==""&&(s=/([^=]*)=(.*)/.exec(n[i]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),e[s[0]]=s[1]);return e},uk=t=>{const e=t.split("x"),n={};return e[0]&&(n.width=parseInt(e[0],10)),e[1]&&(n.height=parseInt(e[1],10)),n};class fee extends YE{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let n,i;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((r,a)=>{const o=a(e);return o===e?r:r.concat([o])},[e]).forEach(r=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,r))return;if(r.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:r.slice(1)});return}if(r=r.replace("\r",""),n=/^#EXTM3U/.exec(r),n){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(n=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(r),n){i={type:"tag",tagType:"inf"},n[1]&&(i.duration=parseFloat(n[1])),n[2]&&(i.title=n[2]),this.trigger("data",i);return}if(n=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(r),n){i={type:"tag",tagType:"targetduration"},n[1]&&(i.duration=parseInt(n[1],10)),this.trigger("data",i);return}if(n=/^#EXT-X-VERSION:([0-9.]*)?/.exec(r),n){i={type:"tag",tagType:"version"},n[1]&&(i.version=parseInt(n[1],10)),this.trigger("data",i);return}if(n=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(r),n){i={type:"tag",tagType:"media-sequence"},n[1]&&(i.number=parseInt(n[1],10)),this.trigger("data",i);return}if(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(r),n){i={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(i.number=parseInt(n[1],10)),this.trigger("data",i);return}if(n=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(r),n){i={type:"tag",tagType:"playlist-type"},n[1]&&(i.playlistType=n[1]),this.trigger("data",i);return}if(n=/^#EXT-X-BYTERANGE:(.*)?$/.exec(r),n){i=zn(z0(n[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",i);return}if(n=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(r),n){i={type:"tag",tagType:"allow-cache"},n[1]&&(i.allowed=!/NO/.test(n[1])),this.trigger("data",i);return}if(n=/^#EXT-X-MAP:(.*)$/.exec(r),n){if(i={type:"tag",tagType:"map"},n[1]){const a=is(n[1]);a.URI&&(i.uri=a.URI),a.BYTERANGE&&(i.byterange=z0(a.BYTERANGE))}this.trigger("data",i);return}if(n=/^#EXT-X-STREAM-INF:(.*)$/.exec(r),n){i={type:"tag",tagType:"stream-inf"},n[1]&&(i.attributes=is(n[1]),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=uk(i.attributes.RESOLUTION)),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))),this.trigger("data",i);return}if(n=/^#EXT-X-MEDIA:(.*)$/.exec(r),n){i={type:"tag",tagType:"media"},n[1]&&(i.attributes=is(n[1])),this.trigger("data",i);return}if(n=/^#EXT-X-ENDLIST/.exec(r),n){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(n=/^#EXT-X-DISCONTINUITY/.exec(r),n){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(n=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(r),n){i={type:"tag",tagType:"program-date-time"},n[1]&&(i.dateTimeString=n[1],i.dateTimeObject=new Date(n[1])),this.trigger("data",i);return}if(n=/^#EXT-X-KEY:(.*)$/.exec(r),n){i={type:"tag",tagType:"key"},n[1]&&(i.attributes=is(n[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),this.trigger("data",i);return}if(n=/^#EXT-X-START:(.*)$/.exec(r),n){i={type:"tag",tagType:"start"},n[1]&&(i.attributes=is(n[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),this.trigger("data",i);return}if(n=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(r),n){i={type:"tag",tagType:"cue-out-cont"},n[1]?i.data=n[1]:i.data="",this.trigger("data",i);return}if(n=/^#EXT-X-CUE-OUT:(.*)?$/.exec(r),n){i={type:"tag",tagType:"cue-out"},n[1]?i.data=n[1]:i.data="",this.trigger("data",i);return}if(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(r),n){i={type:"tag",tagType:"cue-in"},n[1]?i.data=n[1]:i.data="",this.trigger("data",i);return}if(n=/^#EXT-X-SKIP:(.*)$/.exec(r),n&&n[1]){i={type:"tag",tagType:"skip"},i.attributes=is(n[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(dee)),this.trigger("data",i);return}if(n=/^#EXT-X-PART:(.*)$/.exec(r),n&&n[1]){i={type:"tag",tagType:"part"},i.attributes=is(n[1]),["DURATION"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=z0(i.attributes.BYTERANGE)),this.trigger("data",i);return}if(n=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(r),n&&n[1]){i={type:"tag",tagType:"server-control"},i.attributes=is(n[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),this.trigger("data",i);return}if(n=/^#EXT-X-PART-INF:(.*)$/.exec(r),n&&n[1]){i={type:"tag",tagType:"part-inf"},i.attributes=is(n[1]),["PART-TARGET"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),this.trigger("data",i);return}if(n=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(r),n&&n[1]){i={type:"tag",tagType:"preload-hint"},i.attributes=is(n[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(i.attributes.hasOwnProperty(a)){i.attributes[a]=parseInt(i.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[o]=i.attributes[a],delete i.attributes[a]}}),this.trigger("data",i);return}if(n=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(r),n&&n[1]){i={type:"tag",tagType:"rendition-report"},i.attributes=is(n[1]),["LAST-MSN","LAST-PART"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseInt(i.attributes[a],10))}),this.trigger("data",i);return}if(n=/^#EXT-X-DATERANGE:(.*)$/.exec(r),n&&n[1]){i={type:"tag",tagType:"daterange"},i.attributes=is(n[1]),["ID","CLASS"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=String(i.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=new Date(i.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/i.test(i.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=i.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in i.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(i.attributes[o]),u=/^\d+(\.\d+)?$/.test(i.attributes[o]);i.attributes[o]=l?i.attributes[o].toString(16):u?parseFloat(i.attributes[o]):String(i.attributes[o])}this.trigger("data",i);return}if(n=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(r),n){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(n=/^#EXT-X-I-FRAMES-ONLY/.exec(r),n){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(n=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(r),n){i={type:"tag",tagType:"content-steering"},i.attributes=is(n[1]),this.trigger("data",i);return}if(n=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(r),n){i={type:"tag",tagType:"i-frame-playlist"},i.attributes=is(n[1]),i.attributes.URI&&(i.uri=i.attributes.URI),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=uk(i.attributes.RESOLUTION)),i.attributes["AVERAGE-BANDWIDTH"]&&(i.attributes["AVERAGE-BANDWIDTH"]=parseInt(i.attributes["AVERAGE-BANDWIDTH"],10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),this.trigger("data",i);return}if(n=/^#EXT-X-DEFINE:(.*)$/.exec(r),n){i={type:"tag",tagType:"define"},i.attributes=is(n[1]),this.trigger("data",i);return}this.trigger("data",{type:"tag",data:r.slice(4)})})}addParser({expression:e,customType:n,dataParser:i,segment:s}){typeof i!="function"&&(i=r=>r),this.customParsers.push(r=>{if(e.exec(r))return this.trigger("data",{type:"custom",data:i(r),customType:n,segment:s}),!0})}addTagMapper({expression:e,map:n}){const i=s=>e.test(s)?n(s):s;this.tagMappers.push(i)}}const mee=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Ao=function(t){const e={};return Object.keys(t).forEach(function(n){e[mee(n)]=t[n]}),e},W0=function(t){const{serverControl:e,targetDuration:n,partTargetDuration:i}=t;if(!e)return;const s="#EXT-X-SERVER-CONTROL",r="holdBack",a="partHoldBack",o=n&&n*3,l=i&&i*2;n&&!e.hasOwnProperty(r)&&(e[r]=o,this.trigger("info",{message:`${s} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[r]<o&&(this.trigger("warn",{message:`${s} clamping HOLD-BACK (${e[r]}) to targetDuration * 3 (${o})`}),e[r]=o),i&&!e.hasOwnProperty(a)&&(e[a]=i*3,this.trigger("info",{message:`${s} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),i&&e[a]<l&&(this.trigger("warn",{message:`${s} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};class pee extends YE{constructor(e={}){super(),this.lineStream=new cee,this.parseStream=new fee,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const n=this,i=[];let s={},r,a,o=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let d=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let h=0,f=0;const g={};this.on("end",()=>{s.uri||!s.parts&&!s.preloadHints||(!s.map&&r&&(s.map=r),!s.key&&a&&(s.key=a),!s.timeline&&typeof d=="number"&&(s.timeline=d),this.manifest.preloadSegment=s)}),this.parseStream.on("data",function(v){let b,I;if(n.manifest.definitions){for(const w in n.manifest.definitions)if(v.uri&&(v.uri=v.uri.replace(`{$${w}}`,n.manifest.definitions[w])),v.attributes)for(const P in v.attributes)typeof v.attributes[P]=="string"&&(v.attributes[P]=v.attributes[P].replace(`{$${w}}`,n.manifest.definitions[w]))}({tag(){({version(){v.version&&(this.manifest.version=v.version)},"allow-cache"(){this.manifest.allowCache=v.allowed,"allowed"in v||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const w={};"length"in v&&(s.byterange=w,w.length=v.length,"offset"in v||(v.offset=h)),"offset"in v&&(s.byterange=w,w.offset=v.offset),h=w.offset+w.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),v.title&&(s.title=v.title),v.duration>0&&(s.duration=v.duration),v.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(!v.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(v.attributes.METHOD==="NONE"){a=null;return}if(!v.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(v.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:v.attributes};return}if(v.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:v.attributes.URI};return}if(v.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(v.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(v.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),v.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(v.attributes.KEYID&&v.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:v.attributes.KEYFORMAT,keyId:v.attributes.KEYID.substring(2)},pssh:gV(v.attributes.URI.split(",")[1])};return}v.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:v.attributes.METHOD||"AES-128",uri:v.attributes.URI},typeof v.attributes.IV<"u"&&(a.iv=v.attributes.IV)},"media-sequence"(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+v.number});return}this.manifest.mediaSequence=v.number},"discontinuity-sequence"(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+v.number});return}this.manifest.discontinuitySequence=v.number,d=v.number},"playlist-type"(){if(!/VOD|EVENT/.test(v.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+v.playlist});return}this.manifest.playlistType=v.playlistType},map(){r={},v.uri&&(r.uri=v.uri),v.byterange&&(r.byterange=v.byterange),a&&(r.key=a)},"stream-inf"(){if(this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!v.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),zn(s.attributes,v.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(v.attributes&&v.attributes.TYPE&&v.attributes["GROUP-ID"]&&v.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const w=this.manifest.mediaGroups[v.attributes.TYPE];w[v.attributes["GROUP-ID"]]=w[v.attributes["GROUP-ID"]]||{},b=w[v.attributes["GROUP-ID"]],I={default:/yes/i.test(v.attributes.DEFAULT)},I.default?I.autoselect=!0:I.autoselect=/yes/i.test(v.attributes.AUTOSELECT),v.attributes.LANGUAGE&&(I.language=v.attributes.LANGUAGE),v.attributes.URI&&(I.uri=v.attributes.URI),v.attributes["INSTREAM-ID"]&&(I.instreamId=v.attributes["INSTREAM-ID"]),v.attributes.CHARACTERISTICS&&(I.characteristics=v.attributes.CHARACTERISTICS),v.attributes.FORCED&&(I.forced=/yes/i.test(v.attributes.FORCED)),b[v.attributes.NAME]=I},discontinuity(){d+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=v.dateTimeString,this.manifest.dateTimeObject=v.dateTimeObject),s.dateTimeString=v.dateTimeString,s.dateTimeObject=v.dateTimeObject;const{lastProgramDateTime:w}=this;this.lastProgramDateTime=new Date(v.dateTimeString).getTime(),w===null&&this.manifest.segments.reduceRight((P,M)=>(M.programDateTime=P-M.duration*1e3,M.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(v.duration)||v.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+v.duration});return}this.manifest.targetDuration=v.duration,W0.call(this,this.manifest)},start(){if(!v.attributes||isNaN(v.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:v.attributes["TIME-OFFSET"],precise:v.attributes.PRECISE}},"cue-out"(){s.cueOut=v.data},"cue-out-cont"(){s.cueOutCont=v.data},"cue-in"(){s.cueIn=v.data},skip(){this.manifest.skip=Ao(v.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",v.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const w=this.manifest.segments.length,P=Ao(v.attributes);s.parts=s.parts||[],s.parts.push(P),P.byterange&&(P.byterange.hasOwnProperty("offset")||(P.byterange.offset=f),f=P.byterange.offset+P.byterange.length);const M=s.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${M} for segment #${w}`,v.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((F,U)=>{F.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${U} lacks required attribute(s): LAST-PART`})})},"server-control"(){const w=this.manifest.serverControl=Ao(v.attributes);w.hasOwnProperty("canBlockReload")||(w.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),W0.call(this,this.manifest),w.canSkipDateranges&&!w.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const w=this.manifest.segments.length,P=Ao(v.attributes),M=P.type&&P.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(P),P.byterange&&(P.byterange.hasOwnProperty("offset")||(P.byterange.offset=M?f:0,M&&(f=P.byterange.offset+P.byterange.length)));const F=s.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${F} for segment #${w}`,v.attributes,["TYPE","URI"]),!!P.type)for(let U=0;U<s.preloadHints.length-1;U++){const D=s.preloadHints[U];D.type&&D.type===P.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${F} for segment #${w} has the same TYPE ${P.type} as preload hint #${U}`})}},"rendition-report"(){const w=Ao(v.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(w);const P=this.manifest.renditionReports.length-1,M=["LAST-MSN","URI"];o&&M.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${P}`,v.attributes,M)},"part-inf"(){this.manifest.partInf=Ao(v.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",v.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),W0.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Ao(v.attributes));const w=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${w}`,v.attributes,["ID","START-DATE"]);const P=this.manifest.dateRanges[w];P.endDate&&P.startDate&&new Date(P.endDate)<new Date(P.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),P.duration&&P.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),P.plannedDuration&&P.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const M=!!P.endOnNext;if(M&&!P.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),M&&(P.duration||P.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),P.duration&&P.endDate){const U=P.startDate.getTime()+P.duration*1e3;this.manifest.dateRanges[w].endDate=new Date(U)}if(!g[P.id])g[P.id]=P;else{for(const U in g[P.id])if(P[U]&&JSON.stringify(g[P.id][U])!==JSON.stringify(P[U])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const F=this.manifest.dateRanges.findIndex(U=>U.id===P.id);this.manifest.dateRanges[F]=zn(this.manifest.dateRanges[F],P),g[P.id]=zn(g[P.id],P),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Ao(v.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",v.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const w=(P,M)=>{if(P in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${P}`});return}this.manifest.definitions[P]=M};if("QUERYPARAM"in v.attributes){if("NAME"in v.attributes||"IMPORT"in v.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const P=this.params.get(v.attributes.QUERYPARAM);if(!P){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${v.attributes.QUERYPARAM}`});return}w(v.attributes.QUERYPARAM,decodeURIComponent(P));return}if("NAME"in v.attributes){if("IMPORT"in v.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in v.attributes)||typeof v.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${v.attributes.NAME}`});return}w(v.attributes.NAME,v.attributes.VALUE);return}if("IMPORT"in v.attributes){if(!this.mainDefinitions[v.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${v.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}w(v.attributes.IMPORT,this.mainDefinitions[v.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:v.attributes,uri:v.uri,timeline:d}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",v.attributes,["BANDWIDTH","URI"])}}[v.tagType]||l).call(n)},uri(){s.uri=v.uri,i.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),a&&(s.key=a),s.timeline=d,r&&(s.map=r),f=0,this.lastProgramDateTime!==null&&(s.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=s.duration*1e3),s={}},comment(){},custom(){v.segment?(s.custom=s.custom||{},s.custom[v.customType]=v.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[v.customType]=v.data)}})[v.type].call(n)})}requiredCompatibilityversion(e,n){(e<n||!e)&&this.trigger("warn",{message:`manifest must be at least version ${n}`})}warnOnMissingAttributes_(e,n,i){const s=[];i.forEach(function(r){n.hasOwnProperty(r)||s.push(r)}),s.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${s.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var hu={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},gee=["video","audio","text"],ck=["Video","Audio","Text"],vV=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(n,i,s){var r=("00"+Number(i).toString(16)).slice(-2),a=("00"+Number(s).toString(16)).slice(-2);return"avc1."+r+"00"+a})},Qr=function(e){e===void 0&&(e="");var n=e.split(","),i=[];return n.forEach(function(s){s=s.trim();var r;gee.forEach(function(a){var o=hu[a].exec(s.toLowerCase());if(!(!o||o.length<=1)){r=a;var l=s.substring(0,o[1].length),u=s.replace(l,"");i.push({type:l,details:u,mediaType:a})}}),r||i.push({type:s,details:"",mediaType:"unknown"})}),i},vee=function(e,n){if(!e.mediaGroups.AUDIO||!n)return null;var i=e.mediaGroups.AUDIO[n];if(!i)return null;for(var s in i){var r=i[s];if(r.default&&r.playlists)return Qr(r.playlists[0].attributes.CODECS)}return null},yV=function(e){return e===void 0&&(e=""),hu.audio.test(e.trim().toLowerCase())},yee=function(e){return e===void 0&&(e=""),hu.text.test(e.trim().toLowerCase())},Id=function(e){if(!(!e||typeof e!="string")){var n=e.toLowerCase().split(",").map(function(r){return vV(r.trim())}),i="video";n.length===1&&yV(n[0])?i="audio":n.length===1&&yee(n[0])&&(i="application");var s="mp4";return n.every(function(r){return hu.mp4.test(r)})?s="mp4":n.every(function(r){return hu.webm.test(r)})?s="webm":n.every(function(r){return hu.ogg.test(r)})&&(s="ogg"),i+"/"+s+';codecs="'+e+'"'}},kf=function(e,n){return e===void 0&&(e=""),n===void 0&&(n=!1),te.MediaSource&&te.MediaSource.isTypeSupported&&te.MediaSource.isTypeSupported(Id(e))||n&&te.ManagedMediaSource&&te.ManagedMediaSource.isTypeSupported&&te.ManagedMediaSource.isTypeSupported(Id(e))||!1},G0=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(n){n=n.trim();for(var i=0;i<ck.length;i++){var s=ck[i];if(hu["muxer"+s].test(n))return!0}return!1})},dk="mp4a.40.2",_ee="avc1.4d400d",bee=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Tee=/^application\/dash\+xml/i,_V=function(e){return bee.test(e)?"hls":Tee.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},See=function(e){return e.toString(2).length},Eee=function(e){return Math.ceil(See(e)/8)},bV=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Cee=function(e){return bV(e)},ct=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!Cee(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Ai=te.BigInt||Number,jT=[Ai("0x1"),Ai("0x100"),Ai("0x10000"),Ai("0x1000000"),Ai("0x100000000"),Ai("0x10000000000"),Ai("0x1000000000000"),Ai("0x100000000000000"),Ai("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var wee=function(e,n){var i=n===void 0?{}:n,s=i.signed,r=s===void 0?!1:s,a=i.le,o=a===void 0?!1:a;e=ct(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(h,f,g){var v=o?g:Math.abs(g+1-e.length);return h+Ai(f)*jT[v]},Ai(0));if(r){var d=jT[e.length]/Ai(2)-Ai(1);c=Ai(c),c>d&&(c-=d,c-=d,c-=Ai(2))}return Number(c)},xee=function(e,n){var i={},s=i.le,r=s===void 0?!1:s;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Ai(e);for(var a=Eee(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=r?l:Math.abs(l+1-o.length);o[u]=Number(e/jT[l]&Ai(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},TV=function(e,n){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;n||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i},Iee=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n=n.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),n.length<=1)return ct(n[0]);var s=n.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),r=new Uint8Array(s),a=0;return n.forEach(function(o){o=ct(o),r.set(o,a),a+=o.byteLength}),r},xn=function(e,n,i){var s=i===void 0?{}:i,r=s.offset,a=r===void 0?0:r,o=s.mask,l=o===void 0?[]:o;e=ct(e),n=ct(n);var u=n.every?n.every:Array.prototype.every;return n.length&&e.length-a>=n.length&&u.call(n,function(c,d){var h=l[d]?l[d]&e[a+d]:e[a+d];return c===h})},Aee=function(e,n,i){n.forEach(function(s){for(var r in e.mediaGroups[s])for(var a in e.mediaGroups[s][r]){var o=e.mediaGroups[s][r][a];i(o,s,r,a)}})},qh={},Ma={},Wl={},hk;function Hy(){if(hk)return Wl;hk=1;function t(r,a,o){if(o===void 0&&(o=Array.prototype),r&&typeof o.find=="function")return o.find.call(r,a);for(var l=0;l<r.length;l++)if(Object.prototype.hasOwnProperty.call(r,l)){var u=r[l];if(a.call(void 0,u,l,r))return u}}function e(r,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(r):r}function n(r,a){if(r===null||typeof r!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o]);return r}var i=e({HTML:"text/html",isHTML:function(r){return r===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),s=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===s.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Wl.assign=n,Wl.find=t,Wl.freeze=e,Wl.MIME_TYPE=i,Wl.NAMESPACE=s,Wl}var fk;function SV(){if(fk)return Ma;fk=1;var t=Hy(),e=t.find,n=t.NAMESPACE;function i($){return $!==""}function s($){return $?$.split(/[\t\n\f\r ]+/).filter(i):[]}function r($,q){return $.hasOwnProperty(q)||($[q]=!0),$}function a($){if(!$)return[];var q=s($);return Object.keys(q.reduce(r,{}))}function o($){return function(q){return $&&$.indexOf(q)!==-1}}function l($,q){for(var oe in $)Object.prototype.hasOwnProperty.call($,oe)&&(q[oe]=$[oe])}function u($,q){var oe=$.prototype;if(!(oe instanceof q)){let je=function(){};var Ee=je;je.prototype=q.prototype,je=new je,l(oe,je),$.prototype=oe=je}oe.constructor!=$&&(typeof $!="function"&&console.error("unknown Class:"+$),oe.constructor=$)}var c={},d=c.ELEMENT_NODE=1,h=c.ATTRIBUTE_NODE=2,f=c.TEXT_NODE=3,g=c.CDATA_SECTION_NODE=4,v=c.ENTITY_REFERENCE_NODE=5,b=c.ENTITY_NODE=6,I=c.PROCESSING_INSTRUCTION_NODE=7,w=c.COMMENT_NODE=8,P=c.DOCUMENT_NODE=9,M=c.DOCUMENT_TYPE_NODE=10,F=c.DOCUMENT_FRAGMENT_NODE=11,U=c.NOTATION_NODE=12,D={},S={};D.INDEX_SIZE_ERR=(S[1]="Index size error",1),D.DOMSTRING_SIZE_ERR=(S[2]="DOMString size error",2);var y=D.HIERARCHY_REQUEST_ERR=(S[3]="Hierarchy request error",3);D.WRONG_DOCUMENT_ERR=(S[4]="Wrong document",4),D.INVALID_CHARACTER_ERR=(S[5]="Invalid character",5),D.NO_DATA_ALLOWED_ERR=(S[6]="No data allowed",6),D.NO_MODIFICATION_ALLOWED_ERR=(S[7]="No modification allowed",7);var E=D.NOT_FOUND_ERR=(S[8]="Not found",8);D.NOT_SUPPORTED_ERR=(S[9]="Not supported",9);var A=D.INUSE_ATTRIBUTE_ERR=(S[10]="Attribute in use",10);D.INVALID_STATE_ERR=(S[11]="Invalid state",11),D.SYNTAX_ERR=(S[12]="Syntax error",12),D.INVALID_MODIFICATION_ERR=(S[13]="Invalid modification",13),D.NAMESPACE_ERR=(S[14]="Invalid namespace",14),D.INVALID_ACCESS_ERR=(S[15]="Invalid access",15);function k($,q){if(q instanceof Error)var oe=q;else oe=this,Error.call(this,S[$]),this.message=S[$],Error.captureStackTrace&&Error.captureStackTrace(this,k);return oe.code=$,q&&(this.message=this.message+": "+q),oe}k.prototype=Error.prototype,l(D,k);function R(){}R.prototype={length:0,item:function($){return $>=0&&$<this.length?this[$]:null},toString:function($,q){for(var oe=[],Ee=0;Ee<this.length;Ee++)Rs(this[Ee],oe,$,q);return oe.join("")},filter:function($){return Array.prototype.filter.call(this,$)},indexOf:function($){return Array.prototype.indexOf.call(this,$)}};function W($,q){this._node=$,this._refresh=q,se(this)}function se($){var q=$._node._inc||$._node.ownerDocument._inc;if($._inc!==q){var oe=$._refresh($._node);if(Il($,"length",oe.length),!$.$$length||oe.length<$.$$length)for(var Ee=oe.length;Ee in $;Ee++)Object.prototype.hasOwnProperty.call($,Ee)&&delete $[Ee];l(oe,$),$._inc=q}}W.prototype.item=function($){return se(this),this[$]||null},u(W,R);function ae(){}function Z($,q){for(var oe=$.length;oe--;)if($[oe]===q)return oe}function ne($,q,oe,Ee){if(Ee?q[Z(q,Ee)]=oe:q[q.length++]=oe,$){oe.ownerElement=$;var je=$.ownerDocument;je&&(Ee&&we(je,$,Ee),Le(je,$,oe))}}function ee($,q,oe){var Ee=Z(q,oe);if(Ee>=0){for(var je=q.length-1;Ee<je;)q[Ee]=q[++Ee];if(q.length=je,$){var ht=$.ownerDocument;ht&&(we(ht,$,oe),oe.ownerElement=null)}}else throw new k(E,new Error($.tagName+"@"+oe))}ae.prototype={length:0,item:R.prototype.item,getNamedItem:function($){for(var q=this.length;q--;){var oe=this[q];if(oe.nodeName==$)return oe}},setNamedItem:function($){var q=$.ownerElement;if(q&&q!=this._ownerElement)throw new k(A);var oe=this.getNamedItem($.nodeName);return ne(this._ownerElement,this,$,oe),oe},setNamedItemNS:function($){var q=$.ownerElement,oe;if(q&&q!=this._ownerElement)throw new k(A);return oe=this.getNamedItemNS($.namespaceURI,$.localName),ne(this._ownerElement,this,$,oe),oe},removeNamedItem:function($){var q=this.getNamedItem($);return ee(this._ownerElement,this,q),q},removeNamedItemNS:function($,q){var oe=this.getNamedItemNS($,q);return ee(this._ownerElement,this,oe),oe},getNamedItemNS:function($,q){for(var oe=this.length;oe--;){var Ee=this[oe];if(Ee.localName==q&&Ee.namespaceURI==$)return Ee}return null}};function Q(){}Q.prototype={hasFeature:function($,q){return!0},createDocument:function($,q,oe){var Ee=new Se;if(Ee.implementation=this,Ee.childNodes=new R,Ee.doctype=oe||null,oe&&Ee.appendChild(oe),q){var je=Ee.createElementNS($,q);Ee.appendChild(je)}return Ee},createDocumentType:function($,q,oe){var Ee=new dt;return Ee.name=$,Ee.nodeName=$,Ee.publicId=q||"",Ee.systemId=oe||"",Ee}};function j(){}j.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function($,q){return Re(this,$,q)},replaceChild:function($,q){Re(this,$,q,Oe),q&&this.removeChild(q)},removeChild:function($){return fe(this,$)},appendChild:function($){return this.insertBefore($,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function($){return fo(this.ownerDocument||this,this,$)},normalize:function(){for(var $=this.firstChild;$;){var q=$.nextSibling;q&&q.nodeType==f&&$.nodeType==f?(this.removeChild(q),$.appendData(q.data)):($.normalize(),$=q)}},isSupported:function($,q){return this.ownerDocument.implementation.hasFeature($,q)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function($){for(var q=this;q;){var oe=q._nsMap;if(oe){for(var Ee in oe)if(Object.prototype.hasOwnProperty.call(oe,Ee)&&oe[Ee]===$)return Ee}q=q.nodeType==h?q.ownerDocument:q.parentNode}return null},lookupNamespaceURI:function($){for(var q=this;q;){var oe=q._nsMap;if(oe&&Object.prototype.hasOwnProperty.call(oe,$))return oe[$];q=q.nodeType==h?q.ownerDocument:q.parentNode}return null},isDefaultNamespace:function($){var q=this.lookupPrefix($);return q==null}};function le($){return $=="<"&&"&lt;"||$==">"&&"&gt;"||$=="&"&&"&amp;"||$=='"'&&"&quot;"||"&#"+$.charCodeAt()+";"}l(c,j),l(c,j.prototype);function pe($,q){if(q($))return!0;if($=$.firstChild)do if(pe($,q))return!0;while($=$.nextSibling)}function Se(){this.ownerDocument=this}function Le($,q,oe){$&&$._inc++;var Ee=oe.namespaceURI;Ee===n.XMLNS&&(q._nsMap[oe.prefix?oe.localName:""]=oe.value)}function we($,q,oe,Ee){$&&$._inc++;var je=oe.namespaceURI;je===n.XMLNS&&delete q._nsMap[oe.prefix?oe.localName:""]}function re($,q,oe){if($&&$._inc){$._inc++;var Ee=q.childNodes;if(oe)Ee[Ee.length++]=oe;else{for(var je=q.firstChild,ht=0;je;)Ee[ht++]=je,je=je.nextSibling;Ee.length=ht,delete Ee[Ee.length]}}}function fe($,q){var oe=q.previousSibling,Ee=q.nextSibling;return oe?oe.nextSibling=Ee:$.firstChild=Ee,Ee?Ee.previousSibling=oe:$.lastChild=oe,q.parentNode=null,q.previousSibling=null,q.nextSibling=null,re($.ownerDocument,$),q}function xe($){return $&&($.nodeType===j.DOCUMENT_NODE||$.nodeType===j.DOCUMENT_FRAGMENT_NODE||$.nodeType===j.ELEMENT_NODE)}function Ne($){return $&&(z($)||H($)||be($)||$.nodeType===j.DOCUMENT_FRAGMENT_NODE||$.nodeType===j.COMMENT_NODE||$.nodeType===j.PROCESSING_INSTRUCTION_NODE)}function be($){return $&&$.nodeType===j.DOCUMENT_TYPE_NODE}function z($){return $&&$.nodeType===j.ELEMENT_NODE}function H($){return $&&$.nodeType===j.TEXT_NODE}function X($,q){var oe=$.childNodes||[];if(e(oe,z)||be(q))return!1;var Ee=e(oe,be);return!(q&&Ee&&oe.indexOf(Ee)>oe.indexOf(q))}function he($,q){var oe=$.childNodes||[];function Ee(ht){return z(ht)&&ht!==q}if(e(oe,Ee))return!1;var je=e(oe,be);return!(q&&je&&oe.indexOf(je)>oe.indexOf(q))}function de($,q,oe){if(!xe($))throw new k(y,"Unexpected parent node type "+$.nodeType);if(oe&&oe.parentNode!==$)throw new k(E,"child not in parent");if(!Ne(q)||be(q)&&$.nodeType!==j.DOCUMENT_NODE)throw new k(y,"Unexpected node type "+q.nodeType+" for parent node type "+$.nodeType)}function _e($,q,oe){var Ee=$.childNodes||[],je=q.childNodes||[];if(q.nodeType===j.DOCUMENT_FRAGMENT_NODE){var ht=je.filter(z);if(ht.length>1||e(je,H))throw new k(y,"More than one element or text in fragment");if(ht.length===1&&!X($,oe))throw new k(y,"Element in fragment can not be inserted before doctype")}if(z(q)&&!X($,oe))throw new k(y,"Only one element can be added and only after doctype");if(be(q)){if(e(Ee,be))throw new k(y,"Only one doctype is allowed");var jt=e(Ee,z);if(oe&&Ee.indexOf(jt)<Ee.indexOf(oe))throw new k(y,"Doctype can only be inserted before an element");if(!oe&&jt)throw new k(y,"Doctype can not be appended since element is present")}}function Oe($,q,oe){var Ee=$.childNodes||[],je=q.childNodes||[];if(q.nodeType===j.DOCUMENT_FRAGMENT_NODE){var ht=je.filter(z);if(ht.length>1||e(je,H))throw new k(y,"More than one element or text in fragment");if(ht.length===1&&!he($,oe))throw new k(y,"Element in fragment can not be inserted before doctype")}if(z(q)&&!he($,oe))throw new k(y,"Only one element can be added and only after doctype");if(be(q)){let on=function(Ni){return be(Ni)&&Ni!==oe};var ii=on;if(e(Ee,on))throw new k(y,"Only one doctype is allowed");var jt=e(Ee,z);if(oe&&Ee.indexOf(jt)<Ee.indexOf(oe))throw new k(y,"Doctype can only be inserted before an element")}}function Re($,q,oe,Ee){de($,q,oe),$.nodeType===j.DOCUMENT_NODE&&(Ee||_e)($,q,oe);var je=q.parentNode;if(je&&je.removeChild(q),q.nodeType===F){var ht=q.firstChild;if(ht==null)return q;var jt=q.lastChild}else ht=jt=q;var ii=oe?oe.previousSibling:$.lastChild;ht.previousSibling=ii,jt.nextSibling=oe,ii?ii.nextSibling=ht:$.firstChild=ht,oe==null?$.lastChild=jt:oe.previousSibling=jt;do ht.parentNode=$;while(ht!==jt&&(ht=ht.nextSibling));return re($.ownerDocument||$,$),q.nodeType==F&&(q.firstChild=q.lastChild=null),q}function me($,q){return q.parentNode&&q.parentNode.removeChild(q),q.parentNode=$,q.previousSibling=$.lastChild,q.nextSibling=null,q.previousSibling?q.previousSibling.nextSibling=q:$.firstChild=q,$.lastChild=q,re($.ownerDocument,$,q),q}Se.prototype={nodeName:"#document",nodeType:P,doctype:null,documentElement:null,_inc:1,insertBefore:function($,q){if($.nodeType==F){for(var oe=$.firstChild;oe;){var Ee=oe.nextSibling;this.insertBefore(oe,q),oe=Ee}return $}return Re(this,$,q),$.ownerDocument=this,this.documentElement===null&&$.nodeType===d&&(this.documentElement=$),$},removeChild:function($){return this.documentElement==$&&(this.documentElement=null),fe(this,$)},replaceChild:function($,q){Re(this,$,q,Oe),$.ownerDocument=this,q&&this.removeChild(q),z($)&&(this.documentElement=$)},importNode:function($,q){return ho(this,$,q)},getElementById:function($){var q=null;return pe(this.documentElement,function(oe){if(oe.nodeType==d&&oe.getAttribute("id")==$)return q=oe,!0}),q},getElementsByClassName:function($){var q=a($);return new W(this,function(oe){var Ee=[];return q.length>0&&pe(oe.documentElement,function(je){if(je!==oe&&je.nodeType===d){var ht=je.getAttribute("class");if(ht){var jt=$===ht;if(!jt){var ii=a(ht);jt=q.every(o(ii))}jt&&Ee.push(je)}}}),Ee})},createElement:function($){var q=new Ce;q.ownerDocument=this,q.nodeName=$,q.tagName=$,q.localName=$,q.childNodes=new R;var oe=q.attributes=new ae;return oe._ownerElement=q,q},createDocumentFragment:function(){var $=new Xn;return $.ownerDocument=this,$.childNodes=new R,$},createTextNode:function($){var q=new Ze;return q.ownerDocument=this,q.appendData($),q},createComment:function($){var q=new rt;return q.ownerDocument=this,q.appendData($),q},createCDATASection:function($){var q=new at;return q.ownerDocument=this,q.appendData($),q},createProcessingInstruction:function($,q){var oe=new bt;return oe.ownerDocument=this,oe.tagName=oe.nodeName=oe.target=$,oe.nodeValue=oe.data=q,oe},createAttribute:function($){var q=new He;return q.ownerDocument=this,q.name=$,q.nodeName=$,q.localName=$,q.specified=!0,q},createEntityReference:function($){var q=new En;return q.ownerDocument=this,q.nodeName=$,q},createElementNS:function($,q){var oe=new Ce,Ee=q.split(":"),je=oe.attributes=new ae;return oe.childNodes=new R,oe.ownerDocument=this,oe.nodeName=q,oe.tagName=q,oe.namespaceURI=$,Ee.length==2?(oe.prefix=Ee[0],oe.localName=Ee[1]):oe.localName=q,je._ownerElement=oe,oe},createAttributeNS:function($,q){var oe=new He,Ee=q.split(":");return oe.ownerDocument=this,oe.nodeName=q,oe.name=q,oe.namespaceURI=$,oe.specified=!0,Ee.length==2?(oe.prefix=Ee[0],oe.localName=Ee[1]):oe.localName=q,oe}},u(Se,j);function Ce(){this._nsMap={}}Ce.prototype={nodeType:d,hasAttribute:function($){return this.getAttributeNode($)!=null},getAttribute:function($){var q=this.getAttributeNode($);return q&&q.value||""},getAttributeNode:function($){return this.attributes.getNamedItem($)},setAttribute:function($,q){var oe=this.ownerDocument.createAttribute($);oe.value=oe.nodeValue=""+q,this.setAttributeNode(oe)},removeAttribute:function($){var q=this.getAttributeNode($);q&&this.removeAttributeNode(q)},appendChild:function($){return $.nodeType===F?this.insertBefore($,null):me(this,$)},setAttributeNode:function($){return this.attributes.setNamedItem($)},setAttributeNodeNS:function($){return this.attributes.setNamedItemNS($)},removeAttributeNode:function($){return this.attributes.removeNamedItem($.nodeName)},removeAttributeNS:function($,q){var oe=this.getAttributeNodeNS($,q);oe&&this.removeAttributeNode(oe)},hasAttributeNS:function($,q){return this.getAttributeNodeNS($,q)!=null},getAttributeNS:function($,q){var oe=this.getAttributeNodeNS($,q);return oe&&oe.value||""},setAttributeNS:function($,q,oe){var Ee=this.ownerDocument.createAttributeNS($,q);Ee.value=Ee.nodeValue=""+oe,this.setAttributeNode(Ee)},getAttributeNodeNS:function($,q){return this.attributes.getNamedItemNS($,q)},getElementsByTagName:function($){return new W(this,function(q){var oe=[];return pe(q,function(Ee){Ee!==q&&Ee.nodeType==d&&($==="*"||Ee.tagName==$)&&oe.push(Ee)}),oe})},getElementsByTagNameNS:function($,q){return new W(this,function(oe){var Ee=[];return pe(oe,function(je){je!==oe&&je.nodeType===d&&($==="*"||je.namespaceURI===$)&&(q==="*"||je.localName==q)&&Ee.push(je)}),Ee})}},Se.prototype.getElementsByTagName=Ce.prototype.getElementsByTagName,Se.prototype.getElementsByTagNameNS=Ce.prototype.getElementsByTagNameNS,u(Ce,j);function He(){}He.prototype.nodeType=h,u(He,j);function ze(){}ze.prototype={data:"",substringData:function($,q){return this.data.substring($,$+q)},appendData:function($){$=this.data+$,this.nodeValue=this.data=$,this.length=$.length},insertData:function($,q){this.replaceData($,0,q)},appendChild:function($){throw new Error(S[y])},deleteData:function($,q){this.replaceData($,q,"")},replaceData:function($,q,oe){var Ee=this.data.substring(0,$),je=this.data.substring($+q);oe=Ee+oe+je,this.nodeValue=this.data=oe,this.length=oe.length}},u(ze,j);function Ze(){}Ze.prototype={nodeName:"#text",nodeType:f,splitText:function($){var q=this.data,oe=q.substring($);q=q.substring(0,$),this.data=this.nodeValue=q,this.length=q.length;var Ee=this.ownerDocument.createTextNode(oe);return this.parentNode&&this.parentNode.insertBefore(Ee,this.nextSibling),Ee}},u(Ze,ze);function rt(){}rt.prototype={nodeName:"#comment",nodeType:w},u(rt,ze);function at(){}at.prototype={nodeName:"#cdata-section",nodeType:g},u(at,ze);function dt(){}dt.prototype.nodeType=M,u(dt,j);function wt(){}wt.prototype.nodeType=U,u(wt,j);function Fn(){}Fn.prototype.nodeType=b,u(Fn,j);function En(){}En.prototype.nodeType=v,u(En,j);function Xn(){}Xn.prototype.nodeName="#document-fragment",Xn.prototype.nodeType=F,u(Xn,j);function bt(){}bt.prototype.nodeType=I,u(bt,j);function Ps(){}Ps.prototype.serializeToString=function($,q,oe){return Ds.call($,q,oe)},j.prototype.toString=Ds;function Ds($,q){var oe=[],Ee=this.nodeType==9&&this.documentElement||this,je=Ee.prefix,ht=Ee.namespaceURI;if(ht&&je==null){var je=Ee.lookupPrefix(ht);if(je==null)var jt=[{namespace:ht,prefix:null}]}return Rs(this,oe,$,q,jt),oe.join("")}function Bn($,q,oe){var Ee=$.prefix||"",je=$.namespaceURI;if(!je||Ee==="xml"&&je===n.XML||je===n.XMLNS)return!1;for(var ht=oe.length;ht--;){var jt=oe[ht];if(jt.prefix===Ee)return jt.namespace!==je}return!0}function mi($,q,oe){$.push(" ",q,'="',oe.replace(/[<>&"\t\n\r]/g,le),'"')}function Rs($,q,oe,Ee,je){if(je||(je=[]),Ee)if($=Ee($),$){if(typeof $=="string"){q.push($);return}}else return;switch($.nodeType){case d:var ht=$.attributes,jt=ht.length,Wt=$.firstChild,ii=$.tagName;oe=n.isHTML($.namespaceURI)||oe;var on=ii;if(!oe&&!$.prefix&&$.namespaceURI){for(var Ni,pi=0;pi<ht.length;pi++)if(ht.item(pi).name==="xmlns"){Ni=ht.item(pi).value;break}if(!Ni)for(var Ii=je.length-1;Ii>=0;Ii--){var fs=je[Ii];if(fs.prefix===""&&fs.namespace===$.namespaceURI){Ni=fs.namespace;break}}if(Ni!==$.namespaceURI)for(var Ii=je.length-1;Ii>=0;Ii--){var fs=je[Ii];if(fs.namespace===$.namespaceURI){fs.prefix&&(on=fs.prefix+":"+ii);break}}}q.push("<",on);for(var Cn=0;Cn<jt;Cn++){var si=ht.item(Cn);si.prefix=="xmlns"?je.push({prefix:si.localName,namespace:si.value}):si.nodeName=="xmlns"&&je.push({prefix:"",namespace:si.value})}for(var Cn=0;Cn<jt;Cn++){var si=ht.item(Cn);if(Bn(si,oe,je)){var fr=si.prefix||"",Zs=si.namespaceURI;mi(q,fr?"xmlns:"+fr:"xmlns",Zs),je.push({prefix:fr,namespace:Zs})}Rs(si,q,oe,Ee,je)}if(ii===on&&Bn($,oe,je)){var fr=$.prefix||"",Zs=$.namespaceURI;mi(q,fr?"xmlns:"+fr:"xmlns",Zs),je.push({prefix:fr,namespace:Zs})}if(Wt||oe&&!/^(?:meta|link|img|br|hr|input)$/i.test(ii)){if(q.push(">"),oe&&/^script$/i.test(ii))for(;Wt;)Wt.data?q.push(Wt.data):Rs(Wt,q,oe,Ee,je.slice()),Wt=Wt.nextSibling;else for(;Wt;)Rs(Wt,q,oe,Ee,je.slice()),Wt=Wt.nextSibling;q.push("</",on,">")}else q.push("/>");return;case P:case F:for(var Wt=$.firstChild;Wt;)Rs(Wt,q,oe,Ee,je.slice()),Wt=Wt.nextSibling;return;case h:return mi(q,$.name,$.value);case f:return q.push($.data.replace(/[<&>]/g,le));case g:return q.push("<![CDATA[",$.data,"]]>");case w:return q.push("<!--",$.data,"-->");case M:var Ur=$.publicId,Pt=$.systemId;if(q.push("<!DOCTYPE ",$.name),Ur)q.push(" PUBLIC ",Ur),Pt&&Pt!="."&&q.push(" ",Pt),q.push(">");else if(Pt&&Pt!=".")q.push(" SYSTEM ",Pt,">");else{var Aa=$.internalSubset;Aa&&q.push(" [",Aa,"]"),q.push(">")}return;case I:return q.push("<?",$.target," ",$.data,"?>");case v:return q.push("&",$.nodeName,";");default:q.push("??",$.nodeName)}}function ho($,q,oe){var Ee;switch(q.nodeType){case d:Ee=q.cloneNode(!1),Ee.ownerDocument=$;case F:break;case h:oe=!0;break}if(Ee||(Ee=q.cloneNode(!1)),Ee.ownerDocument=$,Ee.parentNode=null,oe)for(var je=q.firstChild;je;)Ee.appendChild(ho($,je,oe)),je=je.nextSibling;return Ee}function fo($,q,oe){var Ee=new q.constructor;for(var je in q)if(Object.prototype.hasOwnProperty.call(q,je)){var ht=q[je];typeof ht!="object"&&ht!=Ee[je]&&(Ee[je]=ht)}switch(q.childNodes&&(Ee.childNodes=new R),Ee.ownerDocument=$,Ee.nodeType){case d:var jt=q.attributes,ii=Ee.attributes=new ae,on=jt.length;ii._ownerElement=Ee;for(var Ni=0;Ni<on;Ni++)Ee.setAttributeNode(fo($,jt.item(Ni),!0));break;case h:oe=!0}if(oe)for(var pi=q.firstChild;pi;)Ee.appendChild(fo($,pi,oe)),pi=pi.nextSibling;return Ee}function Il($,q,oe){$[q]=oe}try{if(Object.defineProperty){let $=function(q){switch(q.nodeType){case d:case F:var oe=[];for(q=q.firstChild;q;)q.nodeType!==7&&q.nodeType!==8&&oe.push($(q)),q=q.nextSibling;return oe.join("");default:return q.nodeValue}};var mo=$;Object.defineProperty(W.prototype,"length",{get:function(){return se(this),this.$$length}}),Object.defineProperty(j.prototype,"textContent",{get:function(){return $(this)},set:function(q){switch(this.nodeType){case d:case F:for(;this.firstChild;)this.removeChild(this.firstChild);(q||String(q))&&this.appendChild(this.ownerDocument.createTextNode(q));break;default:this.data=q,this.value=q,this.nodeValue=q}}}),Il=function(q,oe,Ee){q["$$"+oe]=Ee}}}catch{}return Ma.DocumentType=dt,Ma.DOMException=k,Ma.DOMImplementation=Q,Ma.Element=Ce,Ma.Node=j,Ma.NodeList=R,Ma.XMLSerializer=Ps,Ma}var zh={},K0={},mk;function kee(){return mk||(mk=1,function(t){var e=Hy().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES}(K0)),K0}var tg={},pk;function Pee(){if(pk)return tg;pk=1;var t=Hy().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+e.source+n.source+"*(?::"+e.source+n.source+"*)?$"),s=0,r=1,a=2,o=3,l=4,u=5,c=6,d=7;function h(y,E){this.message=y,this.locator=E,Error.captureStackTrace&&Error.captureStackTrace(this,h)}h.prototype=new Error,h.prototype.name=h.name;function f(){}f.prototype={parse:function(y,E,A){var k=this.domBuilder;k.startDocument(),M(E,E={}),g(y,E,A,k,this.errorHandler),k.endDocument()}};function g(y,E,A,k,R){function W(Ce){if(Ce>65535){Ce-=65536;var He=55296+(Ce>>10),ze=56320+(Ce&1023);return String.fromCharCode(He,ze)}else return String.fromCharCode(Ce)}function se(Ce){var He=Ce.slice(1,-1);return Object.hasOwnProperty.call(A,He)?A[He]:He.charAt(0)==="#"?W(parseInt(He.substr(1).replace("x","0x"))):(R.error("entity not found:"+Ce),Ce)}function ae(Ce){if(Ce>Se){var He=y.substring(Se,Ce).replace(/&#?\w+;/g,se);j&&Z(Se),k.characters(He,0,Ce-Se),Se=Ce}}function Z(Ce,He){for(;Ce>=ee&&(He=Q.exec(y));)ne=He.index,ee=ne+He[0].length,j.lineNumber++;j.columnNumber=Ce-ne+1}for(var ne=0,ee=0,Q=/.*(?:\r\n?|\n)|.*$/g,j=k.locator,le=[{currentNSMap:E}],pe={},Se=0;;){try{var Le=y.indexOf("<",Se);if(Le<0){if(!y.substr(Se).match(/^\s*$/)){var we=k.doc,re=we.createTextNode(y.substr(Se));we.appendChild(re),k.currentElement=re}return}switch(Le>Se&&ae(Le),y.charAt(Le+1)){case"/":var de=y.indexOf(">",Le+3),fe=y.substring(Le+2,de).replace(/[ \t\n\r]+$/g,""),xe=le.pop();de<0?(fe=y.substring(Le+2).replace(/[\s<].*/,""),R.error("end tag name: "+fe+" is not complete:"+xe.tagName),de=Le+1+fe.length):fe.match(/\s</)&&(fe=fe.replace(/[\s<].*/,""),R.error("end tag name: "+fe+" maybe not complete"),de=Le+1+fe.length);var Ne=xe.localNSMap,be=xe.tagName==fe,z=be||xe.tagName&&xe.tagName.toLowerCase()==fe.toLowerCase();if(z){if(k.endElement(xe.uri,xe.localName,fe),Ne)for(var H in Ne)Object.prototype.hasOwnProperty.call(Ne,H)&&k.endPrefixMapping(H);be||R.fatalError("end tag name: "+fe+" is not match the current start tagName:"+xe.tagName)}else le.push(xe);de++;break;case"?":j&&Z(Le),de=U(y,Le,k);break;case"!":j&&Z(Le),de=F(y,Le,k,R);break;default:j&&Z(Le);var X=new D,he=le[le.length-1].currentNSMap,de=b(y,Le,X,he,se,R),_e=X.length;if(!X.closed&&P(y,de,X.tagName,pe)&&(X.closed=!0,A.nbsp||R.warning("unclosed xml attribute")),j&&_e){for(var Oe=v(j,{}),Re=0;Re<_e;Re++){var me=X[Re];Z(me.offset),me.locator=v(j,{})}k.locator=Oe,I(X,k,he)&&le.push(X),k.locator=j}else I(X,k,he)&&le.push(X);t.isHTML(X.uri)&&!X.closed?de=w(y,de,X.tagName,se,k):de++}}catch(Ce){if(Ce instanceof h)throw Ce;R.error("element parse error: "+Ce),de=-1}de>Se?Se=de:ae(Math.max(Le,Se)+1)}}function v(y,E){return E.lineNumber=y.lineNumber,E.columnNumber=y.columnNumber,E}function b(y,E,A,k,R,W){function se(j,le,pe){A.attributeNames.hasOwnProperty(j)&&W.fatalError("Attribute "+j+" redefined"),A.addValue(j,le.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,R),pe)}for(var ae,Z,ne=++E,ee=s;;){var Q=y.charAt(ne);switch(Q){case"=":if(ee===r)ae=y.slice(E,ne),ee=o;else if(ee===a)ee=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ee===o||ee===r)if(ee===r&&(W.warning('attribute value must after "="'),ae=y.slice(E,ne)),E=ne+1,ne=y.indexOf(Q,E),ne>0)Z=y.slice(E,ne),se(ae,Z,E-1),ee=u;else throw new Error("attribute value no end '"+Q+"' match");else if(ee==l)Z=y.slice(E,ne),se(ae,Z,E),W.warning('attribute "'+ae+'" missed start quot('+Q+")!!"),E=ne+1,ee=u;else throw new Error('attribute value must after "="');break;case"/":switch(ee){case s:A.setTagName(y.slice(E,ne));case u:case c:case d:ee=d,A.closed=!0;case l:case r:break;case a:A.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return W.error("unexpected end of input"),ee==s&&A.setTagName(y.slice(E,ne)),ne;case">":switch(ee){case s:A.setTagName(y.slice(E,ne));case u:case c:case d:break;case l:case r:Z=y.slice(E,ne),Z.slice(-1)==="/"&&(A.closed=!0,Z=Z.slice(0,-1));case a:ee===a&&(Z=ae),ee==l?(W.warning('attribute "'+Z+'" missed quot(")!'),se(ae,Z,E)):((!t.isHTML(k[""])||!Z.match(/^(?:disabled|checked|selected)$/i))&&W.warning('attribute "'+Z+'" missed value!! "'+Z+'" instead!!'),se(Z,Z,E));break;case o:throw new Error("attribute value missed!!")}return ne;case"":Q=" ";default:if(Q<=" ")switch(ee){case s:A.setTagName(y.slice(E,ne)),ee=c;break;case r:ae=y.slice(E,ne),ee=a;break;case l:var Z=y.slice(E,ne);W.warning('attribute "'+Z+'" missed quot(")!!'),se(ae,Z,E);case u:ee=c;break}else switch(ee){case a:A.tagName,(!t.isHTML(k[""])||!ae.match(/^(?:disabled|checked|selected)$/i))&&W.warning('attribute "'+ae+'" missed value!! "'+ae+'" instead2!!'),se(ae,ae,E),E=ne,ee=r;break;case u:W.warning('attribute space is required"'+ae+'"!!');case c:ee=r,E=ne;break;case o:ee=l,E=ne;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}ne++}}function I(y,E,A){for(var k=y.tagName,R=null,Q=y.length;Q--;){var W=y[Q],se=W.qName,ae=W.value,j=se.indexOf(":");if(j>0)var Z=W.prefix=se.slice(0,j),ne=se.slice(j+1),ee=Z==="xmlns"&&ne;else ne=se,Z=null,ee=se==="xmlns"&&"";W.localName=ne,ee!==!1&&(R==null&&(R={},M(A,A={})),A[ee]=R[ee]=ae,W.uri=t.XMLNS,E.startPrefixMapping(ee,ae))}for(var Q=y.length;Q--;){W=y[Q];var Z=W.prefix;Z&&(Z==="xml"&&(W.uri=t.XML),Z!=="xmlns"&&(W.uri=A[Z||""]))}var j=k.indexOf(":");j>0?(Z=y.prefix=k.slice(0,j),ne=y.localName=k.slice(j+1)):(Z=null,ne=y.localName=k);var le=y.uri=A[Z||""];if(E.startElement(le,ne,k,y),y.closed){if(E.endElement(le,ne,k),R)for(Z in R)Object.prototype.hasOwnProperty.call(R,Z)&&E.endPrefixMapping(Z)}else return y.currentNSMap=A,y.localNSMap=R,!0}function w(y,E,A,k,R){if(/^(?:script|textarea)$/i.test(A)){var W=y.indexOf("</"+A+">",E),se=y.substring(E+1,W);if(/[&<]/.test(se))return/^script$/i.test(A)?(R.characters(se,0,se.length),W):(se=se.replace(/&#?\w+;/g,k),R.characters(se,0,se.length),W)}return E+1}function P(y,E,A,k){var R=k[A];return R==null&&(R=y.lastIndexOf("</"+A+">"),R<E&&(R=y.lastIndexOf("</"+A)),k[A]=R),R<E}function M(y,E){for(var A in y)Object.prototype.hasOwnProperty.call(y,A)&&(E[A]=y[A])}function F(y,E,A,k){var R=y.charAt(E+2);switch(R){case"-":if(y.charAt(E+3)==="-"){var W=y.indexOf("-->",E+4);return W>E?(A.comment(y,E+4,W-E-4),W+3):(k.error("Unclosed comment"),-1)}else return-1;default:if(y.substr(E+3,6)=="CDATA["){var W=y.indexOf("]]>",E+9);return A.startCDATA(),A.characters(y,E+9,W-E-9),A.endCDATA(),W+3}var se=S(y,E),ae=se.length;if(ae>1&&/!doctype/i.test(se[0][0])){var Z=se[1][0],ne=!1,ee=!1;ae>3&&(/^public$/i.test(se[2][0])?(ne=se[3][0],ee=ae>4&&se[4][0]):/^system$/i.test(se[2][0])&&(ee=se[3][0]));var Q=se[ae-1];return A.startDTD(Z,ne,ee),A.endDTD(),Q.index+Q[0].length}}return-1}function U(y,E,A){var k=y.indexOf("?>",E);if(k){var R=y.substring(E,k).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return R?(R[0].length,A.processingInstruction(R[1],R[2]),k+2):-1}return-1}function D(){this.attributeNames={}}D.prototype={setTagName:function(y){if(!i.test(y))throw new Error("invalid tagName:"+y);this.tagName=y},addValue:function(y,E,A){if(!i.test(y))throw new Error("invalid attribute:"+y);this.attributeNames[y]=this.length,this[this.length++]={qName:y,value:E,offset:A}},length:0,getLocalName:function(y){return this[y].localName},getLocator:function(y){return this[y].locator},getQName:function(y){return this[y].qName},getURI:function(y){return this[y].uri},getValue:function(y){return this[y].value}};function S(y,E){var A,k=[],R=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(R.lastIndex=E,R.exec(y);A=R.exec(y);)if(k.push(A),A[1])return k}return tg.XMLReader=f,tg.ParseError=h,tg}var gk;function Dee(){if(gk)return zh;gk=1;var t=Hy(),e=SV(),n=kee(),i=Pee(),s=e.DOMImplementation,r=t.NAMESPACE,a=i.ParseError,o=i.XMLReader;function l(b){return b.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function u(b){this.options=b||{locator:{}}}u.prototype.parseFromString=function(b,I){var w=this.options,P=new o,M=w.domBuilder||new d,F=w.errorHandler,U=w.locator,D=w.xmlns||{},S=/\/x?html?$/.test(I),y=S?n.HTML_ENTITIES:n.XML_ENTITIES;U&&M.setDocumentLocator(U),P.errorHandler=c(F,M,U),P.domBuilder=w.domBuilder||M,S&&(D[""]=r.HTML),D.xml=D.xml||r.XML;var E=w.normalizeLineEndings||l;return b&&typeof b=="string"?P.parse(E(b),D,y):P.errorHandler.error("invalid doc source"),M.doc};function c(b,I,w){if(!b){if(I instanceof d)return I;b=I}var P={},M=b instanceof Function;w=w||{};function F(U){var D=b[U];!D&&M&&(D=b.length==2?function(S){b(U,S)}:b),P[U]=D&&function(S){D("[xmldom "+U+"]	"+S+f(w))}||function(){}}return F("warning"),F("error"),F("fatalError"),P}function d(){this.cdata=!1}function h(b,I){I.lineNumber=b.lineNumber,I.columnNumber=b.columnNumber}d.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(b,I,w,P){var M=this.doc,F=M.createElementNS(b,w||I),U=P.length;v(this,F),this.currentElement=F,this.locator&&h(this.locator,F);for(var D=0;D<U;D++){var b=P.getURI(D),S=P.getValue(D),w=P.getQName(D),y=M.createAttributeNS(b,w);this.locator&&h(P.getLocator(D),y),y.value=y.nodeValue=S,F.setAttributeNode(y)}},endElement:function(b,I,w){var P=this.currentElement;P.tagName,this.currentElement=P.parentNode},startPrefixMapping:function(b,I){},endPrefixMapping:function(b){},processingInstruction:function(b,I){var w=this.doc.createProcessingInstruction(b,I);this.locator&&h(this.locator,w),v(this,w)},ignorableWhitespace:function(b,I,w){},characters:function(b,I,w){if(b=g.apply(this,arguments),b){if(this.cdata)var P=this.doc.createCDATASection(b);else var P=this.doc.createTextNode(b);this.currentElement?this.currentElement.appendChild(P):/^\s*$/.test(b)&&this.doc.appendChild(P),this.locator&&h(this.locator,P)}},skippedEntity:function(b){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(b){(this.locator=b)&&(b.lineNumber=0)},comment:function(b,I,w){b=g.apply(this,arguments);var P=this.doc.createComment(b);this.locator&&h(this.locator,P),v(this,P)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(b,I,w){var P=this.doc.implementation;if(P&&P.createDocumentType){var M=P.createDocumentType(b,I,w);this.locator&&h(this.locator,M),v(this,M),this.doc.doctype=M}},warning:function(b){console.warn("[xmldom warning]	"+b,f(this.locator))},error:function(b){console.error("[xmldom error]	"+b,f(this.locator))},fatalError:function(b){throw new a(b,this.locator)}};function f(b){if(b)return`
@`+(b.systemId||"")+"#[line:"+b.lineNumber+",col:"+b.columnNumber+"]"}function g(b,I,w){return typeof b=="string"?b.substr(I,w):b.length>=I+w||I?new java.lang.String(b,I,w)+"":b}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(b){d.prototype[b]=function(){return null}});function v(b,I){b.currentElement?b.currentElement.appendChild(I):b.doc.appendChild(I)}return zh.__DOMHandler=d,zh.normalizeLineEndings=l,zh.DOMParser=u,zh}var vk;function Ree(){if(vk)return qh;vk=1;var t=SV();return qh.DOMImplementation=t.DOMImplementation,qh.XMLSerializer=t.XMLSerializer,qh.DOMParser=Dee().DOMParser,qh}var Lee=Ree();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const yk=t=>!!t&&typeof t=="object",Ei=(...t)=>t.reduce((e,n)=>(typeof n!="object"||Object.keys(n).forEach(i=>{Array.isArray(e[i])&&Array.isArray(n[i])?e[i]=e[i].concat(n[i]):yk(e[i])&&yk(n[i])?e[i]=Ei(e[i],n[i]):e[i]=n[i]}),e),{}),EV=t=>Object.keys(t).map(e=>t[e]),Oee=(t,e)=>{const n=[];for(let i=t;i<e;i++)n.push(i);return n},Ad=t=>t.reduce((e,n)=>e.concat(n),[]),CV=t=>{if(!t.length)return[];const e=[];for(let n=0;n<t.length;n++)e.push(t[n]);return e},Nee=(t,e)=>t.reduce((n,i,s)=>(i[e]&&n.push(s),n),[]),Mee=(t,e)=>EV(t.reduce((n,i)=>(i.forEach(s=>{n[e(s)]=s}),n),{}));var kd={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const lm=({baseUrl:t="",source:e="",range:n="",indexRange:i=""})=>{const s={uri:e,resolvedUri:$y(t||"",e)};if(n||i){const a=(n||i).split("-");let o=te.BigInt?te.BigInt(a[0]):parseInt(a[0],10),l=te.BigInt?te.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=te.BigInt(l)-te.BigInt(o)+te.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),s.byterange={length:u,offset:o}}return s},Vee=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=te.BigInt(t.offset)+te.BigInt(t.length)-te.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},_k=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),Fee={static(t){const{duration:e,timescale:n=1,sourceDuration:i,periodDuration:s}=t,r=_k(t.endNumber),a=e/n;return typeof r=="number"?{start:0,end:r}:typeof s=="number"?{start:0,end:s/a}:{start:0,end:i/a}},dynamic(t){const{NOW:e,clientOffset:n,availabilityStartTime:i,timescale:s=1,duration:r,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=t,u=_k(t.endNumber),c=(e+n)/1e3,d=i+a,f=c+o-d,g=Math.ceil(f*s/r),v=Math.floor((c-d-l)*s/r),b=Math.floor((c-d)*s/r);return{start:Math.max(0,v),end:typeof u=="number"?u:Math.min(g,b)}}},Bee=t=>e=>{const{duration:n,timescale:i=1,periodStart:s,startNumber:r=1}=t;return{number:r+e,duration:n/i,timeline:s,time:e*n}},XE=t=>{const{type:e,duration:n,timescale:i=1,periodDuration:s,sourceDuration:r}=t,{start:a,end:o}=Fee[e](t),l=Oee(a,o).map(Bee(t));if(e==="static"){const u=l.length-1,c=typeof s=="number"?s:r;l[u].duration=c-n/i*u}return l},wV=t=>{const{baseUrl:e,initialization:n={},sourceDuration:i,indexRange:s="",periodStart:r,presentationTime:a,number:o=0,duration:l}=t;if(!e)throw new Error(kd.NO_BASE_URL);const u=lm({baseUrl:e,source:n.sourceURL,range:n.range}),c=lm({baseUrl:e,source:e,indexRange:s});if(c.map=u,l){const d=XE(t);d.length&&(c.duration=d[0].duration,c.timeline=d[0].timeline)}else i&&(c.duration=i,c.timeline=r);return c.presentationTime=a||r,c.number=o,[c]},QE=(t,e,n)=>{const i=t.sidx.map?t.sidx.map:null,s=t.sidx.duration,r=t.timeline||0,a=t.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(b=>b.referenceType!==1),c=[],d=t.endList?"static":"dynamic",h=t.sidx.timeline;let f=h,g=t.mediaSequence||0,v;typeof e.firstOffset=="bigint"?v=te.BigInt(o)+e.firstOffset:v=o+e.firstOffset;for(let b=0;b<u.length;b++){const I=e.references[b],w=I.referencedSize,P=I.subsegmentDuration;let M;typeof v=="bigint"?M=v+te.BigInt(w)-te.BigInt(1):M=v+w-1;const F=`${v}-${M}`,D=wV({baseUrl:n,timescale:l,timeline:r,periodStart:h,presentationTime:f,number:g,duration:P,sourceDuration:s,indexRange:F,type:d})[0];i&&(D.map=i),c.push(D),typeof v=="bigint"?v+=te.BigInt(w):v+=w,f+=P/l,g++}return t.segments=c,t},Uee=["AUDIO","SUBTITLES"],$ee=1/60,xV=t=>Mee(t,({timeline:e})=>e).sort((e,n)=>e.timeline>n.timeline?1:-1),Hee=(t,e)=>{for(let n=0;n<t.length;n++)if(t[n].attributes.NAME===e)return t[n];return null},bk=t=>{let e=[];return Aee(t,Uee,(n,i,s,r)=>{e=e.concat(n.playlists||[])}),e},Tk=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((n,i)=>{n.number=t.mediaSequence+i})},jee=({oldPlaylists:t,newPlaylists:e,timelineStarts:n})=>{e.forEach(i=>{i.discontinuitySequence=n.findIndex(function({timeline:l}){return l===i.timeline});const s=Hee(t,i.attributes.NAME);if(!s||i.sidx)return;const r=i.segments[0],a=s.segments.findIndex(function(l){return Math.abs(l.presentationTime-r.presentationTime)<$ee});if(a===-1){Tk({playlist:i,mediaSequence:s.mediaSequence+s.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!s.segments.length&&i.timeline>s.timeline||s.segments.length&&i.timeline>s.segments[s.segments.length-1].timeline)&&i.discontinuitySequence--;return}s.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),Tk({playlist:i,mediaSequence:s.segments[a].number})})},qee=({oldManifest:t,newManifest:e})=>{const n=t.playlists.concat(bk(t)),i=e.playlists.concat(bk(e));return e.timelineStarts=xV([t.timelineStarts,e.timelineStarts]),jee({oldPlaylists:n,newPlaylists:i,timelineStarts:e.timelineStarts}),e},jy=t=>t&&t.uri+"-"+Vee(t.byterange),Y0=t=>{const e=t.reduce(function(i,s){return i[s.attributes.baseUrl]||(i[s.attributes.baseUrl]=[]),i[s.attributes.baseUrl].push(s),i},{});let n=[];return Object.values(e).forEach(i=>{const s=EV(i.reduce((r,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return r[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),r[o].segments.push(...a.segments)),a.attributes.contentProtection&&(r[o].attributes.contentProtection=a.attributes.contentProtection)):(r[o]=a,r[o].attributes.timelineStarts=[]),r[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),r},{}));n=n.concat(s)}),n.map(i=>(i.discontinuityStarts=Nee(i.segments||[],"discontinuity"),i))},JE=(t,e)=>{const n=jy(t.sidx),i=n&&e[n]&&e[n].sidx;return i&&QE(t,i,t.sidx.resolvedUri),t},zee=(t,e={})=>{if(!Object.keys(e).length)return t;for(const n in t)t[n]=JE(t[n],e);return t},Wee=({attributes:t,segments:e,sidx:n,mediaSequence:i,discontinuitySequence:s,discontinuityStarts:r},a)=>{const o={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuitySequence:s,discontinuityStarts:r,timelineStarts:t.timelineStarts,mediaSequence:i,segments:e};return t.contentProtection&&(o.contentProtection=t.contentProtection),t.serviceLocation&&(o.attributes.serviceLocation=t.serviceLocation),n&&(o.sidx=n),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},Gee=({attributes:t,segments:e,mediaSequence:n,discontinuityStarts:i,discontinuitySequence:s})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const r={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};t.codecs&&(r.CODECS=t.codecs);const a={attributes:r,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:i,discontinuitySequence:s,mediaSequence:n,segments:e};return t.serviceLocation&&(a.attributes.serviceLocation=t.serviceLocation),a},Kee=(t,e={},n=!1)=>{let i;const s=t.reduce((r,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let u=a.attributes.label||"main";if(l&&!a.attributes.label){const d=o?` (${o})`:"";u=`${a.attributes.lang}${d}`}r[u]||(r[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const c=JE(Wee(a,n),e);return r[u].playlists.push(c),typeof i>"u"&&o==="main"&&(i=a,i.default=!0),r},{});if(!i){const r=Object.keys(s)[0];s[r].default=!0}return s},Yee=(t,e={})=>t.reduce((n,i)=>{const s=i.attributes.label||i.attributes.lang||"text",r=i.attributes.lang||"und";return n[s]||(n[s]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),n[s].playlists.push(JE(Gee(i),e)),n},{}),Xee=t=>t.reduce((e,n)=>(n&&n.forEach(i=>{const{channel:s,language:r}=i;e[r]={autoselect:!1,default:!1,instreamId:s,language:r},i.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(e[r].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(e[r]["3D"]=i["3D"])}),e),{}),Qee=({attributes:t,segments:e,sidx:n,discontinuityStarts:i})=>{const s={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:i,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(s.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(s.contentProtection=t.contentProtection),t.serviceLocation&&(s.attributes.serviceLocation=t.serviceLocation),n&&(s.sidx=n),s},Jee=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",Zee=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",ete=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",tte=(t,e)=>{t.forEach(n=>{n.mediaSequence=0,n.discontinuitySequence=e.findIndex(function({timeline:i}){return i===n.timeline}),n.segments&&n.segments.forEach((i,s)=>{i.number=s})})},Sk=t=>t?Object.keys(t).reduce((e,n)=>{const i=t[n];return e.concat(i.playlists)},[]):[],nte=({dashPlaylists:t,locations:e,contentSteering:n,sidxMapping:i={},previousManifest:s,eventStream:r})=>{if(!t.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=t[0].attributes,c=Y0(t.filter(Jee)).map(Qee),d=Y0(t.filter(Zee)),h=Y0(t.filter(ete)),f=t.map(M=>M.attributes.captionServices).filter(Boolean),g={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:zee(c,i)};u>=0&&(g.minimumUpdatePeriod=u*1e3),e&&(g.locations=e),n&&(g.contentSteering=n),o==="dynamic"&&(g.suggestedPresentationDelay=l),r&&r.length>0&&(g.eventStream=r);const v=g.playlists.length===0,b=d.length?Kee(d,i,v):null,I=h.length?Yee(h,i):null,w=c.concat(Sk(b),Sk(I)),P=w.map(({timelineStarts:M})=>M);return g.timelineStarts=xV(P),tte(w,g.timelineStarts),b&&(g.mediaGroups.AUDIO.audio=b),I&&(g.mediaGroups.SUBTITLES.subs=I),f.length&&(g.mediaGroups["CLOSED-CAPTIONS"].cc=Xee(f)),s?qee({oldManifest:s,newManifest:g}):g},ite=(t,e,n)=>{const{NOW:i,clientOffset:s,availabilityStartTime:r,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=t,u=(i+s)/1e3,c=r+o,h=u+l-c;return Math.ceil((h*a-e)/n)},IV=(t,e)=>{const{type:n,minimumUpdatePeriod:i=0,media:s="",sourceDuration:r,timescale:a=1,startNumber:o=1,periodStart:l}=t,u=[];let c=-1;for(let d=0;d<e.length;d++){const h=e[d],f=h.d,g=h.r||0,v=h.t||0;c<0&&(c=v),v&&v>c&&(c=v);let b;if(g<0){const P=d+1;P===e.length?n==="dynamic"&&i>0&&s.indexOf("$Number$")>0?b=ite(t,c,f):b=(r*a-c)/f:b=(e[P].t-c)/f}else b=g+1;const I=o+u.length+b;let w=o+u.length;for(;w<I;)u.push({number:w,duration:f/a,time:c,timeline:l}),c+=f,w++}return u},ste=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,rte=t=>(e,n,i,s)=>{if(e==="$$")return"$";if(typeof t[n]>"u")return e;const r=""+t[n];return n==="RepresentationID"||(i?s=parseInt(s,10):s=1,r.length>=s)?r:`${new Array(s-r.length+1).join("0")}${r}`},Ek=(t,e)=>t.replace(ste,rte(e)),ate=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?XE(t):IV(t,e),ote=(t,e)=>{const n={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=t,s=lm({baseUrl:t.baseUrl,source:Ek(i.sourceURL,n),range:i.range});return ate(t,e).map(a=>{n.Number=a.number,n.Time=a.time;const o=Ek(t.media||"",n),l=t.timescale||1,u=t.presentationTimeOffset||0,c=t.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:$y(t.baseUrl||"",o),map:s,number:a.number,presentationTime:c}})},lte=(t,e)=>{const{baseUrl:n,initialization:i={}}=t,s=lm({baseUrl:n,source:i.sourceURL,range:i.range}),r=lm({baseUrl:n,source:e.media,range:e.mediaRange});return r.map=s,r},ute=(t,e)=>{const{duration:n,segmentUrls:i=[],periodStart:s}=t;if(!n&&!e||n&&e)throw new Error(kd.SEGMENT_TIME_UNSPECIFIED);const r=i.map(l=>lte(t,l));let a;return n&&(a=XE(t)),e&&(a=IV(t,e)),a.map((l,u)=>{if(r[u]){const c=r[u],d=t.timescale||1,h=t.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=s+(l.time-h)/d,c}}).filter(l=>l)},cte=({attributes:t,segmentInfo:e})=>{let n,i;e.template?(i=ote,n=Ei(t,e.template)):e.base?(i=wV,n=Ei(t,e.base)):e.list&&(i=ute,n=Ei(t,e.list));const s={attributes:t};if(!i)return s;const r=i(n,e.segmentTimeline);if(n.duration){const{duration:a,timescale:o=1}=n;n.duration=a/o}else r.length?n.duration=r.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):n.duration=0;return s.attributes=n,s.segments=r,e.base&&n.indexRange&&(s.sidx=r[0],s.segments=[]),s},dte=t=>t.map(cte),In=(t,e)=>CV(t.childNodes).filter(({tagName:n})=>n===e),Wm=t=>t.textContent.trim(),hte=t=>parseFloat(t.split("/").reduce((e,n)=>e/n)),Ec=t=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!o)return 0;const[l,u,c,d,h,f]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(d||0)*3600+parseFloat(h||0)*60+parseFloat(f||0)},fte=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),Ck={mediaPresentationDuration(t){return Ec(t)},availabilityStartTime(t){return fte(t)/1e3},minimumUpdatePeriod(t){return Ec(t)},suggestedPresentationDelay(t){return Ec(t)},type(t){return t},timeShiftBufferDepth(t){return Ec(t)},start(t){return Ec(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return hte(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?Ec(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},Zn=t=>t&&t.attributes?CV(t.attributes).reduce((e,n)=>{const i=Ck[n.name]||Ck.DEFAULT;return e[n.name]=i(n.value),e},{}):{},mte={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},qy=(t,e)=>e.length?Ad(t.map(function(n){return e.map(function(i){const s=Wm(i),r=$y(n.baseUrl,s),a=Ei(Zn(i),{baseUrl:r});return r!==s&&!a.serviceLocation&&n.serviceLocation&&(a.serviceLocation=n.serviceLocation),a})})):t,ZE=t=>{const e=In(t,"SegmentTemplate")[0],n=In(t,"SegmentList")[0],i=n&&In(n,"SegmentURL").map(d=>Ei({tag:"SegmentURL"},Zn(d))),s=In(t,"SegmentBase")[0],r=n||e,a=r&&In(r,"SegmentTimeline")[0],o=n||s||e,l=o&&In(o,"Initialization")[0],u=e&&Zn(e);u&&l?u.initialization=l&&Zn(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:a&&In(a,"S").map(d=>Zn(d)),list:n&&Ei(Zn(n),{segmentUrls:i,initialization:Zn(l)}),base:s&&Ei(Zn(s),{initialization:Zn(l)})};return Object.keys(c).forEach(d=>{c[d]||delete c[d]}),c},pte=(t,e,n)=>i=>{const s=In(i,"BaseURL"),r=qy(e,s),a=Ei(t,Zn(i)),o=ZE(i);return r.map(l=>({segmentInfo:Ei(n,o),attributes:Ei(a,l)}))},gte=t=>t.reduce((e,n)=>{const i=Zn(n);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());const s=mte[i.schemeIdUri];if(s){e[s]={attributes:i};const r=In(n,"cenc:pssh")[0];if(r){const a=Wm(r);e[s].pssh=a&&gV(a)}}return e},{}),vte=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(n=>{let i,s;return s=n,/^CC\d=/.test(n)?[i,s]=n.split("="):/^CC\d$/.test(n)&&(i=n),{channel:i,language:s}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(n=>{const i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){const[s,r=""]=n.split("=");i.channel=s,i.language=n,r.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?i.language=l:o==="er"?i.easyReader=Number(l):o==="war"?i.aspectRatio=Number(l):o==="3D"&&(i["3D"]=Number(l))})}else i.language=n;return i.channel&&(i.channel="SERVICE"+i.channel),i})},yte=t=>Ad(In(t.node,"EventStream").map(e=>{const n=Zn(e),i=n.schemeIdUri;return In(e,"Event").map(s=>{const r=Zn(s),a=r.presentationTime||0,o=n.timescale||1,l=r.duration||0,u=a/o+t.attributes.start;return{schemeIdUri:i,value:n.value,id:r.id,start:u,end:u+l/o,messageData:Wm(s)||r.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}})})),_te=(t,e,n)=>i=>{const s=Zn(i),r=qy(e,In(i,"BaseURL")),a=In(i,"Role")[0],o={role:Zn(a)};let l=Ei(t,s,o);const u=In(i,"Accessibility")[0],c=vte(Zn(u));c&&(l=Ei(l,{captionServices:c}));const d=In(i,"Label")[0];if(d&&d.childNodes.length){const b=d.childNodes[0].nodeValue.trim();l=Ei(l,{label:b})}const h=gte(In(i,"ContentProtection"));Object.keys(h).length&&(l=Ei(l,{contentProtection:h}));const f=ZE(i),g=In(i,"Representation"),v=Ei(n,f);return Ad(g.map(pte(l,r,v)))},bte=(t,e)=>(n,i)=>{const s=qy(e,In(n.node,"BaseURL")),r=Ei(t,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(r.periodDuration=n.attributes.duration);const a=In(n.node,"AdaptationSet"),o=ZE(n.node);return Ad(a.map(_te(r,s,o)))},Tte=(t,e)=>{if(t.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!t.length)return null;const n=Ei({serverURL:Wm(t[0])},Zn(t[0]));return n.queryBeforeStart=n.queryBeforeStart==="true",n},Ste=({attributes:t,priorPeriodAttributes:e,mpdType:n})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&n==="static"?0:null,Ete=(t,e={})=>{const{manifestUri:n="",NOW:i=Date.now(),clientOffset:s=0,eventHandler:r=function(){}}=e,a=In(t,"Period");if(!a.length)throw new Error(kd.INVALID_NUMBER_OF_PERIOD);const o=In(t,"Location"),l=Zn(t),u=qy([{baseUrl:n}],In(t,"BaseURL")),c=In(t,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=i,l.clientOffset=s,o.length&&(l.locations=o.map(Wm));const d=[];return a.forEach((h,f)=>{const g=Zn(h),v=d[f-1];g.start=Ste({attributes:g,priorPeriodAttributes:v?v.attributes:null,mpdType:l.type}),d.push({node:h,attributes:g})}),{locations:l.locations,contentSteeringInfo:Tte(c,r),representationInfo:Ad(d.map(bte(l,u))),eventStream:Ad(d.map(yte))}},AV=t=>{if(t==="")throw new Error(kd.DASH_EMPTY_MANIFEST);const e=new Lee.DOMParser;let n,i;try{n=e.parseFromString(t,"application/xml"),i=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(kd.DASH_INVALID_XML);return i},Cte=t=>{const e=In(t,"UTCTiming")[0];if(!e)return null;const n=Zn(e);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(kd.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},wte=(t,e={})=>{const n=Ete(AV(t),e),i=dte(n.representationInfo);return nte({dashPlaylists:i,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:n.eventStream})},xte=t=>Cte(AV(t));var X0,wk;function Ite(){if(wk)return X0;wk=1;var t=Math.pow(2,32),e=function(n){var i=new DataView(n.buffer,n.byteOffset,n.byteLength),s;return i.getBigUint64?(s=i.getBigUint64(0),s<Number.MAX_SAFE_INTEGER?Number(s):s):i.getUint32(0)*t+i.getUint32(4)};return X0={getUint64:e,MAX_UINT32:t},X0}var Q0,xk;function Ate(){if(xk)return Q0;xk=1;var t=Ite().getUint64,e=function(n){var i=new DataView(n.buffer,n.byteOffset,n.byteLength),s={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8)},r=12;s.version===0?(s.earliestPresentationTime=i.getUint32(r),s.firstOffset=i.getUint32(r+4),r+=8):(s.earliestPresentationTime=t(n.subarray(r)),s.firstOffset=t(n.subarray(r+8)),r+=16),r+=2;var a=i.getUint16(r);for(r+=2;a>0;r+=12,a--)s.references.push({referenceType:(n[r]&128)>>>7,referencedSize:i.getUint32(r)&2147483647,subsegmentDuration:i.getUint32(r+4),startsWithSap:!!(n[r+8]&128),sapType:(n[r+8]&112)>>>4,sapDeltaTime:i.getUint32(r+8)&268435455});return s};return Q0=e,Q0}var kte=Ate();const Pte=zm(kte);var Dte=ct([73,68,51]),Rte=function(e,n){n===void 0&&(n=0),e=ct(e);var i=e[n+5],s=e[n+6]<<21|e[n+7]<<14|e[n+8]<<7|e[n+9],r=(i&16)>>4;return r?s+20:s+10},af=function t(e,n){return n===void 0&&(n=0),e=ct(e),e.length-n<10||!xn(e,Dte,{offset:n})?n:(n+=Rte(e,n),t(e,n))},Ik=function(e){return typeof e=="string"?TV(e):e},Lte=function(e){return Array.isArray(e)?e.map(function(n){return Ik(n)}):[Ik(e)]},Ote=function t(e,n,i){i===void 0&&(i=!1),n=Lte(n),e=ct(e);var s=[];if(!n.length)return s;for(var r=0;r<e.length;){var a=(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])>>>0,o=e.subarray(r+4,r+8);if(a===0)break;var l=r+a;if(l>e.length){if(i)break;l=e.length}var u=e.subarray(r+8,l);xn(o,n[0])&&(n.length===1?s.push(u):s.push.apply(s,t(u,n.slice(1),i))),r=l}return s},ng={EBML:ct([26,69,223,163]),DocType:ct([66,130]),Segment:ct([24,83,128,103]),SegmentInfo:ct([21,73,169,102]),Tracks:ct([22,84,174,107]),Track:ct([174]),TrackNumber:ct([215]),DefaultDuration:ct([35,227,131]),TrackEntry:ct([174]),TrackType:ct([131]),FlagDefault:ct([136]),CodecID:ct([134]),CodecPrivate:ct([99,162]),VideoTrack:ct([224]),AudioTrack:ct([225]),Cluster:ct([31,67,182,117]),Timestamp:ct([231]),TimestampScale:ct([42,215,177]),BlockGroup:ct([160]),BlockDuration:ct([155]),Block:ct([161]),SimpleBlock:ct([163])},qT=[128,64,32,16,8,4,2,1],Nte=function(e){for(var n=1,i=0;i<qT.length&&!(e&qT[i]);i++)n++;return n},Ev=function(e,n,i,s){i===void 0&&(i=!0),s===void 0&&(s=!1);var r=Nte(e[n]),a=e.subarray(n,n+r);return i&&(a=Array.prototype.slice.call(e,n,n+r),a[0]^=qT[r-1]),{length:r,value:wee(a,{signed:s}),bytes:a}},Ak=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(n){return t(n)}):typeof e=="number"?xee(e):e},Mte=function(e){return Array.isArray(e)?e.map(function(n){return Ak(n)}):[Ak(e)]},Vte=function t(e,n,i){if(i>=n.length)return n.length;var s=Ev(n,i,!1);if(xn(e.bytes,s.bytes))return i;var r=Ev(n,i+s.length);return t(e,n,i+r.length+r.value+s.length)},kk=function t(e,n){n=Mte(n),e=ct(e);var i=[];if(!n.length)return i;for(var s=0;s<e.length;){var r=Ev(e,s,!1),a=Ev(e,s+r.length),o=s+r.length+a.length;a.value===127&&(a.value=Vte(r,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);xn(n[0],r.bytes)&&(n.length===1?i.push(u):i=i.concat(t(u,n.slice(1))));var c=r.length+a.length+u.length;s+=c}return i},Fte=ct([0,0,0,1]),Bte=ct([0,0,1]),Ute=ct([0,0,3]),$te=function(e){for(var n=[],i=1;i<e.length-2;)xn(e.subarray(i,i+3),Ute)&&(n.push(i+2),i++),i++;if(n.length===0)return e;var s=e.length-n.length,r=new Uint8Array(s),a=0;for(i=0;i<s;a++,i++)a===n[0]&&(a++,n.shift()),r[i]=e[a];return r},kV=function(e,n,i,s){e=ct(e),i=[].concat(i);for(var r=0,a,o=0;r<e.length&&(o<s||a);){var l=void 0;if(xn(e.subarray(r),Fte)?l=4:xn(e.subarray(r),Bte)&&(l=3),!l){r++;continue}if(o++,a)return $te(e.subarray(a,r));var u=void 0;n==="h264"?u=e[r+l]&31:n==="h265"&&(u=e[r+l]>>1&63),i.indexOf(u)!==-1&&(a=r+l),r+=l+(n==="h264"?1:2)}return e.subarray(0,0)},Hte=function(e,n,i){return kV(e,"h264",n,i)},jte=function(e,n,i){return kV(e,"h265",n,i)},ss={webm:ct([119,101,98,109]),matroska:ct([109,97,116,114,111,115,107,97]),flac:ct([102,76,97,67]),ogg:ct([79,103,103,83]),ac3:ct([11,119]),riff:ct([82,73,70,70]),avi:ct([65,86,73]),wav:ct([87,65,86,69]),"3gp":ct([102,116,121,112,51,103]),mp4:ct([102,116,121,112]),fmp4:ct([115,116,121,112]),mov:ct([102,116,121,112,113,116]),moov:ct([109,111,111,118]),moof:ct([109,111,111,102])},Pd={aac:function(e){var n=af(e);return xn(e,[255,16],{offset:n,mask:[255,22]})},mp3:function(e){var n=af(e);return xn(e,[255,2],{offset:n,mask:[255,6]})},webm:function(e){var n=kk(e,[ng.EBML,ng.DocType])[0];return xn(n,ss.webm)},mkv:function(e){var n=kk(e,[ng.EBML,ng.DocType])[0];return xn(n,ss.matroska)},mp4:function(e){if(Pd["3gp"](e)||Pd.mov(e))return!1;if(xn(e,ss.mp4,{offset:4})||xn(e,ss.fmp4,{offset:4})||xn(e,ss.moof,{offset:4})||xn(e,ss.moov,{offset:4}))return!0},mov:function(e){return xn(e,ss.mov,{offset:4})},"3gp":function(e){return xn(e,ss["3gp"],{offset:4})},ac3:function(e){var n=af(e);return xn(e,ss.ac3,{offset:n})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var n=0;n+188<e.length&&n<188;){if(e[n]===71&&e[n+188]===71)return!0;n+=1}return!1},flac:function(e){var n=af(e);return xn(e,ss.flac,{offset:n})},ogg:function(e){return xn(e,ss.ogg)},avi:function(e){return xn(e,ss.riff)&&xn(e,ss.avi,{offset:8})},wav:function(e){return xn(e,ss.riff)&&xn(e,ss.wav,{offset:8})},h264:function(e){return Hte(e,7,3).length},h265:function(e){return jte(e,[32,33],3).length}},zT=Object.keys(Pd).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);zT.forEach(function(t){var e=Pd[t];Pd[t]=function(n){return e(ct(n))}});var qte=Pd,eC=function(e){e=ct(e);for(var n=0;n<zT.length;n++){var i=zT[n];if(qte[i](e))return i}return""},zte=function(e){return Ote(e,["moof"]).length>0},J0,Pk;function Wte(){if(Pk)return J0;Pk=1;var t=9e4,e,n,i,s,r,a,o;return e=function(l){return l*t},n=function(l,u){return l*u},i=function(l){return l/t},s=function(l,u){return l/u},r=function(l,u){return e(s(l,u))},a=function(l,u){return n(i(l),u)},o=function(l,u,c){return i(c?l:l-u)},J0={ONE_SECOND_IN_TS:t,secondsToVideoTs:e,secondsToAudioTs:n,videoTsToSeconds:i,audioTsToSeconds:s,audioTsToVideoTs:r,videoTsToAudioTs:a,metadataTsToSeconds:o},J0}var su=Wte();/**
 * @license
 * Video.js 8.22.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var WT="8.22.0";const Ua={},cl=function(t,e){return Ua[t]=Ua[t]||[],e&&(Ua[t]=Ua[t].concat(e)),Ua[t]},Gte=function(t,e){cl(t,e)},PV=function(t,e){const n=cl(t).indexOf(e);return n<=-1?!1:(Ua[t]=Ua[t].slice(),Ua[t].splice(n,1),!0)},Kte=function(t,e){cl(t,[].concat(e).map(n=>{const i=(...s)=>(PV(t,i),n(...s));return i}))},Cv={prefixed:!0},wg=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],Dk=wg[0];let of;for(let t=0;t<wg.length;t++)if(wg[t][1]in qe){of=wg[t];break}if(of){for(let t=0;t<of.length;t++)Cv[Dk[t]]=of[t];Cv.prefixed=of[0]!==Dk[0]}let ys=[];const Yte=(t,e,n)=>(i,s,r)=>{const a=e.levels[s],o=new RegExp(`^(${a})$`);let l=t;if(i!=="log"&&r.unshift(i.toUpperCase()+":"),n&&(l=`%c${t}`,r.unshift(n)),r.unshift(l+":"),ys){ys.push([].concat(r));const c=ys.length-1e3;ys.splice(0,c>0?c:0)}if(!te.console)return;let u=te.console[i];!u&&i==="debug"&&(u=te.console.info||te.console.log),!(!u||!a||!o.test(i))&&u[Array.isArray(r)?"apply":"call"](te.console,r)};function GT(t,e=":",n=""){let i="info",s;function r(...a){s("log",i,a)}return s=Yte(t,r,n),r.createLogger=(a,o,l)=>{const u=o!==void 0?o:e,c=l!==void 0?l:n,d=`${t} ${u} ${a}`;return GT(d,u,c)},r.createNewLogger=(a,o,l)=>GT(a,o,l),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=a=>{if(typeof a=="string"){if(!r.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);i=a}return i},r.history=()=>ys?[].concat(ys):[],r.history.filter=a=>(ys||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),r.history.clear=()=>{ys&&(ys.length=0)},r.history.disable=()=>{ys!==null&&(ys.length=0,ys=null)},r.history.enable=()=>{ys===null&&(ys=[])},r.error=(...a)=>s("error",i,a),r.warn=(...a)=>s("warn",i,a),r.debug=(...a)=>s("debug",i,a),r}const It=GT("VIDEOJS"),DV=It.createLogger,Xte=Object.prototype.toString,RV=function(t){return va(t)?Object.keys(t):[]};function Zc(t,e){RV(t).forEach(n=>e(t[n],n))}function LV(t,e,n=0){return RV(t).reduce((i,s)=>e(i,t[s],s),n)}function va(t){return!!t&&typeof t=="object"}function Dd(t){return va(t)&&Xte.call(t)==="[object Object]"&&t.constructor===Object}function sn(...t){const e={};return t.forEach(n=>{n&&Zc(n,(i,s)=>{if(!Dd(i)){e[s]=i;return}Dd(e[s])||(e[s]={}),e[s]=sn(e[s],i)})}),e}function OV(t={}){const e=[];for(const n in t)if(t.hasOwnProperty(n)){const i=t[n];e.push(i)}return e}function zy(t,e,n,i=!0){const s=a=>Object.defineProperty(t,e,{value:a,enumerable:!0,writable:!0}),r={configurable:!0,enumerable:!0,get(){const a=n();return s(a),a}};return i&&(r.set=s),Object.defineProperty(t,e,r)}var Qte=Object.freeze({__proto__:null,each:Zc,reduce:LV,isObject:va,isPlain:Dd,merge:sn,values:OV,defineLazyProperty:zy});let tC=!1,NV=null,Nr=!1,MV,VV=!1,ed=!1,td=!1,ya=!1,nC=null,Wy=null;const Jte=!!(te.cast&&te.cast.framework&&te.cast.framework.CastReceiverContext);let FV=null,wv=!1,Gy=!1,xv=!1,Ky=!1,Iv=!1,Av=!1,kv=!1;const um=!!(Zd()&&("ontouchstart"in te||te.navigator.maxTouchPoints||te.DocumentTouch&&te.document instanceof te.DocumentTouch)),ko=te.navigator&&te.navigator.userAgentData;ko&&ko.platform&&ko.brands&&(Nr=ko.platform==="Android",ed=!!ko.brands.find(t=>t.brand==="Microsoft Edge"),td=!!ko.brands.find(t=>t.brand==="Chromium"),ya=!ed&&td,nC=Wy=(ko.brands.find(t=>t.brand==="Chromium")||{}).version||null,Gy=ko.platform==="Windows");if(!td){const t=te.navigator&&te.navigator.userAgent||"";tC=/iPod/i.test(t),NV=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Nr=/Android/i.test(t),MV=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const n=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return n&&i?parseFloat(e[1]+"."+e[2]):n||null}(),VV=/Firefox/i.test(t),ed=/Edg/i.test(t),td=/Chrome/i.test(t)||/CriOS/i.test(t),ya=!ed&&td,nC=Wy=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),FV=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let n=e&&parseFloat(e[1]);return!n&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(n=11),n}(),Iv=/Tizen/i.test(t),Av=/Web0S/i.test(t),kv=Iv||Av,wv=/Safari/i.test(t)&&!ya&&!Nr&&!ed&&!kv,Gy=/Windows/i.test(t),xv=/iPad/i.test(t)||wv&&um&&!/iPhone/i.test(t),Ky=/iPhone/i.test(t)&&!xv}const Xi=Ky||xv||tC,Yy=(wv||Xi)&&!ya;var BV=Object.freeze({__proto__:null,get IS_IPOD(){return tC},get IOS_VERSION(){return NV},get IS_ANDROID(){return Nr},get ANDROID_VERSION(){return MV},get IS_FIREFOX(){return VV},get IS_EDGE(){return ed},get IS_CHROMIUM(){return td},get IS_CHROME(){return ya},get CHROMIUM_VERSION(){return nC},get CHROME_VERSION(){return Wy},IS_CHROMECAST_RECEIVER:Jte,get IE_VERSION(){return FV},get IS_SAFARI(){return wv},get IS_WINDOWS(){return Gy},get IS_IPAD(){return xv},get IS_IPHONE(){return Ky},get IS_TIZEN(){return Iv},get IS_WEBOS(){return Av},get IS_SMART_TV(){return kv},TOUCH_ENABLED:um,IS_IOS:Xi,IS_ANY_SAFARI:Yy});function Rk(t){return typeof t=="string"&&!!t.trim()}function Zte(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Zd(){return qe===te.document}function eh(t){return va(t)&&t.nodeType===1}function UV(){try{return te.parent!==te.self}catch{return!0}}function $V(t){return function(e,n){if(!Rk(e))return qe[t](null);Rk(n)&&(n=qe.querySelector(n));const i=eh(n)?n:qe;return i[t]&&i[t](e)}}function ft(t="div",e={},n={},i){const s=qe.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(r){const a=e[r];r==="textContent"?Cl(s,a):(s[r]!==a||r==="tabIndex")&&(s[r]=a)}),Object.getOwnPropertyNames(n).forEach(function(r){s.setAttribute(r,n[r])}),i&&iC(s,i),s}function Cl(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function KT(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function Pf(t,e){return Zte(e),t.classList.contains(e)}function fu(t,...e){return t.classList.add(...e.reduce((n,i)=>n.concat(i.split(/\s+/)),[])),t}function Xy(t,...e){return t?(t.classList.remove(...e.reduce((n,i)=>n.concat(i.split(/\s+/)),[])),t):(It.warn("removeClass was called with an element that doesn't exist"),null)}function HV(t,e,n){return typeof n=="function"&&(n=n(t,e)),typeof n!="boolean"&&(n=void 0),e.split(/\s+/).forEach(i=>t.classList.toggle(i,n)),t}function jV(t,e){Object.getOwnPropertyNames(e).forEach(function(n){const i=e[n];i===null||typeof i>"u"||i===!1?t.removeAttribute(n):t.setAttribute(n,i===!0?"":i)})}function Fo(t){const e={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(t&&t.attributes&&t.attributes.length>0){const i=t.attributes;for(let s=i.length-1;s>=0;s--){const r=i[s].name;let a=i[s].value;n.includes(r)&&(a=a!==null),e[r]=a}}return e}function qV(t,e){return t.getAttribute(e)}function Rd(t,e,n){t.setAttribute(e,n)}function Qy(t,e){t.removeAttribute(e)}function zV(){qe.body.focus(),qe.onselectstart=function(){return!1}}function WV(){qe.onselectstart=function(){return!0}}function Ld(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(i=>{e[i]!==void 0&&(n[i]=e[i])}),n.height||(n.height=parseFloat(Od(t,"height"))),n.width||(n.width=parseFloat(Od(t,"width"))),n}}function cm(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,n=t.offsetHeight;let i=0,s=0;for(;t.offsetParent&&t!==qe[Cv.fullscreenElement];)i+=t.offsetLeft,s+=t.offsetTop,t=t.offsetParent;return{left:i,top:s,width:e,height:n}}function Jy(t,e){const n={x:0,y:0};if(Xi){let c=t;for(;c&&c.nodeName.toLowerCase()!=="html";){const d=Od(c,"transform");if(/^matrix/.test(d)){const h=d.slice(7,-1).split(/,\s/).map(Number);n.x+=h[4],n.y+=h[5]}else if(/^matrix3d/.test(d)){const h=d.slice(9,-1).split(/,\s/).map(Number);n.x+=h[12],n.y+=h[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&te.WebKitCSSMatrix){const h=te.getComputedStyle(c.assignedSlot.parentElement).transform,f=new te.WebKitCSSMatrix(h);n.x+=f.m41,n.y+=f.m42}c=c.parentNode||c.host}}const i={},s=cm(e.target),r=cm(t),a=r.width,o=r.height;let l=e.offsetY-(r.top-s.top),u=e.offsetX-(r.left-s.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-r.left,l=e.changedTouches[0].pageY+r.top,Xi&&(u-=n.x,l-=n.y)),i.y=1-Math.max(0,Math.min(1,l/o)),i.x=Math.max(0,Math.min(1,u/a)),i}function GV(t){return va(t)&&t.nodeType===3}function Zy(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function KV(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="function"&&(e=e()),eh(e)||GV(e))return e;if(typeof e=="string"&&/\S/.test(e))return qe.createTextNode(e)}).filter(e=>e)}function iC(t,e){return KV(e).forEach(n=>t.appendChild(n)),t}function YV(t,e){return iC(Zy(t),e)}function dm(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0||t.type==="mousedown"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}const dl=$V("querySelector"),XV=$V("querySelectorAll");function Od(t,e){if(!t||!e)return"";if(typeof te.getComputedStyle=="function"){let n;try{n=te.getComputedStyle(t)}catch{return""}return n?n.getPropertyValue(e)||n[e]:""}return""}function QV(t){[...qe.styleSheets].forEach(e=>{try{const n=[...e.cssRules].map(s=>s.cssText).join(""),i=qe.createElement("style");i.textContent=n,t.document.head.appendChild(i)}catch{const i=qe.createElement("link");i.rel="stylesheet",i.type=e.type,i.media=e.media.mediaText,i.href=e.href,t.document.head.appendChild(i)}})}var JV=Object.freeze({__proto__:null,isReal:Zd,isEl:eh,isInFrame:UV,createEl:ft,textContent:Cl,prependTo:KT,hasClass:Pf,addClass:fu,removeClass:Xy,toggleClass:HV,setAttributes:jV,getAttributes:Fo,getAttribute:qV,setAttribute:Rd,removeAttribute:Qy,blockTextSelection:zV,unblockTextSelection:WV,getBoundingClientRect:Ld,findPosition:cm,getPointerPosition:Jy,isTextNode:GV,emptyEl:Zy,normalizeContent:KV,appendContent:iC,insertContent:YV,isSingleLeftClick:dm,$:dl,$$:XV,computedStyle:Od,copyStyleSheetsToWindow:QV});let ZV=!1,XT;const ene=function(){if(XT.options.autoSetup===!1)return;const t=Array.prototype.slice.call(qe.getElementsByTagName("video")),e=Array.prototype.slice.call(qe.getElementsByTagName("audio")),n=Array.prototype.slice.call(qe.getElementsByTagName("video-js")),i=t.concat(e,n);if(i&&i.length>0)for(let s=0,r=i.length;s<r;s++){const a=i[s];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&XT(a);else{QT(1);break}}else ZV||QT(1)};function QT(t,e){Zd()&&(e&&(XT=e),te.setTimeout(ene,t))}function JT(){ZV=!0,te.removeEventListener("load",JT)}Zd()&&(qe.readyState==="complete"?JT():te.addEventListener("load",JT));const e4=function(t){const e=qe.createElement("style");return e.className=t,e},t4=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var cs=new WeakMap;const tne=3;let nne=tne;function or(){return nne++}function Lk(t,e){if(!cs.has(t))return;const n=cs.get(t);n.handlers[e].length===0&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),Object.getOwnPropertyNames(n).length===0&&cs.delete(t)}function sC(t,e,n,i){n.forEach(function(s){t(e,s,i)})}function e_(t){if(t.fixed_)return t;function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const i=t||te.event;t={};const s=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const r in i)s.includes(r)||r==="returnValue"&&i.preventDefault||(t[r]=i[r]);if(t.target||(t.target=t.srcElement||qe),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){i.preventDefault&&i.preventDefault(),t.returnValue=!1,i.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),t.cancelBubble=!0,i.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,t.clientX!==null&&t.clientX!==void 0){const r=qe.documentElement,a=qe.body;t.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}let ig;const ine=function(){if(typeof ig!="boolean"){ig=!1;try{const t=Object.defineProperty({},"passive",{get(){ig=!0}});te.addEventListener("test",null,t),te.removeEventListener("test",null,t)}catch{}}return ig},sne=["touchstart","touchmove"];function Ws(t,e,n){if(Array.isArray(e))return sC(Ws,t,e,n);cs.has(t)||cs.set(t,{});const i=cs.get(t);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),n.guid||(n.guid=or()),i.handlers[e].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(s,r){if(i.disabled)return;s=e_(s);const a=i.handlers[s.type];if(a){const o=a.slice(0);for(let l=0,u=o.length;l<u&&!s.isImmediatePropagationStopped();l++)try{o[l].call(t,s,r)}catch(c){It.error(c)}}}),i.handlers[e].length===1)if(t.addEventListener){let s=!1;ine()&&sne.indexOf(e)>-1&&(s={passive:!0}),t.addEventListener(e,i.dispatcher,s)}else t.attachEvent&&t.attachEvent("on"+e,i.dispatcher)}function Qi(t,e,n){if(!cs.has(t))return;const i=cs.get(t);if(!i.handlers)return;if(Array.isArray(e))return sC(Qi,t,e,n);const s=function(a,o){i.handlers[o]=[],Lk(a,o)};if(e===void 0){for(const a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&s(t,a);return}const r=i.handlers[e];if(r){if(!n){s(t,e);return}if(n.guid)for(let a=0;a<r.length;a++)r[a].guid===n.guid&&r.splice(a--,1);Lk(t,e)}}function th(t,e,n){const i=cs.has(t)?cs.get(t):{},s=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=e_(e),i.dispatcher&&i.dispatcher.call(t,e,n),s&&!e.isPropagationStopped()&&e.bubbles===!0)th.call(null,s,e,n);else if(!s&&!e.defaultPrevented&&e.target&&e.target[e.type]){cs.has(e.target)||cs.set(e.target,{});const r=cs.get(e.target);e.target[e.type]&&(r.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),r.disabled=!1)}return!e.defaultPrevented}function t_(t,e,n){if(Array.isArray(e))return sC(t_,t,e,n);const i=function(){Qi(t,e,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||or(),Ws(t,e,i)}function rC(t,e,n){const i=function(){Qi(t,e,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||or(),Ws(t,e,i)}var rne=Object.freeze({__proto__:null,fixEvent:e_,on:Ws,off:Qi,trigger:th,one:t_,any:rC});const lr=30,dn=function(t,e,n){e.guid||(e.guid=or());const i=e.bind(t);return i.guid=n?n+"_"+e.guid:e.guid,i},_a=function(t,e){let n=te.performance.now();return function(...s){const r=te.performance.now();r-n>=e&&(t(...s),n=r)}},n4=function(t,e,n,i=te){let s;const r=()=>{i.clearTimeout(s),s=null},a=function(){const o=this,l=arguments;let u=function(){s=null,u=null,n||t.apply(o,l)};!s&&n&&t.apply(o,l),i.clearTimeout(s),s=i.setTimeout(u,e)};return a.cancel=r,a};var ane=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:lr,bind_:dn,throttle:_a,debounce:n4});let Wh;class Gs{on(e,n){const i=this.addEventListener;this.addEventListener=()=>{},Ws(this,e,n),this.addEventListener=i}off(e,n){Qi(this,e,n)}one(e,n){const i=this.addEventListener;this.addEventListener=()=>{},t_(this,e,n),this.addEventListener=i}any(e,n){const i=this.addEventListener;this.addEventListener=()=>{},rC(this,e,n),this.addEventListener=i}trigger(e){const n=e.type||e;typeof e=="string"&&(e={type:n}),e=e_(e),this.allowedEvents_[n]&&this["on"+n]&&this["on"+n](e),th(this,e)}queueTrigger(e){Wh||(Wh=new Map);const n=e.type||e;let i=Wh.get(this);i||(i=new Map,Wh.set(this,i));const s=i.get(n);i.delete(n),te.clearTimeout(s);const r=te.setTimeout(()=>{i.delete(n),i.size===0&&(i=null,Wh.delete(this)),this.trigger(e)},0);i.set(n,r)}}Gs.prototype.allowedEvents_={};Gs.prototype.addEventListener=Gs.prototype.on;Gs.prototype.removeEventListener=Gs.prototype.off;Gs.prototype.dispatchEvent=Gs.prototype.trigger;const n_=t=>typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,Ka=t=>t instanceof Gs||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof t[e]=="function"),one=(t,e)=>{Ka(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))},ZT=t=>typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length,Pv=(t,e,n)=>{if(!t||!t.nodeName&&!Ka(t))throw new Error(`Invalid target for ${n_(e)}#${n}; must be a DOM node or evented object.`)},i4=(t,e,n)=>{if(!ZT(t))throw new Error(`Invalid event type for ${n_(e)}#${n}; must be a non-empty string or array.`)},s4=(t,e,n)=>{if(typeof t!="function")throw new Error(`Invalid listener for ${n_(e)}#${n}; must be a function.`)},Z0=(t,e,n)=>{const i=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let s,r,a;return i?(s=t.eventBusEl_,e.length>=3&&e.shift(),[r,a]=e):(s=e[0],r=e[1],a=e[2]),Pv(s,t,n),i4(r,t,n),s4(a,t,n),a=dn(t,a),{isTargetingSelf:i,target:s,type:r,listener:a}},Gl=(t,e,n,i)=>{Pv(t,t,e),t.nodeName?rne[e](t,n,i):t[e](n,i)},lne={on(...t){const{isTargetingSelf:e,target:n,type:i,listener:s}=Z0(this,t,"on");if(Gl(n,"on",i,s),!e){const r=()=>this.off(n,i,s);r.guid=s.guid;const a=()=>this.off("dispose",r);a.guid=s.guid,Gl(this,"on","dispose",r),Gl(n,"on","dispose",a)}},one(...t){const{isTargetingSelf:e,target:n,type:i,listener:s}=Z0(this,t,"one");if(e)Gl(n,"one",i,s);else{const r=(...a)=>{this.off(n,i,r),s.apply(null,a)};r.guid=s.guid,Gl(n,"one",i,r)}},any(...t){const{isTargetingSelf:e,target:n,type:i,listener:s}=Z0(this,t,"any");if(e)Gl(n,"any",i,s);else{const r=(...a)=>{this.off(n,i,r),s.apply(null,a)};r.guid=s.guid,Gl(n,"any",i,r)}},off(t,e,n){if(!t||ZT(t))Qi(this.eventBusEl_,t,e);else{const i=t,s=e;Pv(i,this,"off"),i4(s,this,"off"),s4(n,this,"off"),n=dn(this,n),this.off("dispose",n),i.nodeName?(Qi(i,s,n),Qi(i,"dispose",n)):Ka(i)&&(i.off(s,n),i.off("dispose",n))}},trigger(t,e){Pv(this.eventBusEl_,this,"trigger");const n=t&&typeof t!="string"?t.type:t;if(!ZT(n))throw new Error(`Invalid event type for ${n_(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return th(this.eventBusEl_,t,e)}};function aC(t,e={}){const{eventBusKey:n}=e;if(n){if(!t[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);t.eventBusEl_=t[n]}else t.eventBusEl_=ft("span",{className:"vjs-event-bus"});return Object.assign(t,lne),t.eventedCallbacks&&t.eventedCallbacks.forEach(i=>{i()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(i){i&&cs.has(i)&&cs.delete(i)}),te.setTimeout(()=>{t.eventBusEl_=null},0)}),t}const une={state:{},setState(t){typeof t=="function"&&(t=t());let e;return Zc(t,(n,i)=>{this.state[i]!==n&&(e=e||{},e[i]={from:this.state[i],to:n}),this.state[i]=n}),e&&Ka(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function r4(t,e){return Object.assign(t,une),t.state=Object.assign({},t.state,e),typeof t.handleStateChanged=="function"&&Ka(t)&&t.on("statechanged",t.handleStateChanged),t}const Df=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toLowerCase())},Un=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},a4=function(t,e){return Un(t)===Un(e)};var cne=Object.freeze({__proto__:null,toLowerCase:Df,toTitleCase:Un,titleCaseEquals:a4});class De{constructor(e,n,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=sn({},this.options_),n=this.options_=sn(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){const s=e&&e.id&&e.id()||"no_player";this.id_=`${s}_component_${or()}`}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(s=>this.addClass(s)),["on","off","one","any","trigger"].forEach(s=>{this[s]=void 0}),n.evented!==!1&&(aC(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),r4(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(i),n.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=sn(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,n,i){return ft(e,n,i)}localize(e,n,i=e){const s=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[s],o=s&&s.split("-")[0],l=r&&r[o];let u=i;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),n&&(u=u.replace(/\{(\d+)\}/g,function(c,d){const h=n[d-1];let f=h;return typeof h>"u"&&(f=c),f})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((i,s)=>i.concat(s),[]);let n=this;for(let i=0;i<e.length;i++)if(n=n.getChild(e[i]),!n||!n.getChild)return;return n}setIcon(e,n=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const i="http://www.w3.org/2000/svg",s=ft("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=qe.createElementNS(i,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");const a=qe.createElementNS(i,"use");return r.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),s.appendChild(r),this.iconIsSet_?n.replaceChild(s,n.querySelector(".vjs-icon-placeholder")):n.appendChild(s),this.iconIsSet_=!0,s}addChild(e,n={},i=this.children_.length){let s,r;if(typeof e=="string"){r=Un(e);const a=n.componentClass||r;n.name=r;const o=De.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;s=new o(this.player_||this,n)}else s=e;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(i,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),r=r||s.name&&Un(s.name()),r&&(this.childNameIndex_[r]=s,this.childNameIndex_[Df(r)]=s),typeof s.el=="function"&&s.el()){let a=null;this.children_[i+1]&&(this.children_[i+1].el_?a=this.children_[i+1].el_:eh(this.children_[i+1])&&(a=this.children_[i+1])),this.contentEl().insertBefore(s.el(),a)}return s}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let n=!1;for(let s=this.children_.length-1;s>=0;s--)if(this.children_[s]===e){n=!0,this.children_.splice(s,1);break}if(!n)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Un(e.name())]=null,this.childNameIndex_[Df(e.name())]=null;const i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const n=this.options_,i=a=>{const o=a.name;let l=a.opts;if(n[o]!==void 0&&(l=n[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let s;const r=De.getComponent("Tech");Array.isArray(e)?s=e:s=Object.keys(e),s.concat(Object.keys(this.options_).filter(function(a){return!s.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=De.getComponent(a.opts.componentClass||Un(a.name));return o&&!r.isTech(o)}).forEach(i)}}buildCSSClass(){return""}ready(e,n=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}n?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)}$(e,n){return dl(e,n||this.contentEl())}$$(e,n){return XV(e,n||this.contentEl())}hasClass(e){return Pf(this.el_,e)}addClass(...e){fu(this.el_,...e)}removeClass(...e){Xy(this.el_,...e)}toggleClass(e,n){HV(this.el_,e,n)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return qV(this.el_,e)}setAttribute(e,n){Rd(this.el_,e,n)}removeAttribute(e){Qy(this.el_,e)}width(e,n){return this.dimension("width",e,n)}height(e,n){return this.dimension("height",e,n)}dimensions(e,n){this.width(e,!0),this.height(n)}dimension(e,n,i){if(n!==void 0){(n===null||n!==n)&&(n=0),(""+n).indexOf("%")!==-1||(""+n).indexOf("px")!==-1?this.el_.style[e]=n:n==="auto"?this.el_.style[e]="":this.el_.style[e]=n+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;const s=this.el_.style[e],r=s.indexOf("px");return parseInt(r!==-1?s.slice(0,r):this.el_["offset"+Un(e)],10)}currentDimension(e){let n=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(n=Od(this.el_,e),n=parseFloat(n),n===0||isNaN(n)){const i=`offset${Un(e)}`;n=this.el_[i]}return n}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},i={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:n,center:i}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,n=null;const i=10,s=200;let r;this.on("touchstart",function(o){o.touches.length===1&&(n={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=te.performance.now(),r=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)r=!1;else if(n){const l=o.touches[0].pageX-n.pageX,u=o.touches[0].pageY-n.pageY;Math.sqrt(l*l+u*u)>i&&(r=!1)}});const a=function(){r=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){n=null,r===!0&&te.performance.now()-e<s&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=dn(this.player(),this.player().reportUserActivity);let n;this.on("touchstart",function(){e(),this.clearInterval(n),n=this.setInterval(e,250)});const i=function(s){e(),this.clearInterval(n)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,n){var i;return e=dn(this,e),this.clearTimersOnDispose_(),i=te.setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()},n),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),te.clearTimeout(e)),e}setInterval(e,n){e=dn(this,e),this.clearTimersOnDispose_();const i=te.setInterval(e,n);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),te.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var n;return e=dn(this,e),n=te.requestAnimationFrame(()=>{this.rafIds_.has(n)&&this.rafIds_.delete(n),e()}),this.rafIds_.add(n),n}requestNamedAnimationFrame(e,n){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),n=dn(this,n);const i=this.requestAnimationFrame(()=>{n(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),te.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,n])=>{this[e].forEach((i,s)=>this[n](s))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function n(r){const a=te.getComputedStyle(r,null),o=a.getPropertyValue("visibility");return a.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function i(r){return!(!n(r.parentElement)||!n(r)||r.style.opacity==="0"||te.getComputedStyle(r).height==="0px"||te.getComputedStyle(r).width==="0px")}function s(r){if(r.offsetWidth+r.offsetHeight+r.getBoundingClientRect().height+r.getBoundingClientRect().width===0)return!1;const a={x:r.getBoundingClientRect().left+r.offsetWidth/2,y:r.getBoundingClientRect().top+r.offsetHeight/2};if(a.x<0||a.x>(qe.documentElement.clientWidth||te.innerWidth)||a.y<0||a.y>(qe.documentElement.clientHeight||te.innerHeight))return!1;let o=qe.elementFromPoint(a.x,a.y);for(;o;){if(o===r)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(s(e)&&i(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,n){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const i=De.getComponent("Tech"),s=i&&i.isTech(n),r=De===n||De.prototype.isPrototypeOf(n.prototype);if(s||!r){let o;throw s?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=Un(e),De.components_||(De.components_={});const a=De.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0){for(let u=0;u<l.length;u++)if(o[l[u]]!==null)throw new Error("Can not register Player component after player has been created.")}}return De.components_[e]=n,De.components_[Df(e)]=n,n}static getComponent(e){if(!(!e||!De.components_))return De.components_[e]}}De.registerComponent("Component",De);function dne(t,e,n){if(typeof e!="number"||e<0||e>n)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${n}).`)}function Ok(t,e,n,i){return dne(t,i,n.length-1),n[i][e]}function eb(t){let e;return t===void 0||t.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:Ok.bind(null,"start",0,t),end:Ok.bind(null,"end",1,t)},te.Symbol&&te.Symbol.iterator&&(e[te.Symbol.iterator]=()=>(t||[]).values()),e}function xr(t,e){return Array.isArray(t)?eb(t):t===void 0||e===void 0?eb():eb([[t,e]])}const o4=function(t,e){t=t<0?0:t;let n=Math.floor(t%60),i=Math.floor(t/60%60),s=Math.floor(t/3600);const r=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(s=i=n="-"),s=s>0||a>0?s+":":"",i=((s||r>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,s+i+n};let oC=o4;function l4(t){oC=t}function u4(){oC=o4}function Pu(t,e=t){return oC(t,e)}var hne=Object.freeze({__proto__:null,createTimeRanges:xr,createTimeRange:xr,setFormatTime:l4,resetFormatTime:u4,formatTime:Pu});function c4(t,e){let n=0,i,s;if(!e)return 0;(!t||!t.length)&&(t=xr(0,0));for(let r=0;r<t.length;r++)i=t.start(r),s=t.end(r),s>e&&(s=e),n+=s-i;return n/e}function Mn(t){if(t instanceof Mn)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:va(t)&&(typeof t.code=="number"&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=Mn.defaultMessages[this.code]||"")}Mn.prototype.code=0;Mn.prototype.message="";Mn.prototype.status=null;Mn.prototype.metadata=null;Mn.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Mn.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};Mn.MEDIA_ERR_CUSTOM=0;Mn.prototype.MEDIA_ERR_CUSTOM=0;Mn.MEDIA_ERR_ABORTED=1;Mn.prototype.MEDIA_ERR_ABORTED=1;Mn.MEDIA_ERR_NETWORK=2;Mn.prototype.MEDIA_ERR_NETWORK=2;Mn.MEDIA_ERR_DECODE=3;Mn.prototype.MEDIA_ERR_DECODE=3;Mn.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Mn.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Mn.MEDIA_ERR_ENCRYPTED=5;Mn.prototype.MEDIA_ERR_ENCRYPTED=5;function Rf(t){return t!=null&&typeof t.then=="function"}function ia(t){Rf(t)&&t.then(null,e=>{})}const eS=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((n,i,s)=>(t[i]&&(n[i]=t[i]),n),{cues:t.cues&&Array.prototype.map.call(t.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})},fne=function(t){const e=t.$$("track"),n=Array.prototype.map.call(e,s=>s.track);return Array.prototype.map.call(e,function(s){const r=eS(s.track);return s.src&&(r.src=s.src),r}).concat(Array.prototype.filter.call(t.textTracks(),function(s){return n.indexOf(s)===-1}).map(eS))},mne=function(t,e){return t.forEach(function(n){const i=e.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(s=>i.addCue(s))}),e.textTracks()};var Nk={textTracksToJson:fne,jsonToTextTracks:mne,trackToJson_:eS};const tb="vjs-modal-dialog";class nh extends De{constructor(e,n){super(e,n),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=ft("div",{className:`${tb}-content`},{role:"document"}),this.descEl_=ft("p",{className:`${tb}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Cl(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${tb} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const n=this.closeable_=!!e;let i=this.getChild("closeButton");if(n&&!i){const s=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=s,this.on(i,"close",this.close_)}!n&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const n=this.contentEl(),i=n.parentNode,s=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(n),this.empty(),YV(n,e),this.trigger("modalfill"),s?i.insertBefore(n,s):i.appendChild(n);const r=this.getChild("closeButton");r&&i.appendChild(r.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),Zy(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=qe.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const n=this.focusableEls_(),i=this.el_.querySelector(":focus");let s;for(let r=0;r<n.length;r++)if(i===n[r]){s=r;break}qe.activeElement===this.el_&&(s=0),e.shiftKey&&s===0?(n[n.length-1].focus(),e.preventDefault()):!e.shiftKey&&s===n.length-1&&(n[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,n=>(n instanceof te.HTMLAnchorElement||n instanceof te.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof te.HTMLInputElement||n instanceof te.HTMLSelectElement||n instanceof te.HTMLTextAreaElement||n instanceof te.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof te.HTMLIFrameElement||n instanceof te.HTMLObjectElement||n instanceof te.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable"))}}nh.prototype.options_={pauseOnOpen:!0,temporary:!0};De.registerComponent("ModalDialog",nh);class Nd extends Gs{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let n=0;n<e.length;n++)this.addTrack(e[n])}addTrack(e){const n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.tracks_[n]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Ka(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let n;for(let i=0,s=this.length;i<s;i++)if(this[i]===e){n=this[i],n.off&&n.off(),this.tracks_.splice(i,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})}getTrackById(e){let n=null;for(let i=0,s=this.length;i<s;i++){const r=this[i];if(r.id===e){n=r;break}}return n}}Nd.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in Nd.prototype.allowedEvents_)Nd.prototype["on"+t]=null;const nb=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].enabled=!1)};class pne extends Nd{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].enabled){nb(e,e[n]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&nb(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,nb(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const ib=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].selected=!1)};class gne extends Nd{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].selected){ib(e,e[n]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let n=0;n<this.length;n++)if(this[n].selected)return n;return-1},set(){}})}addTrack(e){e.selected&&ib(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,ib(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class d4 extends Nd{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class vne{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let n=0,i=e.length;n<i;n++)this.addTrackElement_(e[n])}addTrackElement_(e){const n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.trackElements_[n]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let n;for(let i=0,s=this.trackElements_.length;i<s;i++)if(e===this.trackElements_[i].track){n=this.trackElements_[i];break}return n}removeTrackElement_(e){for(let n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n]){this.trackElements_[n].track&&typeof this.trackElements_[n].track.off=="function"&&this.trackElements_[n].track.off(),typeof this.trackElements_[n].off=="function"&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}}}class Dv{constructor(e){Dv.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const n=this.length||0;let i=0;const s=e.length;this.cues_=e,this.length_=e.length;const r=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(n<s)for(i=n;i<s;i++)r.call(this,i)}getCueById(e){let n=null;for(let i=0,s=this.length;i<s;i++){const r=this[i];if(r.id===e){n=r;break}}return n}}const yne={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},_ne={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},bne={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Mk={disabled:"disabled",hidden:"hidden",showing:"showing"};class lC extends Gs{constructor(e={}){super();const n={id:e.id||"vjs_track_"+or(),kind:e.kind||"",language:e.language||""};let i=e.label||"";for(const s in n)Object.defineProperty(this,s,{get(){return n[s]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(s){s!==i&&(i=s,this.trigger("labelchange"))}})}}const uC=function(t){return new URL(t,qe.baseURI)},h4=function(t){return new URL(t,qe.baseURI).href},cC=function(t){if(typeof t=="string"){const n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(n)return n.pop().toLowerCase()}return""},i_=function(t,e=te.location){return uC(t).origin!==e.origin};var Tne=Object.freeze({__proto__:null,parseUrl:uC,getAbsoluteURL:h4,getFileExtension:cC,isCrossOrigin:i_});const Vk=function(t,e){const n=new te.WebVTT.Parser(te,te.vttjs,te.WebVTT.StringDecoder()),i=[];n.oncue=function(s){e.addCue(s)},n.onparsingerror=function(s){i.push(s)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),i.length>0&&(te.console&&te.console.groupCollapsed&&te.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),i.forEach(s=>It.error(s)),te.console&&te.console.groupEnd&&te.console.groupEnd()),n.flush()},Fk=function(t,e){const n={uri:t},i=i_(t);i&&(n.cors=i);const s=e.tech_.crossOrigin()==="use-credentials";s&&(n.withCredentials=s),pV(n,dn(this,function(r,a,o){if(r)return It.error(r,a);e.loaded_=!0,typeof te.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){It.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return Vk(o,e)}):Vk(o,e)}))};class Gm extends lC{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const n=sn(e,{kind:bne[e.kind]||"subtitles",language:e.language||e.srclang||""});let i=Mk[n.mode]||"disabled";const s=n.default;(n.kind==="metadata"||n.kind==="chapters")&&(i="hidden"),super(n),this.tech_=n.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const r=new Dv(this.cues_),a=new Dv(this.activeCues_);let o=!1;this.timeupdateHandler=dn(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return s},set(){}},mode:{get(){return i},set(u){Mk[u]&&i!==u&&(i=u,!this.preload_&&i!=="disabled"&&this.cues.length===0&&Fk(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const u=this.tech_.currentTime(),c=[];for(let d=0,h=this.cues.length;d<h;d++){const f=this.cues[d];f.startTime<=u&&f.endTime>=u&&c.push(f)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let d=0;d<c.length;d++)this.activeCues_.indexOf(c[d])===-1&&(o=!0);return this.activeCues_=c,a.setCues_(this.activeCues_),a},set(){}}}),n.src?(this.src=n.src,this.preload_||(this.loaded_=!0),(this.preload_||n.kind!=="subtitles"&&n.kind!=="captions")&&Fk(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let n=e;if(!("getCueAsHTML"in n)){n=new te.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const s in e)s in n||(n[s]=e[s]);n.id=e.id,n.originalCue_=e}const i=this.tech_.textTracks();for(let s=0;s<i.length;s++)i[s]!==this&&i[s].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)}removeCue(e){let n=this.cues_.length;for(;n--;){const i=this.cues_[n];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}}}Gm.prototype.allowedEvents_={cuechange:"cuechange"};class f4 extends lC{constructor(e={}){const n=sn(e,{kind:_ne[e.kind]||""});super(n);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(s){typeof s!="boolean"||s===i||(i=s,this.trigger("enabledchange"))}}),n.enabled&&(this.enabled=n.enabled),this.loaded_=!0}}class m4 extends lC{constructor(e={}){const n=sn(e,{kind:yne[e.kind]||""});super(n);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(s){typeof s!="boolean"||s===i||(i=s,this.trigger("selectedchange"))}}),n.selected&&(this.selected=n.selected)}}class eo extends Gs{constructor(e={}){super();let n;const i=new Gm(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return n}},track:{get(){return i}}}),n=eo.NONE,i.addEventListener("loadeddata",()=>{n=eo.LOADED,this.trigger({type:"load",target:this})})}}eo.prototype.allowedEvents_={load:"load"};eo.NONE=0;eo.LOADING=1;eo.LOADED=2;eo.ERROR=3;const rr={audio:{ListClass:pne,TrackClass:f4,capitalName:"Audio"},video:{ListClass:gne,TrackClass:m4,capitalName:"Video"},text:{ListClass:d4,TrackClass:Gm,capitalName:"Text"}};Object.keys(rr).forEach(function(t){rr[t].getterName=`${t}Tracks`,rr[t].privateName=`${t}Tracks_`});const Md={remoteText:{ListClass:d4,TrackClass:Gm,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:vne,TrackClass:eo,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},us=Object.assign({},rr,Md);Md.names=Object.keys(Md);rr.names=Object.keys(rr);us.names=[].concat(Md.names).concat(rr.names);function Sne(t,e,n,i,s={}){const r=t.textTracks();s.kind=e,n&&(s.label=n),i&&(s.language=i),s.tech=t;const a=new us.text.TrackClass(s);return r.addTrack(a),a}class Ct extends De{constructor(e={},n=function(){}){e.reportTouchActivity=!1,super(null,e,n),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),us.names.forEach(i=>{const s=us[i];e&&e[s.getterName]&&(this[s.privateName]=e[s.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{e[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new us.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(dn(this,function(){const n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,n===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return xr(0,0)}bufferedPercent(){return c4(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(rr.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(n=>{const i=this[`${n}Tracks`]()||[];let s=i.length;for(;s--;){const r=i[s];n==="text"&&this.removeRemoteTextTrack(r),i.removeTrack(r)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let n=e.length;for(;n--;){const i=e[n];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Mn(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?xr(0,0):xr()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){rr.names.forEach(e=>{const n=rr[e],i=()=>{this.trigger(`${e}trackchange`)},s=this[n.getterName]();s.addEventListener("removetrack",i),s.addEventListener("addtrack",i),this.on("dispose",()=>{s.removeEventListener("removetrack",i),s.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!te.WebVTT)if(qe.body.contains(this.el())){if(!this.options_["vtt.js"]&&Dd(ok)&&Object.keys(ok).length>0){this.trigger("vttjsloaded");return}const e=qe.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),te.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),n=this.remoteTextTracks(),i=o=>e.addTrack(o.track),s=o=>e.removeTrack(o.track);n.on("addtrack",i),n.on("removetrack",s),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),a=()=>{r();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",r),l.mode==="showing"&&l.addEventListener("cuechange",r)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){n.off("addtrack",i),n.off("removetrack",s),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",r)})}addTextTrack(e,n,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return Sne(this,e,n,i)}createRemoteTextTrack(e){const n=sn(e,{tech:this});return new Md.remoteTextEl.TrackClass(n)}addRemoteTextTrack(e={},n){const i=this.createRemoteTextTrack(e);return typeof n!="boolean"&&(n=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),n===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(e){const n=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const n=or();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",()=>{this.queuedHanders_.has(n)&&(this.queuedHanders_.delete(n),e())})):this.requestNamedAnimationFrame(n,e),n}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,n){return Ct.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Ct||e instanceof Ct||e===Ct}static registerTech(e,n){if(Ct.techs_||(Ct.techs_={}),!Ct.isTech(n))throw new Error(`Tech ${e} must be a Tech`);if(!Ct.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Ct.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Un(e),Ct.techs_[e]=n,Ct.techs_[Df(e)]=n,e!=="Tech"&&Ct.defaultTechOrder_.push(e),n}static getTech(e){if(e){if(Ct.techs_&&Ct.techs_[e])return Ct.techs_[e];if(e=Un(e),te&&te.videojs&&te.videojs[e])return It.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),te.videojs[e]}}}us.names.forEach(function(t){const e=us[t];Ct.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Ct.prototype.featuresVolumeControl=!0;Ct.prototype.featuresMuteControl=!0;Ct.prototype.featuresFullscreenResize=!1;Ct.prototype.featuresPlaybackRate=!1;Ct.prototype.featuresProgressEvents=!1;Ct.prototype.featuresSourceset=!1;Ct.prototype.featuresTimeupdateEvents=!1;Ct.prototype.featuresNativeTextTracks=!1;Ct.prototype.featuresVideoFrameCallback=!1;Ct.withSourceHandlers=function(t){t.registerSourceHandler=function(n,i){let s=t.sourceHandlers;s||(s=t.sourceHandlers=[]),i===void 0&&(i=s.length),s.splice(i,0,n)},t.canPlayType=function(n){const i=t.sourceHandlers||[];let s;for(let r=0;r<i.length;r++)if(s=i[r].canPlayType(n),s)return s;return""},t.selectSourceHandler=function(n,i){const s=t.sourceHandlers||[];let r;for(let a=0;a<s.length;a++)if(r=s[a].canHandleSource(n,i),r)return s[a];return null},t.canPlaySource=function(n,i){const s=t.selectSourceHandler(n,i);return s?s.canHandleSource(n,i):""},["seekable","seeking","duration"].forEach(function(n){const i=this[n];typeof i=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(n){let i=t.selectSourceHandler(n,this.options_);i||(t.nativeSourceHandler?i=t.nativeSourceHandler:It.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==t.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=i.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};De.registerComponent("Tech",Ct);Ct.registerTech("Tech",Ct);Ct.defaultTechOrder_=[];const mu={},Rv={},Lv={};function Ene(t,e){mu[t]=mu[t]||[],mu[t].push(e)}function Cne(t,e,n){t.setTimeout(()=>Ql(e,mu[e.type],n,t),1)}function wne(t,e){t.forEach(n=>n.setTech&&n.setTech(e))}function xne(t,e,n){return t.reduceRight(dC(n),e[n]())}function Ine(t,e,n,i){return e[n](t.reduce(dC(n),i))}function Bk(t,e,n,i=null){const s="call"+Un(n),r=t.reduce(dC(s),i),a=r===Lv,o=a?null:e[n](r);return Pne(t,n,o,a),o}const Ane={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},kne={setCurrentTime:1,setMuted:1,setVolume:1},Uk={play:1,pause:1};function dC(t){return(e,n)=>e===Lv?Lv:n[t]?n[t](e):e}function Pne(t,e,n,i){for(let s=t.length-1;s>=0;s--){const r=t[s];r[e]&&r[e](i,n)}}function Dne(t){Rv.hasOwnProperty(t.id())&&delete Rv[t.id()]}function Rne(t,e){const n=Rv[t.id()];let i=null;if(n==null)return i=e(t),Rv[t.id()]=[[e,i]],i;for(let s=0;s<n.length;s++){const[r,a]=n[s];r===e&&(i=a)}return i===null&&(i=e(t),n.push([e,i])),i}function Ql(t={},e=[],n,i,s=[],r=!1){const[a,...o]=e;if(typeof a=="string")Ql(t,mu[a],n,i,s,r);else if(a){const l=Rne(i,a);if(!l.setSource)return s.push(l),Ql(t,o,n,i,s,r);l.setSource(Object.assign({},t),function(u,c){if(u)return Ql(t,o,n,i,s,r);s.push(l),Ql(c,t.type===c.type?o:mu[c.type],n,i,s,r)})}else o.length?Ql(t,o,n,i,s,r):r?n(t,s):Ql(t,mu["*"],n,i,s,!0)}const Lne={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Ov=function(t=""){const e=cC(t);return Lne[e.toLowerCase()]||""},One=(t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const n=t.cache_.sources.filter(s=>s.src===e);if(n.length)return n[0].type;const i=t.$$("source");for(let s=0;s<i.length;s++){const r=i[s];if(r.type&&r.src&&r.src===e)return r.type}return Ov(e)},p4=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(n){n=p4(n),Array.isArray(n)?e=e.concat(n):va(n)&&e.push(n)}),t=e}else typeof t=="string"&&t.trim()?t=[$k({src:t})]:va(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[$k(t)]:t=[];return t};function $k(t){if(!t.type){const e=Ov(t.src);e&&(t.type=e)}return t}var Nne=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const Hk=Iv?10009:Av?461:8,Cc={codes:{play:415,pause:19,ff:417,rw:412,back:Hk},names:{415:"play",19:"pause",417:"ff",412:"rw",[Hk]:"back"},isEventKey(t,e){return e=e.toLowerCase(),!!(this.names[t.keyCode]&&this.names[t.keyCode]===e)},getEventName(t){if(this.names[t.keyCode])return this.names[t.keyCode];if(this.codes[t.code]){const e=this.codes[t.code];return this.names[e]}return null}},jk=5;class Mne extends Gs{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const n=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(n.key)){if(this.isPaused_)return;n.preventDefault();const i=n.key.substring(5).toLowerCase();this.move(i)}else if(Cc.isEventKey(n,"play")||Cc.isEventKey(n,"pause")||Cc.isEventKey(n,"ff")||Cc.isEventKey(n,"rw")){n.preventDefault();const i=Cc.getEventName(n);this.performMediaAction_(i)}else Cc.isEventKey(n,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(n.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+jk);break;case"rw":this.userSeek_(this.player_.currentTime()-jk);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const n=e.relatedTarget;let i=null;const s=this.getCurrentComponent(e.target);n&&(i=!!n.closest(".video-js"),n.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!i||!n)&&(s&&s.name()==="CloseButton"?this.refocusComponent():(this.pause(),s&&s.el()&&(this.lastFocusedComponent_=s)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,n=[];function i(s){for(const r of s)r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&n.push(r),r.hasOwnProperty("children_")&&r.children_.length>0&&i(r.children_)}return e.children_.forEach(s=>{if(s.hasOwnProperty("el_"))if(s.getIsFocusable&&s.getIsAvailableToBeFocused&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())){n.push(s);return}else s.hasOwnProperty("children_")&&s.children_.length>0?i(s.children_):s.hasOwnProperty("items")&&s.items.length>0?i(s.items):this.findSuitableDOMChild(s)&&n.push(s);if(s.name_==="ErrorDisplay"&&s.opened_){const r=s.el_.querySelector(".vjs-errors-ok-button-container");r&&r.querySelectorAll("button").forEach((o,l)=>{n.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{const u=o.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},d={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:d}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=n,this.focusableComponents}findSuitableDOMChild(e){function n(i){if(e.getIsFocusable(i)&&e.getIsAvailableToBeFocused(i))return i;for(let s=0;s<i.children.length;s++){const r=i.children[s],a=n(r);if(a)return a}return null}return e.el()?n(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const n=e||document.activeElement;if(this.focusableComponents.length){for(const i of this.focusableComponents)if(i.el()===n)return i}}add(e){const n=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&n.push(e),this.focusableComponents=n,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let n=0;n<this.focusableComponents.length;n++)if(this.focusableComponents[n].name()===e.name()){this.focusableComponents.splice(n,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const n=this.getCurrentComponent();if(!n)return;const i=n.getPositions(),s=this.focusableComponents.filter(a=>a!==n&&this.isInDirection_(i.boundingClientRect,a.getPositions().boundingClientRect,e)),r=this.findBestCandidate_(i.center,s,e);r?this.focus(r):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:n})}findBestCandidate_(e,n,i){let s=1/0,r=null;for(const a of n){const o=a.getPositions().center,l=this.calculateDistance_(e,o,i);l<s&&(s=l,r=a)}return r}isInDirection_(e,n,i){switch(i){case"right":return n.left>=e.right;case"left":return n.right<=e.left;case"down":return n.top>=e.bottom;case"up":return n.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,n,i){const s=Math.abs(e.x-n.x),r=Math.abs(e.y-n.y);let a;switch(i){case"right":case"left":a=s+r*100;break;case"up":a=r*2+s*.5;break;case"down":a=r*5+s;break;default:a=s+r}return a}searchForTrackSelect_(){const e=this;for(const n of e.updateFocusableComponents())if(n.constructor.name==="TextTrackSelect"){e.focus(n);break}}}class Vne extends De{constructor(e,n,i){const s=sn({createEl:!1},n);if(super(e,s,i),!n.playerOptions.sources||n.playerOptions.sources.length===0)for(let r=0,a=n.playerOptions.techOrder;r<a.length;r++){const o=Un(a[r]);let l=Ct.getTech(o);if(o||(l=De.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(n.playerOptions.sources)}}De.registerComponent("MediaLoader",Vne);class s_ extends De{constructor(e,n){super(e,n),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(e="div",n={},i={}){n=Object.assign({className:this.buildCSSClass(),tabIndex:0},n),e==="button"&&It.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=n.tabIndex;const s=ft(e,n,i);return this.player_.options_.experimentalSvgIcons||s.appendChild(ft("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=ft("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,n=this.el()){if(e===void 0)return this.controlText_||"Need Text";const i=this.localize(e);this.controlText_=e,Cl(this.controlTextEl_,i),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}De.registerComponent("ClickableComponent",s_);class tS extends s_{constructor(e,n){super(e,n),this.update(),this.update_=i=>this.update(i),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return ft("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const n=this.player().poster();this.setSrc(n),n?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(ft("picture",{className:"vjs-poster",tabIndex:-1},{},ft("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?ia(this.player_.play()):this.player_.pause())}}tS.prototype.crossorigin=tS.prototype.crossOrigin;De.registerComponent("PosterImage",tS);const nr="#222",qk="#ccc",Fne={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function sb(t,e){let n;if(t.length===4)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)n=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function Gr(t,e,n){try{t.style[e]=n}catch{return}}function zk(t){return t?`${t}px`:""}class Bne extends De{constructor(e,n,i){super(e,n,i);const s=a=>this.updateDisplay(a),r=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",s),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(dn(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",r),e.on("playerresize",r);const a=te.screen.orientation||te,o=te.screen.orientation?"change":"orientationchange";a.addEventListener(o,r),e.on("dispose",()=>a.removeEventListener(o,r));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},n=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage;let s,r,a;for(let o=0;o<n.length;o++){const l=n[o];i&&i.enabled&&i.language&&i.language===l.language&&l.kind in e?l.kind===i.kind?a=l:a||(a=l):i&&!i.enabled?(a=null,s=null,r=null):l.default&&(l.kind==="descriptions"&&!s?s=l:l.kind in e&&!r&&(r=l))}a?a.mode="showing":r?r.mode="showing":s&&(s.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof te.WebVTT=="function"&&te.WebVTT.processCues(te,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let i=null,s=null,r=e.length;for(;r--;){const a=e[r];a.mode==="showing"&&(a.kind==="descriptions"?i=a:s=a)}if(s?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i)),!te.CSS.supports("inset","10px")){const a=this.el_,o=a.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;a.style="",Gr(a,"position","relative"),Gr(a,"height",u-l+"px"),Gr(a,"top","unset"),kv?Gr(a,"bottom",u+"px"):Gr(a,"bottom","0px"),o.length>0&&o.forEach(c=>{if(c.style.inset){const d=c.style.inset.split(" ");d.length===3&&Object.assign(c.style,{top:d[0],right:d[1],bottom:d[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!te.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),n=this.player_.currentHeight(),i=e/n,s=this.player_.videoWidth()/this.player_.videoHeight();let r=0,a=0;Math.abs(i-s)>.1&&(i>s?r=Math.round((e-n*s)/2):a=Math.round((n-e/s)/2)),Gr(this.el_,"insetInline",zk(r)),Gr(this.el_,"insetBlock",zk(a))}updateDisplayState(e){const n=this.player_.textTrackSettings.getValues(),i=e.activeCues;let s=i.length;for(;s--;){const r=i[s];if(!r)continue;const a=r.displayState;if(n.color&&(a.firstChild.style.color=n.color),n.textOpacity&&Gr(a.firstChild,"color",sb(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(a.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&Gr(a.firstChild,"backgroundColor",sb(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?Gr(a,"backgroundColor",sb(n.windowColor,n.windowOpacity)):a.style.backgroundColor=n.windowColor),n.edgeStyle&&(n.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${nr}, 2px 2px 4px ${nr}, 2px 2px 5px ${nr}`:n.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${nr}, 2px 2px ${nr}, 3px 3px ${nr}`:n.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${qk}, 0 1px ${qk}, -1px -1px ${nr}, 0 -1px ${nr}`:n.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${nr}, 0 0 4px ${nr}, 0 0 4px ${nr}, 0 0 4px ${nr}`)),n.fontPercent&&n.fontPercent!==1){const o=te.parseFloat(a.style.fontSize);a.style.fontSize=o*n.fontPercent+"px",a.style.height="auto",a.style.top="auto"}n.fontFamily&&n.fontFamily!=="default"&&(n.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Fne[n.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof te.WebVTT!="function"||e.every(i=>!i.activeCues))return;const n=[];for(let i=0;i<e.length;++i){const s=e[i];for(let r=0;r<s.activeCues.length;++r)n.push(s.activeCues[r])}te.WebVTT.processCues(te,n,this.el_);for(let i=0;i<e.length;++i){const s=e[i];for(let r=0;r<s.activeCues.length;++r){const a=s.activeCues[r].displayState;fu(a,"vjs-text-track-cue","vjs-text-track-cue-"+(s.language?s.language:i)),s.language&&Rd(a,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}}De.registerComponent("TextTrackDisplay",Bne);class Une extends De{createEl(){const e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),i=ft("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),s=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return s.appendChild(i),s}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}De.registerComponent("LoadingSpinner",Une);class Ji extends s_{createEl(e,n={},i={}){e="button",n=Object.assign({className:this.buildCSSClass()},n),i=Object.assign({type:"button"},i);const s=ft(e,n,i);return this.player_.options_.experimentalSvgIcons||s.appendChild(ft("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}addChild(e,n={}){const i=this.constructor.name;return It.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),De.prototype.addChild.call(this,e,n)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}De.registerComponent("Button",Ji);class g4 extends Ji{constructor(e,n){super(e,n),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const n=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){ia(n),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const i=this.player_.getChild("controlBar"),s=i&&i.getChild("playToggle");if(!s){this.player_.tech(!0).focus();return}const r=()=>s.focus();Rf(n)?n.then(r,()=>{}):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}g4.prototype.controlText_="Play Video";De.registerComponent("BigPlayButton",g4);class $ne extends Ji{constructor(e,n){super(e,n),this.setIcon("cancel"),this.controlText(n&&n.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}De.registerComponent("CloseButton",$ne);class v4 extends Ji{constructor(e,n={}){super(e,n),n.replay=n.replay===void 0||n.replay,this.setIcon("play"),this.on(e,"play",i=>this.handlePlay(i)),this.on(e,"pause",i=>this.handlePause(i)),n.replay&&this.on(e,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?ia(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",n=>this.handleSeeked(n))}}v4.prototype.controlText_="Play";De.registerComponent("PlayToggle",v4);class ih extends De{constructor(e,n){super(e,n),this.on(e,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),n=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),i=ft("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return n.appendChild(i),this.contentEl_=ft("span",{className:`${e}-display`},{role:"presentation"}),n.appendChild(this.contentEl_),n}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Pu(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let n=this.textNode_;n&&this.contentEl_.firstChild!==n&&(n=null,It.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=qe.createTextNode(this.formattedTime_),this.textNode_&&(n?this.contentEl_.replaceChild(this.textNode_,n):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}ih.prototype.labelText_="Time";ih.prototype.controlText_="Time";De.registerComponent("TimeDisplay",ih);class hC extends ih{buildCSSClass(){return"vjs-current-time"}updateContent(e){let n;this.player_.ended()?n=this.player_.duration():n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)}}hC.prototype.labelText_="Current Time";hC.prototype.controlText_="Current Time";De.registerComponent("CurrentTimeDisplay",hC);class fC extends ih{constructor(e,n){super(e,n);const i=s=>this.updateContent(s);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){const n=this.player_.duration();this.updateTextNode_(n)}}fC.prototype.labelText_="Duration";fC.prototype.controlText_="Duration";De.registerComponent("DurationDisplay",fC);class Hne extends De{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return n.appendChild(i),e.appendChild(n),e}}De.registerComponent("TimeDivider",Hne);class mC extends ih{constructor(e,n){super(e,n),this.on(e,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(ft("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let n;this.player_.ended()?n=0:this.player_.remainingTimeDisplay?n=this.player_.remainingTimeDisplay():n=this.player_.remainingTime(),this.updateTextNode_(n)}}mC.prototype.labelText_="Remaining Time";mC.prototype.controlText_="Remaining Time";De.registerComponent("RemainingTimeDisplay",mC);class jne extends De{constructor(e,n){super(e,n),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=ft("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(ft("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(qe.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}De.registerComponent("LiveDisplay",jne);class y4 extends Ji{constructor(e,n){super(e,n),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=ft("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}y4.prototype.controlText_="Seek to live, currently playing live";De.registerComponent("SeekToLive",y4);function Km(t,e,n){return t=Number(t),Math.min(n,Math.max(e,isNaN(t)?e:t))}var qne=Object.freeze({__proto__:null,clamp:Km});class pC extends De{constructor(e,n){super(e,n),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,n={},i={}){return n.className=n.className+" vjs-slider",n=Object.assign({tabIndex:0},n),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,n,i)}handleMouseDown(e){const n=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!ya&&e.preventDefault(),zV(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const n=this.bar.el_.ownerDocument;WV(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const n=this.vertical()?"height":"width";this.bar.el().style[n]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(Km(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const n=Jy(this.el_,e);return this.vertical()?n.y:n.x}handleKeyDown(e){const n=this.options_.playerOptions.spatialNavigation,i=n&&n.enabled,s=n&&n.horizontalSeek;i?s&&e.key==="ArrowLeft"||!s&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):s&&e.key==="ArrowRight"||!s&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}De.registerComponent("Slider",pC);const rb=(t,e)=>Km(t/e*100,0,100).toFixed(2)+"%";class zne extends De{constructor(e,n){super(e,n),this.partEls_=[],this.on(e,"progress",i=>this.update(i))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),n=ft("span",{className:"vjs-control-text"}),i=ft("span",{textContent:this.localize("Loaded")}),s=qe.createTextNode(": ");return this.percentageEl_=ft("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(i),n.appendChild(s),n.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const n=this.player_.liveTracker,i=this.player_.buffered(),s=n&&n.isLive()?n.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),a=this.partEls_,o=rb(r,s);this.percent_!==o&&(this.el_.style.width=o,Cl(this.percentageEl_,o),this.percent_=o);for(let l=0;l<i.length;l++){const u=i.start(l),c=i.end(l);let d=a[l];d||(d=this.el_.appendChild(ft()),a[l]=d),!(d.dataset.start===u&&d.dataset.end===c)&&(d.dataset.start=u,d.dataset.end=c,d.style.left=rb(u,r),d.style.width=rb(c-u,r))}for(let l=a.length;l>i.length;l--)this.el_.removeChild(a[l-1]);a.length=i.length})}}De.registerComponent("LoadProgressBar",zne);class Wne extends De{constructor(e,n){super(e,n),this.update=_a(dn(this,this.update),lr)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,n,i){const s=cm(this.el_),r=Ld(this.player_.el()),a=e.width*n;if(!r||!s)return;let o=e.left-r.left+a,l=e.width-a+(r.right-e.right);l||(l=e.width-a,o=a);let u=s.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>s.width&&(u=s.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(i)}write(e){Cl(this.el_,e)}updateTime(e,n,i,s){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let r;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-n*o;r=(l<1?"":"-")+Pu(l,o)}else r=Pu(i,a);this.update(e,n,r),s&&s()})}}De.registerComponent("TimeTooltip",Wne);class gC extends De{constructor(e,n){super(e,n),this.setIcon("circle"),this.update=_a(dn(this,this.update),lr)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,n){const i=this.getChild("timeTooltip");if(!i)return;const s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,n,s)}}gC.prototype.options_={children:[]};!Xi&&!Nr&&gC.prototype.options_.children.push("timeTooltip");De.registerComponent("PlayProgressBar",gC);class _4 extends De{constructor(e,n){super(e,n),this.update=_a(dn(this,this.update),lr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n){const i=n*this.player_.duration();this.getChild("timeTooltip").updateTime(e,n,i,()=>{this.el_.style.left=`${e.width*n}px`})}}_4.prototype.options_={children:["timeTooltip"]};De.registerComponent("MouseTimeDisplay",_4);class r_ extends pC{constructor(e,n){n=sn(r_.prototype.options_,n),n.children=[...n.children];const i=e.options_.disableSeekWhileScrubbingOnMobile&&(Xi||Nr);(!Xi&&!Nr||i)&&n.children.splice(1,0,"mouseTimeDisplay"),super(e,n),this.shouldDisableSeekWhileScrubbingOnMobile_=i,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=dn(this,this.update),this.update=_a(this.update_,lr),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in qe&&"visibilityState"in qe&&this.on(qe,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){qe.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,lr))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(qe.visibilityState==="hidden")return;const n=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),s=this.player_.liveTracker;let r=this.player_.duration();s&&s.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==n&&(this.el_.setAttribute("aria-valuenow",(n*100).toFixed(2)),this.percent_=n),(this.currentTime_!==i||this.duration_!==r)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Pu(i,r),Pu(r,r)],"{1} of {2}")),this.currentTime_=i,this.duration_=r),this.bar&&this.bar.update(Ld(this.el()),this.getProgress())}),n}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){if(this.pendingSeekTime_)return this.pendingSeekTime_/this.player_.duration();const e=this.getCurrentTime_();let n;const i=this.player_.liveTracker;return i&&i.isLive()?(n=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(n=1)):n=e/this.player_.duration(),n}handleMouseDown(e){dm(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbingOnMobile_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,n=!1){if(!dm(e)||isNaN(this.player_.duration()))return;!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let i;const s=this.calculateDistance(e),r=this.player_.liveTracker;if(!r||!r.isLive())i=s*this.player_.duration(),i===this.player_.duration()&&(i=i-.1);else{if(s>=.99){r.seekToLiveEdge();return}const a=r.seekableStart(),o=r.liveCurrentTime();if(i=a+s*r.liveWindow(),i>=o&&(i=o),i<=a&&(i=a+.1),i===1/0)return}this.shouldDisableSeekWhileScrubbingOnMobile_?this.pendingSeekTime_=i:this.userSeek_(i),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime_&&(this.userSeek_(this.pendingSeekTime_),this.pendingSeekTime_=null),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?ia(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const n=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const i=parseInt(e.key,10)*.1;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in qe&&"visibilityState"in qe&&this.off(qe,"visibilitychange",this.toggleVisibility_),super.dispose()}}r_.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};De.registerComponent("SeekBar",r_);class b4 extends De{constructor(e,n){super(e,n),this.handleMouseMove=_a(dn(this,this.handleMouseMove),lr),this.throttledHandleMouseSeek=_a(dn(this,this.handleMouseSeek),lr),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const n=this.getChild("seekBar");if(!n)return;const i=n.getChild("playProgressBar"),s=n.getChild("mouseTimeDisplay");if(!i&&!s)return;const r=n.el(),a=cm(r);let o=Jy(r,e).x;o=Km(o,0,1),s&&s.update(a,o),i&&i.update(a,n.getProgress())}handleMouseSeek(e){const n=this.getChild("seekBar");n&&n.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&ia(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const n=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}b4.prototype.options_={children:["seekBar"]};De.registerComponent("ProgressControl",b4);class T4 extends Ji{constructor(e,n){super(e,n),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){qe.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in te?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof qe.exitPictureInPicture=="function"&&super.show()}}T4.prototype.controlText_="Picture-in-Picture";De.registerComponent("PictureInPictureToggle",T4);class S4 extends Ji{constructor(e,n){super(e,n),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",i=>this.handleFullscreenChange(i)),qe[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}S4.prototype.controlText_="Fullscreen";De.registerComponent("FullscreenToggle",S4);const Gne=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class Kne extends De{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}De.registerComponent("VolumeLevel",Kne);class Yne extends De{constructor(e,n){super(e,n),this.update=_a(dn(this,this.update),lr)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,n,i,s){if(!i){const r=Ld(this.el_),a=Ld(this.player_.el()),o=e.width*n;if(!a||!r)return;const l=e.left-a.left+o,u=e.width-o+(a.right-e.right);let c=r.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>r.width&&(c=r.width),this.el_.style.right=`-${c}px`}this.write(`${s}%`)}write(e){Cl(this.el_,e)}updateVolume(e,n,i,s,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,n,i,s.toFixed(0)),r&&r()})}}De.registerComponent("VolumeLevelTooltip",Yne);class E4 extends De{constructor(e,n){super(e,n),this.update=_a(dn(this,this.update),lr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n,i){const s=100*n;this.getChild("volumeLevelTooltip").updateVolume(e,n,i,s,()=>{i?this.el_.style.bottom=`${e.height*n}px`:this.el_.style.left=`${e.width*n}px`})}}E4.prototype.options_={children:["volumeLevelTooltip"]};De.registerComponent("MouseVolumeLevelDisplay",E4);class a_ extends pC{constructor(e,n){super(e,n),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(e,"volumechange",i=>this.updateARIAAttributes(i)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){dm(e)&&super.handleMouseDown(e)}handleMouseMove(e){const n=this.getChild("mouseVolumeLevelDisplay");if(n){const i=this.el(),s=Ld(i),r=this.vertical();let a=Jy(i,e);a=r?a.y:a.x,a=Km(a,0,1),n.update(s,a,r)}dm(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}a_.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Xi&&!Nr&&a_.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");a_.prototype.playerEvent="volumechange";De.registerComponent("VolumeBar",a_);class C4 extends De{constructor(e,n={}){n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||Dd(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),super(e,n),Gne(this,e),this.throttledHandleMouseMove=_a(dn(this,this.handleMouseMove),lr),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}C4.prototype.options_={children:["volumeBar"]};De.registerComponent("VolumeControl",C4);const Xne=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class w4 extends Ji{constructor(e,n){super(e,n),Xne(this,e),this.on(e,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.volume(),i=this.player_.lastVolume_();if(n===0){const s=i<.1?.1:i;this.player_.volume(s),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let n=3;this.setIcon("volume-high"),Xi&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),n=0):e<.33?(this.setIcon("volume-low"),n=1):e<.67&&(this.setIcon("volume-medium"),n=2),Xy(this.el_,[0,1,2,3].reduce((i,s)=>i+`${s?" ":""}vjs-vol-${s}`,"")),fu(this.el_,`vjs-vol-${n}`)}updateControlText_(){const n=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)}}w4.prototype.controlText_="Mute";De.registerComponent("MuteToggle",w4);class x4 extends De{constructor(e,n={}){typeof n.inline<"u"?n.inline=n.inline:n.inline=!0,(typeof n.volumeControl>"u"||Dd(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),super(e,n),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(e,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Ws(qe,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Qi(qe,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}x4.prototype.options_={children:["muteToggle","volumeControl"]};De.registerComponent("VolumePanel",x4);class I4 extends Ji{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const n=this.player_.currentTime(),i=this.player_.liveTracker,s=i&&i.isLive()?i.seekableEnd():this.player_.duration();let r;n+this.skipTime<=s?r=n+this.skipTime:r=s,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}I4.prototype.controlText_="Skip Forward";De.registerComponent("SkipForward",I4);class A4 extends Ji{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.currentTime(),i=this.player_.liveTracker,s=i&&i.isLive()&&i.seekableStart();let r;s&&n-this.skipTime<=s?r=s:n>=this.skipTime?r=n-this.skipTime:r=0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}A4.prototype.controlText_="Skip Backward";De.registerComponent("SkipBackward",A4);class k4 extends De{constructor(e,n){super(e,n),n&&(this.menuButton_=n.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(e){e instanceof De&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof De&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const n=this.addChild(e);n&&this.addEventListenerForItem(n)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=ft(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const n=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),Ws(n,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),n}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const n=e.relatedTarget||qe.activeElement;if(!this.children().some(i=>i.el()===n)){const i=this.menuButton_;i&&i.buttonPressed_&&n!==i.el().firstChild&&i.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const n=this.children();if(!Array.isArray(n))return;const i=n.filter(s=>s.el()===e.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const n=this.children().slice();n.length&&n[0].hasClass("vjs-menu-title")&&n.shift(),n.length>0&&(e<0?e=0:e>=n.length&&(e=n.length-1),this.focusedChild_=e,n[e].el_.focus())}}De.registerComponent("Menu",k4);class vC extends De{constructor(e,n={}){super(e,n),this.menuButton_=new Ji(e,n),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=Ji.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const s=r=>this.handleClick(r);this.handleMenuKeyUp_=r=>this.handleMenuKeyUp(r),this.on(this.menuButton_,"tap",s),this.on(this.menuButton_,"click",s),this.on(this.menuButton_,"keydown",r=>this.handleKeyDown(r)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Ws(qe,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",r=>this.handleMouseLeave(r)),this.on("keydown",r=>this.handleSubmenuKeyDown(r))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new k4(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const n=ft("li",{className:"vjs-menu-title",textContent:Un(this.options_.title),tabIndex:-1}),i=new De(this.player_,{el:n});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const n=Ji.prototype.buildCSSClass();return`vjs-menu-button ${e} ${n} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,n=this.menuButton_.el()){return this.menuButton_.controlText(e,n)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Qi(qe,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Xi&&UV())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}De.registerComponent("MenuButton",vC);class yC extends vC{constructor(e,n){const i=n.tracks;if(super(e,n),this.items.length<=1&&this.hide(),!i)return;const s=dn(this,this.update);i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),i.addEventListener("labelchange",s),this.player_.on("ready",s),this.player_.on("dispose",function(){i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s),i.removeEventListener("labelchange",s)})}}De.registerComponent("TrackButton",yC);class Ym extends s_{constructor(e,n){super(e,n),this.selectable=n.selectable,this.isSelected_=n.selected||!1,this.multiSelectable=n.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,n,i){this.nonIconControl=!0;const s=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},n),i),r=ft("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?s.appendChild(r):s.replaceChild(r,s.querySelector(".vjs-icon-placeholder")),s}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}De.registerComponent("MenuItem",Ym);class Xm extends Ym{constructor(e,n){const i=n.track,s=e.textTracks();n.label=i.label||i.language||"Unknown",n.selected=i.mode==="showing",super(e,n),this.track=i,this.kinds=(n.kinds||[n.kind||this.track.kind]).filter(Boolean);const r=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],r),s.addEventListener("change",r),s.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],r),s.removeEventListener("change",r),s.removeEventListener("selectedlanguagechange",a)}),s.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof te.Event!="object")try{o=new te.Event("change")}catch{}o||(o=qe.createEvent("Event"),o.initEvent("change",!0,!0)),s.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const n=this.track,i=this.player_.textTracks();if(super.handleClick(e),!!i)for(let s=0;s<i.length;s++){const r=i[s];this.kinds.indexOf(r.kind)!==-1&&(r===n?r.mode!=="showing"&&(r.mode="showing"):r.mode!=="disabled"&&(r.mode="disabled"))}}handleTracksChange(e){const n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}De.registerComponent("TextTrackMenuItem",Xm);class P4 extends Xm{constructor(e,n){n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,super(e,n)}handleTracksChange(e){const n=this.player().textTracks();let i=!0;for(let s=0,r=n.length;s<r;s++){const a=n[s];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){const n=this.player().textTracks();let i=!0;for(let s=0,r=n.length;s<r;s++){const a=n[s];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}De.registerComponent("OffTextTrackMenuItem",P4);class sh extends yC{constructor(e,n={}){n.tracks=e.textTracks(),super(e,n)}createItems(e=[],n=Xm){let i;this.label_&&(i=`${this.label_} off`),e.push(new P4(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const s=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<s.length;r++){const a=s[r];if(this.kinds_.indexOf(a.kind)>-1){const o=new n(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}}De.registerComponent("TextTrackButton",sh);class D4 extends Ym{constructor(e,n){const i=n.track,s=n.cue,r=e.currentTime();n.selectable=!0,n.multiSelectable=!1,n.label=s.text,n.selected=s.startTime<=r&&r<s.endTime,super(e,n),this.track=i,this.cue=s}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}De.registerComponent("ChaptersTrackMenuItem",D4);class _C extends sh{constructor(e,n,i){super(e,n,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(s=>{s.selected(this.track_.activeCues[0]===s.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),super.update()):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Un(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const n=this.track_.cues;if(!n)return e;for(let i=0,s=n.length;i<s;i++){const r=n[i],a=new D4(this.player_,{track:this.track_,cue:r});e.push(a)}return e}}_C.prototype.kind_="chapters";_C.prototype.controlText_="Chapters";De.registerComponent("ChaptersButton",_C);class bC extends sh{constructor(e,n,i){super(e,n,i),this.setIcon("audio-description");const s=e.textTracks(),r=dn(this,this.handleTracksChange);s.addEventListener("change",r),this.on("dispose",function(){s.removeEventListener("change",r)})}handleTracksChange(e){const n=this.player().textTracks();let i=!1;for(let s=0,r=n.length;s<r;s++){const a=n[s];if(a.kind!==this.kind_&&a.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}bC.prototype.kind_="descriptions";bC.prototype.controlText_="Descriptions";De.registerComponent("DescriptionsButton",bC);class TC extends sh{constructor(e,n,i){super(e,n,i),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}TC.prototype.kind_="subtitles";TC.prototype.controlText_="Subtitles";De.registerComponent("SubtitlesButton",TC);class SC extends Xm{constructor(e,n){n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",super(e,n),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+n.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}De.registerComponent("CaptionSettingsMenuItem",SC);class EC extends sh{constructor(e,n,i){super(e,n,i),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new SC(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}EC.prototype.kind_="captions";EC.prototype.controlText_="Captions";De.registerComponent("CaptionsButton",EC);class R4 extends Xm{createEl(e,n,i){const s=super.createEl(e,n,i),r=s.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",s):r.appendChild(ft("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(ft("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),s}}De.registerComponent("SubsCapsMenuItem",R4);class CC extends sh{constructor(e,n={}){super(e,n),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Un(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new SC(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,R4),e}}CC.prototype.kinds_=["captions","subtitles"];CC.prototype.controlText_="Subtitles";De.registerComponent("SubsCapsButton",CC);class L4 extends Ym{constructor(e,n){const i=n.track,s=e.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled,super(e,n),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const r=(...a)=>{this.handleTracksChange.apply(this,a)};s.addEventListener("change",r),this.on("dispose",()=>{s.removeEventListener("change",r)})}createEl(e,n,i){const s=super.createEl(e,n,i),r=s.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(ft("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(ft("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),s}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const n=this.player_.audioTracks();for(let i=0;i<n.length;i++){const s=n[i];s!==this.track&&(s.enabled=s===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}De.registerComponent("AudioTrackMenuItem",L4);class O4 extends yC{constructor(e,n={}){n.tracks=e.audioTracks(),super(e,n),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const n=this.player_.audioTracks();for(let i=0;i<n.length;i++){const s=n[i];e.push(new L4(this.player_,{track:s,selectable:!0,multiSelectable:!1}))}return e}}O4.prototype.controlText_="Audio Track";De.registerComponent("AudioTrackButton",O4);class wC extends Ym{constructor(e,n){const i=n.rate,s=parseFloat(i,10);n.label=i,n.selected=s===e.playbackRate(),n.selectable=!0,n.multiSelectable=!1,super(e,n),this.label=i,this.rate=s,this.on(e,"ratechange",r=>this.update(r))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}wC.prototype.contentElType="button";De.registerComponent("PlaybackRateMenuItem",wC);class N4 extends vC{constructor(e,n){super(e,n),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",i=>this.updateVisibility(i)),this.on(e,"ratechange",i=>this.updateLabel(i)),this.on(e,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=ft("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),n=[];for(let i=e.length-1;i>=0;i--)n.push(new wC(this.player(),{rate:e[i]+"x"}));return n}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}N4.prototype.controlText_="Playback Rate";De.registerComponent("PlaybackRateMenuButton",N4);class M4 extends De{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",n={},i={}){return n.className||(n.className=this.buildCSSClass()),super.createEl(e,n,i)}}De.registerComponent("Spacer",M4);class Qne extends M4{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}De.registerComponent("CustomControlSpacer",Qne);class V4 extends De{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}V4.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};De.registerComponent("ControlBar",V4);class F4 extends nh{constructor(e,n){super(e,n),this.on(e,"error",i=>{this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}F4.prototype.options_=Object.assign({},nh.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});De.registerComponent("ErrorDisplay",F4);class B4 extends De{constructor(e,n={}){super(e,n),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),ft("select",{id:this.options_.id},{},this.options_.SelectOptions.map(n=>{const i=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${or()}`)+"-"+n[1].replace(/\W+/g,""),s=ft("option",{id:i,value:this.localize(n[0]),textContent:this.localize(n[1])});return s.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${i}`),s}))}}De.registerComponent("TextTrackSelect",B4);class pu extends De{constructor(e,n={}){super(e,n);const i=ft("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(i);const s=this.options_.selects;for(const r of s){const a=this.options_.selectConfigs[r],o=a.className,l=a.id.replace("%s",this.options_.id_);let u=null;const c=`vjs_select_${or()}`;if(this.options_.type==="colors"){u=ft("span",{className:o});const h=ft("label",{id:l,className:"vjs-label",textContent:this.localize(a.label)});h.setAttribute("for",c),u.appendChild(h)}const d=new B4(e,{SelectOptions:a.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(d),this.options_.type==="colors"&&(u.appendChild(d.el()),this.el().appendChild(u))}}createEl(){return ft("fieldset",{className:this.options_.className})}}De.registerComponent("TextTrackFieldset",pu);class U4 extends De{constructor(e,n={}){super(e,n);const i=this.options_.textTrackComponentid,s=new pu(e,{id_:i,legendId:`captions-text-legend-${i}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const r=new pu(e,{id_:i,legendId:`captions-background-${i}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const a=new pu(e,{id_:i,legendId:`captions-window-${i}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return ft("div",{className:"vjs-track-settings-colors"})}}De.registerComponent("TextTrackSettingsColors",U4);class $4 extends De{constructor(e,n={}){super(e,n);const i=this.options_.textTrackComponentid,s=new pu(e,{id_:i,legendId:`captions-font-size-${i}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const r=new pu(e,{id_:i,legendId:`captions-edge-style-${i}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const a=new pu(e,{id_:i,legendId:`captions-font-family-${i}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return ft("div",{className:"vjs-track-settings-font"})}}De.registerComponent("TextTrackSettingsFont",$4);class H4 extends De{constructor(e,n={}){super(e,n);const i=this.localize("restore all settings to the default values"),s=new Ji(e,{controlText:i,className:"vjs-default-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Reset"),this.addChild(s);const r=new Ji(e,{controlText:i,className:"vjs-done-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=this.localize("Done"),this.addChild(r)}createEl(){return ft("div",{className:"vjs-track-settings-controls"})}}De.registerComponent("TrackSettingsControls",H4);const ab="vjs-text-track-settings",Wk=["#000","Black"],Gk=["#00F","Blue"],Kk=["#0FF","Cyan"],Yk=["#0F0","Green"],Xk=["#F0F","Magenta"],Qk=["#F00","Red"],Jk=["#FFF","White"],Zk=["#FF0","Yellow"],ob=["1","Opaque"],lb=["0.5","Semi-Transparent"],eP=["0","Transparent"],Bo={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Wk,Jk,Qk,Yk,Gk,Zk,Xk,Kk],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[ob,lb,eP],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Jk,Wk,Qk,Yk,Gk,Zk,Xk,Kk],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>t==="1.00"?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[ob,lb],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[eP,lb,ob],className:"vjs-window-opacity vjs-opacity"}};Bo.windowColor.options=Bo.backgroundColor.options;function j4(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function Jne(t,e){const n=t.options[t.options.selectedIndex].value;return j4(n,e)}function Zne(t,e,n){if(e){for(let i=0;i<t.options.length;i++)if(j4(t.options[i].value,n)===e){t.selectedIndex=i;break}}}class eie extends nh{constructor(e,n){n.temporary=!1,super(e,n),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=ft("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),n.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const n=new U4(e,{textTrackComponentid:this.id_,selectConfigs:Bo,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(n);const i=new $4(e,{textTrackComponentid:this.id_,selectConfigs:Bo,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(i);const s=new H4(e);this.addChild(s)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),Zc(Bo,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return LV(Bo,(e,n,i)=>{const s=Jne(this.$(n.selector),n.parser);return s!==void 0&&(e[i]=s),e},{})}setValues(e){Zc(Bo,(n,i)=>{Zne(this.$(n.selector),e[i],n.parser)})}setDefaults(){Zc(Bo,e=>{const n=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=n})}restoreSettings(){let e;try{e=JSON.parse(te.localStorage.getItem(ab))}catch(n){It.warn(n)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?te.localStorage.setItem(ab,JSON.stringify(e)):te.localStorage.removeItem(ab)}catch(n){It.warn(n)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}De.registerComponent("TextTrackSettings",eie);class tie extends De{constructor(e,n){let i=n.ResizeObserver||te.ResizeObserver;n.ResizeObserver===null&&(i=!1);const s=sn({createEl:!i,reportTouchActivity:!1},n);super(e,s),this.ResizeObserver=n.ResizeObserver||te.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=n4(()=>{this.resizeHandler()},100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const r=this.debouncedHandler_;let a=this.unloadListener_=function(){Qi(this,"resize",r),Qi(this,"unload",a),a=null};Ws(this.el_.contentWindow,"unload",a),Ws(this.el_.contentWindow,"resize",r)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}De.registerComponent("ResizeManager",tie);const nie={trackingThreshold:20,liveTolerance:15};class iie extends De{constructor(e,n){const i=sn(nie,n,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=s=>this.handlePlay(s),this.handleFirstTimeupdate_=s=>this.handleFirstTimeupdate(s),this.handleSeeked_=s=>this.handleSeeked(s),this.seekToLiveEdge_=s=>this.seekToLiveEdge(s),this.reset_(),this.on(this.player_,"durationchange",s=>this.handleDurationchange(s)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const n=Number(te.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+i;const s=this.liveCurrentTime(),r=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(s-r)>this.options_.liveTolerance;(!this.timeupdateSeen_||s===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,lr),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),n=[];let i=e?e.length:0;for(;i--;)n.push(e.end(i));return n.length?n.sort()[n.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),n=[];let i=e?e.length:0;for(;i--;)n.push(e.start(i));return n.length?n.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}De.registerComponent("LiveTracker",iie);class sie extends De{constructor(e,n){super(e,n),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:ft("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${or()}`}),description:ft("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${or()}`})},ft("div",{className:"vjs-title-bar"},{},OV(this.els))}updateDom_(){const e=this.player_.tech_,n=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(s=>{const r=this.state[s],a=this.els[s],o=i[s];Zy(a),r&&Cl(a,r),n&&(n.removeAttribute(o),r&&n.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,n=e&&e.el_;n&&(n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}De.registerComponent("TitleBar",sie);const rie={initialDisplay:4e3,position:[],takeFocus:!1};class aie extends Ji{constructor(e,n){n=sn(rie,n),super(e,n),this.controlText(n.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],i=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=ft("button",{},{type:"button",class:this.buildCSSClass()},ft("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}De.registerComponent("TransientButton",aie);const nS=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const n=t.$$("source"),i=[];let s="";if(!n.length)return!1;for(let r=0;r<n.length;r++){const a=n[r].src;a&&i.indexOf(a)===-1&&i.push(a)}return i.length?(i.length===1&&(s=i[0]),t.triggerSourceset(s),!0):!1},oie=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=qe.createElement(this.nodeName.toLowerCase());e.innerHTML=t;const n=qe.createDocumentFragment();for(;e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",te.Element.prototype.appendChild.call(this,n),this.innerHTML}}),q4=(t,e)=>{let n={};for(let i=0;i<t.length&&(n=Object.getOwnPropertyDescriptor(t[i],e),!(n&&n.set&&n.get));i++);return n.enumerable=!0,n.configurable=!0,n},lie=t=>q4([t.el(),te.HTMLMediaElement.prototype,te.Element.prototype,oie],"innerHTML"),tP=function(t){const e=t.el();if(e.resetSourceWatch_)return;const n={},i=lie(t),s=r=>(...a)=>{const o=r.apply(e,a);return nS(t),o};["append","appendChild","insertAdjacentHTML"].forEach(r=>{e[r]&&(n[r]=e[r],e[r]=s(n[r]))}),Object.defineProperty(e,"innerHTML",sn(i,{set:s(i.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(n).forEach(r=>{e[r]=n[r]}),Object.defineProperty(e,"innerHTML",i)},t.one("sourceset",e.resetSourceWatch_)},uie=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?h4(te.Element.prototype.getAttribute.call(this,"src")):""},set(t){return te.Element.prototype.setAttribute.call(this,"src",t),t}}),cie=t=>q4([t.el(),te.HTMLMediaElement.prototype,uie],"src"),die=function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const n=cie(t),i=e.setAttribute,s=e.load;Object.defineProperty(e,"src",sn(n,{set:r=>{const a=n.set.call(e,r);return t.triggerSourceset(e.src),a}})),e.setAttribute=(r,a)=>{const o=i.call(e,r,a);return/src/i.test(r)&&t.triggerSourceset(e.src),o},e.load=()=>{const r=s.call(e);return nS(t)||(t.triggerSourceset(""),tP(t)),r},e.currentSrc?t.triggerSourceset(e.currentSrc):nS(t)||tP(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=s,e.setAttribute=i,Object.defineProperty(e,"src",n),e.resetSourceWatch_&&e.resetSourceWatch_()}};class Je extends Ct{constructor(e,n){super(e,n);const i=e.source;let s=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const r=this.el_.childNodes;let a=r.length;const o=[];for(;a--;){const l=r[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!s&&!this.el_.hasAttribute("crossorigin")&&i_(l.src)&&(s=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&s&&It.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(um||Ky)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Je.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){die(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let n;const i=()=>{n=[];for(let r=0;r<e.length;r++){const a=e[r];a.kind==="metadata"&&n.push({track:a,storedMode:a.mode})}};i(),e.addEventListener("change",i),this.on("dispose",()=>e.removeEventListener("change",i));const s=()=>{for(let r=0;r<n.length;r++){const a=n[r];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",s)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",i),e.removeEventListener("change",s),e.addEventListener("change",s)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",s)})}overrideNative_(e,n){if(n!==this[`featuresNative${e}Tracks`])return;const i=e.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(s=>{this.el()[`${i}Tracks`].removeEventListener(s,this[`${i}TracksListeners_`][s])}),this[`featuresNative${e}Tracks`]=!n,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const n=rr[e],i=this.el()[n.getterName],s=this[n.getterName]();if(!this[`featuresNative${n.capitalName}Tracks`]||!i||!i.addEventListener)return;const r={change:o=>{const l={type:"change",target:s,currentTarget:s,srcElement:s};s.trigger(l),e==="text"&&this[Md.remoteText.getterName]().trigger(l)},addtrack(o){s.addTrack(o.track)},removetrack(o){s.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<s.length;l++){let u=!1;for(let c=0;c<i.length;c++)if(i[c]===s[l]){u=!0;break}u||o.push(s[l])}for(;o.length;)s.removeTrack(o.shift())};this[n.getterName+"Listeners_"]=r,Object.keys(r).forEach(o=>{const l=r[o];i.addEventListener(o,l),this.on("dispose",u=>i.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){rr.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),Je.disposeMediaElement(e),e=i}else{e=qe.createElement("video");const i=this.options_.tag&&Fo(this.options_.tag),s=sn({},i);(!um||this.options_.nativeControlsForTouch!==!0)&&delete s.controls,jV(e,Object.assign(s,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Rd(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const n=["loop","muted","playsinline","autoplay"];for(let i=0;i<n.length;i++){const s=n[i],r=this.options_[s];typeof r<"u"&&(r?Rd(e,s,s):Qy(e,s),e[s]=r)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let i=!1;const s=function(){i=!0};this.on("loadstart",s);const r=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",r),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",r),i||this.trigger("loadstart")});return}const n=["loadstart"];n.push("loadedmetadata"),e.readyState>=2&&n.push("loadeddata"),e.readyState>=3&&n.push("canplay"),e.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(i){this.trigger(i)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Yy?this.el_.fastSeek(e):this.el_.currentTime=e}catch(n){It(n,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Nr&&ya&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",()=>{this.off("webkitbeginfullscreen",n),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)ia(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,n){if(!e)return It.error("Invalid source URL."),!1;const i={src:e};n&&(i.type=n);const s=ft("source",{},i);return this.el_.appendChild(s),!0}removeSourceElement(e){if(!e)return It.error("Source URL is required to remove the source element."),!1;const n=this.el_.querySelectorAll("source");for(const i of n)if(i.src===e)return this.el_.removeChild(i),!0;return It.warn(`No matching source element found with src: ${e}`),!1}reset(){Je.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,i):super.addTextTrack(e,n,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const n=qe.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n}addRemoteTextTrack(e,n){const i=super.addRemoteTextTrack(e,n);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const n=this.$$("track");let i=n.length;for(;i--;)(e===n[i]||e===n[i].track)&&this.el().removeChild(n[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),te.performance&&(e.creationTime=te.performance.now()),e}}zy(Je,"TEST_VID",function(){if(!Zd())return;const t=qe.createElement("video"),e=qe.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t});Je.isSupported=function(){try{Je.TEST_VID.volume=.5}catch{return!1}return!!(Je.TEST_VID&&Je.TEST_VID.canPlayType)};Je.canPlayType=function(t){return Je.TEST_VID.canPlayType(t)};Je.canPlaySource=function(t,e){return Je.canPlayType(t.type)};Je.canControlVolume=function(){try{const t=Je.TEST_VID.volume;Je.TEST_VID.volume=t/2+.1;const e=t!==Je.TEST_VID.volume;return e&&Xi?(te.setTimeout(()=>{Je&&Je.prototype&&(Je.prototype.featuresVolumeControl=t!==Je.TEST_VID.volume)}),!1):e}catch{return!1}};Je.canMuteVolume=function(){try{const t=Je.TEST_VID.muted;return Je.TEST_VID.muted=!t,Je.TEST_VID.muted?Rd(Je.TEST_VID,"muted","muted"):Qy(Je.TEST_VID,"muted","muted"),t!==Je.TEST_VID.muted}catch{return!1}};Je.canControlPlaybackRate=function(){if(Nr&&ya&&Wy<58)return!1;try{const t=Je.TEST_VID.playbackRate;return Je.TEST_VID.playbackRate=t/2+.1,t!==Je.TEST_VID.playbackRate}catch{return!1}};Je.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(qe.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(qe.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(qe.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(qe.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};Je.supportsNativeTextTracks=function(){return Yy||Xi&&ya};Je.supportsNativeVideoTracks=function(){return!!(Je.TEST_VID&&Je.TEST_VID.videoTracks)};Je.supportsNativeAudioTracks=function(){return!!(Je.TEST_VID&&Je.TEST_VID.audioTracks)};Je.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){zy(Je.prototype,t,()=>Je[e](),!0)});Je.prototype.featuresVolumeControl=Je.canControlVolume();Je.prototype.movingMediaElementInDOM=!Xi;Je.prototype.featuresFullscreenResize=!0;Je.prototype.featuresProgressEvents=!0;Je.prototype.featuresTimeupdateEvents=!0;Je.prototype.featuresVideoFrameCallback=!!(Je.TEST_VID&&Je.TEST_VID.requestVideoFrameCallback);Je.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};Je.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let n=e.length;for(;n--;)t.removeChild(e[n]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Je.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Je.prototype["set"+Un(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){Je.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){Je.prototype["set"+Un(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){Je.prototype[t]=function(){return this.el_[t]()}});Ct.withSourceHandlers(Je);Je.nativeSourceHandler={};Je.nativeSourceHandler.canPlayType=function(t){try{return Je.TEST_VID.canPlayType(t)}catch{return""}};Je.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Je.nativeSourceHandler.canPlayType(t.type);if(t.src){const n=cC(t.src);return Je.nativeSourceHandler.canPlayType(`video/${n}`)}return""};Je.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)};Je.nativeSourceHandler.dispose=function(){};Je.registerSourceHandler(Je.nativeSourceHandler);Ct.registerTech("Html5",Je);const z4=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],ub={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},iS=["tiny","xsmall","small","medium","large","xlarge","huge"],xg={};iS.forEach(t=>{const e=t.charAt(0)==="x"?`x-${t.substring(1)}`:t;xg[t]=`vjs-layout-${e}`});const hie={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class yn extends De{constructor(e,n,i){if(e.id=e.id||n.id||`vjs_video_${or()}`,n=Object.assign(yn.getTagSettings(e),n),n.initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language){const a=e.closest("[lang]");a&&(n.language=a.getAttribute("lang"))}if(super(null,n,i),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=DV(this.id_),this.fsApi_=Cv,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Fo(e),this.language(this.options_.language),n.languages){const a={};Object.getOwnPropertyNames(n.languages).forEach(function(o){a[o.toLowerCase()]=n.languages[o]}),this.languages_=a}else this.languages_=yn.prototype.options_.languages;this.resetCache_(),this.poster_=n.poster||"",this.controls_=!!n.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),aC(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Ws(qe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const s=sn(this.options_);if(n.plugins&&Object.keys(n.plugins).forEach(a=>{this[a](n.plugins[a])}),n.debug&&this.debug(!0),this.options_.playerOptions=s,this.middleware_=[],this.playbackRates(n.playbackRates),n.experimentalSvgIcons){const o=new te.DOMParser().parseFromString(Nne,"image/svg+xml");if(o.querySelector("parsererror"))It.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),n.spatialNavigation&&n.spatialNavigation.enabled&&(this.spatialNavigation=new Mne(this),this.addClass("vjs-spatial-navigation-enabled")),um&&this.addClass("vjs-touch-enabled"),Xi||this.addClass("vjs-workinghover"),yn.players[this.id_]=this;const r=WT.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Qi(qe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Qi(qe,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),yn.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Dne(this),us.names.forEach(e=>{const n=us[e],i=this[n.getterName]();i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,n,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const s=this.tag.tagName.toLowerCase()==="video-js";i?n=this.el_=e.parentNode:s||(n=this.el_=super.createEl("div"));const r=Fo(e);if(s){for(n=this.el_=e,e=this.tag=qe.createElement("video");n.children.length;)e.appendChild(n.firstChild);Pf(n,"video-js")||fu(n,"video-js"),n.appendChild(e),i=this.playerElIngest_=n,Object.keys(n).forEach(l=>{try{e[l]=n[l]}catch{}})}e.setAttribute("tabindex","-1"),r.tabindex="-1",ya&&Gy&&(e.setAttribute("role","application"),r.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(l){s&&l==="class"||n.setAttribute(l,r[l]),s&&e.setAttribute(l,r[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>BV[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),te.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=e4("vjs-styles-dimensions");const l=dl(".vjs-styles-defaults"),u=dl("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){const u=o.item(l);fu(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(n,e),KT(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){It.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,n){const i=e+"_";if(n===void 0)return this[i]||0;if(n===""||n==="auto"){this[i]=void 0,this.updateStyleEl_();return}const s=parseFloat(n);if(isNaN(s)){It.error(`Improper value "${n}" supplied for for ${e}`);return}this[i]=s,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Ka(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),one(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(te.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,n,i,s;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?i=this.aspectRatio_:this.videoWidth()>0?i=this.videoWidth()+":"+this.videoHeight():i="16:9";const r=i.split(":"),a=r[1]/r[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?n=this.height_:n=e*a,/^[^a-zA-Z]/.test(this.id())?s="dimensions-"+this.id():s=this.id()+"-dimensions",this.addClass(s),t4(this.styleEl_,`
      .${s} {
        width: ${e}px;
        height: ${n}px;
      }

      .${s}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,n){this.tech_&&this.unloadTech_();const i=Un(e),s=e.charAt(0).toLowerCase()+e.slice(1);i!=="Html5"&&this.tag&&(Ct.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let r=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(r=!1);const a={source:n,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${s}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};us.names.forEach(l=>{const u=us[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[s]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=Ct.getTech(e);if(!o)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(dn(this,this.handleTechReady_),!0),Nk.jsonToTextTracks(this.textTracksJson_||[],this.tech_),z4.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${Un(l)}_`](u))}),Object.keys(ub).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${ub[l]}_`].bind(this),event:u});return}this[`handleTech${ub[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)&&KT(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){us.names.forEach(e=>{const n=us[e];this[n.privateName]=this[n.getterName]()}),this.textTracksJson_=Nk.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&It.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":WT}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const n=()=>{const s=this.muted();this.muted(!0);const r=()=>{this.muted(s)};this.playTerminatedQueue_.push(r);const a=this.play();if(Rf(a))return a.catch(o=>{throw r(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let i;if(e==="any"&&!this.muted()?(i=this.play(),Rf(i)&&(i=i.catch(n))):e==="muted"&&!this.muted()?i=n():i=this.play(),!!Rf(i))return i.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let n=e,i="";typeof n!="string"&&(n=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!i&&(i=One(this,n)),this.cache_.source=sn({},e,{src:n,type:i});const s=this.cache_.sources.filter(l=>l.src&&l.src===n),r=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const u=Fo(a[l]);r.push(u),u.src&&u.src===n&&o.push(u.src)}o.length&&!s.length?this.cache_.sources=r:s.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n}handleTechSourceset_(e){if(!this.changingSrc_){let n=r=>this.updateSourceCaches_(r);const i=this.currentSource().src,s=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(s)&&(!this.lastSource_||this.lastSource_.tech!==s&&this.lastSource_.player!==i)&&(n=()=>{}),n(s),e.src||this.tech_.any(["sourceset","loadstart"],r=>{if(r.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),n=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",n))};this.on("timeupdate",n)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?ia(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!qe.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const n=e.target.player;if(n&&n!==this)return;const i=this.el();let s=qe[this.fsApi_.fullscreenElement]===i;!s&&i.matches&&(s=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(s)}handleTechFullscreenChange_(e,n){n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))}handleTechFullscreenError_(e,n){this.trigger("fullscreenerror",n)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,n){this.ready(function(){if(e in kne)return Ine(this.middleware_,this.tech_,e,n);if(e in Uk)return Bk(this.middleware_,this.tech_,e,n);try{this.tech_&&this.tech_[e](n)}catch(i){throw It(i),i}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in Ane)return xne(this.middleware_,this.tech_,e);if(e in Uk)return Bk(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(n){throw this.tech_[e]===void 0?(It(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,n),n):n.name==="TypeError"?(It(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,n),this.tech_.isReady_=!1,n):(It(n),n)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=ia){this.playCallbacks_.push(e);const n=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),i=!!(Yy||Xi);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!n&&i&&this.load();return}const s=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),s===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(s)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(n){n()})}runPlayCallbacks_(e){const n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(i){i(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||xr(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=xr(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=xr(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return c4(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),n=this.duration();let i=e.end(e.length-1);return i>n&&(i=n),i}volume(e){let n;if(e!==void 0){n=Math.max(0,Math.min(1,e)),this.cache_.volume=n,this.techCall_("setVolume",n),n>0&&this.lastVolume_(n);return}return n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const n=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const n=this;return new Promise((i,s)=>{function r(){n.off("fullscreenerror",o),n.off("fullscreenchange",a)}function a(){r(),i()}function o(u,c){r(),s(c)}n.one("fullscreenchange",a),n.one("fullscreenerror",o);const l=n.requestFullscreenHelper_(e);l&&(l.then(r,r),l.then(i,s))})}requestFullscreenHelper_(e){let n;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(n=e)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](n);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((n,i)=>{function s(){e.off("fullscreenerror",a),e.off("fullscreenchange",r)}function r(){s(),n()}function a(l,u){s(),i(u)}e.one("fullscreenchange",r),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(s,s),o.then(n,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=qe[this.fsApi_.exitFullscreen]();return e&&ia(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=qe.documentElement.style.overflow,Ws(qe,"keydown",this.boundFullWindowOnEscKey_),qe.documentElement.style.overflow="hidden",fu(qe.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Qi(qe,"keydown",this.boundFullWindowOnEscKey_),qe.documentElement.style.overflow=this.docOrigOverflow,Xy(qe.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&te.documentPictureInPicture){const e=qe.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(ft("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),te.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(n=>(QV(n),this.el_.parentNode.insertBefore(e,this.el_),n.document.body.appendChild(this.el_),n.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:n}),n.addEventListener("pagehide",i=>{const s=i.target.querySelector(".video-js");e.parentNode.replaceChild(s,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),n))}return"pictureInPictureEnabled"in qe&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(te.documentPictureInPicture&&te.documentPictureInPicture.window)return te.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in qe)return qe.exitPictureInPicture()}handleKeyDown(e){const{userActions:n}=this.options_;!n||!n.hotkeys||(s=>{const r=s.tagName.toLowerCase();if(s.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return r==="input"?a.indexOf(s.type)===-1:["textarea"].indexOf(r)!==-1})(this.el_.ownerDocument.activeElement)||(typeof n.hotkeys=="function"?n.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const n=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=a=>e.key.toLowerCase()==="f",muteKey:s=a=>e.key.toLowerCase()==="m",playPauseKey:r=a=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=n;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const a=De.getComponent("FullscreenToggle");qe[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else s.call(this,e)?(e.preventDefault(),e.stopPropagation(),De.getComponent("MuteToggle").prototype.handleClick.call(this,e)):r.call(this,e)&&(e.preventDefault(),e.stopPropagation(),De.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let n;for(let i=0,s=this.options_.techOrder;i<s.length;i++){const r=s[i];let a=Ct.getTech(r);if(a||(a=De.getComponent(r)),!a){It.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(n=a.canPlayType(e),n))return n}return""}selectSource(e){const n=this.options_.techOrder.map(o=>[o,Ct.getTech(o)]).filter(([o,l])=>l?l.isSupported():(It.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(o,l,u){let c;return o.some(d=>l.some(h=>{if(c=u(d,h),c)return!0})),c};let s;const r=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?s=i(e,n,r(a)):s=i(n,e,a),s||!1}handleSrc_(e,n){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=p4(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,n||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),Cne(this,i[0],(s,r)=>{if(this.middleware_=r,n||(this.cache_.sources=i),this.updateSourceCaches_(s),this.src_(s)){if(i.length>1)return this.handleSrc_(i.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}wne(r,this.tech_)}),i.length>1){const s=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},r=()=>{this.off("error",s)};this.one("error",s),this.one("playing",r),this.resetRetryOnError_=()=>{this.off("error",s),this.off("playing",r)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const n=this.selectSource([e]);return n?a4(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,n){return this.tech_?this.tech_.addSourceElement(e,n):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();ia(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Ka(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:n,progressControl:i,remainingTimeDisplay:s}=this.controlBar||{},{seekBar:r}=i||{};e&&e.updateContent(),n&&n.updateContent(),s&&s.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),n=[];return Object.keys(e).length!==0&&n.push(e),this.cache_.sources||n}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let n;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),n=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(cl("beforeerror").forEach(n=>{const i=n(this,e);if(!(va(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=i}),this.options_.suppressNotSupportedError&&e&&e.code===4){const n=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),this.one("loadstart",function(){this.off(["click","touchstart"],n)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Mn(e),this.addClass("vjs-error"),It.error(`(CODE:${this.error_.code} ${Mn.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),cl("error").forEach(n=>n(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,n,i;const s=dn(this,this.reportUserActivity),r=function(d){(d.screenX!==n||d.screenY!==i)&&(n=d.screenX,i=d.screenY,s())},a=function(){s(),this.clearInterval(e),e=this.setInterval(s,250)},o=function(d){s(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",r),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!Xi&&!Nr&&(l.on("mouseenter",function(d){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(d){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",s),this.on("keyup",s);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const d=this.options_.inactivityTimeout;d<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),n=this.getChild("ControlBar"),i=n&&n.currentHeight();e.forEach(s=>{s!==n&&s.el_&&!s.hasClass("vjs-hidden")&&(s.hide(),this.audioOnlyCache_.hiddenChildren.push(s))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=i,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),Promise.all(n).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,n,i){if(this.tech_)return this.tech_.addTextTrack(e,n,i)}addRemoteTextTrack(e,n){if(this.tech_)return this.tech_.addRemoteTextTrack(e,n)}removeRemoteTextTrack(e={}){let{track:n}=e;if(n||(n=e),this.tech_)return this.tech_.removeRemoteTextTrack(n)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Ka(this)&&this.trigger("languagechange"))}languages(){return sn(yn.prototype.options_.languages,this.languages_)}toJSON(){const e=sn(this.options_),n=e.tracks;e.tracks=[];for(let i=0;i<n.length;i++){let s=n[i];s=sn(s),s.player=void 0,e.tracks[i]=s}return e}createModal(e,n){n=n||{},n.content=e||"";const i=new nh(this,n);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),n=this.currentWidth();for(let i=0;i<iS.length;i++){const s=iS[i],r=this.breakpoints_[s];if(n<=r){if(e===s)return;e&&this.removeClass(xg[e]),this.addClass(xg[s]),this.breakpoint_=s;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},hie,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const n=this.responsive_;if(e!==n)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return xg[this.breakpoint_]||""}loadMedia(e,n){if(!e||typeof e!="object")return;const i=this.crossOrigin();this.reset(),this.cache_.media=sn(e);const{artist:s,artwork:r,description:a,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!r&&o&&(this.cache_.media.artwork=[{src:o,type:Ov(o)}]),i&&this.crossOrigin(i),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(d=>this.addRemoteTextTrack(d,!1)),this.titleBar&&this.titleBar.update({title:c,description:a||s||""}),this.ready(n)}getMedia(){if(!this.cache_.media){const e=this.poster(),n=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),r=>({kind:r.kind,label:r.label,language:r.language,src:r.src})),s={src:n,textTracks:i};return e&&(s.poster=e,s.artwork=[{src:s.poster,type:Ov(s.poster)}]),s}return sn(this.cache_.media)}static getTagSettings(e){const n={sources:[],tracks:[]},i=Fo(e),s=i["data-setup"];if(Pf(e,"vjs-fill")&&(i.fill=!0),Pf(e,"vjs-fluid")&&(i.fluid=!0),s!==null)try{Object.assign(i,JSON.parse(s||"{}"))}catch(r){It.error("data-setup",r)}if(Object.assign(n,i),e.hasChildNodes()){const r=e.childNodes;for(let a=0,o=r.length;a<o;a++){const l=r[a],u=l.nodeName.toLowerCase();u==="source"?n.sources.push(Fo(l)):u==="track"&&n.tracks.push(Fo(l))}}return n}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(n=>typeof n=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}us.names.forEach(function(t){const e=us[t];yn.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});yn.prototype.crossorigin=yn.prototype.crossOrigin;yn.players={};const Gh=te.navigator;yn.prototype.options_={techOrder:Ct.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Gh&&(Gh.languages&&Gh.languages[0]||Gh.userLanguage||Gh.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1};z4.forEach(function(t){yn.prototype[`handleTech${Un(t)}_`]=function(){return this.trigger(t)}});De.registerComponent("Player",yn);const Nv="plugin",nd="activePlugins_",Bc={},Mv=t=>Bc.hasOwnProperty(t),Ig=t=>Mv(t)?Bc[t]:void 0,W4=(t,e)=>{t[nd]=t[nd]||{},t[nd][e]=!0},Vv=(t,e,n)=>{const i=(n?"before":"")+"pluginsetup";t.trigger(i,e),t.trigger(i+":"+e.name,e)},fie=function(t,e){const n=function(){Vv(this,{name:t,plugin:e,instance:null},!0);const i=e.apply(this,arguments);return W4(this,t),Vv(this,{name:t,plugin:e,instance:i}),i};return Object.keys(e).forEach(function(i){n[i]=e[i]}),n},nP=(t,e)=>(e.prototype.name=t,function(...n){Vv(this,{name:t,plugin:e,instance:null},!0);const i=new e(this,...n);return this[t]=()=>i,Vv(this,i.getEventHash()),i});class xs{constructor(e){if(this.constructor===xs)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),aC(this),delete this.trigger,r4(this,this.constructor.defaultState),W4(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,n={}){return th(this.eventBusEl_,e,this.getEventHash(n))}handleStateChanged(e){}dispose(){const{name:e,player:n}=this;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n[nd][e]=!1,this.player=this.state=null,n[e]=nP(e,Bc[e])}static isBasic(e){const n=typeof e=="string"?Ig(e):e;return typeof n=="function"&&!xs.prototype.isPrototypeOf(n.prototype)}static registerPlugin(e,n){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Mv(e))It.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(yn.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof n!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof n}.`);return Bc[e]=n,e!==Nv&&(xs.isBasic(n)?yn.prototype[e]=fie(e,n):yn.prototype[e]=nP(e,n)),n}static deregisterPlugin(e){if(e===Nv)throw new Error("Cannot de-register base plugin.");Mv(e)&&(delete Bc[e],delete yn.prototype[e])}static getPlugins(e=Object.keys(Bc)){let n;return e.forEach(i=>{const s=Ig(i);s&&(n=n||{},n[i]=s)}),n}static getPluginVersion(e){const n=Ig(e);return n&&n.VERSION||""}}xs.getPlugin=Ig;xs.BASE_PLUGIN_NAME=Nv;xs.registerPlugin(Nv,xs);yn.prototype.usingPlugin=function(t){return!!this[nd]&&this[nd][t]===!0};yn.prototype.hasPlugin=function(t){return!!Mv(t)};function mie(t,e){let n=!1;return function(...i){return n||It.warn(t),n=!0,e.apply(this,i)}}function Fr(t,e,n,i){return mie(`${e} is deprecated and will be removed in ${t}.0; please use ${n} instead.`,i)}var pie={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const G4=t=>t.indexOf("#")===0?t.slice(1):t;function ve(t,e,n){let i=ve.getPlayer(t);if(i)return e&&It.warn(`Player "${t}" is already initialised. Options will not be applied.`),n&&i.ready(n),i;const s=typeof t=="string"?dl("#"+G4(t)):t;if(!eh(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in s?s.getRootNode()instanceof te.ShadowRoot:!1)?s.getRootNode():s.ownerDocument.body;(!s.ownerDocument.defaultView||!a.contains(s))&&It.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(s.parentNode&&s.parentNode.hasAttribute&&s.parentNode.hasAttribute("data-vjs-player")?s.parentNode:s).cloneNode(!0)),cl("beforesetup").forEach(l=>{const u=l(s,sn(e));if(!va(u)||Array.isArray(u)){It.error("please return an object in beforesetup hooks");return}e=sn(e,u)});const o=De.getComponent("Player");return i=new o(s,e,n),cl("setup").forEach(l=>l(i)),i}ve.hooks_=Ua;ve.hooks=cl;ve.hook=Gte;ve.hookOnce=Kte;ve.removeHook=PV;if(te.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Zd()){let t=dl(".vjs-styles-defaults");if(!t){t=e4("vjs-styles-defaults");const e=dl("head");e&&e.insertBefore(t,e.firstChild),t4(t,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}QT(1,ve);ve.VERSION=WT;ve.options=yn.prototype.options_;ve.getPlayers=()=>yn.players;ve.getPlayer=t=>{const e=yn.players;let n;if(typeof t=="string"){const i=G4(t),s=e[i];if(s)return s;n=dl("#"+i)}else n=t;if(eh(n)){const{player:i,playerId:s}=n;if(i||e[s])return i||e[s]}};ve.getAllPlayers=()=>Object.keys(yn.players).map(t=>yn.players[t]).filter(Boolean);ve.players=yn.players;ve.getComponent=De.getComponent;ve.registerComponent=(t,e)=>(Ct.isTech(e)&&It.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),De.registerComponent.call(De,t,e));ve.getTech=Ct.getTech;ve.registerTech=Ct.registerTech;ve.use=Ene;Object.defineProperty(ve,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(ve.middleware,"TERMINATOR",{value:Lv,writeable:!1,enumerable:!0});ve.browser=BV;ve.obj=Qte;ve.mergeOptions=Fr(9,"videojs.mergeOptions","videojs.obj.merge",sn);ve.defineLazyProperty=Fr(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",zy);ve.bind=Fr(9,"videojs.bind","native Function.prototype.bind",dn);ve.registerPlugin=xs.registerPlugin;ve.deregisterPlugin=xs.deregisterPlugin;ve.plugin=(t,e)=>(It.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),xs.registerPlugin(t,e));ve.getPlugins=xs.getPlugins;ve.getPlugin=xs.getPlugin;ve.getPluginVersion=xs.getPluginVersion;ve.addLanguage=function(t,e){return t=(""+t).toLowerCase(),ve.options.languages=sn(ve.options.languages,{[t]:e}),ve.options.languages[t]};ve.log=It;ve.createLogger=DV;ve.time=hne;ve.createTimeRange=Fr(9,"videojs.createTimeRange","videojs.time.createTimeRanges",xr);ve.createTimeRanges=Fr(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",xr);ve.formatTime=Fr(9,"videojs.formatTime","videojs.time.formatTime",Pu);ve.setFormatTime=Fr(9,"videojs.setFormatTime","videojs.time.setFormatTime",l4);ve.resetFormatTime=Fr(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",u4);ve.parseUrl=Fr(9,"videojs.parseUrl","videojs.url.parseUrl",uC);ve.isCrossOrigin=Fr(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",i_);ve.EventTarget=Gs;ve.any=rC;ve.on=Ws;ve.one=t_;ve.off=Qi;ve.trigger=th;ve.xhr=pV;ve.TextTrack=Gm;ve.AudioTrack=f4;ve.VideoTrack=m4;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{ve[t]=function(){return It.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),JV[t].apply(null,arguments)}});ve.computedStyle=Fr(9,"videojs.computedStyle","videojs.dom.computedStyle",Od);ve.dom=JV;ve.fn=ane;ve.num=qne;ve.str=cne;ve.url=Tne;ve.Error=pie;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class gie{constructor(e){let n=this;return n.id=e.id,n.label=n.id,n.width=e.width,n.height=e.height,n.bitrate=e.bandwidth,n.frameRate=e.frameRate,n.enabled_=e.enabled,Object.defineProperty(n,"enabled",{get(){return n.enabled_()},set(i){n.enabled_(i)}}),n}}class Fv extends ve.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let n=this.getQualityLevelById(e.id);if(n)return n;const i=this.levels_.length;return n=new gie(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(n),this.trigger({qualityLevel:n,type:"addqualitylevel"}),n}removeQualityLevel(e){let n=null;for(let i=0,s=this.length;i<s;i++)if(this[i]===e){n=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return n&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),n}getQualityLevelById(e){for(let n=0,i=this.length;n<i;n++){const s=this[n];if(s.id===e)return s}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Fv.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in Fv.prototype.allowedEvents_)Fv.prototype["on"+t]=null;var K4="4.1.0";const vie=function(t,e){const n=t.qualityLevels,i=new Fv,s=function(){i.dispose(),t.qualityLevels=n,t.off("dispose",s)};return t.on("dispose",s),t.qualityLevels=()=>i,t.qualityLevels.VERSION=K4,i},Y4=function(t){return vie(this,ve.obj.merge({},t))};ve.registerPlugin("qualityLevels",Y4);Y4.VERSION=K4;/*! @name @videojs/http-streaming @version 3.17.0 @license Apache-2.0 */const bs=$y,Bv=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,dr=t=>ve.log.debug?ve.log.debug.bind(ve,"VHS:",`${t} >`):function(){};function Qt(...t){const e=ve.obj||ve;return(e.merge||e.mergeOptions).apply(e,t)}function Ci(...t){const e=ve.time||ve;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}function yie(t){if(t.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let n=0;n<t.length;n++){const i=t.start(n),s=t.end(n);e+=`${i} --> ${s}. Duration (${s-i})
`}return e}const sa=1/30,ra=sa*3,X4=function(t,e){const n=[];let i;if(t&&t.length)for(i=0;i<t.length;i++)e(t.start(i),t.end(i))&&n.push([t.start(i),t.end(i)]);return Ci(n)},Uc=function(t,e){return X4(t,function(n,i){return n-ra<=e&&i+ra>=e})},sg=function(t,e){return X4(t,function(n){return n-sa>=e})},_ie=function(t){if(t.length<2)return Ci();const e=[];for(let n=1;n<t.length;n++){const i=t.end(n-1),s=t.start(n);e.push([i,s])}return Ci(e)},bie=function(t,e){let n=null,i=null,s=0;const r=[],a=[];if(!t||!t.length||!e||!e.length)return Ci();let o=t.length;for(;o--;)r.push({time:t.start(o),type:"start"}),r.push({time:t.end(o),type:"end"});for(o=e.length;o--;)r.push({time:e.start(o),type:"start"}),r.push({time:e.end(o),type:"end"});for(r.sort(function(l,u){return l.time-u.time}),o=0;o<r.length;o++)r[o].type==="start"?(s++,s===2&&(n=r[o].time)):r[o].type==="end"&&(s--,s===1&&(i=r[o].time)),n!==null&&i!==null&&(a.push([n,i]),n=null,i=null);return Ci(a)},Q4=t=>{const e=[];if(!t||!t.length)return"";for(let n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")},Tie=function(t,e,n=1){return((t.length?t.end(t.length-1):0)-e)/n},ru=t=>{const e=[];for(let n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e},Sie=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let n=0;n<t.length;n++)if(t.start(n)!==e.start(n)||t.end(n)!==e.end(n))return!0;return!1},cb=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},xC=function(t,e){let n=0;if(!t||!t.length)return n;for(let i=0;i<t.length;i++){const s=t.start(i),r=t.end(i);if(!(e>r)){if(e>s&&e<=r){n+=r-e;continue}n+=r-s}}return n},IC=(t,e)=>{if(!e.preload)return e.duration;let n=0;return(e.parts||[]).forEach(function(i){n+=i.duration}),(e.preloadHints||[]).forEach(function(i){i.type==="PART"&&(n+=t.partTargetDuration)}),n},sS=t=>(t.segments||[]).reduce((e,n,i)=>(n.parts?n.parts.forEach(function(s,r){e.push({duration:s.duration,segmentIndex:i,partIndex:r,part:s,segment:n})}):e.push({duration:n.duration,segmentIndex:i,partIndex:null,segment:n,part:null}),e),[]),J4=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},Z4=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:n}=t;let i=(n||[]).reduce((s,r)=>s+(r.type==="PART"?1:0),0);return i+=e&&e.length?e.length:0,i},e3=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const n=J4(e).length>0;return n&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:n&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},Eie=function(t,e){let n=0,i=e-t.mediaSequence,s=t.segments[i];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;i--;){if(s=t.segments[i],typeof s.end<"u")return{result:n+s.end,precise:!0};if(n+=IC(t,s),typeof s.start<"u")return{result:n+s.start,precise:!0}}return{result:n,precise:!1}},Cie=function(t,e){let n=0,i,s=e-t.mediaSequence;for(;s<t.segments.length;s++){if(i=t.segments[s],typeof i.start<"u")return{result:i.start-n,precise:!0};if(n+=IC(t,i),typeof i.end<"u")return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},t3=function(t,e,n){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const i=Eie(t,e);if(i.precise)return i.result;const s=Cie(t,e);return s.precise?s.result:i.result+n},n3=function(t,e,n){if(!t)return 0;if(typeof n!="number"&&(n=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return te.Infinity}return t3(t,e,n)},Lf=function({defaultDuration:t,durationList:e,startIndex:n,endIndex:i}){let s=0;if(n>i&&([n,i]=[i,n]),n<0){for(let r=n;r<Math.min(0,i);r++)s+=t;n=0}for(let r=n;r<i;r++)s+=e[r].duration;return s},i3=function(t,e,n,i){if(!t||!t.segments)return null;if(t.endList)return n3(t);if(e===null)return null;e=e||0;let s=t3(t,t.mediaSequence+t.segments.length,e);return n&&(i=typeof i=="number"?i:e3(null,t),s-=i),Math.max(0,s)},wie=function(t,e,n){const s=e||0;let r=i3(t,e,!0,n);return r===null?Ci():(r<s&&(r=s),Ci(s,r))},xie=function({playlist:t,currentTime:e,startingSegmentIndex:n,startingPartIndex:i,startTime:s,exactManifestTimings:r}){let a=e-s;const o=sS(t);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(n===c.segmentIndex&&!(typeof i=="number"&&typeof c.partIndex=="number"&&i!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,r){if(a<0)continue}else if(a+sa<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:s-Lf({defaultDuration:t.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=t.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const d=c.duration>sa,h=a===0,f=d&&a+sa>=0;if(!((h||f)&&u!==o.length-1)){if(r){if(a>0)continue}else if(a-sa>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:s+Lf({defaultDuration:t.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},s3=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},AC=function(t){return t.excludeUntil&&t.excludeUntil===1/0},o_=function(t){const e=s3(t);return!t.disabled&&!e},Iie=function(t){return t.disabled},Aie=function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},r3=function(t,e){return e.attributes&&e.attributes[t]},kie=function(t,e,n,i=0){return r3("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-i*8)/e:NaN},rS=(t,e)=>{if(t.playlists.length===1)return!0;const n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(i=>o_(i)?(i.attributes.BANDWIDTH||0)<n:!1).length===0},kC=(t,e)=>!t&&!e||!t&&e||t&&!e?!1:!!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri),iP=function(t,e){const n=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let i=!1;for(const s in n){for(const r in n[s])if(i=e(n[s][r]),i)break;if(i)break}return!!i},Qm=t=>{if(!t||!t.playlists||!t.playlists.length)return iP(t,n=>n.playlists&&n.playlists.length||n.uri);for(let e=0;e<t.playlists.length;e++){const n=t.playlists[e],i=n.attributes&&n.attributes.CODECS;if(!(i&&i.split(",").every(r=>yV(r))||iP(t,r=>kC(n,r))))return!1}return!0};var Es={liveEdgeDelay:e3,duration:n3,seekable:wie,getMediaInfoForTime:xie,isEnabled:o_,isDisabled:Iie,isExcluded:s3,isIncompatible:AC,playlistEnd:i3,isAes:Aie,hasAttribute:r3,estimateSegmentRequestTime:kie,isLowestEnabledRendition:rS,isAudioOnly:Qm,playlistMatch:kC,segmentDurationWithParts:IC};const{log:a3}=ve,id=(t,e)=>`${t}-${e}`,o3=(t,e,n)=>`placeholder-uri-${t}-${e}-${n}`,Pie=({onwarn:t,oninfo:e,manifestString:n,customTagParsers:i=[],customTagMappers:s=[],llhls:r})=>{const a=new pee;t&&a.on("warn",t),e&&a.on("info",e),i.forEach(u=>a.addParser(u)),s.forEach(u=>a.addTagMapper(u)),a.push(n),a.end();const o=a.manifest;if(r||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,d)=>Math.max(c,d.duration),0)),t&&t({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=J4(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,d)=>Math.max(c,d.duration),0);t&&(t({message:`manifest has no partTargetDuration defaulting to ${u}`}),a3.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},rh=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(n=>{if(t.mediaGroups[n])for(const i in t.mediaGroups[n])for(const s in t.mediaGroups[n][i]){const r=t.mediaGroups[n][i][s];e(r,n,i,s)}})},l3=({playlist:t,uri:e,id:n})=>{t.id=n,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},Die=t=>{let e=t.playlists.length;for(;e--;){const n=t.playlists[e];l3({playlist:n,id:id(e,n.uri)}),n.resolvedUri=bs(t.uri,n.uri),t.playlists[n.id]=n,t.playlists[n.uri]=n,n.attributes.BANDWIDTH||a3.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Rie=t=>{rh(t,e=>{e.uri&&(e.resolvedUri=bs(t.uri,e.uri))})},Lie=(t,e)=>{const n=id(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:te.location.href,resolvedUri:te.location.href,playlists:[{uri:e,id:n,resolvedUri:e,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[e]=i.playlists[0],i},u3=(t,e,n=o3)=>{t.uri=e;for(let s=0;s<t.playlists.length;s++)if(!t.playlists[s].uri){const r=`placeholder-uri-${s}`;t.playlists[s].uri=r}const i=Qm(t);rh(t,(s,r,a,o)=>{if(!s.playlists||!s.playlists.length){if(i&&r==="AUDIO"&&!s.uri)for(let l=0;l<t.playlists.length;l++){const u=t.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}s.playlists=[zn({},s)]}s.playlists.forEach(function(l,u){const c=n(r,a,o,l),d=id(u,c);l.uri?l.resolvedUri=l.resolvedUri||bs(t.uri,l.uri):(l.uri=u===0?c:d,l.resolvedUri=l.uri),l.id=l.id||d,l.attributes=l.attributes||{},t.playlists[l.id]=l,t.playlists[l.uri]=l})}),Die(t),Rie(t)};class sP{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[n]=e;n.programDateTime!==void 0&&(this.offset_=n.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[n]=e,i=n.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=e.reduce((s,r)=>(s.set(r.id,r),s),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},n=[];this.pendingDateRanges_.forEach((i,s)=>{if(!this.processedDateRanges_.has(s)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),n.push(i),!!i.class))if(e[i.class]){const r=e[i.class].push(i);i.classListIndex=r-1}else e[i.class]=[i],i.classListIndex=0});for(const i of n){const s=e[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&s[i.classListIndex+1]?i.endTime=s[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return n}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((i,s)=>{i.startDate.getTime()<e&&this.processedDateRanges_.delete(s)})}}const c3=22,gu=({requestType:t,request:e,error:n,parseFailure:i})=>{const s=e.status<200||e.status>299,r=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:t},o=s&&!r||i;if(n&&r)a.error=zn({},n),a.errorType=ve.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=ve.Error.NetworkRequestAborted;else if(e.timedout)a.erroType=ve.Error.NetworkRequestTimeout;else if(o){const l=i?ve.Error.NetworkBodyParserFailed:ve.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},Oie=dr("CodecUtils"),d3=function(t){const e=t.attributes||{};if(e.CODECS)return Qr(e.CODECS)},h3=(t,e)=>{const n=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&n.AUDIO&&t.mediaGroups.AUDIO[n.AUDIO]},Nie=(t,e)=>{if(!h3(t,e))return!0;const n=e.attributes||{},i=t.mediaGroups.AUDIO[n.AUDIO];for(const s in i)if(!i[s].uri&&!i[s].playlists)return!0;return!1},hm=function(t){const e={};return t.forEach(({mediaType:n,type:i,details:s})=>{e[n]=e[n]||[],e[n].push(vV(`${i}${s}`))}),Object.keys(e).forEach(function(n){if(e[n].length>1){Oie(`multiple ${n} codecs found as attributes: ${e[n].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[n]=null;return}e[n]=e[n][0]}),e},rP=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},Of=function(t,e){const n=e.attributes||{},i=hm(d3(e)||[]);if(h3(t,e)&&!i.audio&&!Nie(t,e)){const s=hm(vee(t,n.AUDIO)||[]);s.audio&&(i.audio=s.audio)}return i},{EventTarget:Mie}=ve,Vie=(t,e)=>{if(e.endList||!e.serverControl)return t;const n={};if(e.serverControl.canBlockReload){const{preloadSegment:i}=e;let s=e.mediaSequence+e.segments.length;if(i){const r=i.parts||[],a=Z4(e)-1;a>-1&&a!==r.length-1&&(n._HLS_part=a),(a>-1||r.length)&&s--}n._HLS_msn=s}if(e.serverControl&&e.serverControl.canSkipUntil&&(n._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const i=new te.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(s){n.hasOwnProperty(s)&&i.searchParams.set(s,n[s])}),t=i.toString()}return t},Fie=(t,e)=>{if(!t)return e;const n=Qt(t,e);if(t.preloadHints&&!e.preloadHints&&delete n.preloadHints,t.parts&&!e.parts)delete n.parts;else if(t.parts&&e.parts)for(let i=0;i<e.parts.length;i++)t.parts&&t.parts[i]&&(n.parts[i]=Qt(t.parts[i],e.parts[i]));return!t.skipped&&e.skipped&&(n.skipped=!1),t.preload&&!e.preload&&(n.preload=!1),n},Bie=(t,e,n)=>{const i=t.slice(),s=e.slice();n=n||0;const r=[];let a;for(let o=0;o<s.length;o++){const l=i[o+n],u=s[o];l?(a=l.map||a,r.push(Fie(l,u))):(a&&!u.map&&(u.map=a),r.push(u))}return r},f3=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=bs(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=bs(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=bs(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=bs(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(n=>{n.resolvedUri||(n.resolvedUri=bs(e,n.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(n=>{n.resolvedUri||(n.resolvedUri=bs(e,n.uri))})},m3=function(t){const e=t.segments||[],n=t.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(let i=0;i<n.preloadHints.length;i++)if(n.preloadHints[i].type==="MAP")return e}n.duration=t.targetDuration,n.preload=!0,e.push(n)}return e},p3=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,aS=(t,e,n=p3)=>{const i=Qt(t,{}),s=i.playlists[e.id];if(!s||n(s,e))return null;e.segments=m3(e);const r=Qt(s,e);if(r.preloadSegment&&!e.preloadSegment&&delete r.preloadSegment,s.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}r.segments=Bie(s.segments,e.segments,e.mediaSequence-s.mediaSequence)}r.segments.forEach(a=>{f3(a,r.resolvedUri)});for(let a=0;a<i.playlists.length;a++)i.playlists[a].id===e.id&&(i.playlists[a]=r);return i.playlists[e.id]=r,i.playlists[e.uri]=r,rh(t,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=r)}),i},oS=(t,e)=>{const n=t.segments||[],i=n[n.length-1],s=i&&i.parts&&i.parts[i.parts.length-1],r=s&&s.duration||i&&i.duration;return e&&r?r*1e3:(t.partTargetDuration||t.targetDuration||10)*500},aP=(t,e,n)=>{if(!t)return;const i=[];return t.forEach(s=>{if(!s.attributes)return;const{BANDWIDTH:r,RESOLUTION:a,CODECS:o}=s.attributes;i.push({id:s.id,bandwidth:r,resolution:a,codecs:o})}),{type:e,isLive:n,renditions:i}};class $c extends Mie{constructor(e,n,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=dr("PlaylistLoader");const{withCredentials:s=!1}=i;this.src=e,this.vhs_=n,this.withCredentials=s,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;const r=n.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.dateRangesStorage_=new sP,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const n=this.dateRangesStorage_.getDateRangesToProcess();!n.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(n)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let n=bs(this.main.uri,e.uri);this.llhls&&(n=Vie(n,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,s)=>{if(this.request){if(i)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,n,i){const{uri:s,id:r}=n;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${s}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:gu({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:n}){try{const i=Pie({onwarn:({message:s})=>this.logger_(`m3u8-parser warn for ${e}: ${s}`),oninfo:({message:s})=>this.logger_(`m3u8-parser info for ${e}: ${s}`),manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!i.playlists||!i.playlists.length||this.excludeAudioOnlyVariants(i.playlists),i}catch(i){this.error=i,this.error.metadata={errorType:ve.Error.StreamingHlsPlaylistParserError,error:i}}}excludeAudioOnlyVariants(e){const n=i=>{const s=i.attributes||{},{width:r,height:a}=s.RESOLUTION||{};if(r&&a)return!0;const o=d3(i)||[];return!!hm(o).video};e.some(n)&&e.forEach(i=>{n(i)||(i.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:n,url:i,id:s}){this.request=null,this.state="HAVE_METADATA";const r={playlistInfo:{type:"media",uri:i}};this.trigger({type:"playlistparsestart",metadata:r});const a=n||this.parseManifest_({url:i,manifestString:e});a.lastRequest=Date.now(),l3({playlist:a,uri:i,id:s});const o=aS(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[s]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(oS(this.media(),!!o)),r.parsedPlaylist=aP(this.main.playlists,r.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:r}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),te.clearTimeout(this.mediaUpdateTimeout),te.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new sP,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,n){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(te.clearTimeout(this.finalRenditionTimeout),n){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=te.setTimeout(this.media.bind(this,e,!1),o);return}const i=this.state,s=!this.media_||e.id!==this.media_.id,r=this.main.playlists[e.id];if(r&&r.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(oS(e,!0)),!s)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=Bv(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,i);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(te.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(te.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const n=this.media();if(e){const i=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=te.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i);return}if(!this.started){this.start();return}n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(te.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=te.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=te.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,i)=>{if(!this.request)return;if(this.request=null,n)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2,metadata:gu({requestType:i.requestType,request:i,error:n})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=Bv(this.src,i),this.trigger({type:"playlistparsestart",metadata:e});const s=this.parseManifest_({manifestString:i.responseText,url:this.src});e.parsedPlaylist=aP(s.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(s)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,u3(this.main,this.srcUri()),e.playlists.forEach(i=>{i.segments=m3(i),i.segments.forEach(s=>{f3(s,i.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const n=this.srcUri()||te.location.href;this.main=Lie(e,n),this.haveMetadata({playlistObject:e,url:n,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,n){const i=this.main,s=e.ID;let r=i.playlists.length;for(;r--;){const a=i.playlists[r];if(a.attributes["PATHWAY-ID"]===s){const o=a.resolvedUri,l=a.id;if(n){const u=this.createCloneURI_(a.resolvedUri,e),c=id(s,u),d=this.createCloneAttributes_(s,a.attributes),h=this.createClonePlaylist_(a,c,e,d);i.playlists[r]=h,i.playlists[c]=h,i.playlists[u]=h}else i.playlists.splice(r,1);delete i.playlists[l],delete i.playlists[o]}}this.updateOrDeleteCloneMedia(e,n)}updateOrDeleteCloneMedia(e,n){const i=this.main,s=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!i.mediaGroups[r]||!i.mediaGroups[r][s])){for(const a in i.mediaGroups[r])if(a===s){for(const o in i.mediaGroups[r][a])i.mediaGroups[r][a][o].playlists.forEach((u,c)=>{const d=i.playlists[u.id],h=d.id,f=d.resolvedUri;delete i.playlists[h],delete i.playlists[f]});delete i.mediaGroups[r][a]}}}),n&&this.createClonedMediaGroups_(e)}addClonePathway(e,n={}){const i=this.main,s=i.playlists.length,r=this.createCloneURI_(n.resolvedUri,e),a=id(e.ID,r),o=this.createCloneAttributes_(e.ID,n.attributes),l=this.createClonePlaylist_(n,a,e,o);i.playlists[s]=l,i.playlists[a]=l,i.playlists[r]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const n=e.ID,i=e["BASE-ID"],s=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!s.mediaGroups[r]||s.mediaGroups[r][n]))for(const a in s.mediaGroups[r]){if(a===i)s.mediaGroups[r][n]={};else continue;for(const o in s.mediaGroups[r][a]){const l=s.mediaGroups[r][a][o];s.mediaGroups[r][n][o]=zn({},l);const u=s.mediaGroups[r][n][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((d,h)=>{const f=s.playlists[d.id],g=o3(r,n,o),v=id(n,g);if(f&&!s.playlists[v]){const b=this.createClonePlaylist_(f,v,e),I=b.resolvedUri;s.playlists[v]=b,s.playlists[I]=b}u.playlists[h]=this.createClonePlaylist_(d,v,e)})}}})}createClonePlaylist_(e,n,i,s){const r=this.createCloneURI_(e.resolvedUri,i),a={resolvedUri:r,uri:r,id:n};return e.segments&&(a.segments=[]),s&&(a.attributes=s),Qt(e,a)}createCloneURI_(e,n){const i=new URL(e);i.hostname=n["URI-REPLACEMENT"].HOST;const s=n["URI-REPLACEMENT"].PARAMS;for(const r of Object.keys(s))i.searchParams.set(r,s[r]);return i.href}createCloneAttributes_(e,n){const i={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{n[s]&&(i[s]=e)}),i}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const i in e.contentProtection){const s=e.contentProtection[i].attributes.keyId;s&&n.add(s.toLowerCase())}return n}}}const lS=function(t,e,n,i){const s=t.responseType==="arraybuffer"?t.response:t.responseText;!e&&s&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=s.byteLength||s.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),n.headers&&(t.responseHeaders=n.headers),e&&e.code==="ETIMEDOUT"&&(t.timedout=!0),!e&&!t.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(t&&(s||t.responseText)))),i(e,t)},Uie=(t,e)=>{if(!t||!t.size)return;let n=e;return t.forEach(i=>{n=i(n)}),n},$ie=(t,e,n,i)=>{!t||!t.size||t.forEach(s=>{s(e,n,i)})},g3=function(){const t=function e(n,i){n=Qt({timeout:45e3},n);const s=e.beforeRequest||ve.Vhs.xhr.beforeRequest,r=e._requestCallbackSet||ve.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||ve.Vhs.xhr._responseCallbackSet;s&&typeof s=="function"&&(ve.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(s));const o=ve.Vhs.xhr.original===!0?ve.xhr:ve.Vhs.xhr,l=Uie(r,n);r.delete(s);const u=o(l||n,function(d,h){return $ie(a,u,d,h),lS(u,d,h,i)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=n.uri,u.requestType=n.requestType,u.requestTime=Date.now(),u};return t.original=!0,t},Hie=function(t){let e;const n=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=te.BigInt(t.offset)+te.BigInt(t.length)-te.BigInt(1):e=t.offset+t.length-1,"bytes="+n+"-"+e},uS=function(t){const e={};return t.byterange&&(e.Range=Hie(t.byterange)),e},jie=function(t,e){return t.start(e)+"-"+t.end(e)},qie=function(t,e){const n=t.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},zie=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},v3=function(t){const e={};return Object.keys(t).forEach(n=>{const i=t[n];bV(i)?e[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[n]=i}),e},Uv=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},y3=function(t){return t.resolvedUri},_3=t=>{const e=Array.prototype.slice.call(t),n=16;let i="",s,r;for(let a=0;a<e.length/n;a++)s=e.slice(a*n,a*n+n).map(qie).join(""),r=e.slice(a*n,a*n+n).map(zie).join(""),i+=s+" "+r+`
`;return i},Wie=({bytes:t})=>_3(t),Gie=t=>{let e="",n;for(n=0;n<t.length;n++)e+=jie(t,n)+" ";return e};var Kie=Object.freeze({__proto__:null,createTransferableMessage:v3,initSegmentId:Uv,segmentKeyId:y3,hexDump:_3,tagDump:Wie,textRanges:Gie});const b3=.25,Yie=(t,e)=>{if(!e.dateTimeObject)return null;const n=e.videoTimingInfo.transmuxerPrependedSeconds,s=e.videoTimingInfo.transmuxedPresentationStart+n,r=t-s;return new Date(e.dateTimeObject.getTime()+r*1e3)},Xie=t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds,Qie=(t,e)=>{let n;try{n=new Date(t)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let i=e.segments[0];if(n<new Date(i.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){i=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(n<u)break}const s=e.segments[e.segments.length-1],r=s.dateTimeObject,a=s.videoTimingInfo?Xie(s.videoTimingInfo):s.duration+s.duration*b3,o=new Date(r.getTime()+a*1e3);return n>o?null:(n>new Date(r)&&(i=s),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Es.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},Jie=(t,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let n=0,i;for(let r=0;r<e.segments.length&&(i=e.segments[r],n=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration,!(t<=n));r++);const s=e.segments[e.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>n){if(t>n+s.duration*b3)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},Zie=(t,e)=>{let n,i;try{n=new Date(t),i=new Date(e)}catch{}const s=n.getTime();return(i.getTime()-s)/1e3},ese=t=>{if(!t.segments||t.segments.length===0)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0},tse=({playlist:t,time:e=void 0,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!t||e===void 0)return n({message:"getProgramTime: playlist and time must be provided"});const i=Jie(e,t);if(!i)return n({message:"valid programTime was not found"});if(i.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const s={mediaSeconds:e},r=Yie(e,i.segment);return r&&(s.programDateTime=r.toISOString()),n(null,s)},T3=({programTime:t,playlist:e,retryCount:n=2,seekTo:i,pauseAfterSeek:s=!0,tech:r,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!i)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!r.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!ese(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=Qie(t,e);if(!o)return a({message:`${t} was not found in the stream`});const l=o.segment,u=Zie(l.dateTimeObject,t);if(o.type==="estimate"){if(n===0)return a({message:`${t} is not buffered yet. Try again`});i(o.estimatedStart+u),r.one("seeked",()=>{T3({programTime:t,playlist:e,retryCount:n-1,seekTo:i,pauseAfterSeek:s,tech:r,callback:a})});return}const c=l.start+u,d=()=>a(null,r.currentTime());r.one("seeked",d),s&&r.pause(),i(c)},db=(t,e)=>{if(t.readyState===4)return e()},nse=(t,e,n,i)=>{let s=[],r,a=!1;const o=function(d,h,f,g){return h.abort(),a=!0,n(d,h,f,g)},l=function(d,h){if(a)return;if(d)return d.metadata=gu({requestType:i,request:h,error:d}),o(d,h,"",s);const f=h.responseText.substring(s&&s.byteLength||0,h.responseText.length);if(s=Iee(s,TV(f,!0)),r=r||af(s),s.length<10||r&&s.length<r+2)return db(h,()=>o(d,h,"",s));const g=eC(s);return g==="ts"&&s.length<188?db(h,()=>o(d,h,"",s)):!g&&s.length<376?db(h,()=>o(d,h,"",s)):o(null,h,g,s)},c=e({uri:t,beforeSend(d){d.overrideMimeType("text/plain; charset=x-user-defined"),d.addEventListener("progress",function({total:h,loaded:f}){return lS(d,null,{statusCode:d.status},l)})}},function(d,h){return lS(c,d,h,l)});return c},{EventTarget:ise}=ve,oP=function(t,e){if(!p3(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let n=0;n<t.segments.length;n++){const i=t.segments[n],s=e.segments[n];if(i.uri!==s.uri)return!1;if(!i.byterange&&!s.byterange)continue;const r=i.byterange,a=s.byterange;if(r&&!a||!r&&a||r.offset!==a.offset||r.length!==a.length)return!1}return!0},sse=(t,e,n,i)=>{const s=i.attributes.NAME||n;return`placeholder-uri-${t}-${e}-${s}`},rse=({mainXml:t,srcUrl:e,clientOffset:n,sidxMapping:i,previousManifest:s})=>{const r=wte(t,{manifestUri:e,clientOffset:n,sidxMapping:i,previousManifest:s});return u3(r,e,sse),r},ase=(t,e)=>{rh(t,(n,i,s,r)=>{(!e.mediaGroups[i][s]||!(r in e.mediaGroups[i][s]))&&delete t.mediaGroups[i][s][r]})},ose=(t,e,n)=>{let i=!0,s=Qt(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let r=0;r<e.playlists.length;r++){const a=e.playlists[r];if(a.sidx){const l=jy(a.sidx);n&&n[l]&&n[l].sidx&&QE(a,n[l].sidx,a.sidx.resolvedUri)}const o=aS(s,a,oP);o&&(s=o,i=!1)}return rh(e,(r,a,o,l)=>{if(r.playlists&&r.playlists.length){const u=r.playlists[0].id,c=aS(s,r.playlists[0],oP);c&&(s=c,l in s.mediaGroups[a][o]||(s.mediaGroups[a][o][l]=r),s.mediaGroups[a][o][l].playlists[0]=s.playlists[u],i=!1)}}),ase(s,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(i=!1),i?null:s},lse=(t,e)=>(!t.map&&!e.map||!!(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,lP=(t,e)=>{const n={};for(const i in t){const r=t[i].sidx;if(r){const a=jy(r);if(!e[a])break;const o=e[a].sidxInfo;lse(o,r)&&(n[a]=e[a])}}return n},use=(t,e)=>{let i=lP(t.playlists,e);return rh(t,(s,r,a,o)=>{if(s.playlists&&s.playlists.length){const l=s.playlists;i=Qt(i,lP(l,e))}}),i};class cS extends ise{constructor(e,n,i={},s){super(),this.isPaused_=!0,this.mainPlaylistLoader_=s||this,s||(this.isMain_=!0);const{withCredentials:r=!1}=i;if(this.vhs_=n,this.withCredentials=r,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=dr("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,n,i){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2,metadata:e.metadata},i&&(this.state=i),this.trigger("error"),!0}addSidxSegments_(e,n,i){const s=e.sidx&&jy(e.sidx);if(!e.sidx||!s||this.mainPlaylistLoader_.sidxMapping_[s]){te.clearTimeout(this.mediaRequest_),this.mediaRequest_=te.setTimeout(()=>i(!1),0);return}const r=Bv(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,n))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:d}=u;let h;try{h=Pte(ct(u.response).subarray(8))}catch(f){f.metadata=gu({requestType:d,request:u,parseFailure:!0}),this.requestErrored_(f,u,n);return}return c[s]={sidxInfo:e.sidx,sidx:h},QE(e,h,e.sidx.resolvedUri),i(!0)},o="dash-sidx";this.request=nse(r,this.vhs_.xhr,(l,u,c,d)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const g=c||"unknown";return a({status:u.status,message:`Unsupported ${g} container type for sidx segment at URL: ${r}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:h,length:f}=e.sidx.byterange;if(d.length>=f+h)return a(l,{response:d.subarray(h,h+f),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",requestType:"dash-sidx",headers:uS({byterange:e.sidx.byterange})},a)},o)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},te.clearTimeout(this.minimumUpdatePeriodTimeout_),te.clearTimeout(this.mediaRequest_),te.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const n=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,s=>{this.haveMetadata({startingState:n,playlist:e})}))}haveMetadata({startingState:e,playlist:n}){this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,te.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(n.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),te.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(te.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,te.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const n=this.media();if(e){const i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=te.setTimeout(()=>this.load(),i);return}if(!this.started){this.start();return}n&&!n.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){te.clearTimeout(this.mediaRequest_),this.mediaRequest_=te.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,n)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:n}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(i,s)=>{if(i){const{requestType:a}=s;i.metadata=gu({requestType:a,request:s,error:i})}if(this.requestErrored_(i,s)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:n});const r=s.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=s.responseText,s.responseHeaders&&s.responseHeaders.date?this.mainLoaded_=Date.parse(s.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Bv(this.mainPlaylistLoader_.srcUrl,s),r){this.handleMain_(),this.syncClientServerClock_(()=>e(s,r));return}return e(s,r)})}syncClientServerClock_(e){const n=xte(this.mainPlaylistLoader_.mainXml_);if(n===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(n.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=n.value-Date.now(),e();this.request=this.vhs_.xhr({uri:bs(this.mainPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(i,s)=>{if(!this.request)return;if(i){const{requestType:a}=s;return this.error.metadata=gu({requestType:a,request:s,error:i}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let r;n.method==="HEAD"?!s.responseHeaders||!s.responseHeaders.date?r=this.mainLoaded_:r=Date.parse(s.responseHeaders.date):r=Date.parse(s.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){te.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:n});let i;try{i=rse({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(r){this.error=r,this.error.metadata={errorType:ve.Error.StreamingDashManifestParserError,error:r},this.trigger("error")}e&&(i=ose(e,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||e;const s=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(s&&s!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=s),(!e||i&&i.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(i),i){const{duration:r,endList:a}=i,o=[];i.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:r,isLive:!a,renditions:o};n.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:n})}return!!i}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(te.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let n=e.main&&e.main.minimumUpdatePeriod;if(n===0&&(e.media()?n=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_(`found invalid minimumUpdatePeriod of ${n}, not setting a timeout`);return}this.createMUPTimeout_(n)}createMUPTimeout_(e){const n=this.mainPlaylistLoader_;n.minimumUpdatePeriodTimeout_=te.setTimeout(()=>{n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,n)=>{n&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=use(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const n=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==n[e];if(i?this.media_=n[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const s=()=>{this.media().endList||(this.mediaUpdateTimeout=te.setTimeout(()=>{this.trigger("mediaupdatetimeout"),s()},oS(this.media(),!!i)))};s()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const n=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",n,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const i in e.contentProtection){const s=e.contentProtection[i].attributes["cenc:default_KID"];s&&n.add(s.replace(/-/g,"").toLowerCase())}return n}}}var bi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const cse=t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e.buffer},S3=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},dse=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const n=new BlobBuilder;return n.append(t),URL.createObjectURL(n.getBlob())}},E3=function(t){return function(){const e=dse(t),n=S3(new Worker(e));n.objURL=e;const i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},n}},C3=function(t){return`var browserWorkerPolyFill = ${S3.toString()};
browserWorkerPolyFill(self);
`+t},w3=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},hse=C3(w3(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var p={};this.on=function(T,x){p[T]||(p[T]=[]),p[T]=p[T].concat(x)},this.off=function(T,x){var C;return p[T]?(C=p[T].indexOf(x),p[T]=p[T].slice(),p[T].splice(C,1),C>-1):!1},this.trigger=function(T){var x,C,O,N;if(x=p[T],!!x)if(arguments.length===2)for(O=x.length,C=0;C<O;++C)x[C].call(this,arguments[1]);else{for(N=[],C=arguments.length,C=1;C<arguments.length;++C)N.push(arguments[C]);for(O=x.length,C=0;C<O;++C)x[C].apply(this,N)}},this.dispose=function(){p={}}}};e.prototype.pipe=function(p){return this.on("data",function(T){p.push(T)}),this.on("done",function(T){p.flush(T)}),this.on("partialdone",function(T){p.partialFlush(T)}),this.on("endedtimeline",function(T){p.endTimeline(T)}),this.on("reset",function(T){p.reset(T)}),p},e.prototype.push=function(p){this.trigger("data",p)},e.prototype.flush=function(p){this.trigger("done",p)},e.prototype.partialFlush=function(p){this.trigger("partialdone",p)},e.prototype.endTimeline=function(p){this.trigger("endedtimeline",p)},e.prototype.reset=function(p){this.trigger("reset",p)};var n=e,i=Math.pow(2,32),s=function(p){var T=new DataView(p.buffer,p.byteOffset,p.byteLength),x;return T.getBigUint64?(x=T.getBigUint64(0),x<Number.MAX_SAFE_INTEGER?Number(x):x):T.getUint32(0)*i+T.getUint32(4)},r={getUint64:s,MAX_UINT32:i},a=r.MAX_UINT32,o,l,u,c,d,h,f,g,v,b,I,w,P,M,F,U,D,S,y,E,A,k,R,W,se,ae,Z,ne,ee,Q,j,le,pe,Se,Le,we;(function(){var p;if(R={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(p in R)R.hasOwnProperty(p)&&(R[p]=[p.charCodeAt(0),p.charCodeAt(1),p.charCodeAt(2),p.charCodeAt(3)]);W=new Uint8Array([105,115,111,109]),ae=new Uint8Array([97,118,99,49]),se=new Uint8Array([0,0,0,1]),Z=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ne=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ee={video:Z,audio:ne},le=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),j=new Uint8Array([0,0,0,0,0,0,0,0]),pe=new Uint8Array([0,0,0,0,0,0,0,0]),Se=pe,Le=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),we=pe,Q=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(p){var T=[],x=0,C,O,N;for(C=1;C<arguments.length;C++)T.push(arguments[C]);for(C=T.length;C--;)x+=T[C].byteLength;for(O=new Uint8Array(x+8),N=new DataView(O.buffer,O.byteOffset,O.byteLength),N.setUint32(0,O.byteLength),O.set(p,4),C=0,x=8;C<T.length;C++)O.set(T[C],x),x+=T[C].byteLength;return O},l=function(){return o(R.dinf,o(R.dref,le))},u=function(p){return o(R.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,p.audioobjecttype<<3|p.samplingfrequencyindex>>>1,p.samplingfrequencyindex<<7|p.channelcount<<3,6,1,2]))},c=function(){return o(R.ftyp,W,se,W,ae)},U=function(p){return o(R.hdlr,ee[p])},d=function(p){return o(R.mdat,p)},F=function(p){var T=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,p.duration>>>24&255,p.duration>>>16&255,p.duration>>>8&255,p.duration&255,85,196,0,0]);return p.samplerate&&(T[12]=p.samplerate>>>24&255,T[13]=p.samplerate>>>16&255,T[14]=p.samplerate>>>8&255,T[15]=p.samplerate&255),o(R.mdhd,T)},M=function(p){return o(R.mdia,F(p),U(p.type),f(p))},h=function(p){return o(R.mfhd,new Uint8Array([0,0,0,0,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255]))},f=function(p){return o(R.minf,p.type==="video"?o(R.vmhd,Q):o(R.smhd,j),l(),S(p))},g=function(p,T){for(var x=[],C=T.length;C--;)x[C]=E(T[C]);return o.apply(null,[R.moof,h(p)].concat(x))},v=function(p){for(var T=p.length,x=[];T--;)x[T]=w(p[T]);return o.apply(null,[R.moov,I(4294967295)].concat(x).concat(b(p)))},b=function(p){for(var T=p.length,x=[];T--;)x[T]=A(p[T]);return o.apply(null,[R.mvex].concat(x))},I=function(p){var T=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(R.mvhd,T)},D=function(p){var T=p.samples||[],x=new Uint8Array(4+T.length),C,O;for(O=0;O<T.length;O++)C=T[O].flags,x[O+4]=C.dependsOn<<4|C.isDependedOn<<2|C.hasRedundancy;return o(R.sdtp,x)},S=function(p){return o(R.stbl,y(p),o(R.stts,we),o(R.stsc,Se),o(R.stsz,Le),o(R.stco,pe))},function(){var p,T;y=function(x){return o(R.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),x.type==="video"?p(x):T(x))},p=function(x){var C=x.sps||[],O=x.pps||[],N=[],K=[],Y,J;for(Y=0;Y<C.length;Y++)N.push((C[Y].byteLength&65280)>>>8),N.push(C[Y].byteLength&255),N=N.concat(Array.prototype.slice.call(C[Y]));for(Y=0;Y<O.length;Y++)K.push((O[Y].byteLength&65280)>>>8),K.push(O[Y].byteLength&255),K=K.concat(Array.prototype.slice.call(O[Y]));if(J=[R.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(x.width&65280)>>8,x.width&255,(x.height&65280)>>8,x.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(R.avcC,new Uint8Array([1,x.profileIdc,x.profileCompatibility,x.levelIdc,255].concat([C.length],N,[O.length],K))),o(R.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],x.sarRatio){var ie=x.sarRatio[0],ce=x.sarRatio[1];J.push(o(R.pasp,new Uint8Array([(ie&4278190080)>>24,(ie&16711680)>>16,(ie&65280)>>8,ie&255,(ce&4278190080)>>24,(ce&16711680)>>16,(ce&65280)>>8,ce&255])))}return o.apply(null,J)},T=function(x){return o(R.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(x.channelcount&65280)>>8,x.channelcount&255,(x.samplesize&65280)>>8,x.samplesize&255,0,0,0,0,(x.samplerate&65280)>>8,x.samplerate&255,0,0]),u(x))}}(),P=function(p){var T=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,0,(p.duration&4278190080)>>24,(p.duration&16711680)>>16,(p.duration&65280)>>8,p.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(p.width&65280)>>8,p.width&255,0,0,(p.height&65280)>>8,p.height&255,0,0]);return o(R.tkhd,T)},E=function(p){var T,x,C,O,N,K,Y;return T=o(R.tfhd,new Uint8Array([0,0,0,58,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),K=Math.floor(p.baseMediaDecodeTime/a),Y=Math.floor(p.baseMediaDecodeTime%a),x=o(R.tfdt,new Uint8Array([1,0,0,0,K>>>24&255,K>>>16&255,K>>>8&255,K&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y&255])),N=92,p.type==="audio"?(C=k(p,N),o(R.traf,T,x,C)):(O=D(p),C=k(p,O.length+N),o(R.traf,T,x,C,O))},w=function(p){return p.duration=p.duration||4294967295,o(R.trak,P(p),M(p))},A=function(p){var T=new Uint8Array([0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return p.type!=="video"&&(T[T.length-1]=0),o(R.trex,T)},function(){var p,T,x;x=function(C,O){var N=0,K=0,Y=0,J=0;return C.length&&(C[0].duration!==void 0&&(N=1),C[0].size!==void 0&&(K=2),C[0].flags!==void 0&&(Y=4),C[0].compositionTimeOffset!==void 0&&(J=8)),[0,0,N|K|Y|J,1,(C.length&4278190080)>>>24,(C.length&16711680)>>>16,(C.length&65280)>>>8,C.length&255,(O&4278190080)>>>24,(O&16711680)>>>16,(O&65280)>>>8,O&255]},T=function(C,O){var N,K,Y,J,ie,ce;for(J=C.samples||[],O+=20+16*J.length,Y=x(J,O),K=new Uint8Array(Y.length+J.length*16),K.set(Y),N=Y.length,ce=0;ce<J.length;ce++)ie=J[ce],K[N++]=(ie.duration&4278190080)>>>24,K[N++]=(ie.duration&16711680)>>>16,K[N++]=(ie.duration&65280)>>>8,K[N++]=ie.duration&255,K[N++]=(ie.size&4278190080)>>>24,K[N++]=(ie.size&16711680)>>>16,K[N++]=(ie.size&65280)>>>8,K[N++]=ie.size&255,K[N++]=ie.flags.isLeading<<2|ie.flags.dependsOn,K[N++]=ie.flags.isDependedOn<<6|ie.flags.hasRedundancy<<4|ie.flags.paddingValue<<1|ie.flags.isNonSyncSample,K[N++]=ie.flags.degradationPriority&61440,K[N++]=ie.flags.degradationPriority&15,K[N++]=(ie.compositionTimeOffset&4278190080)>>>24,K[N++]=(ie.compositionTimeOffset&16711680)>>>16,K[N++]=(ie.compositionTimeOffset&65280)>>>8,K[N++]=ie.compositionTimeOffset&255;return o(R.trun,K)},p=function(C,O){var N,K,Y,J,ie,ce;for(J=C.samples||[],O+=20+8*J.length,Y=x(J,O),N=new Uint8Array(Y.length+J.length*8),N.set(Y),K=Y.length,ce=0;ce<J.length;ce++)ie=J[ce],N[K++]=(ie.duration&4278190080)>>>24,N[K++]=(ie.duration&16711680)>>>16,N[K++]=(ie.duration&65280)>>>8,N[K++]=ie.duration&255,N[K++]=(ie.size&4278190080)>>>24,N[K++]=(ie.size&16711680)>>>16,N[K++]=(ie.size&65280)>>>8,N[K++]=ie.size&255;return o(R.trun,N)},k=function(C,O){return C.type==="audio"?p(C,O):T(C,O)}}();var re={ftyp:c,mdat:d,moof:g,moov:v,initSegment:function(p){var T=c(),x=v(p),C;return C=new Uint8Array(T.byteLength+x.byteLength),C.set(T),C.set(x,T.byteLength),C}},fe=function(p){var T,x,C=[],O=[];for(O.byteLength=0,O.nalCount=0,O.duration=0,C.byteLength=0,T=0;T<p.length;T++)x=p[T],x.nalUnitType==="access_unit_delimiter_rbsp"?(C.length&&(C.duration=x.dts-C.dts,O.byteLength+=C.byteLength,O.nalCount+=C.length,O.duration+=C.duration,O.push(C)),C=[x],C.byteLength=x.data.byteLength,C.pts=x.pts,C.dts=x.dts):(x.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(C.keyFrame=!0),C.duration=x.dts-C.dts,C.byteLength+=x.data.byteLength,C.push(x));return O.length&&(!C.duration||C.duration<=0)&&(C.duration=O[O.length-1].duration),O.byteLength+=C.byteLength,O.nalCount+=C.length,O.duration+=C.duration,O.push(C),O},xe=function(p){var T,x,C=[],O=[];for(C.byteLength=0,C.nalCount=0,C.duration=0,C.pts=p[0].pts,C.dts=p[0].dts,O.byteLength=0,O.nalCount=0,O.duration=0,O.pts=p[0].pts,O.dts=p[0].dts,T=0;T<p.length;T++)x=p[T],x.keyFrame?(C.length&&(O.push(C),O.byteLength+=C.byteLength,O.nalCount+=C.nalCount,O.duration+=C.duration),C=[x],C.nalCount=x.length,C.byteLength=x.byteLength,C.pts=x.pts,C.dts=x.dts,C.duration=x.duration):(C.duration+=x.duration,C.nalCount+=x.length,C.byteLength+=x.byteLength,C.push(x));return O.length&&C.duration<=0&&(C.duration=O[O.length-1].duration),O.byteLength+=C.byteLength,O.nalCount+=C.nalCount,O.duration+=C.duration,O.push(C),O},Ne=function(p){var T;return!p[0][0].keyFrame&&p.length>1&&(T=p.shift(),p.byteLength-=T.byteLength,p.nalCount-=T.nalCount,p[0][0].dts=T.dts,p[0][0].pts=T.pts,p[0][0].duration+=T.duration),p},be=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},z=function(p,T){var x=be();return x.dataOffset=T,x.compositionTimeOffset=p.pts-p.dts,x.duration=p.duration,x.size=4*p.length,x.size+=p.byteLength,p.keyFrame&&(x.flags.dependsOn=2,x.flags.isNonSyncSample=0),x},H=function(p,T){var x,C,O,N,K,Y=T||0,J=[];for(x=0;x<p.length;x++)for(N=p[x],C=0;C<N.length;C++)K=N[C],O=z(K,Y),Y+=O.size,J.push(O);return J},X=function(p){var T,x,C,O,N,K,Y=0,J=p.byteLength,ie=p.nalCount,ce=J+4*ie,ke=new Uint8Array(ce),Xe=new DataView(ke.buffer);for(T=0;T<p.length;T++)for(O=p[T],x=0;x<O.length;x++)for(N=O[x],C=0;C<N.length;C++)K=N[C],Xe.setUint32(Y,K.data.byteLength),Y+=4,ke.set(K.data,Y),Y+=K.data.byteLength;return ke},he=function(p,T){var x,C=T||0,O=[];return x=z(p,C),O.push(x),O},de=function(p){var T,x,C=0,O=p.byteLength,N=p.length,K=O+4*N,Y=new Uint8Array(K),J=new DataView(Y.buffer);for(T=0;T<p.length;T++)x=p[T],J.setUint32(C,x.data.byteLength),C+=4,Y.set(x.data,C),C+=x.data.byteLength;return Y},_e={groupNalsIntoFrames:fe,groupFramesIntoGops:xe,extendFirstKeyFrame:Ne,generateSampleTable:H,concatenateNalData:X,generateSampleTableForFrame:he,concatenateNalDataForFrame:de},Oe=[33,16,5,32,164,27],Re=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],me=function(p){for(var T=[];p--;)T.push(0);return T},Ce=function(p){return Object.keys(p).reduce(function(T,x){return T[x]=new Uint8Array(p[x].reduce(function(C,O){return C.concat(O)},[])),T},{})},He,ze=function(){if(!He){var p={96e3:[Oe,[227,64],me(154),[56]],88200:[Oe,[231],me(170),[56]],64e3:[Oe,[248,192],me(240),[56]],48e3:[Oe,[255,192],me(268),[55,148,128],me(54),[112]],44100:[Oe,[255,192],me(268),[55,163,128],me(84),[112]],32e3:[Oe,[255,192],me(268),[55,234],me(226),[112]],24e3:[Oe,[255,192],me(268),[55,255,128],me(268),[111,112],me(126),[224]],16e3:[Oe,[255,192],me(268),[55,255,128],me(268),[111,255],me(269),[223,108],me(195),[1,192]],12e3:[Re,me(268),[3,127,248],me(268),[6,255,240],me(268),[13,255,224],me(268),[27,253,128],me(259),[56]],11025:[Re,me(268),[3,127,248],me(268),[6,255,240],me(268),[13,255,224],me(268),[27,255,192],me(268),[55,175,128],me(108),[112]],8e3:[Re,me(268),[3,121,16],me(47),[7]]};He=Ce(p)}return He},Ze=9e4,rt,at,dt,wt,Fn,En,Xn;rt=function(p){return p*Ze},at=function(p,T){return p*T},dt=function(p){return p/Ze},wt=function(p,T){return p/T},Fn=function(p,T){return rt(wt(p,T))},En=function(p,T){return at(dt(p),T)},Xn=function(p,T,x){return dt(x?p:p-T)};var bt={ONE_SECOND_IN_TS:Ze,secondsToVideoTs:rt,secondsToAudioTs:at,videoTsToSeconds:dt,audioTsToSeconds:wt,audioTsToVideoTs:Fn,videoTsToAudioTs:En,metadataTsToSeconds:Xn},Ps=ze,Ds=bt,Bn=function(p){var T,x,C=0;for(T=0;T<p.length;T++)x=p[T],C+=x.data.byteLength;return C},mi=function(p,T,x,C){var O,N=0,K=0,Y=0,J=0,ie,ce,ke;if(T.length&&(O=Ds.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),N=Math.ceil(Ds.ONE_SECOND_IN_TS/(p.samplerate/1024)),x&&C&&(K=O-Math.max(x,C),Y=Math.floor(K/N),J=Y*N),!(Y<1||J>Ds.ONE_SECOND_IN_TS/2))){for(ie=Ps()[p.samplerate],ie||(ie=T[0].data),ce=0;ce<Y;ce++)ke=T[0],T.splice(0,0,{data:ie,dts:ke.dts-N,pts:ke.pts-N});return p.baseMediaDecodeTime-=Math.floor(Ds.videoTsToAudioTs(J,p.samplerate)),J}},Rs=function(p,T,x){return T.minSegmentDts>=x?p:(T.minSegmentDts=1/0,p.filter(function(C){return C.dts>=x?(T.minSegmentDts=Math.min(T.minSegmentDts,C.dts),T.minSegmentPts=T.minSegmentDts,!0):!1}))},ho=function(p){var T,x,C=[];for(T=0;T<p.length;T++)x=p[T],C.push({size:x.data.byteLength,duration:1024});return C},fo=function(p){var T,x,C=0,O=new Uint8Array(Bn(p));for(T=0;T<p.length;T++)x=p[T],O.set(x.data,C),C+=x.data.byteLength;return O},Il={prefixWithSilence:mi,trimAdtsFramesByEarliestDts:Rs,generateSampleTable:ho,concatenateFrameData:fo},mo=bt.ONE_SECOND_IN_TS,$=function(p,T){typeof T.pts=="number"&&(p.timelineStartInfo.pts===void 0&&(p.timelineStartInfo.pts=T.pts),p.minSegmentPts===void 0?p.minSegmentPts=T.pts:p.minSegmentPts=Math.min(p.minSegmentPts,T.pts),p.maxSegmentPts===void 0?p.maxSegmentPts=T.pts:p.maxSegmentPts=Math.max(p.maxSegmentPts,T.pts)),typeof T.dts=="number"&&(p.timelineStartInfo.dts===void 0&&(p.timelineStartInfo.dts=T.dts),p.minSegmentDts===void 0?p.minSegmentDts=T.dts:p.minSegmentDts=Math.min(p.minSegmentDts,T.dts),p.maxSegmentDts===void 0?p.maxSegmentDts=T.dts:p.maxSegmentDts=Math.max(p.maxSegmentDts,T.dts))},q=function(p){delete p.minSegmentDts,delete p.maxSegmentDts,delete p.minSegmentPts,delete p.maxSegmentPts},oe=function(p,T){var x,C,O=p.minSegmentDts;return T||(O-=p.timelineStartInfo.dts),x=p.timelineStartInfo.baseMediaDecodeTime,x+=O,x=Math.max(0,x),p.type==="audio"&&(C=p.samplerate/mo,x*=C,x=Math.floor(x)),x},Ee={clearDtsInfo:q,calculateTrackBaseMediaDecodeTime:oe,collectDtsInfo:$},je=4,ht=128,jt=function(p){for(var T=0,x={payloadType:-1,payloadSize:0},C=0,O=0;T<p.byteLength&&p[T]!==ht;){for(;p[T]===255;)C+=255,T++;for(C+=p[T++];p[T]===255;)O+=255,T++;if(O+=p[T++],!x.payload&&C===je){var N=String.fromCharCode(p[T+3],p[T+4],p[T+5],p[T+6]);if(N==="GA94"){x.payloadType=C,x.payloadSize=O,x.payload=p.subarray(T,T+O);break}else x.payload=void 0}T+=O,C=0,O=0}return x},ii=function(p){return p.payload[0]!==181||(p.payload[1]<<8|p.payload[2])!==49||String.fromCharCode(p.payload[3],p.payload[4],p.payload[5],p.payload[6])!=="GA94"||p.payload[7]!==3?null:p.payload.subarray(8,p.payload.length-1)},on=function(p,T){var x=[],C,O,N,K;if(!(T[0]&64))return x;for(O=T[0]&31,C=0;C<O;C++)N=C*3,K={type:T[N+2]&3,pts:p},T[N+2]&4&&(K.ccData=T[N+3]<<8|T[N+4],x.push(K));return x},Ni=function(p){for(var T=p.byteLength,x=[],C=1,O,N;C<T-2;)p[C]===0&&p[C+1]===0&&p[C+2]===3?(x.push(C+2),C+=2):C++;if(x.length===0)return p;O=T-x.length,N=new Uint8Array(O);var K=0;for(C=0;C<O;K++,C++)K===x[0]&&(K++,x.shift()),N[C]=p[K];return N},pi={parseSei:jt,parseUserData:ii,parseCaptionPackets:on,discardEmulationPreventionBytes:Ni,USER_DATA_REGISTERED_ITU_T_T35:je},Ii=n,fs=pi,Cn=function(p){p=p||{},Cn.prototype.init.call(this),this.parse708captions_=typeof p.parse708captions=="boolean"?p.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new nn(0,0),new nn(0,1),new nn(1,0),new nn(1,1)],this.parse708captions_&&(this.cc708Stream_=new Pt({captionServices:p.captionServices})),this.reset(),this.ccStreams_.forEach(function(T){T.on("data",this.trigger.bind(this,"data")),T.on("partialdone",this.trigger.bind(this,"partialdone")),T.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Cn.prototype=new Ii,Cn.prototype.push=function(p){var T,x,C;if(p.nalUnitType==="sei_rbsp"&&(T=fs.parseSei(p.escapedRBSP),!!T.payload&&T.payloadType===fs.USER_DATA_REGISTERED_ITU_T_T35&&(x=fs.parseUserData(T),!!x))){if(p.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(p.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}C=fs.parseCaptionPackets(p.pts,x),this.captionPackets_=this.captionPackets_.concat(C),this.latestDts_!==p.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=p.dts}},Cn.prototype.flushCCStreams=function(p){this.ccStreams_.forEach(function(T){return p==="flush"?T.flush():T.partialFlush()},this)},Cn.prototype.flushStream=function(p){if(!this.captionPackets_.length){this.flushCCStreams(p);return}this.captionPackets_.forEach(function(T,x){T.presortIndex=x}),this.captionPackets_.sort(function(T,x){return T.pts===x.pts?T.presortIndex-x.presortIndex:T.pts-x.pts}),this.captionPackets_.forEach(function(T){T.type<2?this.dispatchCea608Packet(T):this.dispatchCea708Packet(T)},this),this.captionPackets_.length=0,this.flushCCStreams(p)},Cn.prototype.flush=function(){return this.flushStream("flush")},Cn.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Cn.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(p){p.reset()})},Cn.prototype.dispatchCea608Packet=function(p){this.setsTextOrXDSActive(p)?this.activeCea608Channel_[p.type]=null:this.setsChannel1Active(p)?this.activeCea608Channel_[p.type]=0:this.setsChannel2Active(p)&&(this.activeCea608Channel_[p.type]=1),this.activeCea608Channel_[p.type]!==null&&this.ccStreams_[(p.type<<1)+this.activeCea608Channel_[p.type]].push(p)},Cn.prototype.setsChannel1Active=function(p){return(p.ccData&30720)===4096},Cn.prototype.setsChannel2Active=function(p){return(p.ccData&30720)===6144},Cn.prototype.setsTextOrXDSActive=function(p){return(p.ccData&28928)===256||(p.ccData&30974)===4138||(p.ccData&30974)===6186},Cn.prototype.dispatchCea708Packet=function(p){this.parse708captions_&&this.cc708Stream_.push(p)};var si={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},fr=function(p){var T=si[p]||p;return p&4096&&p===T?"":String.fromCharCode(T)},Zs=function(p){return 32<=p&&p<=127||160<=p&&p<=255},Wt=function(p){this.windowNum=p,this.reset()};Wt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Wt.prototype.getText=function(){return this.rows.join(`
`)},Wt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Wt.prototype.newLine=function(p){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(p),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Wt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Wt.prototype.addText=function(p){this.rows[this.rowIdx]+=p},Wt.prototype.backspace=function(){if(!this.isEmpty()){var p=this.rows[this.rowIdx];this.rows[this.rowIdx]=p.substr(0,p.length-1)}};var Ur=function(p,T,x){this.serviceNum=p,this.text="",this.currentWindow=new Wt(-1),this.windows=[],this.stream=x,typeof T=="string"&&this.createTextDecoder(T)};Ur.prototype.init=function(p,T){this.startPts=p;for(var x=0;x<8;x++)this.windows[x]=new Wt(x),typeof T=="function"&&(this.windows[x].beforeRowOverflow=T)},Ur.prototype.setCurrentWindow=function(p){this.currentWindow=this.windows[p]},Ur.prototype.createTextDecoder=function(p){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(p)}catch(T){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+p+" encoding. "+T})}};var Pt=function(p){p=p||{},Pt.prototype.init.call(this);var T=this,x=p.captionServices||{},C={},O;Object.keys(x).forEach(N=>{O=x[N],/^SERVICE/.test(N)&&(C[N]=O.encoding)}),this.serviceEncodings=C,this.current708Packet=null,this.services={},this.push=function(N){N.type===3?(T.new708Packet(),T.add708Bytes(N)):(T.current708Packet===null&&T.new708Packet(),T.add708Bytes(N))}};Pt.prototype=new Ii,Pt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Pt.prototype.add708Bytes=function(p){var T=p.ccData,x=T>>>8,C=T&255;this.current708Packet.ptsVals.push(p.pts),this.current708Packet.data.push(x),this.current708Packet.data.push(C)},Pt.prototype.push708Packet=function(){var p=this.current708Packet,T=p.data,x=null,C=null,O=0,N=T[O++];for(p.seq=N>>6,p.sizeCode=N&63;O<T.length;O++)N=T[O++],x=N>>5,C=N&31,x===7&&C>0&&(N=T[O++],x=N),this.pushServiceBlock(x,O,C),C>0&&(O+=C-1)},Pt.prototype.pushServiceBlock=function(p,T,x){var C,O=T,N=this.current708Packet.data,K=this.services[p];for(K||(K=this.initService(p,O));O<T+x&&O<N.length;O++)C=N[O],Zs(C)?O=this.handleText(O,K):C===24?O=this.multiByteCharacter(O,K):C===16?O=this.extendedCommands(O,K):128<=C&&C<=135?O=this.setCurrentWindow(O,K):152<=C&&C<=159?O=this.defineWindow(O,K):C===136?O=this.clearWindows(O,K):C===140?O=this.deleteWindows(O,K):C===137?O=this.displayWindows(O,K):C===138?O=this.hideWindows(O,K):C===139?O=this.toggleWindows(O,K):C===151?O=this.setWindowAttributes(O,K):C===144?O=this.setPenAttributes(O,K):C===145?O=this.setPenColor(O,K):C===146?O=this.setPenLocation(O,K):C===143?K=this.reset(O,K):C===8?K.currentWindow.backspace():C===12?K.currentWindow.clearText():C===13?K.currentWindow.pendingNewLine=!0:C===14?K.currentWindow.clearText():C===141&&O++},Pt.prototype.extendedCommands=function(p,T){var x=this.current708Packet.data,C=x[++p];return Zs(C)&&(p=this.handleText(p,T,{isExtended:!0})),p},Pt.prototype.getPts=function(p){return this.current708Packet.ptsVals[Math.floor(p/2)]},Pt.prototype.initService=function(p,T){var C="SERVICE"+p,x=this,C,O;return C in this.serviceEncodings&&(O=this.serviceEncodings[C]),this.services[p]=new Ur(p,O,x),this.services[p].init(this.getPts(T),function(N){x.flushDisplayed(N,x.services[p])}),this.services[p]},Pt.prototype.handleText=function(p,T,x){var C=x&&x.isExtended,O=x&&x.isMultiByte,N=this.current708Packet.data,K=C?4096:0,Y=N[p],J=N[p+1],ie=T.currentWindow,ce,ke;function Xe(Ve){return Ve.map(lt=>("0"+(lt&255).toString(16)).slice(-2)).join("")}if(O?(ke=[Y,J],p++):ke=[Y],T.textDecoder_&&!C)ce=T.textDecoder_.decode(new Uint8Array(ke));else if(O){const Ve=Xe(ke);ce=String.fromCharCode(parseInt(Ve,16))}else ce=fr(K|Y);return ie.pendingNewLine&&!ie.isEmpty()&&ie.newLine(this.getPts(p)),ie.pendingNewLine=!1,ie.addText(ce),p},Pt.prototype.multiByteCharacter=function(p,T){var x=this.current708Packet.data,C=x[p+1],O=x[p+2];return Zs(C)&&Zs(O)&&(p=this.handleText(++p,T,{isMultiByte:!0})),p},Pt.prototype.setCurrentWindow=function(p,T){var x=this.current708Packet.data,C=x[p],O=C&7;return T.setCurrentWindow(O),p},Pt.prototype.defineWindow=function(p,T){var x=this.current708Packet.data,C=x[p],O=C&7;T.setCurrentWindow(O);var N=T.currentWindow;return C=x[++p],N.visible=(C&32)>>5,N.rowLock=(C&16)>>4,N.columnLock=(C&8)>>3,N.priority=C&7,C=x[++p],N.relativePositioning=(C&128)>>7,N.anchorVertical=C&127,C=x[++p],N.anchorHorizontal=C,C=x[++p],N.anchorPoint=(C&240)>>4,N.rowCount=C&15,C=x[++p],N.columnCount=C&63,C=x[++p],N.windowStyle=(C&56)>>3,N.penStyle=C&7,N.virtualRowCount=N.rowCount+1,p},Pt.prototype.setWindowAttributes=function(p,T){var x=this.current708Packet.data,C=x[p],O=T.currentWindow.winAttr;return C=x[++p],O.fillOpacity=(C&192)>>6,O.fillRed=(C&48)>>4,O.fillGreen=(C&12)>>2,O.fillBlue=C&3,C=x[++p],O.borderType=(C&192)>>6,O.borderRed=(C&48)>>4,O.borderGreen=(C&12)>>2,O.borderBlue=C&3,C=x[++p],O.borderType+=(C&128)>>5,O.wordWrap=(C&64)>>6,O.printDirection=(C&48)>>4,O.scrollDirection=(C&12)>>2,O.justify=C&3,C=x[++p],O.effectSpeed=(C&240)>>4,O.effectDirection=(C&12)>>2,O.displayEffect=C&3,p},Pt.prototype.flushDisplayed=function(p,T){for(var x=[],C=0;C<8;C++)T.windows[C].visible&&!T.windows[C].isEmpty()&&x.push(T.windows[C].getText());T.endPts=p,T.text=x.join(`

`),this.pushCaption(T),T.startPts=p},Pt.prototype.pushCaption=function(p){p.text!==""&&(this.trigger("data",{startPts:p.startPts,endPts:p.endPts,text:p.text,stream:"cc708_"+p.serviceNum}),p.text="",p.startPts=p.endPts)},Pt.prototype.displayWindows=function(p,T){var x=this.current708Packet.data,C=x[++p],O=this.getPts(p);this.flushDisplayed(O,T);for(var N=0;N<8;N++)C&1<<N&&(T.windows[N].visible=1);return p},Pt.prototype.hideWindows=function(p,T){var x=this.current708Packet.data,C=x[++p],O=this.getPts(p);this.flushDisplayed(O,T);for(var N=0;N<8;N++)C&1<<N&&(T.windows[N].visible=0);return p},Pt.prototype.toggleWindows=function(p,T){var x=this.current708Packet.data,C=x[++p],O=this.getPts(p);this.flushDisplayed(O,T);for(var N=0;N<8;N++)C&1<<N&&(T.windows[N].visible^=1);return p},Pt.prototype.clearWindows=function(p,T){var x=this.current708Packet.data,C=x[++p],O=this.getPts(p);this.flushDisplayed(O,T);for(var N=0;N<8;N++)C&1<<N&&T.windows[N].clearText();return p},Pt.prototype.deleteWindows=function(p,T){var x=this.current708Packet.data,C=x[++p],O=this.getPts(p);this.flushDisplayed(O,T);for(var N=0;N<8;N++)C&1<<N&&T.windows[N].reset();return p},Pt.prototype.setPenAttributes=function(p,T){var x=this.current708Packet.data,C=x[p],O=T.currentWindow.penAttr;return C=x[++p],O.textTag=(C&240)>>4,O.offset=(C&12)>>2,O.penSize=C&3,C=x[++p],O.italics=(C&128)>>7,O.underline=(C&64)>>6,O.edgeType=(C&56)>>3,O.fontStyle=C&7,p},Pt.prototype.setPenColor=function(p,T){var x=this.current708Packet.data,C=x[p],O=T.currentWindow.penColor;return C=x[++p],O.fgOpacity=(C&192)>>6,O.fgRed=(C&48)>>4,O.fgGreen=(C&12)>>2,O.fgBlue=C&3,C=x[++p],O.bgOpacity=(C&192)>>6,O.bgRed=(C&48)>>4,O.bgGreen=(C&12)>>2,O.bgBlue=C&3,C=x[++p],O.edgeRed=(C&48)>>4,O.edgeGreen=(C&12)>>2,O.edgeBlue=C&3,p},Pt.prototype.setPenLocation=function(p,T){var x=this.current708Packet.data,C=x[p],O=T.currentWindow.penLoc;return T.currentWindow.pendingNewLine=!0,C=x[++p],O.row=C&15,C=x[++p],O.column=C&63,p},Pt.prototype.reset=function(p,T){var x=this.getPts(p);return this.flushDisplayed(x,T),this.initService(T.serviceNum,p)};var Aa={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ls=function(p){return p===null?"":(p=Aa[p]||p,String.fromCharCode(p))},Al=14,dp=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],mr=function(){for(var p=[],T=Al+1;T--;)p.push({text:"",indent:0,offset:0});return p},nn=function(p,T){nn.prototype.init.call(this),this.field_=p||0,this.dataChannel_=T||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(x){var C,O,N,K,Y;if(C=x.ccData&32639,C===this.lastControlCode_){this.lastControlCode_=null;return}if((C&61440)===4096?this.lastControlCode_=C:C!==this.PADDING_&&(this.lastControlCode_=null),N=C>>>8,K=C&255,C!==this.PADDING_)if(C===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(C===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(x.pts),this.flushDisplayed(x.pts),O=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=O,this.startPts_=x.pts;else if(C===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(x.pts);else if(C===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(x.pts);else if(C===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(x.pts);else if(C===this.CARRIAGE_RETURN_)this.clearFormatting(x.pts),this.flushDisplayed(x.pts),this.shiftRowsUp_(),this.startPts_=x.pts;else if(C===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(C===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(x.pts),this.displayed_=mr();else if(C===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=mr();else if(C===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(x.pts),this.displayed_=mr()),this.mode_="paintOn",this.startPts_=x.pts;else if(this.isSpecialCharacter(N,K))N=(N&3)<<8,Y=Ls(N|K),this[this.mode_](x.pts,Y),this.column_++;else if(this.isExtCharacter(N,K))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),N=(N&3)<<8,Y=Ls(N|K),this[this.mode_](x.pts,Y),this.column_++;else if(this.isMidRowCode(N,K))this.clearFormatting(x.pts),this[this.mode_](x.pts," "),this.column_++,(K&14)===14&&this.addFormatting(x.pts,["i"]),(K&1)===1&&this.addFormatting(x.pts,["u"]);else if(this.isOffsetControlCode(N,K)){const ie=K&3;this.nonDisplayed_[this.row_].offset=ie,this.column_+=ie}else if(this.isPAC(N,K)){var J=dp.indexOf(C&7968);if(this.mode_==="rollUp"&&(J-this.rollUpRows_+1<0&&(J=this.rollUpRows_-1),this.setRollUp(x.pts,J)),J!==this.row_&&J>=0&&J<=14&&(this.clearFormatting(x.pts),this.row_=J),K&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(x.pts,["u"]),(C&16)===16){const ie=(C&14)>>1;this.column_=ie*4,this.nonDisplayed_[this.row_].indent+=ie}this.isColorPAC(K)&&(K&14)===14&&this.addFormatting(x.pts,["i"])}else this.isNormalChar(N)&&(K===0&&(K=null),Y=Ls(N),Y+=Ls(K),this[this.mode_](x.pts,Y),this.column_+=Y.length)}};nn.prototype=new Ii,nn.prototype.flushDisplayed=function(p){const T=C=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+C+"."})},x=[];this.displayed_.forEach((C,O)=>{if(C&&C.text&&C.text.length){try{C.text=C.text.trim()}catch{T(O)}C.text.length&&x.push({text:C.text,line:O+1,position:10+Math.min(70,C.indent*10)+C.offset*2.5})}else C==null&&T(O)}),x.length&&this.trigger("data",{startPts:this.startPts_,endPts:p,content:x,stream:this.name_})},nn.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=mr(),this.nonDisplayed_=mr(),this.lastControlCode_=null,this.column_=0,this.row_=Al,this.rollUpRows_=2,this.formatting_=[]},nn.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},nn.prototype.isSpecialCharacter=function(p,T){return p===this.EXT_&&T>=48&&T<=63},nn.prototype.isExtCharacter=function(p,T){return(p===this.EXT_+1||p===this.EXT_+2)&&T>=32&&T<=63},nn.prototype.isMidRowCode=function(p,T){return p===this.EXT_&&T>=32&&T<=47},nn.prototype.isOffsetControlCode=function(p,T){return p===this.OFFSET_&&T>=33&&T<=35},nn.prototype.isPAC=function(p,T){return p>=this.BASE_&&p<this.BASE_+8&&T>=64&&T<=127},nn.prototype.isColorPAC=function(p){return p>=64&&p<=79||p>=96&&p<=127},nn.prototype.isNormalChar=function(p){return p>=32&&p<=127},nn.prototype.setRollUp=function(p,T){if(this.mode_!=="rollUp"&&(this.row_=Al,this.mode_="rollUp",this.flushDisplayed(p),this.nonDisplayed_=mr(),this.displayed_=mr()),T!==void 0&&T!==this.row_)for(var x=0;x<this.rollUpRows_;x++)this.displayed_[T-x]=this.displayed_[this.row_-x],this.displayed_[this.row_-x]={text:"",indent:0,offset:0};T===void 0&&(T=this.row_),this.topRow_=T-this.rollUpRows_+1},nn.prototype.addFormatting=function(p,T){this.formatting_=this.formatting_.concat(T);var x=T.reduce(function(C,O){return C+"<"+O+">"},"");this[this.mode_](p,x)},nn.prototype.clearFormatting=function(p){if(this.formatting_.length){var T=this.formatting_.reverse().reduce(function(x,C){return x+"</"+C+">"},"");this.formatting_=[],this[this.mode_](p,T)}},nn.prototype.popOn=function(p,T){var x=this.nonDisplayed_[this.row_].text;x+=T,this.nonDisplayed_[this.row_].text=x},nn.prototype.rollUp=function(p,T){var x=this.displayed_[this.row_].text;x+=T,this.displayed_[this.row_].text=x},nn.prototype.shiftRowsUp_=function(){var p;for(p=0;p<this.topRow_;p++)this.displayed_[p]={text:"",indent:0,offset:0};for(p=this.row_+1;p<Al+1;p++)this.displayed_[p]={text:"",indent:0,offset:0};for(p=this.topRow_;p<this.row_;p++)this.displayed_[p]=this.displayed_[p+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},nn.prototype.paintOn=function(p,T){var x=this.displayed_[this.row_].text;x+=T,this.displayed_[this.row_].text=x};var dh={CaptionStream:Cn,Cea608Stream:nn,Cea708Stream:Pt},kl={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},D_=n,Zu=8589934592,hp=4294967296,ec="shared",ka=function(p,T){var x=1;for(p>T&&(x=-1);Math.abs(T-p)>hp;)p+=x*Zu;return p},pr=function(p){var T,x;pr.prototype.init.call(this),this.type_=p||ec,this.push=function(C){if(C.type==="metadata"){this.trigger("data",C);return}this.type_!==ec&&C.type!==this.type_||(x===void 0&&(x=C.dts),C.dts=ka(C.dts,x),C.pts=ka(C.pts,x),T=C.dts,this.trigger("data",C))},this.flush=function(){x=T,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){x=void 0,T=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};pr.prototype=new D_;var tc={TimestampRolloverStream:pr,handleRollover:ka},R_=(p,T,x)=>{if(!p)return-1;for(var C=x;C<p.length;C++)if(p[C]===T)return C;return-1},fp={typedArrayIndexOf:R_},Pl=fp.typedArrayIndexOf,Dl={Utf8:3},nc=function(p,T,x){var C,O="";for(C=T;C<x;C++)O+="%"+("00"+p[C].toString(16)).slice(-2);return O},Pa=function(p,T,x){return decodeURIComponent(nc(p,T,x))},po=function(p,T,x){return unescape(nc(p,T,x))},go=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},Rl={APIC:function(p){var T=1,x,C,O="-->";p.data[0]===Dl.Utf8&&(x=Pl(p.data,0,T),!(x<0)&&(p.mimeType=po(p.data,T,x),T=x+1,p.pictureType=p.data[T],T++,C=Pl(p.data,0,T),!(C<0)&&(p.description=Pa(p.data,T,C),T=C+1,p.mimeType===O?p.url=po(p.data,T,p.data.length):p.pictureData=p.data.subarray(T,p.data.length))))},"T*":function(p){p.data[0]===Dl.Utf8&&(p.value=Pa(p.data,1,p.data.length).replace(/\0*$/,""),p.values=p.value.split("\0"))},TXXX:function(p){var T;p.data[0]===Dl.Utf8&&(T=Pl(p.data,0,1),T!==-1&&(p.description=Pa(p.data,1,T),p.value=Pa(p.data,T+1,p.data.length).replace(/\0*$/,""),p.data=p.value))},"W*":function(p){p.url=po(p.data,0,p.data.length).replace(/\0.*$/,"")},WXXX:function(p){var T;p.data[0]===Dl.Utf8&&(T=Pl(p.data,0,1),T!==-1&&(p.description=Pa(p.data,1,T),p.url=po(p.data,T+1,p.data.length).replace(/\0.*$/,"")))},PRIV:function(p){var T;for(T=0;T<p.data.length;T++)if(p.data[T]===0){p.owner=po(p.data,0,T);break}p.privateData=p.data.subarray(T+1),p.data=p.privateData}},L_=function(p){var T,x,C=10,O=0,N=[];if(!(p.length<10||p[0]!==73||p[1]!==68||p[2]!==51)){O=go(p.subarray(6,10)),O+=10;var K=p[5]&64;K&&(C+=4,C+=go(p.subarray(10,14)),O-=go(p.subarray(16,20)));do{if(T=go(p.subarray(C+4,C+8)),T<1)break;x=String.fromCharCode(p[C],p[C+1],p[C+2],p[C+3]);var Y={id:x,data:p.subarray(C+10,C+T+10)};Y.key=Y.id,Rl[Y.id]?Rl[Y.id](Y):Y.id[0]==="T"?Rl["T*"](Y):Y.id[0]==="W"&&Rl["W*"](Y),N.push(Y),C+=10,C+=T}while(C<O);return N}},hh={parseId3Frames:L_,parseSyncSafeInteger:go,frameParsers:Rl},mp=n,O_=kl,Mi=hh,ms;ms=function(p){var T={descriptor:p&&p.descriptor},x=0,C=[],O=0,N;if(ms.prototype.init.call(this),this.dispatchType=O_.METADATA_STREAM_TYPE.toString(16),T.descriptor)for(N=0;N<T.descriptor.length;N++)this.dispatchType+=("00"+T.descriptor[N].toString(16)).slice(-2);this.push=function(K){var Y,J,ie,ce,ke,Xe;if(K.type==="timed-metadata"){if(K.dataAlignmentIndicator&&(O=0,C.length=0),C.length===0&&(K.data.length<10||K.data[0]!==73||K.data[1]!==68||K.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(C.push(K),O+=K.data.byteLength,C.length===1&&(x=Mi.parseSyncSafeInteger(K.data.subarray(6,10)),x+=10),!(O<x)){for(Y={data:new Uint8Array(x),frames:[],pts:C[0].pts,dts:C[0].dts},ke=0;ke<x;)Y.data.set(C[0].data.subarray(0,x-ke),ke),ke+=C[0].data.byteLength,O-=C[0].data.byteLength,C.shift();J=10,Y.data[5]&64&&(J+=4,J+=Mi.parseSyncSafeInteger(Y.data.subarray(10,14)),x-=Mi.parseSyncSafeInteger(Y.data.subarray(16,20)));do{if(ie=Mi.parseSyncSafeInteger(Y.data.subarray(J+4,J+8)),ie<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Xe=String.fromCharCode(Y.data[J],Y.data[J+1],Y.data[J+2],Y.data[J+3]),ce={id:Xe,data:Y.data.subarray(J+10,J+ie+10)},ce.key=ce.id,Mi.frameParsers[ce.id]?Mi.frameParsers[ce.id](ce):ce.id[0]==="T"?Mi.frameParsers["T*"](ce):ce.id[0]==="W"&&Mi.frameParsers["W*"](ce),ce.owner==="com.apple.streaming.transportStreamTimestamp"){var Ve=ce.data,lt=(Ve[3]&1)<<30|Ve[4]<<22|Ve[5]<<14|Ve[6]<<6|Ve[7]>>>2;lt*=4,lt+=Ve[7]&3,ce.timeStamp=lt,Y.pts===void 0&&Y.dts===void 0&&(Y.pts=ce.timeStamp,Y.dts=ce.timeStamp),this.trigger("timestamp",ce)}Y.frames.push(ce),J+=10,J+=ie}while(J<x);this.trigger("data",Y)}}}},ms.prototype=new mp;var ic=ms,vo=n,sc=dh,Rt=kl,rc=tc.TimestampRolloverStream,$r,gr,ac,Da=188,fh=71;$r=function(){var p=new Uint8Array(Da),T=0;$r.prototype.init.call(this),this.push=function(x){var C=0,O=Da,N;for(T?(N=new Uint8Array(x.byteLength+T),N.set(p.subarray(0,T)),N.set(x,T),T=0):N=x;O<N.byteLength;){if(N[C]===fh&&N[O]===fh){this.trigger("data",N.subarray(C,O)),C+=Da,O+=Da;continue}C++,O++}C<N.byteLength&&(p.set(N.subarray(C),0),T=N.byteLength-C)},this.flush=function(){T===Da&&p[0]===fh&&(this.trigger("data",p),T=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){T=0,this.trigger("reset")}},$r.prototype=new vo,gr=function(){var p,T,x,C;gr.prototype.init.call(this),C=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,p=function(O,N){var K=0;N.payloadUnitStartIndicator&&(K+=O[K]+1),N.type==="pat"?T(O.subarray(K),N):x(O.subarray(K),N)},T=function(O,N){N.section_number=O[7],N.last_section_number=O[8],C.pmtPid=(O[10]&31)<<8|O[11],N.pmtPid=C.pmtPid},x=function(O,N){var K,Y,J,ie;if(O[5]&1){for(C.programMapTable={video:null,audio:null,"timed-metadata":{}},K=(O[1]&15)<<8|O[2],Y=3+K-4,J=(O[10]&15)<<8|O[11],ie=12+J;ie<Y;){var ce=O[ie],ke=(O[ie+1]&31)<<8|O[ie+2];ce===Rt.H264_STREAM_TYPE&&C.programMapTable.video===null?C.programMapTable.video=ke:ce===Rt.ADTS_STREAM_TYPE&&C.programMapTable.audio===null?C.programMapTable.audio=ke:ce===Rt.METADATA_STREAM_TYPE&&(C.programMapTable["timed-metadata"][ke]=ce),ie+=((O[ie+3]&15)<<8|O[ie+4])+5}N.programMapTable=C.programMapTable}},this.push=function(O){var N={},K=4;if(N.payloadUnitStartIndicator=!!(O[1]&64),N.pid=O[1]&31,N.pid<<=8,N.pid|=O[2],(O[3]&48)>>>4>1&&(K+=O[K]+1),N.pid===0)N.type="pat",p(O.subarray(K),N),this.trigger("data",N);else if(N.pid===this.pmtPid)for(N.type="pmt",p(O.subarray(K),N),this.trigger("data",N);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([O,K,N]):this.processPes_(O,K,N)},this.processPes_=function(O,N,K){K.pid===this.programMapTable.video?K.streamType=Rt.H264_STREAM_TYPE:K.pid===this.programMapTable.audio?K.streamType=Rt.ADTS_STREAM_TYPE:K.streamType=this.programMapTable["timed-metadata"][K.pid],K.type="pes",K.data=O.subarray(N),this.trigger("data",K)}},gr.prototype=new vo,gr.STREAM_TYPES={h264:27,adts:15},ac=function(){var p=this,T=!1,x={data:[],size:0},C={data:[],size:0},O={data:[],size:0},N,K=function(J,ie){var ce;const ke=J[0]<<16|J[1]<<8|J[2];ie.data=new Uint8Array,ke===1&&(ie.packetLength=6+(J[4]<<8|J[5]),ie.dataAlignmentIndicator=(J[6]&4)!==0,ce=J[7],ce&192&&(ie.pts=(J[9]&14)<<27|(J[10]&255)<<20|(J[11]&254)<<12|(J[12]&255)<<5|(J[13]&254)>>>3,ie.pts*=4,ie.pts+=(J[13]&6)>>>1,ie.dts=ie.pts,ce&64&&(ie.dts=(J[14]&14)<<27|(J[15]&255)<<20|(J[16]&254)<<12|(J[17]&255)<<5|(J[18]&254)>>>3,ie.dts*=4,ie.dts+=(J[18]&6)>>>1)),ie.data=J.subarray(9+J[8]))},Y=function(J,ie,ce){var ke=new Uint8Array(J.size),Xe={type:ie},Ve=0,lt=0,xt=!1,vi;if(!(!J.data.length||J.size<9)){for(Xe.trackId=J.data[0].pid,Ve=0;Ve<J.data.length;Ve++)vi=J.data[Ve],ke.set(vi.data,lt),lt+=vi.data.byteLength;K(ke,Xe),xt=ie==="video"||Xe.packetLength<=J.size,(ce||xt)&&(J.size=0,J.data.length=0),xt&&p.trigger("data",Xe)}};ac.prototype.init.call(this),this.push=function(J){({pat:function(){},pes:function(){var ie,ce;switch(J.streamType){case Rt.H264_STREAM_TYPE:ie=x,ce="video";break;case Rt.ADTS_STREAM_TYPE:ie=C,ce="audio";break;case Rt.METADATA_STREAM_TYPE:ie=O,ce="timed-metadata";break;default:return}J.payloadUnitStartIndicator&&Y(ie,ce,!0),ie.data.push(J),ie.size+=J.data.byteLength},pmt:function(){var ie={type:"metadata",tracks:[]};N=J.programMapTable,N.video!==null&&ie.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.video,codec:"avc",type:"video"}),N.audio!==null&&ie.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.audio,codec:"adts",type:"audio"}),T=!0,p.trigger("data",ie)}})[J.type]()},this.reset=function(){x.size=0,x.data.length=0,C.size=0,C.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Y(x,"video"),Y(C,"audio"),Y(O,"timed-metadata")},this.flush=function(){if(!T&&N){var J={type:"metadata",tracks:[]};N.video!==null&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.video,codec:"avc",type:"video"}),N.audio!==null&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.audio,codec:"adts",type:"audio"}),p.trigger("data",J)}T=!1,this.flushStreams_(),this.trigger("done")}},ac.prototype=new vo;var pp={PAT_PID:0,MP2T_PACKET_LENGTH:Da,TransportPacketStream:$r,TransportParseStream:gr,ElementaryStream:ac,TimestampRolloverStream:rc,CaptionStream:sc.CaptionStream,Cea608Stream:sc.Cea608Stream,Cea708Stream:sc.Cea708Stream,MetadataStream:ic};for(var mh in Rt)Rt.hasOwnProperty(mh)&&(pp[mh]=Rt[mh]);var N_=pp,Ll=n,Hr=bt.ONE_SECOND_IN_TS,Ol,ph=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ol=function(p){var T,x=0;Ol.prototype.init.call(this),this.skipWarn_=function(C,O){this.trigger("log",{level:"warn",message:`adts skiping bytes ${C} to ${O} in frame ${x} outside syncword`})},this.push=function(C){var O=0,N,K,Y,J,ie;if(p||(x=0),C.type==="audio"){T&&T.length?(Y=T,T=new Uint8Array(Y.byteLength+C.data.byteLength),T.set(Y),T.set(C.data,Y.byteLength)):T=C.data;for(var ce;O+7<T.length;){if(T[O]!==255||(T[O+1]&246)!==240){typeof ce!="number"&&(ce=O),O++;continue}if(typeof ce=="number"&&(this.skipWarn_(ce,O),ce=null),K=(~T[O+1]&1)*2,N=(T[O+3]&3)<<11|T[O+4]<<3|(T[O+5]&224)>>5,J=((T[O+6]&3)+1)*1024,ie=J*Hr/ph[(T[O+2]&60)>>>2],T.byteLength-O<N)break;this.trigger("data",{pts:C.pts+x*ie,dts:C.dts+x*ie,sampleCount:J,audioobjecttype:(T[O+2]>>>6&3)+1,channelcount:(T[O+2]&1)<<2|(T[O+3]&192)>>>6,samplerate:ph[(T[O+2]&60)>>>2],samplingfrequencyindex:(T[O+2]&60)>>>2,samplesize:16,data:T.subarray(O+7+K,O+N)}),x++,O+=N}typeof ce=="number"&&(this.skipWarn_(ce,O),ce=null),T=T.subarray(O)}},this.flush=function(){x=0,this.trigger("done")},this.reset=function(){T=void 0,this.trigger("reset")},this.endTimeline=function(){T=void 0,this.trigger("endedtimeline")}},Ol.prototype=new Ll;var gp=Ol,Ra;Ra=function(p){var T=p.byteLength,x=0,C=0;this.length=function(){return 8*T},this.bitsAvailable=function(){return 8*T+C},this.loadWord=function(){var O=p.byteLength-T,N=new Uint8Array(4),K=Math.min(4,T);if(K===0)throw new Error("no bytes available");N.set(p.subarray(O,O+K)),x=new DataView(N.buffer).getUint32(0),C=K*8,T-=K},this.skipBits=function(O){var N;C>O?(x<<=O,C-=O):(O-=C,N=Math.floor(O/8),O-=N*8,T-=N,this.loadWord(),x<<=O,C-=O)},this.readBits=function(O){var N=Math.min(C,O),K=x>>>32-N;return C-=N,C>0?x<<=N:T>0&&this.loadWord(),N=O-N,N>0?K<<N|this.readBits(N):K},this.skipLeadingZeros=function(){var O;for(O=0;O<C;++O)if((x&2147483648>>>O)!==0)return x<<=O,C-=O,O;return this.loadWord(),O+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var O=this.skipLeadingZeros();return this.readBits(O+1)-1},this.readExpGolomb=function(){var O=this.readUnsignedExpGolomb();return 1&O?1+O>>>1:-1*(O>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var M_=Ra,vp=n,V_=M_,Os,oc,yp;oc=function(){var p=0,T,x;oc.prototype.init.call(this),this.push=function(C){var O;x?(O=new Uint8Array(x.byteLength+C.data.byteLength),O.set(x),O.set(C.data,x.byteLength),x=O):x=C.data;for(var N=x.byteLength;p<N-3;p++)if(x[p+2]===1){T=p+5;break}for(;T<N;)switch(x[T]){case 0:if(x[T-1]!==0){T+=2;break}else if(x[T-2]!==0){T++;break}p+3!==T-2&&this.trigger("data",x.subarray(p+3,T-2));do T++;while(x[T]!==1&&T<N);p=T-2,T+=3;break;case 1:if(x[T-1]!==0||x[T-2]!==0){T+=3;break}this.trigger("data",x.subarray(p+3,T-2)),p=T-2,T+=3;break;default:T+=3;break}x=x.subarray(p),T-=p,p=0},this.reset=function(){x=null,p=0,this.trigger("reset")},this.flush=function(){x&&x.byteLength>3&&this.trigger("data",x.subarray(p+3)),x=null,p=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},oc.prototype=new vp,yp={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Os=function(){var p=new oc,T,x,C,O,N,K,Y;Os.prototype.init.call(this),T=this,this.push=function(J){J.type==="video"&&(x=J.trackId,C=J.pts,O=J.dts,p.push(J))},p.on("data",function(J){var ie={trackId:x,pts:C,dts:O,data:J,nalUnitTypeCode:J[0]&31};switch(ie.nalUnitTypeCode){case 5:ie.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ie.nalUnitType="sei_rbsp",ie.escapedRBSP=N(J.subarray(1));break;case 7:ie.nalUnitType="seq_parameter_set_rbsp",ie.escapedRBSP=N(J.subarray(1)),ie.config=K(ie.escapedRBSP);break;case 8:ie.nalUnitType="pic_parameter_set_rbsp";break;case 9:ie.nalUnitType="access_unit_delimiter_rbsp";break}T.trigger("data",ie)}),p.on("done",function(){T.trigger("done")}),p.on("partialdone",function(){T.trigger("partialdone")}),p.on("reset",function(){T.trigger("reset")}),p.on("endedtimeline",function(){T.trigger("endedtimeline")}),this.flush=function(){p.flush()},this.partialFlush=function(){p.partialFlush()},this.reset=function(){p.reset()},this.endTimeline=function(){p.endTimeline()},Y=function(J,ie){var ce=8,ke=8,Xe,Ve;for(Xe=0;Xe<J;Xe++)ke!==0&&(Ve=ie.readExpGolomb(),ke=(ce+Ve+256)%256),ce=ke===0?ce:ke},N=function(J){for(var ie=J.byteLength,ce=[],ke=1,Xe,Ve;ke<ie-2;)J[ke]===0&&J[ke+1]===0&&J[ke+2]===3?(ce.push(ke+2),ke+=2):ke++;if(ce.length===0)return J;Xe=ie-ce.length,Ve=new Uint8Array(Xe);var lt=0;for(ke=0;ke<Xe;lt++,ke++)lt===ce[0]&&(lt++,ce.shift()),Ve[ke]=J[lt];return Ve},K=function(J){var ie=0,ce=0,ke=0,Xe=0,Ve,lt,xt,vi,Ns,Co,Dh,Rh,Lh,Oh,Pp,mn=[1,1],Nh,vr;if(Ve=new V_(J),lt=Ve.readUnsignedByte(),vi=Ve.readUnsignedByte(),xt=Ve.readUnsignedByte(),Ve.skipUnsignedExpGolomb(),yp[lt]&&(Ns=Ve.readUnsignedExpGolomb(),Ns===3&&Ve.skipBits(1),Ve.skipUnsignedExpGolomb(),Ve.skipUnsignedExpGolomb(),Ve.skipBits(1),Ve.readBoolean()))for(Pp=Ns!==3?8:12,vr=0;vr<Pp;vr++)Ve.readBoolean()&&(vr<6?Y(16,Ve):Y(64,Ve));if(Ve.skipUnsignedExpGolomb(),Co=Ve.readUnsignedExpGolomb(),Co===0)Ve.readUnsignedExpGolomb();else if(Co===1)for(Ve.skipBits(1),Ve.skipExpGolomb(),Ve.skipExpGolomb(),Dh=Ve.readUnsignedExpGolomb(),vr=0;vr<Dh;vr++)Ve.skipExpGolomb();if(Ve.skipUnsignedExpGolomb(),Ve.skipBits(1),Rh=Ve.readUnsignedExpGolomb(),Lh=Ve.readUnsignedExpGolomb(),Oh=Ve.readBits(1),Oh===0&&Ve.skipBits(1),Ve.skipBits(1),Ve.readBoolean()&&(ie=Ve.readUnsignedExpGolomb(),ce=Ve.readUnsignedExpGolomb(),ke=Ve.readUnsignedExpGolomb(),Xe=Ve.readUnsignedExpGolomb()),Ve.readBoolean()&&Ve.readBoolean()){switch(Nh=Ve.readUnsignedByte(),Nh){case 1:mn=[1,1];break;case 2:mn=[12,11];break;case 3:mn=[10,11];break;case 4:mn=[16,11];break;case 5:mn=[40,33];break;case 6:mn=[24,11];break;case 7:mn=[20,11];break;case 8:mn=[32,11];break;case 9:mn=[80,33];break;case 10:mn=[18,11];break;case 11:mn=[15,11];break;case 12:mn=[64,33];break;case 13:mn=[160,99];break;case 14:mn=[4,3];break;case 15:mn=[3,2];break;case 16:mn=[2,1];break;case 255:{mn=[Ve.readUnsignedByte()<<8|Ve.readUnsignedByte(),Ve.readUnsignedByte()<<8|Ve.readUnsignedByte()];break}}mn&&mn[0]/mn[1]}return{profileIdc:lt,levelIdc:xt,profileCompatibility:vi,width:(Rh+1)*16-ie*2-ce*2,height:(2-Oh)*(Lh+1)*16-ke*2-Xe*2,sarRatio:mn}}},Os.prototype=new vp;var lc={H264Stream:Os},uc=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],gh=function(p,T){var x=p[T+6]<<21|p[T+7]<<14|p[T+8]<<7|p[T+9],C=p[T+5],O=(C&16)>>4;return x=x>=0?x:0,O?x+20:x+10},yo=function(p,T){return p.length-T<10||p[T]!==73||p[T+1]!==68||p[T+2]!==51?T:(T+=gh(p,T),yo(p,T))},Nl=function(p){var T=yo(p,0);return p.length>=T+2&&(p[T]&255)===255&&(p[T+1]&240)===240&&(p[T+1]&22)===16},vh=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},yh=function(p,T,x){var C,O="";for(C=T;C<x;C++)O+="%"+("00"+p[C].toString(16)).slice(-2);return O},wn=function(p,T,x){return unescape(yh(p,T,x))},F_=function(p,T){var x=(p[T+5]&224)>>5,C=p[T+4]<<3,O=p[T+3]&6144;return O|C|x},B_=function(p,T){return p[T]===73&&p[T+1]===68&&p[T+2]===51?"timed-metadata":p[T]&!0&&(p[T+1]&240)===240?"audio":null},_p=function(p){for(var T=0;T+5<p.length;){if(p[T]!==255||(p[T+1]&246)!==240){T++;continue}return uc[(p[T+2]&60)>>>2]}return null},bp=function(p){var T,x,C,O;T=10,p[5]&64&&(T+=4,T+=vh(p.subarray(10,14)));do{if(x=vh(p.subarray(T+4,T+8)),x<1)return null;if(O=String.fromCharCode(p[T],p[T+1],p[T+2],p[T+3]),O==="PRIV"){C=p.subarray(T+10,T+x+10);for(var N=0;N<C.byteLength;N++)if(C[N]===0){var K=wn(C,0,N);if(K==="com.apple.streaming.transportStreamTimestamp"){var Y=C.subarray(N+1),J=(Y[3]&1)<<30|Y[4]<<22|Y[5]<<14|Y[6]<<6|Y[7]>>>2;return J*=4,J+=Y[7]&3,J}break}}T+=10,T+=x}while(T<p.byteLength);return null},cc={isLikelyAacData:Nl,parseId3TagSize:gh,parseAdtsSize:F_,parseType:B_,parseSampleRate:_p,parseAacTimestamp:bp},dc=n,_h=cc,ps;ps=function(){var p=new Uint8Array,T=0;ps.prototype.init.call(this),this.setTimestamp=function(x){T=x},this.push=function(x){var C=0,O=0,N,K,Y,J;for(p.length?(J=p.length,p=new Uint8Array(x.byteLength+J),p.set(p.subarray(0,J)),p.set(x,J)):p=x;p.length-O>=3;){if(p[O]===73&&p[O+1]===68&&p[O+2]===51){if(p.length-O<10||(C=_h.parseId3TagSize(p,O),O+C>p.length))break;K={type:"timed-metadata",data:p.subarray(O,O+C)},this.trigger("data",K),O+=C;continue}else if((p[O]&255)===255&&(p[O+1]&240)===240){if(p.length-O<7||(C=_h.parseAdtsSize(p,O),O+C>p.length))break;Y={type:"audio",data:p.subarray(O,O+C),pts:T,dts:T},this.trigger("data",Y),O+=C;continue}O++}N=p.length-O,N>0?p=p.subarray(O):p=new Uint8Array},this.reset=function(){p=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){p=new Uint8Array,this.trigger("endedtimeline")}},ps.prototype=new dc;var Tp=ps,U_=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ml=U_,Sp=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],bh=Sp,La=n,_o=re,jr=_e,hc=Il,gs=Ee,ts=N_,Vl=bt,Th=gp,Sh=lc.H264Stream,Eh=Tp,Ep=cc.isLikelyAacData,fc=bt.ONE_SECOND_IN_TS,Ch=Ml,wh=bh,er,bo,Fl,qr,Cp=function(p,T){T.stream=p,this.trigger("log",T)},Bl=function(p,T){for(var x=Object.keys(T),C=0;C<x.length;C++){var O=x[C];O==="headOfPipeline"||!T[O].on||T[O].on("log",Cp.bind(p,O))}},Vi=function(p,T){var x;if(p.length!==T.length)return!1;for(x=0;x<p.length;x++)if(p[x]!==T[x])return!1;return!0},xh=function(p,T,x,C,O,N){var K=x-T,Y=C-T,J=O-x;return{start:{dts:p,pts:p+K},end:{dts:p+Y,pts:p+J},prependedContentDuration:N,baseMediaDecodeTime:p}};bo=function(p,T){var x=[],C,O=0,N=0,K=1/0;T=T||{},C=T.firstSequenceNumber||0,bo.prototype.init.call(this),this.push=function(Y){gs.collectDtsInfo(p,Y),p&&Ch.forEach(function(J){p[J]=Y[J]}),x.push(Y)},this.setEarliestDts=function(Y){O=Y},this.setVideoBaseMediaDecodeTime=function(Y){K=Y},this.setAudioAppendStart=function(Y){N=Y},this.flush=function(){var Y,J,ie,ce,ke,Xe,Ve;if(x.length===0){this.trigger("done","AudioSegmentStream");return}Y=hc.trimAdtsFramesByEarliestDts(x,p,O),p.baseMediaDecodeTime=gs.calculateTrackBaseMediaDecodeTime(p,T.keepOriginalTimestamps),Ve=hc.prefixWithSilence(p,Y,N,K),p.samples=hc.generateSampleTable(Y),ie=_o.mdat(hc.concatenateFrameData(Y)),x=[],J=_o.moof(C,[p]),ce=new Uint8Array(J.byteLength+ie.byteLength),C++,ce.set(J),ce.set(ie,J.byteLength),gs.clearDtsInfo(p),ke=Math.ceil(fc*1024/p.samplerate),Y.length&&(Xe=Y.length*ke,this.trigger("segmentTimingInfo",xh(Vl.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),Y[0].dts,Y[0].pts,Y[0].dts+Xe,Y[0].pts+Xe,Ve||0)),this.trigger("timingInfo",{start:Y[0].pts,end:Y[0].pts+Xe})),this.trigger("data",{track:p,boxes:ce}),this.trigger("done","AudioSegmentStream")},this.reset=function(){gs.clearDtsInfo(p),x=[],this.trigger("reset")}},bo.prototype=new La,er=function(p,T){var x,C=[],O=[],N,K;T=T||{},x=T.firstSequenceNumber||0,er.prototype.init.call(this),delete p.minPTS,this.gopCache_=[],this.push=function(Y){gs.collectDtsInfo(p,Y),Y.nalUnitType==="seq_parameter_set_rbsp"&&!N&&(N=Y.config,p.sps=[Y.data],wh.forEach(function(J){p[J]=N[J]},this)),Y.nalUnitType==="pic_parameter_set_rbsp"&&!K&&(K=Y.data,p.pps=[Y.data]),C.push(Y)},this.flush=function(){for(var Y,J,ie,ce,ke,Xe,Ve=0,lt,xt;C.length&&C[0].nalUnitType!=="access_unit_delimiter_rbsp";)C.shift();if(C.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(Y=jr.groupNalsIntoFrames(C),ie=jr.groupFramesIntoGops(Y),ie[0][0].keyFrame||(J=this.getGopForFusion_(C[0],p),J?(Ve=J.duration,ie.unshift(J),ie.byteLength+=J.byteLength,ie.nalCount+=J.nalCount,ie.pts=J.pts,ie.dts=J.dts,ie.duration+=J.duration):ie=jr.extendFirstKeyFrame(ie)),O.length){var vi;if(T.alignGopsAtEnd?vi=this.alignGopsAtEnd_(ie):vi=this.alignGopsAtStart_(ie),!vi){this.gopCache_.unshift({gop:ie.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),C=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}gs.clearDtsInfo(p),ie=vi}gs.collectDtsInfo(p,ie),p.samples=jr.generateSampleTable(ie),ke=_o.mdat(jr.concatenateNalData(ie)),p.baseMediaDecodeTime=gs.calculateTrackBaseMediaDecodeTime(p,T.keepOriginalTimestamps),this.trigger("processedGopsInfo",ie.map(function(Ns){return{pts:Ns.pts,dts:Ns.dts,byteLength:Ns.byteLength}})),lt=ie[0],xt=ie[ie.length-1],this.trigger("segmentTimingInfo",xh(p.baseMediaDecodeTime,lt.dts,lt.pts,xt.dts+xt.duration,xt.pts+xt.duration,Ve)),this.trigger("timingInfo",{start:ie[0].pts,end:ie[ie.length-1].pts+ie[ie.length-1].duration}),this.gopCache_.unshift({gop:ie.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),C=[],this.trigger("baseMediaDecodeTime",p.baseMediaDecodeTime),this.trigger("timelineStartInfo",p.timelineStartInfo),ce=_o.moof(x,[p]),Xe=new Uint8Array(ce.byteLength+ke.byteLength),x++,Xe.set(ce),Xe.set(ke,ce.byteLength),this.trigger("data",{track:p,boxes:Xe}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),C=[],this.gopCache_.length=0,O.length=0,this.trigger("reset")},this.resetStream_=function(){gs.clearDtsInfo(p),N=void 0,K=void 0},this.getGopForFusion_=function(Y){var J=45e3,ie=1/0,ce,ke,Xe,Ve,lt;for(lt=0;lt<this.gopCache_.length;lt++)Ve=this.gopCache_[lt],Xe=Ve.gop,!(!(p.pps&&Vi(p.pps[0],Ve.pps[0]))||!(p.sps&&Vi(p.sps[0],Ve.sps[0])))&&(Xe.dts<p.timelineStartInfo.dts||(ce=Y.dts-Xe.dts-Xe.duration,ce>=-1e4&&ce<=J&&(!ke||ie>ce)&&(ke=Ve,ie=ce)));return ke?ke.gop:null},this.alignGopsAtStart_=function(Y){var J,ie,ce,ke,Xe,Ve,lt,xt;for(Xe=Y.byteLength,Ve=Y.nalCount,lt=Y.duration,J=ie=0;J<O.length&&ie<Y.length&&(ce=O[J],ke=Y[ie],ce.pts!==ke.pts);){if(ke.pts>ce.pts){J++;continue}ie++,Xe-=ke.byteLength,Ve-=ke.nalCount,lt-=ke.duration}return ie===0?Y:ie===Y.length?null:(xt=Y.slice(ie),xt.byteLength=Xe,xt.duration=lt,xt.nalCount=Ve,xt.pts=xt[0].pts,xt.dts=xt[0].dts,xt)},this.alignGopsAtEnd_=function(Y){var J,ie,ce,ke,Xe,Ve;for(J=O.length-1,ie=Y.length-1,Xe=null,Ve=!1;J>=0&&ie>=0;){if(ce=O[J],ke=Y[ie],ce.pts===ke.pts){Ve=!0;break}if(ce.pts>ke.pts){J--;continue}J===O.length-1&&(Xe=ie),ie--}if(!Ve&&Xe===null)return null;var lt;if(Ve?lt=ie:lt=Xe,lt===0)return Y;var xt=Y.slice(lt),vi=xt.reduce(function(Ns,Co){return Ns.byteLength+=Co.byteLength,Ns.duration+=Co.duration,Ns.nalCount+=Co.nalCount,Ns},{byteLength:0,duration:0,nalCount:0});return xt.byteLength=vi.byteLength,xt.duration=vi.duration,xt.nalCount=vi.nalCount,xt.pts=xt[0].pts,xt.dts=xt[0].dts,xt},this.alignGopsWith=function(Y){O=Y}},er.prototype=new La,qr=function(p,T){this.numberOfTracks=0,this.metadataStream=T,p=p||{},typeof p.remux<"u"?this.remuxTracks=!!p.remux:this.remuxTracks=!0,typeof p.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=p.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,qr.prototype.init.call(this),this.push=function(x){if(x.content||x.text)return this.pendingCaptions.push(x);if(x.frames)return this.pendingMetadata.push(x);this.pendingTracks.push(x.track),this.pendingBytes+=x.boxes.byteLength,x.track.type==="video"&&(this.videoTrack=x.track,this.pendingBoxes.push(x.boxes)),x.track.type==="audio"&&(this.audioTrack=x.track,this.pendingBoxes.unshift(x.boxes))}},qr.prototype=new La,qr.prototype.flush=function(p){var T=0,x={captions:[],captionStreams:{},metadata:[],info:{}},C,O,N,K=0,Y;if(this.pendingTracks.length<this.numberOfTracks){if(p!=="VideoSegmentStream"&&p!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(K=this.videoTrack.timelineStartInfo.pts,wh.forEach(function(J){x.info[J]=this.videoTrack[J]},this)):this.audioTrack&&(K=this.audioTrack.timelineStartInfo.pts,Ch.forEach(function(J){x.info[J]=this.audioTrack[J]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?x.type=this.pendingTracks[0].type:x.type="combined",this.emittedTracks+=this.pendingTracks.length,N=_o.initSegment(this.pendingTracks),x.initSegment=new Uint8Array(N.byteLength),x.initSegment.set(N),x.data=new Uint8Array(this.pendingBytes),Y=0;Y<this.pendingBoxes.length;Y++)x.data.set(this.pendingBoxes[Y],T),T+=this.pendingBoxes[Y].byteLength;for(Y=0;Y<this.pendingCaptions.length;Y++)C=this.pendingCaptions[Y],C.startTime=Vl.metadataTsToSeconds(C.startPts,K,this.keepOriginalTimestamps),C.endTime=Vl.metadataTsToSeconds(C.endPts,K,this.keepOriginalTimestamps),x.captionStreams[C.stream]=!0,x.captions.push(C);for(Y=0;Y<this.pendingMetadata.length;Y++)O=this.pendingMetadata[Y],O.cueTime=Vl.metadataTsToSeconds(O.pts,K,this.keepOriginalTimestamps),x.metadata.push(O);for(x.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",x),Y=0;Y<x.captions.length;Y++)C=x.captions[Y],this.trigger("caption",C);for(Y=0;Y<x.metadata.length;Y++)O=x.metadata[Y],this.trigger("id3Frame",O)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},qr.prototype.setRemux=function(p){this.remuxTracks=p},Fl=function(p){var T=this,x=!0,C,O;Fl.prototype.init.call(this),p=p||{},this.baseMediaDecodeTime=p.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var N={};this.transmuxPipeline_=N,N.type="aac",N.metadataStream=new ts.MetadataStream,N.aacStream=new Eh,N.audioTimestampRolloverStream=new ts.TimestampRolloverStream("audio"),N.timedMetadataTimestampRolloverStream=new ts.TimestampRolloverStream("timed-metadata"),N.adtsStream=new Th,N.coalesceStream=new qr(p,N.metadataStream),N.headOfPipeline=N.aacStream,N.aacStream.pipe(N.audioTimestampRolloverStream).pipe(N.adtsStream),N.aacStream.pipe(N.timedMetadataTimestampRolloverStream).pipe(N.metadataStream).pipe(N.coalesceStream),N.metadataStream.on("timestamp",function(K){N.aacStream.setTimestamp(K.timeStamp)}),N.aacStream.on("data",function(K){K.type!=="timed-metadata"&&K.type!=="audio"||N.audioSegmentStream||(O=O||{timelineStartInfo:{baseMediaDecodeTime:T.baseMediaDecodeTime},codec:"adts",type:"audio"},N.coalesceStream.numberOfTracks++,N.audioSegmentStream=new bo(O,p),N.audioSegmentStream.on("log",T.getLogTrigger_("audioSegmentStream")),N.audioSegmentStream.on("timingInfo",T.trigger.bind(T,"audioTimingInfo")),N.adtsStream.pipe(N.audioSegmentStream).pipe(N.coalesceStream),T.trigger("trackinfo",{hasAudio:!!O,hasVideo:!!C}))}),N.coalesceStream.on("data",this.trigger.bind(this,"data")),N.coalesceStream.on("done",this.trigger.bind(this,"done")),Bl(this,N)},this.setupTsPipeline=function(){var N={};this.transmuxPipeline_=N,N.type="ts",N.metadataStream=new ts.MetadataStream,N.packetStream=new ts.TransportPacketStream,N.parseStream=new ts.TransportParseStream,N.elementaryStream=new ts.ElementaryStream,N.timestampRolloverStream=new ts.TimestampRolloverStream,N.adtsStream=new Th,N.h264Stream=new Sh,N.captionStream=new ts.CaptionStream(p),N.coalesceStream=new qr(p,N.metadataStream),N.headOfPipeline=N.packetStream,N.packetStream.pipe(N.parseStream).pipe(N.elementaryStream).pipe(N.timestampRolloverStream),N.timestampRolloverStream.pipe(N.h264Stream),N.timestampRolloverStream.pipe(N.adtsStream),N.timestampRolloverStream.pipe(N.metadataStream).pipe(N.coalesceStream),N.h264Stream.pipe(N.captionStream).pipe(N.coalesceStream),N.elementaryStream.on("data",function(K){var Y;if(K.type==="metadata"){for(Y=K.tracks.length;Y--;)!C&&K.tracks[Y].type==="video"?(C=K.tracks[Y],C.timelineStartInfo.baseMediaDecodeTime=T.baseMediaDecodeTime):!O&&K.tracks[Y].type==="audio"&&(O=K.tracks[Y],O.timelineStartInfo.baseMediaDecodeTime=T.baseMediaDecodeTime);C&&!N.videoSegmentStream&&(N.coalesceStream.numberOfTracks++,N.videoSegmentStream=new er(C,p),N.videoSegmentStream.on("log",T.getLogTrigger_("videoSegmentStream")),N.videoSegmentStream.on("timelineStartInfo",function(J){O&&!p.keepOriginalTimestamps&&(O.timelineStartInfo=J,N.audioSegmentStream.setEarliestDts(J.dts-T.baseMediaDecodeTime))}),N.videoSegmentStream.on("processedGopsInfo",T.trigger.bind(T,"gopInfo")),N.videoSegmentStream.on("segmentTimingInfo",T.trigger.bind(T,"videoSegmentTimingInfo")),N.videoSegmentStream.on("baseMediaDecodeTime",function(J){O&&N.audioSegmentStream.setVideoBaseMediaDecodeTime(J)}),N.videoSegmentStream.on("timingInfo",T.trigger.bind(T,"videoTimingInfo")),N.h264Stream.pipe(N.videoSegmentStream).pipe(N.coalesceStream)),O&&!N.audioSegmentStream&&(N.coalesceStream.numberOfTracks++,N.audioSegmentStream=new bo(O,p),N.audioSegmentStream.on("log",T.getLogTrigger_("audioSegmentStream")),N.audioSegmentStream.on("timingInfo",T.trigger.bind(T,"audioTimingInfo")),N.audioSegmentStream.on("segmentTimingInfo",T.trigger.bind(T,"audioSegmentTimingInfo")),N.adtsStream.pipe(N.audioSegmentStream).pipe(N.coalesceStream)),T.trigger("trackinfo",{hasAudio:!!O,hasVideo:!!C})}}),N.coalesceStream.on("data",this.trigger.bind(this,"data")),N.coalesceStream.on("id3Frame",function(K){K.dispatchType=N.metadataStream.dispatchType,T.trigger("id3Frame",K)}),N.coalesceStream.on("caption",this.trigger.bind(this,"caption")),N.coalesceStream.on("done",this.trigger.bind(this,"done")),Bl(this,N)},this.setBaseMediaDecodeTime=function(N){var K=this.transmuxPipeline_;p.keepOriginalTimestamps||(this.baseMediaDecodeTime=N),O&&(O.timelineStartInfo.dts=void 0,O.timelineStartInfo.pts=void 0,gs.clearDtsInfo(O),K.audioTimestampRolloverStream&&K.audioTimestampRolloverStream.discontinuity()),C&&(K.videoSegmentStream&&(K.videoSegmentStream.gopCache_=[]),C.timelineStartInfo.dts=void 0,C.timelineStartInfo.pts=void 0,gs.clearDtsInfo(C),K.captionStream.reset()),K.timestampRolloverStream&&K.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(N){O&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(N)},this.setRemux=function(N){var K=this.transmuxPipeline_;p.remux=N,K&&K.coalesceStream&&K.coalesceStream.setRemux(N)},this.alignGopsWith=function(N){C&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(N)},this.getLogTrigger_=function(N){var K=this;return function(Y){Y.stream=N,K.trigger("log",Y)}},this.push=function(N){if(x){var K=Ep(N);K&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!K&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),x=!1}this.transmuxPipeline_.headOfPipeline.push(N)},this.flush=function(){x=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Fl.prototype=new La;var wp={Transmuxer:Fl},To=function(p){return p>>>0},m=function(p){return("00"+p.toString(16)).slice(-2)},L={toUnsigned:To,toHexString:m},B=function(p){var T="";return T+=String.fromCharCode(p[0]),T+=String.fromCharCode(p[1]),T+=String.fromCharCode(p[2]),T+=String.fromCharCode(p[3]),T},G=B,ge=L.toUnsigned,Ae=G,Ge=function(p,T){var x=[],C,O,N,K,Y;if(!T.length)return null;for(C=0;C<p.byteLength;)O=ge(p[C]<<24|p[C+1]<<16|p[C+2]<<8|p[C+3]),N=Ae(p.subarray(C+4,C+8)),K=O>1?C+O:p.byteLength,N===T[0]&&(T.length===1?x.push(p.subarray(C+8,K)):(Y=Ge(p.subarray(C+8,K),T.slice(1)),Y.length&&(x=x.concat(Y)))),C=K;return x},Gt=Ge,ri=L.toUnsigned,Ft=r.getUint64,gi=function(p){var T={version:p[0],flags:new Uint8Array(p.subarray(1,4))};return T.version===1?T.baseMediaDecodeTime=Ft(p.subarray(4)):T.baseMediaDecodeTime=ri(p[4]<<24|p[5]<<16|p[6]<<8|p[7]),T},Qn=gi,So=function(p){var T=new DataView(p.buffer,p.byteOffset,p.byteLength),x={version:p[0],flags:new Uint8Array(p.subarray(1,4)),trackId:T.getUint32(4)},C=x.flags[2]&1,O=x.flags[2]&2,N=x.flags[2]&8,K=x.flags[2]&16,Y=x.flags[2]&32,J=x.flags[0]&65536,ie=x.flags[0]&131072,ce;return ce=8,C&&(ce+=4,x.baseDataOffset=T.getUint32(12),ce+=4),O&&(x.sampleDescriptionIndex=T.getUint32(ce),ce+=4),N&&(x.defaultSampleDuration=T.getUint32(ce),ce+=4),K&&(x.defaultSampleSize=T.getUint32(ce),ce+=4),Y&&(x.defaultSampleFlags=T.getUint32(ce)),J&&(x.durationIsEmpty=!0),!C&&ie&&(x.baseDataOffsetIsMoof=!0),x},vs=So,mc=function(p){return{isLeading:(p[0]&12)>>>2,dependsOn:p[0]&3,isDependedOn:(p[1]&192)>>>6,hasRedundancy:(p[1]&48)>>>4,paddingValue:(p[1]&14)>>>1,isNonSyncSample:p[1]&1,degradationPriority:p[2]<<8|p[3]}},Ih=mc,yw=Ih,wB=function(p){var T={version:p[0],flags:new Uint8Array(p.subarray(1,4)),samples:[]},x=new DataView(p.buffer,p.byteOffset,p.byteLength),C=T.flags[2]&1,O=T.flags[2]&4,N=T.flags[1]&1,K=T.flags[1]&2,Y=T.flags[1]&4,J=T.flags[1]&8,ie=x.getUint32(4),ce=8,ke;for(C&&(T.dataOffset=x.getInt32(ce),ce+=4),O&&ie&&(ke={flags:yw(p.subarray(ce,ce+4))},ce+=4,N&&(ke.duration=x.getUint32(ce),ce+=4),K&&(ke.size=x.getUint32(ce),ce+=4),J&&(T.version===1?ke.compositionTimeOffset=x.getInt32(ce):ke.compositionTimeOffset=x.getUint32(ce),ce+=4),T.samples.push(ke),ie--);ie--;)ke={},N&&(ke.duration=x.getUint32(ce),ce+=4),K&&(ke.size=x.getUint32(ce),ce+=4),Y&&(ke.flags=yw(p.subarray(ce,ce+4)),ce+=4),J&&(T.version===1?ke.compositionTimeOffset=x.getInt32(ce):ke.compositionTimeOffset=x.getUint32(ce),ce+=4),T.samples.push(ke);return T},_w=wB,bw={tfdt:Qn,trun:_w},Tw={parseTfdt:bw.tfdt,parseTrun:bw.trun},xB=function(p){for(var T=0,x=String.fromCharCode(p[T]),C="";x!=="\0";)C+=x,T++,x=String.fromCharCode(p[T]);return C+=x,C},IB={uint8ToCString:xB},xp=IB.uint8ToCString,AB=r.getUint64,kB=function(p){var T=4,x=p[0],C,O,N,K,Y,J,ie,ce;if(x===0){C=xp(p.subarray(T)),T+=C.length,O=xp(p.subarray(T)),T+=O.length;var ke=new DataView(p.buffer);N=ke.getUint32(T),T+=4,Y=ke.getUint32(T),T+=4,J=ke.getUint32(T),T+=4,ie=ke.getUint32(T),T+=4}else if(x===1){var ke=new DataView(p.buffer);N=ke.getUint32(T),T+=4,K=AB(p.subarray(T)),T+=8,J=ke.getUint32(T),T+=4,ie=ke.getUint32(T),T+=4,C=xp(p.subarray(T)),T+=C.length,O=xp(p.subarray(T)),T+=O.length}ce=new Uint8Array(p.subarray(T,p.byteLength));var Xe={scheme_id_uri:C,value:O,timescale:N||1,presentation_time:K,presentation_time_delta:Y,event_duration:J,id:ie,message_data:ce};return DB(x,Xe)?Xe:void 0},PB=function(p,T,x,C){return p||p===0?p/T:C+x/T},DB=function(p,T){var x=T.scheme_id_uri!=="\0",C=p===0&&Sw(T.presentation_time_delta)&&x,O=p===1&&Sw(T.presentation_time)&&x;return!(p>1)&&C||O},Sw=function(p){return p!==void 0||p!==null},RB={parseEmsgBox:kB,scaleTime:PB},Ah;typeof window<"u"?Ah=window:typeof t<"u"?Ah=t:typeof self<"u"?Ah=self:Ah={};var Ew=Ah,Ip=L.toUnsigned,kh=L.toHexString,Hn=Gt,pc=G,$_=RB,LB=vs,OB=_w,NB=Qn,MB=r.getUint64,Cw,ww,xw,Iw,Aw,H_,kw,j_=Ew,VB=hh.parseId3Frames;Cw=function(p){var T={},x=Hn(p,["moov","trak"]);return x.reduce(function(C,O){var N,K,Y,J,ie;return N=Hn(O,["tkhd"])[0],!N||(K=N[0],Y=K===0?12:20,J=Ip(N[Y]<<24|N[Y+1]<<16|N[Y+2]<<8|N[Y+3]),ie=Hn(O,["mdia","mdhd"])[0],!ie)?null:(K=ie[0],Y=K===0?12:20,C[J]=Ip(ie[Y]<<24|ie[Y+1]<<16|ie[Y+2]<<8|ie[Y+3]),C)},T)},ww=function(p,T){var x;x=Hn(T,["moof","traf"]);var C=x.reduce(function(O,N){var K=Hn(N,["tfhd"])[0],Y=Ip(K[4]<<24|K[5]<<16|K[6]<<8|K[7]),J=p[Y]||9e4,ie=Hn(N,["tfdt"])[0],ce=new DataView(ie.buffer,ie.byteOffset,ie.byteLength),ke;ie[0]===1?ke=MB(ie.subarray(4,12)):ke=ce.getUint32(4);let Xe;return typeof ke=="bigint"?Xe=ke/j_.BigInt(J):typeof ke=="number"&&!isNaN(ke)&&(Xe=ke/J),Xe<Number.MAX_SAFE_INTEGER&&(Xe=Number(Xe)),Xe<O&&(O=Xe),O},1/0);return typeof C=="bigint"||isFinite(C)?C:0},xw=function(p,T){var x=Hn(T,["moof","traf"]),C=0,O=0,N;if(x&&x.length){var K=Hn(x[0],["tfhd"])[0],Y=Hn(x[0],["trun"])[0],J=Hn(x[0],["tfdt"])[0];if(K){var ie=LB(K);N=ie.trackId}if(J){var ce=NB(J);C=ce.baseMediaDecodeTime}if(Y){var ke=OB(Y);ke.samples&&ke.samples.length&&(O=ke.samples[0].compositionTimeOffset||0)}}var Xe=p[N]||9e4;typeof C=="bigint"&&(O=j_.BigInt(O),Xe=j_.BigInt(Xe));var Ve=(C+O)/Xe;return typeof Ve=="bigint"&&Ve<Number.MAX_SAFE_INTEGER&&(Ve=Number(Ve)),Ve},Iw=function(p){var T=Hn(p,["moov","trak"]),x=[];return T.forEach(function(C){var O=Hn(C,["mdia","hdlr"]),N=Hn(C,["tkhd"]);O.forEach(function(K,Y){var J=pc(K.subarray(8,12)),ie=N[Y],ce,ke,Xe;J==="vide"&&(ce=new DataView(ie.buffer,ie.byteOffset,ie.byteLength),ke=ce.getUint8(0),Xe=ke===0?ce.getUint32(12):ce.getUint32(20),x.push(Xe))})}),x},H_=function(p){var T=p[0],x=T===0?12:20;return Ip(p[x]<<24|p[x+1]<<16|p[x+2]<<8|p[x+3])},Aw=function(p){var T=Hn(p,["moov","trak"]),x=[];return T.forEach(function(C){var O={},N=Hn(C,["tkhd"])[0],K,Y;N&&(K=new DataView(N.buffer,N.byteOffset,N.byteLength),Y=K.getUint8(0),O.id=Y===0?K.getUint32(12):K.getUint32(20));var J=Hn(C,["mdia","hdlr"])[0];if(J){var ie=pc(J.subarray(8,12));ie==="vide"?O.type="video":ie==="soun"?O.type="audio":O.type=ie}var ce=Hn(C,["mdia","minf","stbl","stsd"])[0];if(ce){var ke=ce.subarray(8);O.codec=pc(ke.subarray(4,8));var Xe=Hn(ke,[O.codec])[0],Ve,lt;Xe&&(/^[asm]vc[1-9]$/i.test(O.codec)?(Ve=Xe.subarray(78),lt=pc(Ve.subarray(4,8)),lt==="avcC"&&Ve.length>11?(O.codec+=".",O.codec+=kh(Ve[9]),O.codec+=kh(Ve[10]),O.codec+=kh(Ve[11])):O.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(O.codec)?(Ve=Xe.subarray(28),lt=pc(Ve.subarray(4,8)),lt==="esds"&&Ve.length>20&&Ve[19]!==0?(O.codec+="."+kh(Ve[19]),O.codec+="."+kh(Ve[20]>>>2&63).replace(/^0/,"")):O.codec="mp4a.40.2"):O.codec=O.codec.toLowerCase())}var xt=Hn(C,["mdia","mdhd"])[0];xt&&(O.timescale=H_(xt)),x.push(O)}),x},kw=function(p,T=0){var x=Hn(p,["emsg"]);return x.map(C=>{var O=$_.parseEmsgBox(new Uint8Array(C)),N=VB(O.message_data);return{cueTime:$_.scaleTime(O.presentation_time,O.timescale,O.presentation_time_delta,T),duration:$_.scaleTime(O.event_duration,O.timescale),frames:N}})};var Ph={findBox:Hn,parseType:pc,timescale:Cw,startTime:ww,compositionStartTime:xw,videoTrackIds:Iw,tracks:Aw,getTimescaleFromMediaHeader:H_,getEmsgID3:kw};const{parseTrun:FB}=Tw,{findBox:Pw}=Ph;var Dw=Ew,BB=function(p){var T=Pw(p,["moof","traf"]),x=Pw(p,["mdat"]),C=[];return x.forEach(function(O,N){var K=T[N];C.push({mdat:O,traf:K})}),C},UB=function(p,T,x){var C=T,O=x.defaultSampleDuration||0,N=x.defaultSampleSize||0,K=x.trackId,Y=[];return p.forEach(function(J){var ie=FB(J),ce=ie.samples;ce.forEach(function(ke){ke.duration===void 0&&(ke.duration=O),ke.size===void 0&&(ke.size=N),ke.trackId=K,ke.dts=C,ke.compositionTimeOffset===void 0&&(ke.compositionTimeOffset=0),typeof C=="bigint"?(ke.pts=C+Dw.BigInt(ke.compositionTimeOffset),C+=Dw.BigInt(ke.duration)):(ke.pts=C+ke.compositionTimeOffset,C+=ke.duration)}),Y=Y.concat(ce)}),Y},Rw={getMdatTrafPairs:BB,parseSamples:UB},$B=pi.discardEmulationPreventionBytes,HB=dh.CaptionStream,q_=Gt,jB=Qn,qB=vs,{getMdatTrafPairs:zB,parseSamples:WB}=Rw,GB=function(p,T){for(var x=p,C=0;C<T.length;C++){var O=T[C];if(x<O.size)return O;x-=O.size}return null},KB=function(p,T,x){var C=new DataView(p.buffer,p.byteOffset,p.byteLength),O={logs:[],seiNals:[]},N,K,Y,J;for(K=0;K+4<p.length;K+=Y)if(Y=C.getUint32(K),K+=4,!(Y<=0))switch(p[K]&31){case 6:var ie=p.subarray(K+1,K+1+Y),ce=GB(K,T);if(N={nalUnitType:"sei_rbsp",size:Y,data:ie,escapedRBSP:$B(ie),trackId:x},ce)N.pts=ce.pts,N.dts=ce.dts,J=ce;else if(J)N.pts=J.pts,N.dts=J.dts;else{O.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+K+" for trackId "+x+". See mux.js#223."});break}O.seiNals.push(N);break}return O},YB=function(p,T){var x={},C=zB(p);return C.forEach(function(O){var N=O.mdat,K=O.traf,Y=q_(K,["tfhd"]),J=qB(Y[0]),ie=J.trackId,ce=q_(K,["tfdt"]),ke=ce.length>0?jB(ce[0]).baseMediaDecodeTime:0,Xe=q_(K,["trun"]),Ve,lt;T===ie&&Xe.length>0&&(Ve=WB(Xe,ke,J),lt=KB(N,Ve,ie),x[ie]||(x[ie]={seiNals:[],logs:[]}),x[ie].seiNals=x[ie].seiNals.concat(lt.seiNals),x[ie].logs=x[ie].logs.concat(lt.logs))}),x},XB=function(p,T,x){var C;if(T===null)return null;C=YB(p,T);var O=C[T]||{};return{seiNals:O.seiNals,logs:O.logs,timescale:x}},QB=function(){var p=!1,T,x,C,O,N,K;this.isInitialized=function(){return p},this.init=function(Y){T=new HB,p=!0,K=Y?Y.isPartial:!1,T.on("data",function(J){J.startTime=J.startPts/O,J.endTime=J.endPts/O,N.captions.push(J),N.captionStreams[J.stream]=!0}),T.on("log",function(J){N.logs.push(J)})},this.isNewInit=function(Y,J){return Y&&Y.length===0||J&&typeof J=="object"&&Object.keys(J).length===0?!1:C!==Y[0]||O!==J[C]},this.parse=function(Y,J,ie){var ce;if(this.isInitialized()){if(!J||!ie)return null;if(this.isNewInit(J,ie))C=J[0],O=ie[C];else if(C===null||!O)return x.push(Y),null}else return null;for(;x.length>0;){var ke=x.shift();this.parse(ke,J,ie)}return ce=XB(Y,C,O),ce&&ce.logs&&(N.logs=N.logs.concat(ce.logs)),ce===null||!ce.seiNals?N.logs.length?{logs:N.logs,captions:[],captionStreams:[]}:null:(this.pushNals(ce.seiNals),this.flushStream(),N)},this.pushNals=function(Y){if(!this.isInitialized()||!Y||Y.length===0)return null;Y.forEach(function(J){T.push(J)})},this.flushStream=function(){if(!this.isInitialized())return null;K?T.partialFlush():T.flush()},this.clearParsedCaptions=function(){N.captions=[],N.captionStreams={},N.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;T.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){x=[],C=null,O=null,N?this.clearParsedCaptions():N={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},JB=QB;const{parseTfdt:ZB}=Tw,Eo=Gt,{getTimescaleFromMediaHeader:e8}=Ph,{parseSamples:t8,getMdatTrafPairs:n8}=Rw;var Lw=function(){let p=9e4;this.init=function(T){const x=Eo(T,["moov","trak","mdia","mdhd"])[0];x&&(p=e8(x))},this.parseSegment=function(T){const x=[],C=n8(T);let O=0;return C.forEach(function(N){const K=N.mdat,Y=N.traf,J=Eo(Y,["tfdt"])[0],ie=Eo(Y,["tfhd"])[0],ce=Eo(Y,["trun"]);if(J&&(O=ZB(J).baseMediaDecodeTime),ce.length&&ie){const ke=t8(ce,O,ie);let Xe=0;ke.forEach(function(Ve){const lt="utf-8",xt=new TextDecoder(lt),vi=K.slice(Xe,Xe+Ve.size);if(Eo(vi,["vtte"])[0]){Xe+=Ve.size;return}Eo(vi,["vttc"]).forEach(function(Dh){const Rh=Eo(Dh,["payl"])[0],Lh=Eo(Dh,["sttg"])[0],Oh=Ve.pts/p,Pp=(Ve.pts+Ve.duration)/p;let mn,Nh;if(Rh)try{mn=xt.decode(Rh)}catch(vr){console.error(vr)}if(Lh)try{Nh=xt.decode(Lh)}catch(vr){console.error(vr)}Ve.duration&&mn&&x.push({cueText:mn,start:Oh,end:Pp,settings:Nh})}),Xe+=Ve.size})}}),x}},z_=kl,Ow=function(p){var T=p[1]&31;return T<<=8,T|=p[2],T},Ap=function(p){return!!(p[1]&64)},kp=function(p){var T=0;return(p[3]&48)>>>4>1&&(T+=p[4]+1),T},i8=function(p,T){var x=Ow(p);return x===0?"pat":x===T?"pmt":T?"pes":null},s8=function(p){var T=Ap(p),x=4+kp(p);return T&&(x+=p[x]+1),(p[x+10]&31)<<8|p[x+11]},r8=function(p){var T={},x=Ap(p),C=4+kp(p);if(x&&(C+=p[C]+1),!!(p[C+5]&1)){var O,N,K;O=(p[C+1]&15)<<8|p[C+2],N=3+O-4,K=(p[C+10]&15)<<8|p[C+11];for(var Y=12+K;Y<N;){var J=C+Y;T[(p[J+1]&31)<<8|p[J+2]]=p[J],Y+=((p[J+3]&15)<<8|p[J+4])+5}return T}},a8=function(p,T){var x=Ow(p),C=T[x];switch(C){case z_.H264_STREAM_TYPE:return"video";case z_.ADTS_STREAM_TYPE:return"audio";case z_.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},o8=function(p){var T=Ap(p);if(!T)return null;var x=4+kp(p);if(x>=p.byteLength)return null;var C=null,O;return O=p[x+7],O&192&&(C={},C.pts=(p[x+9]&14)<<27|(p[x+10]&255)<<20|(p[x+11]&254)<<12|(p[x+12]&255)<<5|(p[x+13]&254)>>>3,C.pts*=4,C.pts+=(p[x+13]&6)>>>1,C.dts=C.pts,O&64&&(C.dts=(p[x+14]&14)<<27|(p[x+15]&255)<<20|(p[x+16]&254)<<12|(p[x+17]&255)<<5|(p[x+18]&254)>>>3,C.dts*=4,C.dts+=(p[x+18]&6)>>>1)),C},W_=function(p){switch(p){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},l8=function(p){for(var T=4+kp(p),x=p.subarray(T),C=0,O=0,N=!1,K;O<x.byteLength-3;O++)if(x[O+2]===1){C=O+5;break}for(;C<x.byteLength;)switch(x[C]){case 0:if(x[C-1]!==0){C+=2;break}else if(x[C-2]!==0){C++;break}O+3!==C-2&&(K=W_(x[O+3]&31),K==="slice_layer_without_partitioning_rbsp_idr"&&(N=!0));do C++;while(x[C]!==1&&C<x.length);O=C-2,C+=3;break;case 1:if(x[C-1]!==0||x[C-2]!==0){C+=3;break}K=W_(x[O+3]&31),K==="slice_layer_without_partitioning_rbsp_idr"&&(N=!0),O=C-2,C+=3;break;default:C+=3;break}return x=x.subarray(O),C-=O,O=0,x&&x.byteLength>3&&(K=W_(x[O+3]&31),K==="slice_layer_without_partitioning_rbsp_idr"&&(N=!0)),N},u8={parseType:i8,parsePat:s8,parsePmt:r8,parsePayloadUnitStartIndicator:Ap,parsePesType:a8,parsePesTime:o8,videoPacketContainsKeyFrame:l8},Nw=kl,gc=tc.handleRollover,tn={};tn.ts=u8,tn.aac=cc;var Ul=bt.ONE_SECOND_IN_TS,ns=188,zr=71,c8=function(p,T){for(var x=0,C=ns,O,N;C<p.byteLength;){if(p[x]===zr&&p[C]===zr){switch(O=p.subarray(x,C),N=tn.ts.parseType(O,T.pid),N){case"pat":T.pid=tn.ts.parsePat(O);break;case"pmt":var K=tn.ts.parsePmt(O);T.table=T.table||{},Object.keys(K).forEach(function(Y){T.table[Y]=K[Y]});break}x+=ns,C+=ns;continue}x++,C++}},Mw=function(p,T,x){for(var C=0,O=ns,N,K,Y,J,ie,ce=!1;O<=p.byteLength;){if(p[C]===zr&&(p[O]===zr||O===p.byteLength)){switch(N=p.subarray(C,O),K=tn.ts.parseType(N,T.pid),K){case"pes":Y=tn.ts.parsePesType(N,T.table),J=tn.ts.parsePayloadUnitStartIndicator(N),Y==="audio"&&J&&(ie=tn.ts.parsePesTime(N),ie&&(ie.type="audio",x.audio.push(ie),ce=!0));break}if(ce)break;C+=ns,O+=ns;continue}C++,O++}for(O=p.byteLength,C=O-ns,ce=!1;C>=0;){if(p[C]===zr&&(p[O]===zr||O===p.byteLength)){switch(N=p.subarray(C,O),K=tn.ts.parseType(N,T.pid),K){case"pes":Y=tn.ts.parsePesType(N,T.table),J=tn.ts.parsePayloadUnitStartIndicator(N),Y==="audio"&&J&&(ie=tn.ts.parsePesTime(N),ie&&(ie.type="audio",x.audio.push(ie),ce=!0));break}if(ce)break;C-=ns,O-=ns;continue}C--,O--}},d8=function(p,T,x){for(var C=0,O=ns,N,K,Y,J,ie,ce,ke,Xe,Ve=!1,lt={data:[],size:0};O<p.byteLength;){if(p[C]===zr&&p[O]===zr){switch(N=p.subarray(C,O),K=tn.ts.parseType(N,T.pid),K){case"pes":if(Y=tn.ts.parsePesType(N,T.table),J=tn.ts.parsePayloadUnitStartIndicator(N),Y==="video"&&(J&&!Ve&&(ie=tn.ts.parsePesTime(N),ie&&(ie.type="video",x.video.push(ie),Ve=!0)),!x.firstKeyFrame)){if(J&&lt.size!==0){for(ce=new Uint8Array(lt.size),ke=0;lt.data.length;)Xe=lt.data.shift(),ce.set(Xe,ke),ke+=Xe.byteLength;if(tn.ts.videoPacketContainsKeyFrame(ce)){var xt=tn.ts.parsePesTime(ce);xt?(x.firstKeyFrame=xt,x.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}lt.size=0}lt.data.push(N),lt.size+=N.byteLength}break}if(Ve&&x.firstKeyFrame)break;C+=ns,O+=ns;continue}C++,O++}for(O=p.byteLength,C=O-ns,Ve=!1;C>=0;){if(p[C]===zr&&p[O]===zr){switch(N=p.subarray(C,O),K=tn.ts.parseType(N,T.pid),K){case"pes":Y=tn.ts.parsePesType(N,T.table),J=tn.ts.parsePayloadUnitStartIndicator(N),Y==="video"&&J&&(ie=tn.ts.parsePesTime(N),ie&&(ie.type="video",x.video.push(ie),Ve=!0));break}if(Ve)break;C-=ns,O-=ns;continue}C--,O--}},h8=function(p,T){if(p.audio&&p.audio.length){var x=T;(typeof x>"u"||isNaN(x))&&(x=p.audio[0].dts),p.audio.forEach(function(N){N.dts=gc(N.dts,x),N.pts=gc(N.pts,x),N.dtsTime=N.dts/Ul,N.ptsTime=N.pts/Ul})}if(p.video&&p.video.length){var C=T;if((typeof C>"u"||isNaN(C))&&(C=p.video[0].dts),p.video.forEach(function(N){N.dts=gc(N.dts,C),N.pts=gc(N.pts,C),N.dtsTime=N.dts/Ul,N.ptsTime=N.pts/Ul}),p.firstKeyFrame){var O=p.firstKeyFrame;O.dts=gc(O.dts,C),O.pts=gc(O.pts,C),O.dtsTime=O.dts/Ul,O.ptsTime=O.pts/Ul}}},f8=function(p){for(var T=!1,x=0,C=null,O=null,N=0,K=0,Y;p.length-K>=3;){var J=tn.aac.parseType(p,K);switch(J){case"timed-metadata":if(p.length-K<10){T=!0;break}if(N=tn.aac.parseId3TagSize(p,K),N>p.length){T=!0;break}O===null&&(Y=p.subarray(K,K+N),O=tn.aac.parseAacTimestamp(Y)),K+=N;break;case"audio":if(p.length-K<7){T=!0;break}if(N=tn.aac.parseAdtsSize(p,K),N>p.length){T=!0;break}C===null&&(Y=p.subarray(K,K+N),C=tn.aac.parseSampleRate(Y)),x++,K+=N;break;default:K++;break}if(T)return null}if(C===null||O===null)return null;var ie=Ul/C,ce={audio:[{type:"audio",dts:O,pts:O},{type:"audio",dts:O+x*1024*ie,pts:O+x*1024*ie}]};return ce},m8=function(p){var T={pid:null,table:null},x={};c8(p,T);for(var C in T.table)if(T.table.hasOwnProperty(C)){var O=T.table[C];switch(O){case Nw.H264_STREAM_TYPE:x.video=[],d8(p,T,x),x.video.length===0&&delete x.video;break;case Nw.ADTS_STREAM_TYPE:x.audio=[],Mw(p,T,x),x.audio.length===0&&delete x.audio;break}}return x},p8=function(p,T){var x=tn.aac.isLikelyAacData(p),C;return x?C=f8(p):C=m8(p),!C||!C.audio&&!C.video?null:(h8(C,T),C)},g8={inspect:p8,parseAudioPes_:Mw};const v8=function(p,T){T.on("data",function(x){const C=x.initSegment;x.initSegment={data:C.buffer,byteOffset:C.byteOffset,byteLength:C.byteLength};const O=x.data;x.data=O.buffer,p.postMessage({action:"data",segment:x,byteOffset:O.byteOffset,byteLength:O.byteLength},[x.data])}),T.on("done",function(x){p.postMessage({action:"done"})}),T.on("gopInfo",function(x){p.postMessage({action:"gopInfo",gopInfo:x})}),T.on("videoSegmentTimingInfo",function(x){const C={start:{decode:bt.videoTsToSeconds(x.start.dts),presentation:bt.videoTsToSeconds(x.start.pts)},end:{decode:bt.videoTsToSeconds(x.end.dts),presentation:bt.videoTsToSeconds(x.end.pts)},baseMediaDecodeTime:bt.videoTsToSeconds(x.baseMediaDecodeTime)};x.prependedContentDuration&&(C.prependedContentDuration=bt.videoTsToSeconds(x.prependedContentDuration)),p.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:C})}),T.on("audioSegmentTimingInfo",function(x){const C={start:{decode:bt.videoTsToSeconds(x.start.dts),presentation:bt.videoTsToSeconds(x.start.pts)},end:{decode:bt.videoTsToSeconds(x.end.dts),presentation:bt.videoTsToSeconds(x.end.pts)},baseMediaDecodeTime:bt.videoTsToSeconds(x.baseMediaDecodeTime)};x.prependedContentDuration&&(C.prependedContentDuration=bt.videoTsToSeconds(x.prependedContentDuration)),p.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:C})}),T.on("id3Frame",function(x){p.postMessage({action:"id3Frame",id3Frame:x})}),T.on("caption",function(x){p.postMessage({action:"caption",caption:x})}),T.on("trackinfo",function(x){p.postMessage({action:"trackinfo",trackInfo:x})}),T.on("audioTimingInfo",function(x){p.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:bt.videoTsToSeconds(x.start),end:bt.videoTsToSeconds(x.end)}})}),T.on("videoTimingInfo",function(x){p.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:bt.videoTsToSeconds(x.start),end:bt.videoTsToSeconds(x.end)}})}),T.on("log",function(x){p.postMessage({action:"log",log:x})})};class Vw{constructor(T,x){this.options=x||{},this.self=T,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new wp.Transmuxer(this.options),v8(this.self,this.transmuxer)}pushMp4Captions(T){this.captionParser||(this.captionParser=new JB,this.captionParser.init());const x=new Uint8Array(T.data,T.byteOffset,T.byteLength),C=this.captionParser.parse(x,T.trackIds,T.timescales);this.self.postMessage({action:"mp4Captions",captions:C&&C.captions||[],logs:C&&C.logs||[],data:x.buffer},[x.buffer])}initMp4WebVttParser(T){this.webVttParser||(this.webVttParser=new Lw);const x=new Uint8Array(T.data,T.byteOffset,T.byteLength);this.webVttParser.init(x)}getMp4WebVttText(T){this.webVttParser||(this.webVttParser=new Lw);const x=new Uint8Array(T.data,T.byteOffset,T.byteLength),C=this.webVttParser.parseSegment(x);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:C||[],data:x.buffer},[x.buffer])}probeMp4StartTime({timescales:T,data:x}){const C=Ph.startTime(T,x);this.self.postMessage({action:"probeMp4StartTime",startTime:C,data:x},[x.buffer])}probeMp4Tracks({data:T}){const x=Ph.tracks(T);this.self.postMessage({action:"probeMp4Tracks",tracks:x,data:T},[T.buffer])}probeEmsgID3({data:T,offset:x}){const C=Ph.getEmsgID3(T,x);this.self.postMessage({action:"probeEmsgID3",id3Frames:C,emsgData:T},[T.buffer])}probeTs({data:T,baseStartTime:x}){const C=typeof x=="number"&&!isNaN(x)?x*bt.ONE_SECOND_IN_TS:void 0,O=g8.inspect(T,C);let N=null;O&&(N={hasVideo:O.video&&O.video.length===2||!1,hasAudio:O.audio&&O.audio.length===2||!1},N.hasVideo&&(N.videoStart=O.video[0].ptsTime),N.hasAudio&&(N.audioStart=O.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:N,data:T},[T.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(T){const x=new Uint8Array(T.data,T.byteOffset,T.byteLength);this.transmuxer.push(x)}reset(){this.transmuxer.reset()}setTimestampOffset(T){const x=T.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(bt.secondsToVideoTs(x)))}setAudioAppendStart(T){this.transmuxer.setAudioAppendStart(Math.ceil(bt.secondsToVideoTs(T.appendStart)))}setRemux(T){this.transmuxer.setRemux(T.remux)}flush(T){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(T){this.transmuxer.alignGopsWith(T.gopsToAlignWith.slice())}}self.onmessage=function(p){if(p.data.action==="init"&&p.data.options){this.messageHandlers=new Vw(self,p.data.options);return}this.messageHandlers||(this.messageHandlers=new Vw(self)),p.data&&p.data.action&&p.data.action!=="init"&&this.messageHandlers[p.data.action]&&this.messageHandlers[p.data.action](p.data)}}));var fse=E3(hse);const mse=(t,e,n)=>{const{type:i,initSegment:s,captions:r,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=t.data.segment;e.buffer.push({captions:r,captionStreams:a,metadata:o});const c=t.data.segment.boxes||{data:t.data.segment.data},d={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof l<"u"&&(d.videoFrameDtsTime=l),typeof u<"u"&&(d.videoFramePtsTime=u),n(d)},pse=({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)},gse=(t,e)=>{e.gopInfo=t.data.gopInfo},x3=t=>{const{transmuxer:e,bytes:n,audioAppendStart:i,gopsToAlignWith:s,remux:r,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:d,onId3:h,onCaptions:f,onDone:g,onEndedTimeline:v,onTransmuxerLog:b,isEndOfTimeline:I,segment:w,triggerSegmentEventFn:P}=t,M={buffer:[]};let F=I;const U=S=>{e.currentTransmux===t&&(S.data.action==="data"&&mse(S,M,a),S.data.action==="trackinfo"&&o(S.data.trackInfo),S.data.action==="gopInfo"&&gse(S,M),S.data.action==="audioTimingInfo"&&l(S.data.audioTimingInfo),S.data.action==="videoTimingInfo"&&u(S.data.videoTimingInfo),S.data.action==="videoSegmentTimingInfo"&&c(S.data.videoSegmentTimingInfo),S.data.action==="audioSegmentTimingInfo"&&d(S.data.audioSegmentTimingInfo),S.data.action==="id3Frame"&&h([S.data.id3Frame],S.data.id3Frame.dispatchType),S.data.action==="caption"&&f(S.data.caption),S.data.action==="endedtimeline"&&(F=!1,v()),S.data.action==="log"&&b(S.data.log),S.data.type==="transmuxed"&&(F||(e.onmessage=null,pse({transmuxedData:M,callback:g}),I3(e))))},D=()=>{const S={message:"Received an error message from the transmuxer worker",metadata:{errorType:ve.Error.StreamingFailedToTransmuxSegment,segmentInfo:Zl({segment:w})}};g(null,S)};if(e.onmessage=U,e.onerror=D,i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(s)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof r<"u"&&e.postMessage({action:"setRemux",remux:r}),n.byteLength){const S=n instanceof ArrayBuffer?n:n.buffer,y=n instanceof ArrayBuffer?0:n.byteOffset;P({type:"segmenttransmuxingstart",segment:w}),e.postMessage({action:"push",data:S,byteOffset:y,byteLength:n.byteLength},[S])}I&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},I3=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():x3(t.currentTransmux))},uP=(t,e)=>{t.postMessage({action:e}),I3(t)},A3=(t,e)=>{if(!e.currentTransmux){e.currentTransmux=t,uP(e,t);return}e.transmuxQueue.push(uP.bind(null,e,t))},vse=t=>{A3("reset",t)},yse=t=>{A3("endTimeline",t)},k3=t=>{if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,x3(t);return}t.transmuxer.transmuxQueue.push(t)},_se=t=>{const e=new fse;e.currentTransmux=null,e.transmuxQueue=[];const n=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,n.call(e)),e.postMessage({action:"init",options:t}),e};var hb={reset:vse,endTimeline:yse,transmux:k3,createTransmuxer:_se};const sd=function(t){const e=t.transmuxer,n=t.endAction||t.action,i=t.callback,s=zn({},t,{endAction:null,transmuxer:null,callback:null}),r=a=>{a.data.action===n&&(e.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,t.byteOffset||0,t.byteLength||a.data.data.byteLength),t.data&&(t.data=a.data.data)),i(a.data))};if(e.addEventListener("message",r),t.data){const a=t.data instanceof ArrayBuffer;s.byteOffset=a?0:t.data.byteOffset,s.byteLength=t.data.byteLength;const o=[a?t.data:t.data.buffer];e.postMessage(s,o)}else e.postMessage(s)},aa={FAILURE:2,TIMEOUT:-101,ABORTED:-102},P3="wvtt",dS=t=>{t.forEach(e=>{e.abort()})},bse=t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}),Tse=t=>{const e=t.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=t.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},PC=(t,e)=>{const{requestType:n}=e,i=gu({requestType:n,request:e,error:t});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:aa.TIMEOUT,xhr:e,metadata:i}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:aa.ABORTED,xhr:e,metadata:i}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:aa.FAILURE,xhr:e,metadata:i}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:aa.FAILURE,xhr:e,metadata:i}:null},cP=(t,e,n,i)=>(s,r)=>{const a=r.response,o=PC(s,r);if(o)return n(o,t);if(a.byteLength!==16)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:aa.FAILURE,xhr:r},t);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let d=0;d<e.length;d++)e[d].bytes=u;const c={uri:r.uri};return i({type:"segmentkeyloadcomplete",segment:t,keyInfo:c}),n(null,t)},Sse=(t,e)=>{e===P3&&t.transmuxer.postMessage({action:"initMp4WebVttParser",data:t.map.bytes})},Ese=(t,e,n)=>{e===P3&&sd({action:"getMp4WebVttText",data:t.bytes,transmuxer:t.transmuxer,callback:({data:i,mp4VttCues:s})=>{t.bytes=i,n(null,t,{mp4VttCues:s})}})},D3=(t,e)=>{const n=eC(t.map.bytes);if(n!=="mp4"){const i=t.map.resolvedUri||t.map.uri,s=n||"unknown";return e({internal:!0,message:`Found unsupported ${s} container for initialization segment at URL: ${i}`,code:aa.FAILURE,metadata:{mediaType:s}})}sd({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:i,data:s})=>(t.map.bytes=s,i.forEach(function(r){t.map.tracks=t.map.tracks||{},!t.map.tracks[r.type]&&(t.map.tracks[r.type]=r,typeof r.id=="number"&&r.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[r.id]=r.timescale),r.type==="text"&&Sse(t,r.codec))}),e(null))})},Cse=({segment:t,finishProcessingFn:e,triggerSegmentEventFn:n})=>(i,s)=>{const r=PC(i,s);if(r)return e(r,t);const a=new Uint8Array(s.response);if(n({type:"segmentloaded",segment:t}),t.map.key)return t.map.encryptedBytes=a,e(null,t);t.map.bytes=a,D3(t,function(o){if(o)return o.xhr=s,o.status=s.status,e(o,t);e(null,t)})},wse=({segment:t,finishProcessingFn:e,responseType:n,triggerSegmentEventFn:i})=>(s,r)=>{const a=PC(s,r);if(a)return e(a,t);i({type:"segmentloaded",segment:t});const o=n==="arraybuffer"||!r.responseText?r.response:cse(r.responseText.substring(t.lastReachedChar||0));return t.stats=bse(r),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),e(null,t)},xse=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:f})=>{const g=t.map&&t.map.tracks||{},v=!!(g.audio&&g.video);let b=i.bind(null,t,"audio","start");const I=i.bind(null,t,"audio","end");let w=i.bind(null,t,"video","start");const P=i.bind(null,t,"video","end"),M=()=>k3({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:v,onData:F=>{F.type=F.type==="combined"?"video":F.type,c(t,F)},onTrackInfo:F=>{n&&(v&&(F.isMuxed=!0),n(t,F))},onAudioTimingInfo:F=>{b&&typeof F.start<"u"&&(b(F.start),b=null),I&&typeof F.end<"u"&&I(F.end)},onVideoTimingInfo:F=>{w&&typeof F.start<"u"&&(w(F.start),w=null),P&&typeof F.end<"u"&&P(F.end)},onVideoSegmentTimingInfo:F=>{const U={pts:{start:F.start.presentation,end:F.end.presentation},dts:{start:F.start.decode,end:F.end.decode}};f({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:U}),s(F)},onAudioSegmentTimingInfo:F=>{const U={pts:{start:F.start.pts,end:F.end.pts},dts:{start:F.start.dts,end:F.end.dts}};f({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:U}),r(F)},onId3:(F,U)=>{a(t,F,U)},onCaptions:F=>{o(t,[F])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:h,onDone:(F,U)=>{d&&(F.type=F.type==="combined"?"video":F.type,f({type:"segmenttransmuxingcomplete",segment:t}),d(U,t,F))},segment:t,triggerSegmentEventFn:f});sd({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:F=>{t.bytes=e=F.data;const U=F.result;U&&(n(t,{hasAudio:U.hasAudio,hasVideo:U.hasVideo,isMuxed:v}),n=null),M()}})},R3=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:f})=>{let g=new Uint8Array(e);if(zte(g)){t.isFmp4=!0;const{tracks:v}=t.map;if(v.text&&(!v.audio||!v.video)){c(t,{data:g,type:"text"}),Ese(t,v.text.codec,d);return}const I={isFmp4:!0,hasVideo:!!v.video,hasAudio:!!v.audio};v.audio&&v.audio.codec&&v.audio.codec!=="enca"&&(I.audioCodec=v.audio.codec),v.video&&v.video.codec&&v.video.codec!=="encv"&&(I.videoCodec=v.video.codec),v.video&&v.audio&&(I.isMuxed=!0),n(t,I);const w=(P,M)=>{c(t,{data:g,type:I.hasAudio&&!I.isMuxed?"audio":"video"}),M&&M.length&&a(t,M),P&&P.length&&o(t,P),d(null,t,{})};sd({action:"probeMp4StartTime",timescales:t.map.timescales,data:g,transmuxer:t.transmuxer,callback:({data:P,startTime:M})=>{e=P.buffer,t.bytes=g=P,I.hasAudio&&!I.isMuxed&&i(t,"audio","start",M),I.hasVideo&&i(t,"video","start",M),sd({action:"probeEmsgID3",data:g,transmuxer:t.transmuxer,offset:M,callback:({emsgData:F,id3Frames:U})=>{if(e=F.buffer,t.bytes=g=F,!v.video||!F.byteLength||!t.transmuxer){w(void 0,U);return}sd({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:g,timescales:t.map.timescales,trackIds:[v.video.id],callback:D=>{e=D.data.buffer,t.bytes=g=D.data,D.logs.forEach(function(S){h(Qt(S,{stream:"mp4CaptionParser"}))}),w(D.captions,U)}})}})}});return}if(!t.transmuxer){d(null,t,{});return}if(typeof t.container>"u"&&(t.container=eC(g)),t.container!=="ts"&&t.container!=="aac"){n(t,{hasAudio:!1,hasVideo:!1}),d(null,t,{});return}xse({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:f})},L3=function({id:t,key:e,encryptedBytes:n,decryptionWorker:i,segment:s,doneFn:r},a){const o=u=>{if(u.data.source===t){i.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};i.onerror=()=>{const u="An error occurred in the decryption worker",c=Zl({segment:s}),d={message:u,metadata:{error:new Error(u),errorType:ve.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:s.key.resolvedUri||s.map.key.resolvedUri}}};r(d,s)},i.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),i.postMessage(v3({source:t,encrypted:n,key:l,iv:e.iv}),[n.buffer,l.buffer])},Ise=({decryptionWorker:t,segment:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:f})=>{f({type:"segmentdecryptionstart"}),L3({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t,segment:e,doneFn:d},g=>{e.bytes=g,f({type:"segmentdecryptioncomplete",segment:e}),R3({segment:e,bytes:e.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:f})})},Ase=({activeXhrs:t,decryptionWorker:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:f})=>{let g=0,v=!1;return(b,I)=>{if(!v){if(b)return v=!0,dS(t),d(b,I);if(g+=1,g===t.length){const w=function(){if(I.encryptedBytes)return Ise({decryptionWorker:e,segment:I,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:f});R3({segment:I,bytes:I.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:f})};if(I.endOfAllRequests=Date.now(),I.map&&I.map.encryptedBytes&&!I.map.bytes)return f({type:"segmentdecryptionstart",segment:I}),L3({decryptionWorker:e,id:I.requestId+"-init",encryptedBytes:I.map.encryptedBytes,key:I.map.key,segment:I,doneFn:d},P=>{I.map.bytes=P,f({type:"segmentdecryptioncomplete",segment:I}),D3(I,M=>{if(M)return dS(t),d(M,I);w()})});w()}}}},kse=({loadendState:t,abortFn:e})=>n=>{n.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)},Pse=({segment:t,progressFn:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>d=>{if(!d.target.aborted)return t.stats=Qt(t.stats,Tse(d)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(d,t)},Dse=({xhr:t,xhrOptions:e,decryptionWorker:n,segment:i,abortFn:s,progressFn:r,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:f,dataFn:g,doneFn:v,onTransmuxerLog:b,triggerSegmentEventFn:I})=>{const w=[],P=Ase({activeXhrs:w,decryptionWorker:n,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:f,dataFn:g,doneFn:v,onTransmuxerLog:b,triggerSegmentEventFn:I});if(i.key&&!i.key.bytes){const S=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&S.push(i.map.key);const y=Qt(e,{uri:i.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),E=cP(i,S,P,I),A={uri:i.key.resolvedUri};I({type:"segmentkeyloadstart",segment:i,keyInfo:A});const k=t(y,E);w.push(k)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const k=Qt(e,{uri:i.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),R=cP(i,[i.map.key],P,I),W={uri:i.map.key.resolvedUri};I({type:"segmentkeyloadstart",segment:i,keyInfo:W});const se=t(k,R);w.push(se)}const y=Qt(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:uS(i.map),requestType:"segment-media-initialization"}),E=Cse({segment:i,finishProcessingFn:P,triggerSegmentEventFn:I});I({type:"segmentloadstart",segment:i});const A=t(y,E);w.push(A)}const M=Qt(e,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:uS(i),requestType:"segment"}),F=wse({segment:i,finishProcessingFn:P,responseType:M.responseType,triggerSegmentEventFn:I});I({type:"segmentloadstart",segment:i});const U=t(M,F);U.addEventListener("progress",Pse({segment:i,progressFn:r,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:f,dataFn:g})),w.push(U);const D={};return w.forEach(S=>{S.addEventListener("loadend",kse({loadendState:D,abortFn:s}))}),()=>dS(w)},rg=dr("PlaylistSelector"),dP=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},rd=function(t,e){if(!t)return"";const n=te.getComputedStyle(t);return n?n[e]:""},ad=function(t,e){const n=t.slice();t.sort(function(i,s){const r=e(i,s);return r===0?n.indexOf(i)-n.indexOf(s):r})},DC=function(t,e){let n,i;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||te.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||te.Number.MAX_VALUE,n-i},Rse=function(t,e){let n,i;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||te.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||te.Number.MAX_VALUE,n===i&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-i};let O3=function(t){const{main:e,bandwidth:n,playerWidth:i,playerHeight:s,playerObjectFit:r,limitRenditionByPlayerDimensions:a,playlistController:o}=t;if(!e)return;const l={bandwidth:n,width:i,height:s,limitRenditionByPlayerDimensions:a};let u=e.playlists;Es.isAudioOnly(e)&&(u=o.getAudioTrackPlaylists_(),l.audioOnly=!0);let c=u.map(D=>{let S;const y=D.attributes&&D.attributes.RESOLUTION&&D.attributes.RESOLUTION.width,E=D.attributes&&D.attributes.RESOLUTION&&D.attributes.RESOLUTION.height;return S=D.attributes&&D.attributes.BANDWIDTH,S=S||te.Number.MAX_VALUE,{bandwidth:S,width:y,height:E,playlist:D}});ad(c,(D,S)=>D.bandwidth-S.bandwidth),c=c.filter(D=>!Es.isIncompatible(D.playlist));let d=c.filter(D=>Es.isEnabled(D.playlist));d.length||(d=c.filter(D=>!Es.isDisabled(D.playlist)));const h=d.filter(D=>D.bandwidth*bi.BANDWIDTH_VARIANCE<n);let f=h[h.length-1];const g=h.filter(D=>D.bandwidth===f.bandwidth)[0];if(a===!1){const D=g||d[0]||c[0];if(D&&D.playlist){let S="sortedPlaylistReps";return g&&(S="bandwidthBestRep"),d[0]&&(S="enabledPlaylistReps"),rg(`choosing ${dP(D)} using ${S} with options`,l),D.playlist}return rg("could not choose a playlist with options",l),null}const v=h.filter(D=>D.width&&D.height);ad(v,(D,S)=>D.width-S.width);const b=v.filter(D=>D.width===i&&D.height===s);f=b[b.length-1];const I=b.filter(D=>D.bandwidth===f.bandwidth)[0];let w,P,M;I||(w=v.filter(D=>r==="cover"?D.width>i&&D.height>s:D.width>i||D.height>s),P=w.filter(D=>D.width===w[0].width&&D.height===w[0].height),f=P[P.length-1],M=P.filter(D=>D.bandwidth===f.bandwidth)[0]);let F;if(o.leastPixelDiffSelector){const D=v.map(S=>(S.pixelDiff=Math.abs(S.width-i)+Math.abs(S.height-s),S));ad(D,(S,y)=>S.pixelDiff===y.pixelDiff?y.bandwidth-S.bandwidth:S.pixelDiff-y.pixelDiff),F=D[0]}const U=F||M||I||g||d[0]||c[0];if(U&&U.playlist){let D="sortedPlaylistReps";return F?D="leastPixelDiffRep":M?D="resolutionPlusOneRep":I?D="resolutionBestRep":g?D="bandwidthBestRep":d[0]&&(D="enabledPlaylistReps"),rg(`choosing ${dP(U)} using ${D} with options`,l),U.playlist}return rg("could not choose a playlist with options",l),null};const hP=function(){let t=this.useDevicePixelRatio&&te.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(t=this.customPixelRatio),O3({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(rd(this.tech_.el(),"width"),10)*t,playerHeight:parseInt(rd(this.tech_.el(),"height"),10)*t,playerObjectFit:this.usePlayerObjectFit?rd(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},Lse=function(t){let e=-1,n=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&te.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),e<0&&(e=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(e=t*this.systemBandwidth+(1-t)*e,n=this.systemBandwidth),O3({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(rd(this.tech_.el(),"width"),10)*i,playerHeight:parseInt(rd(this.tech_.el(),"height"),10)*i,playerObjectFit:this.usePlayerObjectFit?rd(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},Ose=function(t){const{main:e,currentTime:n,bandwidth:i,duration:s,segmentDuration:r,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=t,u=e.playlists.filter(g=>!Es.isIncompatible(g));let c=u.filter(Es.isEnabled);c.length||(c=u.filter(g=>!Es.isDisabled(g)));const h=c.filter(Es.hasAttribute.bind(null,"BANDWIDTH")).map(g=>{const b=l.getSyncPoint(g,s,o,n)?1:2,w=Es.estimateSegmentRequestTime(r,i,g)*b-a;return{playlist:g,rebufferingImpact:w}}),f=h.filter(g=>g.rebufferingImpact<=0);return ad(f,(g,v)=>DC(v.playlist,g.playlist)),f.length?f[0]:(ad(h,(g,v)=>g.rebufferingImpact-v.rebufferingImpact),h[0]||null)},Nse=function(){const t=this.playlists.main.playlists.filter(Es.isEnabled);return ad(t,(n,i)=>DC(n,i)),t.filter(n=>!!Of(this.playlists.main,n).video)[0]||null},Mse=t=>{let e=0,n;return t.bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach(i=>{n.set(i,e),e+=i.byteLength})),n};function N3(t){try{return new URL(t).pathname.split("/").slice(-2).join("/")}catch{return""}}const Vse=function(t,e,n){if(!t[n]){e.trigger({type:"usage",name:"vhs-608"});let i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);const s=e.textTracks().getTrackById(i);if(s)t[n]=s;else{const r=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=n,o=n,l=!1;const u=r[i];u&&(a=u.label,o=u.language,l=u.default),t[n]=e.addRemoteTextTrack({kind:"captions",id:i,default:l,label:a,language:o},!1).track}}},Fse=function({inbandTextTracks:t,captionArray:e,timestampOffset:n}){if(!e)return;const i=te.WebKitDataCue||te.VTTCue;e.forEach(s=>{const r=s.stream;s.content?s.content.forEach(a=>{const o=new i(s.startTime+n,s.endTime+n,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",t[r].addCue(o)}):t[r].addCue(new i(s.startTime+n,s.endTime+n,s.text))})},Bse=function(t){Object.defineProperties(t.frame,{id:{get(){return ve.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get(){return ve.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get(){return ve.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},Use=({inbandTextTracks:t,metadataArray:e,timestampOffset:n,videoDuration:i})=>{if(!e)return;const s=te.WebKitDataCue||te.VTTCue,r=t.metadataTrack_;if(!r||(e.forEach(c=>{const d=c.cueTime+n;typeof d!="number"||te.isNaN(d)||d<0||!(d<1/0)||!c.frames||!c.frames.length||c.frames.forEach(h=>{const f=new s(d,d,h.value||h.url||h.data||"");f.frame=h,f.value=h,Bse(f),r.addCue(f)})}),!r.cues||!r.cues.length))return;const a=r.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,d)=>{const h=c[d.startTime]||[];return h.push(d),c[d.startTime]=h,c},{}),u=Object.keys(l).sort((c,d)=>Number(c)-Number(d));u.forEach((c,d)=>{const h=l[c],f=isFinite(i)?i:c,g=Number(u[d+1])||f;h.forEach(v=>{v.endTime=g})})},$se={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Hse=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),jse=({inbandTextTracks:t,dateRanges:e})=>{const n=t.metadataTrack_;if(!n)return;const i=te.WebKitDataCue||te.VTTCue;e.forEach(s=>{for(const r of Object.keys(s)){if(Hse.has(r))continue;const a=new i(s.startTime,s.endTime,"");a.id=s.id,a.type="com.apple.quicktime.HLS",a.value={key:$se[r],data:s[r]},(r==="scte35Out"||r==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(a)}s.processDateRange()})},fP=(t,e,n)=>{t.metadataTrack_||(t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,ve.browser.IS_ANY_SAFARI||(t.metadataTrack_.inBandMetadataTrackDispatchType=e))},lf=function(t,e,n){let i,s;if(n&&n.cues)for(i=n.cues.length;i--;)s=n.cues[i],s.startTime>=t&&s.endTime<=e&&n.removeCue(s)},qse=function(t){const e=t.cues;if(!e)return;const n={};for(let i=e.length-1;i>=0;i--){const s=e[i],r=`${s.startTime}-${s.endTime}-${s.text}`;n[r]?t.removeCue(s):n[r]=s}},zse=(t,e,n)=>{if(typeof e>"u"||e===null||!t.length)return[];const i=Math.ceil((e-n+3)*su.ONE_SECOND_IN_TS);let s;for(s=0;s<t.length&&!(t[s].pts>i);s++);return t.slice(s)},Wse=(t,e,n)=>{if(!e.length)return t;if(n)return e.slice();const i=e[0].pts;let s=0;for(s;s<t.length&&!(t[s].pts>=i);s++);return t.slice(0,s).concat(e)},Gse=(t,e,n,i)=>{const s=Math.ceil((e-i)*su.ONE_SECOND_IN_TS),r=Math.ceil((n-i)*su.ONE_SECOND_IN_TS),a=t.slice();let o=t.length;for(;o--&&!(t[o].pts<=r););if(o===-1)return a;let l=o+1;for(;l--&&!(t[l].pts<=s););return l=Math.max(l,0),a.splice(l,o-l+1),a},Kse=function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const n=Object.keys(t).sort(),i=Object.keys(e).sort();if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++){const r=n[s];if(r!==i[s]||t[r]!==e[r])return!1}return!0},Yse=function(t,e,n){e=e||[];const i=[];let s=0;for(let r=0;r<e.length;r++){const a=e[r];if(t===a.timeline&&(i.push(r),s+=a.duration,s>n))return r}return i.length===0?0:i[i.length-1]},Kh=1,Xse=500,mP=t=>typeof t=="number"&&isFinite(t),ag=1/60,Qse=(t,e,n)=>t!=="main"||!e||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,Jse=(t,e,n)=>{let i=e-bi.BACK_BUFFER_LENGTH;t.length&&(i=Math.max(i,t.start(0)));const s=e-n;return Math.min(s,i)},wc=t=>{const{startOfSegment:e,duration:n,segment:i,part:s,playlist:{mediaSequence:r,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=t,d=o.length-1;let h="mediaIndex/partIndex increment";t.getMediaInfoForTime?h=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(h="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(h+=` with independent ${t.independent}`);const f=typeof u=="number",g=t.segment.uri?"segment":"pre-segment",v=f?Z4({preloadSegment:i})-1:0;return`${g} [${r+l}/${r+d}]`+(f?` part [${u}/${v}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(f?` part start/end [${s.start} => ${s.end}]`:"")+` startOfSegment [${e}] duration [${n}] timeline [${c}] selected by [${h}] playlist [${a}]`},pP=t=>`${t}TimingInfo`,Zse=({segmentTimeline:t,currentTimeline:e,startOfSegment:n,buffered:i,overrideCheck:s})=>!s&&t===e?null:t<e?n:i.length?i.end(i.length-1):n,hS=({timelineChangeController:t,currentTimeline:e,segmentTimeline:n,loaderType:i,audioDisabled:s})=>{if(e===n)return!1;if(i==="audio"){const r=t.lastTimelineChange({type:"main"});return!r||r.to!==n}if(i==="main"&&s){const r=t.pendingTimelineChange({type:"audio"});return!(r&&r.to===n)}return!1},ere=t=>{if(!t)return!1;const e=t.pendingTimelineChange({type:"audio"}),n=t.pendingTimelineChange({type:"main"}),i=e&&n,s=i&&e.to!==n.to;return!!(i&&e.from!==-1&&n.from!==-1&&s)},tre=t=>{const e=t.timelineChangeController_.pendingTimelineChange({type:"audio"}),n=t.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&n&&e.to<n.to},Po=t=>{const e=t.pendingSegment_;if(!e)return;if(hS({timelineChangeController:t.timelineChangeController_,currentTimeline:t.currentTimeline_,segmentTimeline:e.timeline,loaderType:t.loaderType_,audioDisabled:t.audioDisabled_})&&ere(t.timelineChangeController_)){if(tre(t)){t.timelineChangeController_.trigger("audioTimelineBehind");return}t.timelineChangeController_.trigger("fixBadTimelineChange")}},nre=t=>{let e=0;return["video","audio"].forEach(function(n){const i=t[`${n}TimingInfo`];if(!i)return;const{start:s,end:r}=i;let a;typeof s=="bigint"||typeof r=="bigint"?a=te.BigInt(r)-te.BigInt(s):typeof s=="number"&&typeof r=="number"&&(a=r-s),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},gP=({segmentDuration:t,maxDuration:e})=>t?Math.round(t)>e+sa:!1,ire=(t,e)=>{if(e!=="hls")return null;const n=nre({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!n)return null;const i=t.playlist.targetDuration,s=gP({segmentDuration:n,maxDuration:i*2}),r=gP({segmentDuration:n,maxDuration:i}),a=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${n} when the reported duration is ${t.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return s||r?{severity:s?"warn":"info",message:a}:null},Zl=({type:t,segment:e})=>{if(!e)return;const n=!!(e.key||e.map&&e.map.ke),i=!!(e.map&&!e.map.bytes),s=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:t||e.type,uri:e.resolvedUri||e.uri,start:s,duration:e.duration,isEncrypted:n,isMediaInitialization:i}};class fS extends ve.EventTarget{constructor(e,n={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=dr(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Po(this)}),this.sourceUpdater_.on("codecschange",i=>{this.trigger(zn({type:"codecschange"},i))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Po(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",i=>{this.trigger(zn({type:"timelinechange"},i)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Po(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Po(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return hb.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&te.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,te.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&hb.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Ci();if(this.loaderType_==="main"){const{hasAudio:n,hasVideo:i,isMuxed:s}=e;if(i&&n&&!this.audioDisabled_&&!s)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,n=!1){if(!e)return null;const i=Uv(e);let s=this.initSegments_[i];return n&&!s&&e.bytes&&(this.initSegments_[i]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),s||e}segmentKey(e,n=!1){if(!e)return null;const i=y3(e);let s=this.keyCache_[i];this.cacheEncryptionKeys_&&n&&!s&&e.bytes&&(this.keyCache_[i]=s={resolvedUri:e.resolvedUri,bytes:e.bytes});const r={resolvedUri:(s||e).resolvedUri};return s&&(r.bytes=s.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,n={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const i=this.playlist_,s=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${cb(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}s&&(s.mediaIndex-=a,s.mediaIndex<0?(s.mediaIndex=null,s.partIndex=null):(s.mediaIndex>=0&&(s.segment=e.segments[s.mediaIndex]),s.partIndex>=0&&s.segment.parts&&(s.part=s.segment.parts[s.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(te.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&hb.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,n,i=()=>{},s=!1){if(n===1/0&&(n=this.duration_()),n<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let r=1;const a=()=>{r--,r===0&&i()};(s||!this.audioDisabled_)&&(r++,this.sourceUpdater_.removeAudio(e,n,a)),(s||this.loaderType_==="main")&&(this.gopBuffer_=Gse(this.gopBuffer_,e,n,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,n,a));for(const o in this.inbandTextTracks_)lf(e,n,this.inbandTextTracks_[o]);lf(e,n,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&te.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=te.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&te.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=te.setTimeout(this.monitorBufferTick_.bind(this),Xse)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const n={segmentInfo:Zl({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:n}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,n=this.playlist_,i=this.partIndex){if(!n||!this.mediaSource_)return!1;const s=typeof e=="number"&&n.segments[e],r=e+1===n.segments.length,a=!s||!s.parts||i+1===s.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&r&&a}chooseNextRequest_(){const e=this.buffered_(),n=cb(e)||0,i=xC(e,this.currentTime_()),s=!this.hasPlayed_()&&i>=1,r=i>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||s||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=Yse(this.currentTimeline_,a,n),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const h=a[this.mediaIndex],f=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=h.end?h.end:n,h.parts&&h.parts[f+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=f+1):o.mediaIndex=this.mediaIndex+1}else{let h,f,g;const v=this.fetchAtBuffer_?n:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${v}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${n}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const b=this.getSyncInfoFromMediaSequenceSync_(v);if(!b){const I="No sync info found while using media sequence sync";return this.error({message:I,metadata:{errorType:ve.Error.StreamingFailedToSelectNextSegment,error:new Error(I)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${b.start} --> ${b.end})`),h=b.segmentIndex,f=b.partIndex,g=b.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const b=Es.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:v,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});h=b.segmentIndex,f=b.partIndex,g=b.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${v}`:`currentTime ${v}`,o.mediaIndex=h,o.startOfSegment=g,o.partIndex=f,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&u&&!c&&!u.independent)if(o.partIndex===0){const h=a[o.mediaIndex-1],f=h.parts&&h.parts.length&&h.parts[h.parts.length-1];f&&f.independent&&(o.mediaIndex-=1,o.partIndex=h.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const d=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&d&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const n=Math.max(e,this.mediaSequenceSync_.start);e!==n&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${n}`);const i=this.mediaSequenceSync_.getSyncInfoForTime(n);if(!i)return null;if(!i.isAppended)return i;const s=this.mediaSequenceSync_.getSyncInfoForTime(i.end);return s?(s.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),s):null}generateSegmentInfo_(e){const{independent:n,playlist:i,mediaIndex:s,startOfSegment:r,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=i.segments[s],d=typeof o=="number"&&c.parts[o],h={requestId:"segment-loader-"+Math.random(),uri:d&&d.resolvedUri||c.resolvedUri,mediaIndex:s,partIndex:d?o:null,isSyncRequest:a,startOfSegment:r,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:d&&d.duration||c.duration,segment:c,part:d,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:n},f=typeof l<"u"?l:this.isPendingTimestampOffset_;h.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:f});const g=cb(this.sourceUpdater_.audioBuffered());return typeof g=="number"&&(h.audioAppendStart=g-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(h.gopsToAlignWith=zse(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),h}timestampOffsetForSegment_(e){return Zse(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const n=this.currentTime_(),i=e.bandwidth,s=this.pendingSegment_.duration,r=Es.estimateSegmentRequestTime(s,i,this.playlist_,e.bytesReceived),a=Tie(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(r<=a)return;const o=Ose({main:this.vhs_.playlists.main,currentTime:n,bandwidth:i,duration:this.duration_(),segmentDuration:s,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=r-a-o.rebufferingImpact;let c=.5;a<=sa&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*bi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${wc(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")}handleTrackInfo_(e,n){const{hasAudio:i,hasVideo:s}=n,r={segmentInfo:Zl({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:i,hasVideo:s}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:r}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},Kse(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Po(this))))}handleTimingInfo_(e,n,i,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const r=this.pendingSegment_,a=pP(n);r[a]=r[a]||{},r[a][i]=s,this.logger_(`timinginfo: ${n} - ${i} - ${s}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Po(this)}handleCaptions_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));return}const s=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};n.forEach(a=>{r[a.stream]=r[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=r[a.stream];o.startTime=Math.min(o.startTime,a.startTime+s),o.endTime=Math.max(o.endTime,a.endTime+s),o.captions.push(a)}),Object.keys(r).forEach(a=>{const{startTime:o,endTime:l,captions:u}=r[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),Vse(c,this.vhs_.tech_,a),lf(o,l,c[a]),Fse({captionArray:u,inbandTextTracks:c,timestampOffset:s})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,n,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,i));return}this.addMetadataToTextTrack(i,n,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(n=>n())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(n=>n())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!hS({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;const{hasAudio:i,hasVideo:s,isMuxed:r}=n;return!(s&&!e.videoTimingInfo||i&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||hS({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Po(this),this.callQueue_.push(this.handleData_.bind(this,e,n));return}const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[pP(n.type)].start;else{const s=this.getCurrentMediaInfo_(),r=this.loaderType_==="main"&&s&&s.hasVideo;let a;r&&(a=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:a,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,n.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});const s=this.chooseNextRequest_();if(s.mediaIndex!==i.mediaIndex||s.partIndex!==i.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,n)}}updateAppendInitSegmentStatus(e,n){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:n,map:i,playlist:s}){if(i){const r=Uv(i);if(this.activeInitSegmentId_===r)return null;n=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=r}return n&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=s,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,n):null}handleQuotaExceededError_({segmentInfo:e,type:n,bytes:i},s){const r=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ru(r).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ru(a).join(", "));const o=r.length?r.start(0):0,l=r.length?r.end(r.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=Kh&&c-u<=Kh){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${ru(r).join(", ")}, video buffer: ${ru(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:n,bytes:i}));const h=this.currentTime_()-Kh;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${h}`),this.remove(0,h,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Kh}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=te.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Kh*1e3)},!0)}handleAppendError_({segmentInfo:e,type:n,bytes:i},s){if(s){if(s.code===c3){this.handleQuotaExceededError_({segmentInfo:e,type:n,bytes:i});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error({message:`${n} append of ${i.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:ve.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:i,data:s,bytes:r}){if(!r){const o=[s];let l=s.byteLength;i&&(o.unshift(i),l+=i.byteLength),r=Mse({bytes:l,segments:o})}const a={segmentInfo:Zl({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:n,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:n,bytes:r}))}handleSegmentTimingInfo_(e,n,i){if(!this.pendingSegment_||n!==this.pendingSegment_.requestId)return;const s=this.pendingSegment_.segment,r=`${e}TimingInfo`;s[r]||(s[r]={}),s[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,s[r].transmuxedPresentationStart=i.start.presentation,s[r].transmuxedDecodeStart=i.start.decode,s[r].transmuxedPresentationEnd=i.end.presentation,s[r].transmuxedDecodeEnd=i.end.decode,s[r].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,n){const{type:i,data:s}=n;if(!s||!s.byteLength||i==="audio"&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:i,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:r,data:s})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Po(this),this.loadQueue_.push(()=>{const n=zn({},e,{forceTimestampOffset:!0});zn(e,this.generateSegmentInfo_(n)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const n=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),s=this.mediaIndex!==null,r=e.timeline!==this.currentTimeline_&&e.timeline>0,a=i||s&&r;this.logger_(`Requesting
${N3(e.uri)}
${wc(e)}`),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Dse({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${wc(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:d})=>{const f={segmentInfo:Zl({segment:l})};u&&(f.keyInfo=u),c&&(f.trackInfo=c),d&&(f.timingInfo=d),this.trigger({type:o,metadata:f})}})}trimBackBuffer_(e){const n=Jse(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)}createSimplifiedSegmentObj_(e){const n=e.segment,i=e.part,s=e.segment.key||e.segment.map&&e.segment.map.key,r=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:i?i.resolvedUri:n.resolvedUri,byterange:i?i.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:s,isMediaInitialization:r},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===n.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),n.key){const l=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(n.key),a.key.iv=l}return n.map&&(a.map=this.initSegmentForMap(n.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,n){if(this.pendingSegment_.byteLength=n.bytesReceived,e<ag){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${ag}`);return}const i={bandwidthInfo:{from:this.bandwidth,to:n.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:i}),this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,n,i){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,i));return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_||n.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===aa.ABORTED)return;if(this.pause(),e.code===aa.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const s=this.pendingSegment_;this.saveBandwidthRelatedStats_(s.duration,n.stats),s.endOfAllRequests=n.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=Wse(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(s)}setTimeMapping_(e){const n=this.syncController_.mappingForTimeline(e);n!==null&&(this.timeMapping_=n)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:n,mediaIndex:i,firstVideoFrameTimeForData:s,currentVideoTimestampOffset:r,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=n.segments[i-1];return i===0||!u||typeof u.start>"u"||u.end!==s+r?s:o.start}waitForAppendsToComplete_(e){const n=this.getCurrentMediaInfo_(e);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:i,hasVideo:s,isMuxed:r}=n,a=this.loaderType_==="main"&&s,o=!this.audioDisabled_&&i&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const n=Qse(this.loaderType_,this.getCurrentMediaInfo_(),e);return n?(this.error({message:n,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:n,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const n=this.getMediaInfo_(),s=this.loaderType_==="main"&&n&&n.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;s&&(e.timingInfo.end=typeof s.end=="number"?s.end:s.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:Zl({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=ire(e,this.sourceType_);if(n&&(n.severity==="warn"?ve.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${wc(e)}`);return}this.logger_(`Appended ${wc(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const i=e.segment,s=e.part,r=i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3,a=s&&s.end&&this.currentTime_()-s.end>e.playlist.partTargetDuration*3;if(r||a){this.logger_(`bad ${r?"segment":"part"} ${wc(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<ag){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${ag}`);return}const n=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,s=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(s-n)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const n=e.segment,i=n.start,s=n.end;if(!mP(i)||!mP(s))return;lf(i,s,this.segmentMetadataTrack_);const r=te.WebKitDataCue||te.VTTCue,a={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,programDateTime:n.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:s},o=JSON.stringify(a),l=new r(i,s,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}}function $a(){}const M3=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},sre=["video","audio"],mS=(t,e)=>{const n=e[`${t}Buffer`];return n&&n.updating||e.queuePending[t]},rre=(t,e)=>{for(let n=0;n<e.length;n++){const i=e[n];if(i.type==="mediaSource")return null;if(i.type===t)return n}return null},od=(t,e)=>{if(e.queue.length===0)return;let n=0,i=e.queue[n];if(i.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),i.action(e),i.doneFn&&i.doneFn(),od("audio",e),od("video",e));return}if(t!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||mS(t,e))){if(i.type!==t){if(n=rre(t,e.queue),n===null)return;i=e.queue[n]}if(e.queue.splice(n,1),e.queuePending[t]=i,i.action(t,e),!i.doneFn){e.queuePending[t]=null,od(t,e);return}}},V3=(t,e)=>{const n=e[`${t}Buffer`],i=M3(t);n&&(n.removeEventListener("updateend",e[`on${i}UpdateEnd_`]),n.removeEventListener("error",e[`on${i}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},Zr=(t,e)=>t&&e&&Array.prototype.indexOf.call(t.sourceBuffers,e)!==-1,Ms={appendBuffer:(t,e,n)=>(i,s)=>{const r=s[`${i}Buffer`];if(Zr(s.mediaSource,r)){s.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${i}Buffer`);try{r.appendBuffer(t)}catch(a){s.logger_(`Error with code ${a.code} `+(a.code===c3?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${i}Buffer`),s.queuePending[i]=null,n(a)}}},remove:(t,e)=>(n,i)=>{const s=i[`${n}Buffer`];if(Zr(i.mediaSource,s)){i.logger_(`Removing ${t} to ${e} from ${n}Buffer`);try{s.remove(t,e)}catch{i.logger_(`Remove ${t} to ${e} from ${n}Buffer failed`)}}},timestampOffset:t=>(e,n)=>{const i=n[`${e}Buffer`];Zr(n.mediaSource,i)&&(n.logger_(`Setting ${e}timestampOffset to ${t}`),i.timestampOffset=t)},callback:t=>(e,n)=>{t()},endOfStream:t=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(n){ve.log.warn("Failed to call media source endOfStream",n)}}},duration:t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(n){ve.log.warn("Failed to set media source duration",n)}},abort:()=>(t,e)=>{if(e.mediaSource.readyState!=="open")return;const n=e[`${t}Buffer`];if(Zr(e.mediaSource,n)){e.logger_(`calling abort on ${t}Buffer`);try{n.abort()}catch(i){ve.log.warn(`Failed to abort on ${t}Buffer`,i)}}},addSourceBuffer:(t,e)=>n=>{const i=M3(t),s=Id(e);n.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const r=n.mediaSource.addSourceBuffer(s);r.addEventListener("updateend",n[`on${i}UpdateEnd_`]),r.addEventListener("error",n[`on${i}Error_`]),n.codecs[t]=e,n[`${t}Buffer`]=r},removeSourceBuffer:t=>e=>{const n=e[`${t}Buffer`];if(V3(t,e),!!Zr(e.mediaSource,n)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(n)}catch(i){ve.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,i)}}},changeType:t=>(e,n)=>{const i=n[`${e}Buffer`],s=Id(t);if(!Zr(n.mediaSource,i))return;const r=t.substring(0,t.indexOf(".")),a=n.codecs[e];if(a.substring(0,a.indexOf("."))===r)return;const l={codecsChangeInfo:{from:a,to:t}};n.trigger({type:"codecschange",metadata:l}),n.logger_(`changing ${e}Buffer codec from ${a} to ${t}`);try{i.changeType(s),n.codecs[e]=t}catch(u){l.errorType=ve.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,n.error_=u,n.trigger("error"),ve.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},Vs=({type:t,sourceUpdater:e,action:n,doneFn:i,name:s})=>{e.queue.push({type:t,action:n,doneFn:i,name:s}),od(t,e)},vP=(t,e)=>n=>{const i=e[`${t}Buffered`](),s=yie(i);if(e.logger_(`received "updateend" event for ${t} Source Buffer: `,s),e.queuePending[t]){const r=e.queuePending[t].doneFn;e.queuePending[t]=null,r&&r(e[`${t}Error_`])}od(t,e)};class F3 extends ve.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>od("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=dr("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=vP("video",this),this.onAudioUpdateEnd_=vP("audio",this),this.onVideoError_=n=>{this.videoError_=n},this.onAudioError_=n=>{this.audioError_=n},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,n){Vs({type:"mediaSource",sourceUpdater:this,action:Ms.addSourceBuffer(e,n),name:"addSourceBuffer"})}abort(e){Vs({type:e,sourceUpdater:this,action:Ms.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){ve.log.error("removeSourceBuffer is not supported!");return}Vs({type:"mediaSource",sourceUpdater:this,action:Ms.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!ve.browser.IS_FIREFOX&&te.MediaSource&&te.MediaSource.prototype&&typeof te.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return te.SourceBuffer&&te.SourceBuffer.prototype&&typeof te.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,n){if(!this.canChangeType()){ve.log.error("changeType is not supported!");return}Vs({type:e,sourceUpdater:this,action:Ms.changeType(n),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(n=>{const i=e[n];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(n,i);this.canChangeType()&&this.changeType(n,i)})}appendBuffer(e,n){const{segmentInfo:i,type:s,bytes:r}=e;if(this.processedAppend_=!0,s==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,n]),this.logger_(`delayed audio append of ${r.length} until video append`);return}const a=n;if(Vs({type:s,sourceUpdater:this,action:Ms.appendBuffer(r,i||{mediaIndex:-1},a),doneFn:n,name:"appendBuffer"}),s==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return Zr(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Ci()}videoBuffered(){return Zr(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Ci()}buffered(){const e=Zr(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=Zr(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():bie(this.audioBuffered(),this.videoBuffered())}setDuration(e,n=$a){Vs({type:"mediaSource",sourceUpdater:this,action:Ms.duration(e),name:"duration",doneFn:n})}endOfStream(e=null,n=$a){typeof e!="string"&&(e=void 0),Vs({type:"mediaSource",sourceUpdater:this,action:Ms.endOfStream(e),name:"endOfStream",doneFn:n})}removeAudio(e,n,i=$a){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){i();return}Vs({type:"audio",sourceUpdater:this,action:Ms.remove(e,n),doneFn:i,name:"remove"})}removeVideo(e,n,i=$a){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){i();return}Vs({type:"video",sourceUpdater:this,action:Ms.remove(e,n),doneFn:i,name:"remove"})}updating(){return!!(mS("audio",this)||mS("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Vs({type:"audio",sourceUpdater:this,action:Ms.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Vs({type:"video",sourceUpdater:this,action:Ms.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Vs({type:"audio",sourceUpdater:this,action:Ms.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Vs({type:"video",sourceUpdater:this,action:Ms.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),sre.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>V3(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const yP=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),are=t=>{const e=new Uint8Array(t);return Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("")},_P=new Uint8Array(`

`.split("").map(t=>t.charCodeAt(0)));class ore extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class lre extends fS{constructor(e,n={}){super(e,n),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Ci();const e=this.subtitlesTrack_.cues,n=e[0].startTime,i=e[e.length-1].startTime;return Ci([[n,i]])}initSegmentForMap(e,n=!1){if(!e)return null;const i=Uv(e);let s=this.initSegments_[i];if(n&&!s&&e.bytes){const r=_P.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(_P,e.bytes.byteLength),this.initSegments_[i]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return s||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,n){lf(e,n,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const n=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",n),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,n,i){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===aa.TIMEOUT&&this.handleTimeout_(),e.code===aa.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const s=this.pendingSegment_,r=i.mp4VttCues&&i.mp4VttCues.length;r&&(s.mp4VttCues=i.mp4VttCues),this.saveBandwidthRelatedStats_(s.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");const a=s.segment;if(a.map&&(a.map.bytes=n.map.bytes),s.bytes=n.bytes,typeof te.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,n,i),()=>this.stopForError({message:"Error loading vtt.js"}));return}a.requested=!0;try{this.parseVTTCues_(s)}catch(o){this.stopForError({message:o.message,metadata:{errorType:ve.Error.StreamingVttParserError,error:o}});return}if(r||this.updateTimeMapping_(s,this.syncController_.timelines[s.timeline],this.playlist_),s.cues.length?s.timingInfo={start:s.cues[0].startTime,end:s.cues[s.cues.length-1].endTime}:s.timingInfo={start:s.startOfSegment,end:s.startOfSegment+s.duration},s.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}s.byteLength=s.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,s.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new te.VTTCue(o.startTime,o.endTime,o.text):o)}),qse(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,n){const i=e&&e.type==="vtt",s=n&&n.type==="text";i&&s&&super.handleData_(e,n)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(i=>{const s=i.start+n,r=i.end+n,a=new te.VTTCue(s,r,i.cueText);i.settings&&i.settings.split(" ").forEach(o=>{const l=o.split(":"),u=l[0],c=l[1];a[u]=isNaN(c)?c:Number(c)}),e.cues.push(a)})}parseVTTCues_(e){let n,i=!1;if(typeof te.WebVTT!="function")throw new ore;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof te.TextDecoder=="function"?n=new te.TextDecoder("utf8"):(n=te.WebVTT.StringDecoder(),i=!0);const s=new te.WebVTT.Parser(te,te.vttjs,n);if(s.oncue=e.cues.push.bind(e.cues),s.ontimestampmap=a=>{e.timestampmap=a},s.onparsingerror=a=>{ve.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;i&&(a=yP(a)),s.parse(a)}let r=e.bytes;i&&(r=yP(r)),s.parse(r),s.flush()}updateTimeMapping_(e,n,i){const s=e.segment;if(!n)return;if(!e.cues.length){s.empty=!0;return}const{MPEGTS:r,LOCAL:a}=e.timestampmap,l=r/su.ONE_SECOND_IN_TS-a+n.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,d=this.handleRollover_(u.startTime+l,n.time);u.startTime=Math.max(d,0),u.endTime=Math.max(d+c,0)}),!i.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(u,c-s.duration)}}}handleRollover_(e,n){if(n===null)return e;let i=e*su.ONE_SECOND_IN_TS;const s=n*su.ONE_SECOND_IN_TS;let r;for(s<i?r=-8589934592:r=8589934592;Math.abs(i-s)>4294967296;)i+=r;return i/su.ONE_SECOND_IN_TS}}const ure=function(t,e){const n=t.cues;for(let i=0;i<n.length;i++){const s=n[i];if(e>=s.adStartTime&&e<=s.adEndTime)return s}return null},cre=function(t,e,n=0){if(!t.segments)return;let i=n,s;for(let r=0;r<t.segments.length;r++){const a=t.segments[r];if(s||(s=ure(e,i+a.duration/2)),s){if("cueIn"in a){s.endTime=i,s.adEndTime=i,i+=a.duration,s=null;continue}if(i<s.endTime){i+=a.duration;continue}s.endTime+=a.duration}else if("cueOut"in a&&(s=new te.VTTCue(i,i+a.duration,a.cueOut),s.adStartTime=i,s.adEndTime=i+parseFloat(a.cueOut),e.addCue(s)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);s=new te.VTTCue(i,i+a.duration,""),s.adStartTime=i-o,s.adEndTime=s.adStartTime+l,e.addCue(s)}i+=a.duration}};class bP{constructor({start:e,end:n,segmentIndex:i,partIndex:s=null,appended:r=!1}){this.start_=e,this.end_=n,this.segmentIndex_=i,this.partIndex_=s,this.appended_=r}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class dre{constructor(e,n=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=n}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class B3{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,n){const{mediaSequence:i,segments:s}=e;if(this.isReliable_=this.isReliablePlaylist_(i,s),!!this.isReliable_)return this.updateStorage_(s,i,this.calculateBaseTime_(i,s,n))}getSyncInfoForTime(e){for(const{segmentSyncInfo:n,partsSyncInfo:i}of this.storage_.values())if(i.length){for(const s of i)if(s.isInRange(e))return s}else if(n.isInRange(e))return n;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,n,i){const s=new Map;let r=`
`,a=i,o=n;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),d=a,h=d+l.duration,f=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),g=new bP({start:d,end:h,appended:f,segmentIndex:u});l.syncInfo=g;let v=a;const b=(l.parts||[]).map((I,w)=>{const P=v,M=v+I.duration,F=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[w]&&c.partsSyncInfo[w].isAppended),U=new bP({start:P,end:M,appended:F,segmentIndex:u,partIndex:w});return v=M,r+=`Media Sequence: ${o}.${w} | Range: ${P} --> ${M} | Appended: ${F}
`,I.syncInfo=U,U});s.set(o,new dre(g,b)),r+=`${N3(l.resolvedUri)} | Media Sequence: ${o} | Range: ${d} --> ${h} | Appended: ${f}
`,o++,a=h}),this.end_=a,this.storage_=s,this.diagnostics_=r}calculateBaseTime_(e,n,i){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const s=Math.min(...this.storage_.keys());if(e<s){const r=s-e;let a=this.storage_.get(s).segmentSyncInfo.start;for(let o=0;o<r;o++){const l=n[o];a-=l.duration}return a}return i}isReliablePlaylist_(e,n){return e!=null&&Array.isArray(n)&&n.length}}class TP extends B3{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,n,i){if(!this.storage_.size){const s=this.parent_.getSyncInfoForMediaSequence(e);return s?s.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,n,i)}}const hre=86400,fb=[{name:"VOD",run:(t,e,n,i,s)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(t,e,n,i,s,r)=>{const a=t.getMediaSequenceSync(r);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(s);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(t,e,n,i,s)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let r=null,a=null;const o=sS(e);s=s||0;for(let l=0;l<o.length;l++){const u=e.endList||s===0?l:o.length-(l+1),c=o[u],d=c.segment,h=t.timelineToDatetimeMappings[d.timeline];if(!h||!d.dateTimeObject)continue;let g=d.dateTimeObject.getTime()/1e3+h;if(d.parts&&typeof c.partIndex=="number")for(let b=0;b<c.partIndex;b++)g+=d.parts[b].duration;const v=Math.abs(s-g);if(a!==null&&(v===0||a<v))break;a=v,r={time:g,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return r}},{name:"Segment",run:(t,e,n,i,s)=>{let r=null,a=null;s=s||0;const o=sS(e);for(let l=0;l<o.length;l++){const u=e.endList||s===0?l:o.length-(l+1),c=o[u],d=c.segment,h=c.part&&c.part.start||d&&d.start;if(d.timeline===i&&typeof h<"u"){const f=Math.abs(s-h);if(a!==null&&a<f)break;(!r||a===null||a>=f)&&(a=f,r={time:h,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return r}},{name:"Discontinuity",run:(t,e,n,i,s)=>{let r=null;if(s=s||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=t.discontinuities[u];if(c){const d=Math.abs(s-c.time);if(a!==null&&a<d)break;(!r||a===null||a>=d)&&(a=d,r={time:c.time,segmentIndex:l,partIndex:null})}}}return r}},{name:"Playlist",run:(t,e,n,i,s)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class fre extends ve.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const n=new B3,i=new TP(n),s=new TP(n);this.mediaSequenceStorage_={main:n,audio:i,vtt:s},this.logger_=dr("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,n,i,s,r){if(n!==1/0)return fb.find(({name:l})=>l==="VOD").run(this,e,n);const a=this.runStrategies_(e,n,i,s,r);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:d}=l;if(c<0)continue;const h=e.segments[c],f=d,g=f+h.duration;if(this.logger_(`Strategy: ${u}. Current time: ${s}. selected segment: ${c}. Time: [${f} -> ${g}]}`),s>=f&&s<g)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:s})}getExpiredTime(e,n){if(!e||!e.segments)return null;const i=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!i.length)return null;const s=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return s.segmentIndex>0&&(s.time*=-1),Math.abs(s.time+Lf({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:s.segmentIndex,endIndex:0}))}runStrategies_(e,n,i,s,r){const a=[];for(let o=0;o<fb.length;o++){const l=fb[o],u=l.run(this,e,n,i,s,r);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,n){let i=e[0].syncPoint,s=Math.abs(e[0].syncPoint[n.key]-n.value),r=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[n.key]-n.value);o<s&&(s=o,i=e[a].syncPoint,r=e[a].strategy)}return this.logger_(`syncPoint for [${n.key}: ${n.value}] chosen with strategy [${r}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(e,n){const i=n.mediaSequence-e.mediaSequence;if(i>hre){ve.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);return}for(let s=i-1;s>=0;s--){const r=e.segments[s];if(r&&typeof r.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+s,time:r.start},this.logger_(`playlist refresh sync: [time:${n.syncInfo.time}, mediaSequence: ${n.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const n=e.segments[0],i=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:n}){const i=this.calculateSegmentTimeMapping_(e,e.timingInfo,n),s=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:s.start}));const r=s.dateTimeObject;s.discontinuity&&n&&r&&(this.timelineToDatetimeMappings[s.timeline]=-(r.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,n,i){const s=e.segment,r=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-n.start},i&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=n.end+a.mapping;else if(a)o=n.start+a.mapping,l=n.end+a.mapping;else return!1;return r&&(r.start=o,r.end=l),(!s.start||o<s.start)&&(s.start=o),s.end=l,!0}saveDiscontinuitySyncInfo_(e){const n=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(let s=0;s<n.discontinuityStarts.length;s++){const r=n.discontinuityStarts[s],a=n.discontinuitySequence+s+1,o=r-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=i.start-Lf({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:r}):u=i.end+Lf({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class mre extends ve.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:n,to:i}){return typeof n=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:n,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:n,to:i}){if(typeof n=="number"&&typeof i=="number"){this.lastTimelineChanges_[e]={type:e,from:n,to:i},delete this.pendingTimelineChanges_[e];const s={timelineChangeInfo:{from:n,to:i}};this.trigger({type:"timelinechange",metadata:s})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const pre=C3(w3(function(){var t=function(){function v(){this.listeners={}}var b=v.prototype;return b.on=function(w,P){this.listeners[w]||(this.listeners[w]=[]),this.listeners[w].push(P)},b.off=function(w,P){if(!this.listeners[w])return!1;var M=this.listeners[w].indexOf(P);return this.listeners[w]=this.listeners[w].slice(0),this.listeners[w].splice(M,1),M>-1},b.trigger=function(w){var P=this.listeners[w];if(P)if(arguments.length===2)for(var M=P.length,F=0;F<M;++F)P[F].call(this,arguments[1]);else for(var U=Array.prototype.slice.call(arguments,1),D=P.length,S=0;S<D;++S)P[S].apply(this,U)},b.dispose=function(){this.listeners={}},b.pipe=function(w){this.on("data",function(P){w.push(P)})},v}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(v){return v.subarray(0,v.byteLength-v[v.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const n=function(){const v=[[[],[],[],[],[]],[[],[],[],[],[]]],b=v[0],I=v[1],w=b[4],P=I[4];let M,F,U;const D=[],S=[];let y,E,A,k,R,W;for(M=0;M<256;M++)S[(D[M]=M<<1^(M>>7)*283)^M]=M;for(F=U=0;!w[F];F^=y||1,U=S[U]||1)for(k=U^U<<1^U<<2^U<<3^U<<4,k=k>>8^k&255^99,w[F]=k,P[k]=F,A=D[E=D[y=D[F]]],W=A*16843009^E*65537^y*257^F*16843008,R=D[k]*257^k*16843008,M=0;M<4;M++)b[M][F]=R=R<<24^R>>>8,I[M][k]=W=W<<24^W>>>8;for(M=0;M<5;M++)b[M]=b[M].slice(0),I[M]=I[M].slice(0);return v};let i=null;class s{constructor(b){i||(i=n()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];let I,w,P;const M=this._tables[0][4],F=this._tables[1],U=b.length;let D=1;if(U!==4&&U!==6&&U!==8)throw new Error("Invalid aes key size");const S=b.slice(0),y=[];for(this._key=[S,y],I=U;I<4*U+28;I++)P=S[I-1],(I%U===0||U===8&&I%U===4)&&(P=M[P>>>24]<<24^M[P>>16&255]<<16^M[P>>8&255]<<8^M[P&255],I%U===0&&(P=P<<8^P>>>24^D<<24,D=D<<1^(D>>7)*283)),S[I]=S[I-U]^P;for(w=0;I;w++,I--)P=S[w&3?I:I-4],I<=4||w<4?y[w]=P:y[w]=F[0][M[P>>>24]]^F[1][M[P>>16&255]]^F[2][M[P>>8&255]]^F[3][M[P&255]]}decrypt(b,I,w,P,M,F){const U=this._key[1];let D=b^U[0],S=P^U[1],y=w^U[2],E=I^U[3],A,k,R;const W=U.length/4-2;let se,ae=4;const Z=this._tables[1],ne=Z[0],ee=Z[1],Q=Z[2],j=Z[3],le=Z[4];for(se=0;se<W;se++)A=ne[D>>>24]^ee[S>>16&255]^Q[y>>8&255]^j[E&255]^U[ae],k=ne[S>>>24]^ee[y>>16&255]^Q[E>>8&255]^j[D&255]^U[ae+1],R=ne[y>>>24]^ee[E>>16&255]^Q[D>>8&255]^j[S&255]^U[ae+2],E=ne[E>>>24]^ee[D>>16&255]^Q[S>>8&255]^j[y&255]^U[ae+3],ae+=4,D=A,S=k,y=R;for(se=0;se<4;se++)M[(3&-se)+F]=le[D>>>24]<<24^le[S>>16&255]<<16^le[y>>8&255]<<8^le[E&255]^U[ae++],A=D,D=S,S=y,y=E,E=A}}class r extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(b){this.jobs.push(b),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(v){return v<<24|(v&65280)<<8|(v&16711680)>>8|v>>>24},o=function(v,b,I){const w=new Int32Array(v.buffer,v.byteOffset,v.byteLength>>2),P=new s(Array.prototype.slice.call(b)),M=new Uint8Array(v.byteLength),F=new Int32Array(M.buffer);let U,D,S,y,E,A,k,R,W;for(U=I[0],D=I[1],S=I[2],y=I[3],W=0;W<w.length;W+=4)E=a(w[W]),A=a(w[W+1]),k=a(w[W+2]),R=a(w[W+3]),P.decrypt(E,A,k,R,F,W),F[W]=a(F[W]^U),F[W+1]=a(F[W+1]^D),F[W+2]=a(F[W+2]^S),F[W+3]=a(F[W+3]^y),U=E,D=A,S=k,y=R;return M};class l{constructor(b,I,w,P){const M=l.STEP,F=new Int32Array(b.buffer),U=new Uint8Array(b.byteLength);let D=0;for(this.asyncStream_=new r,this.asyncStream_.push(this.decryptChunk_(F.subarray(D,D+M),I,w,U)),D=M;D<F.length;D+=M)w=new Uint32Array([a(F[D-4]),a(F[D-3]),a(F[D-2]),a(F[D-1])]),this.asyncStream_.push(this.decryptChunk_(F.subarray(D,D+M),I,w,U));this.asyncStream_.push(function(){P(null,e(U))})}static get STEP(){return 32e3}decryptChunk_(b,I,w,P){return function(){const M=o(b,I,w);P.set(M,b.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var d=c,h=function(b){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(b):b&&b.buffer instanceof ArrayBuffer},f=d.BigInt||Number;f("0x1"),f("0x100"),f("0x10000"),f("0x1000000"),f("0x100000000"),f("0x10000000000"),f("0x1000000000000"),f("0x100000000000000"),f("0x10000000000000000"),function(){var v=new Uint16Array([65484]),b=new Uint8Array(v.buffer,v.byteOffset,v.byteLength);return b[0]===255?"big":b[0]===204?"little":"unknown"}();const g=function(v){const b={};return Object.keys(v).forEach(I=>{const w=v[I];h(w)?b[I]={bytes:w.buffer,byteOffset:w.byteOffset,byteLength:w.byteLength}:b[I]=w}),b};self.onmessage=function(v){const b=v.data,I=new Uint8Array(b.encrypted.bytes,b.encrypted.byteOffset,b.encrypted.byteLength),w=new Uint32Array(b.key.bytes,b.key.byteOffset,b.key.byteLength/4),P=new Uint32Array(b.iv.bytes,b.iv.byteOffset,b.iv.byteLength/4);new l(I,w,P,function(M,F){self.postMessage(g({source:b.source,decrypted:F}),[F.buffer])})}}));var gre=E3(pre);const vre=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},U3=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},pS=(t,e)=>{e.activePlaylistLoader=t,t.load()},yre=(t,e)=>()=>{const{segmentLoaders:{[t]:n,main:i},mediaTypes:{[t]:s}}=e,r=s.activeTrack(),a=s.getActiveGroup(),o=s.activePlaylistLoader,l=s.lastGroup_;if(!(a&&l&&a.id===l.id)&&(s.lastGroup_=a,s.lastTrack_=r,U3(n,s),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&i.resetEverything();return}n.resyncLoader(),pS(a.playlistLoader,s)}},_re=(t,e)=>()=>{const{segmentLoaders:{[t]:n},mediaTypes:{[t]:i}}=e;i.lastGroup_=null,n.abort(),n.pause()},bre=(t,e)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[t]:i,main:s},mediaTypes:{[t]:r}}=e,a=r.activeTrack(),o=r.getActiveGroup(),l=r.activePlaylistLoader,u=r.lastTrack_;if(!(u&&a&&u.id===a.id)&&(r.lastGroup_=o,r.lastTrack_=a,U3(i,r),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,d=c.selectPlaylist();if(c.media()===d)return;r.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),n.pause(),s.resetEverything(),c.fastQualityChange_(d);return}if(t==="AUDIO"){if(!o.playlistLoader){s.setAudio(!0),s.resetEverything();return}i.setAudio(!0),s.setAudio(!1)}if(l===o.playlistLoader){pS(o.playlistLoader,r);return}i.track&&i.track(a),i.resetEverything(),pS(o.playlistLoader,r)}},$v={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:n},excludePlaylist:i}=e,s=n.activeTrack(),r=n.activeGroup(),a=(r.filter(l=>l.default)[0]||r[0]).id,o=n.tracks[a];if(s===o){i({error:{message:"Problem encountered loading the default audio track."}});return}ve.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in n.tracks)n.tracks[l].enabled=n.tracks[l]===o;n.onTrackChanged()},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:n}}=e;ve.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const i=n.activeTrack();i&&(i.mode="disabled"),n.onTrackChanged()}},SP={AUDIO:(t,e,n)=>{if(!e)return;const{tech:i,requestOptions:s,segmentLoaders:{[t]:r}}=n;e.on("loadedmetadata",()=>{const a=e.media();r.playlist(a,s),(!i.paused()||a.endList&&i.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),s),i.paused()||r.load()}),e.on("error",$v[t](t,n))},SUBTITLES:(t,e,n)=>{const{tech:i,requestOptions:s,segmentLoaders:{[t]:r},mediaTypes:{[t]:a}}=n;e.on("loadedmetadata",()=>{const o=e.media();r.playlist(o,s),r.track(a.activeTrack()),(!i.paused()||o.endList&&i.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),s),i.paused()||r.load()}),e.on("error",$v[t](t,n))}},Tre={AUDIO:(t,e)=>{const{vhs:n,sourceType:i,segmentLoaders:{[t]:s},requestOptions:r,main:{mediaGroups:a},mediaTypes:{[t]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,d=Qm(c.main);(!a[t]||Object.keys(a[t]).length===0)&&(a[t]={main:{default:{default:!0}}},d&&(a[t].main.default.playlists=c.main.playlists));for(const h in a[t]){o[h]||(o[h]=[]);for(const f in a[t][h]){let g=a[t][h][f],v;if(d?(u(`AUDIO group '${h}' label '${f}' is a main playlist`),g.isMainPlaylist=!0,v=null):i==="vhs-json"&&g.playlists?v=new $c(g.playlists[0],n,r):g.resolvedUri?v=new $c(g.resolvedUri,n,r):g.playlists&&i==="dash"?v=new cS(g.playlists[0],n,r,c):v=null,g=Qt({id:f,playlistLoader:v},g),SP[t](t,g.playlistLoader,e),o[h].push(g),typeof l[f]>"u"){const b=new ve.AudioTrack({id:f,kind:vre(g),enabled:!1,language:g.language,default:g.default,label:f});l[f]=b}}}s.on("error",$v[t](t,e))},SUBTITLES:(t,e)=>{const{tech:n,vhs:i,sourceType:s,segmentLoaders:{[t]:r},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[t]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const d in o[t]){l[d]||(l[d]=[]);for(const h in o[t][d]){if(!i.options_.useForcedSubtitles&&o[t][d][h].forced)continue;let f=o[t][d][h],g;if(s==="hls")g=new $c(f.resolvedUri,i,a);else if(s==="dash"){if(!f.playlists.filter(b=>b.excludeUntil!==1/0).length)return;g=new cS(f.playlists[0],i,a,c)}else s==="vhs-json"&&(g=new $c(f.playlists?f.playlists[0]:f.resolvedUri,i,a));if(f=Qt({id:h,playlistLoader:g},f),SP[t](t,f.playlistLoader,e),l[d].push(f),typeof u[h]>"u"){const v=n.addRemoteTextTrack({id:h,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:h},!1).track;u[h]=v}}}r.on("error",$v[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:n,main:{mediaGroups:i},mediaTypes:{[t]:{groups:s,tracks:r}}}=e;for(const a in i[t]){s[a]||(s[a]=[]);for(const o in i[t][a]){const l=i[t][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=n.options_.vhs&&n.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=Qt(c,u[c.instreamId])),c.default===void 0&&delete c.default,s[a].push(Qt({id:o},l)),typeof r[o]>"u"){const d=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;r[o]=d}}}}},$3=(t,e)=>{for(let n=0;n<t.length;n++)if(kC(e,t[n])||t[n].playlists&&$3(t[n].playlists,e))return!0;return!1},Sre=(t,e)=>n=>{const{mainPlaylistLoader:i,mediaTypes:{[t]:{groups:s}}}=e,r=i.media();if(!r)return null;let a=null;r.attributes[t]&&(a=s[r.attributes[t]]);const o=Object.keys(s);if(!a)if(t==="AUDIO"&&o.length>1&&Qm(e.main))for(let l=0;l<o.length;l++){const u=s[o[l]];if($3(u,r)){a=u;break}}else s.main?a=s.main:o.length===1&&(a=s[o[0]]);return typeof n>"u"?a:n===null||!a?null:a.filter(l=>l.id===n.id)[0]||null},Ere={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const i in n)if(n[i].enabled)return n[i];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const i in n)if(n[i].mode==="showing"||n[i].mode==="hidden")return n[i];return null}},Cre=(t,{mediaTypes:e})=>()=>{const n=e[t].activeTrack();return n?e[t].activeGroup(n):null},wre=t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{Tre[u](u,t)});const{mediaTypes:e,mainPlaylistLoader:n,tech:i,vhs:s,segmentLoaders:{["AUDIO"]:r,main:a}}=t;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=Sre(u,t),e[u].activeTrack=Ere[u](u,t),e[u].onGroupChanged=yre(u,t),e[u].onGroupChanging=_re(u,t),e[u].onTrackChanged=bre(u,t),e[u].getActiveGroup=Cre(u,t)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(d=>d.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),r.setAudio(!0)):a.setAudio(!0)}n.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),n.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),s.on("dispose",()=>{i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(const u in e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[u])},xre=()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:$a,activeTrack:$a,getActiveGroup:$a,onGroupChanged:$a,onTrackChanged:$a,lastTrack_:null,logger_:dr(`MediaGroups[${e}]`)}}),t};class EP{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=bs(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(n=>[n.ID,n])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class Ire extends ve.EventTarget{constructor(e,n){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new EP,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=dr("Content Steering"),this.xhr_=e,this.getBandwidth_=n}assignTagProperties(e,n){this.manifestType_=n.serverUri?"HLS":"DASH";const i=n.serverUri||n.serverURL;if(!i){this.logger_(`steering manifest URL is ${i}, cannot request steering manifest.`),this.trigger("error");return}if(i.startsWith("data:")){this.decodeDataUriManifest_(i.substring(i.indexOf(",")+1));return}this.steeringManifest.reloadUri=bs(e,i),this.defaultPathway=n.pathwayId||n.defaultServiceLocation,this.queryBeforeStart=n.queryBeforeStart,this.proxyServerUrl_=n.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const n=this.steeringManifest.reloadUri;if(!n)return;const i=e?n:this.getRequestURI(n);if(!i){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const s={contentSteeringInfo:{uri:i}};this.trigger({type:"contentsteeringloadstart",metadata:s}),this.request_=this.xhr_({uri:i,requestType:"content-steering-manifest"},(r,a)=>{if(r){if(a.status===410){this.logger_(`manifest request 410 ${r}.`),this.logger_(`There will be no more content steering requests to ${i} this session.`),this.excludedSteeringManifestURLs.add(i);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${r}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${r}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:s});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:ve.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:s.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const n=new te.URL(e),i=new te.URL(this.proxyServerUrl_);return i.searchParams.set("url",encodeURI(n.toString())),this.setSteeringParams_(i.toString())}decodeDataUriManifest_(e){const n=JSON.parse(te.atob(e));this.assignSteeringProperties_(n)}setSteeringParams_(e){const n=new te.URL(e),i=this.getPathway(),s=this.getBandwidth_();if(i){const r=`_${this.manifestType_}_pathway`;n.searchParams.set(r,i)}if(s){const r=`_${this.manifestType_}_throughput`;n.searchParams.set(r,s)}return n.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const i=(s=>{for(const r of s)if(this.availablePathways_.has(r))return r;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==i&&(this.currentPathway=i,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const n=s=>this.excludedSteeringManifestURLs.has(s);if(this.proxyServerUrl_){const s=this.setProxyServerUrl_(e);if(!n(s))return s}const i=this.setSteeringParams_(e);return n(i)?null:i}startTTLTimeout_(e=this.steeringManifest.ttl){const n=e*1e3;this.ttlTimeout_=te.setTimeout(()=>{this.requestSteeringManifest()},n)}clearTTLTimeout_(){te.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new EP}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,n){return!n&&this.steeringManifest.reloadUri||n&&(bs(e,n.serverURL)!==this.steeringManifest.reloadUri||n.defaultServiceLocation!==this.defaultPathway||n.queryBeforeStart!==this.queryBeforeStart||n.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const Are=(t,e)=>{let n=null;return(...i)=>{clearTimeout(n),n=setTimeout(()=>{t.apply(null,i)},e)}},kre=10;let Do;const Pre=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Dre=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},Rre=function({currentPlaylist:t,buffered:e,currentTime:n,nextPlaylist:i,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:a,bufferBasedABR:o,log:l}){if(!i)return ve.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${t&&t.id||"null"} -> ${i.id}`;if(!t)return l(`${u} as current playlist is not set`),!0;if(i.id===t.id)return!1;const c=!!Uc(e,n).length;if(!t.endList)return!c&&typeof t.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const d=xC(e,n),h=o?bi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:bi.MAX_BUFFER_LOW_WATER_LINE;if(a<h)return l(`${u} as duration < max low water line (${a} < ${h})`),!0;const f=i.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;if(f<g&&(!o||d<r)){let v=`${u} as next bandwidth < current bandwidth (${f} < ${g})`;return o&&(v+=` and forwardBuffer < bufferHighWaterLine (${d} < ${r})`),l(v),!0}if((!o||f>g)&&d>=s){let v=`${u} as forwardBuffer >= bufferLowWaterLine (${d} >= ${s})`;return o&&(v+=` and next bandwidth > current bandwidth (${f} > ${g})`),l(v),!0}return l(`not ${u} as no switching criteria met`),!1};class Lre extends ve.EventTarget{constructor(e){super(),this.fastQualityChange_=Are(this.fastQualityChange_.bind(this),100);const{src:n,withCredentials:i,tech:s,bandwidth:r,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:d,bufferBasedABR:h,leastPixelDiffSelector:f,captionServices:g,experimentalUseMMS:v}=e;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:b}=e;(b===null||typeof b>"u")&&(b=1/0),Do=a,this.bufferBasedABR=!!h,this.leastPixelDiffSelector=!!f,this.withCredentials=i,this.tech_=s,this.vhs_=s.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=b,this.enableLowInitialPlaylist=u,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:b,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=xre(),v&&te.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new te.ManagedMediaSource,this.usingManagedMediaSource_=!0,ve.log("Using ManagedMediaSource")):te.MediaSource&&(this.mediaSource=new te.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=Ci(),this.hasPlayed_=!1,this.syncController_=new fre(e),this.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new gre,this.sourceUpdater_=new F3(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new mre,this.keyStatusMap_=new Map;const I={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:g,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:d,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new cS(n,this.vhs_,Qt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new $c(n,this.vhs_,Qt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new fS(Qt(I,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new fS(Qt(I,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new lre(Qt(I,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((M,F)=>{function U(){s.off("vttjserror",D),M()}function D(){s.off("vttjsloaded",U),F()}s.one("vttjsloaded",U),s.one("vttjserror",D),s.addWebVttScript_()})}),e);const w=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new Ire(this.vhs_.xhr,w),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),Pre.forEach(M=>{this[M+"_"]=Dre.bind(this,M)}),this.logger_=dr("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const P=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(P,()=>{const M=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-M,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return e===-1||n===-1?-1:e+n}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)}switchMedia_(e,n,i){const s=this.media(),r=s&&(s.id||s.uri),a=e&&(e.id||e.uri);if(r&&r!==a){this.logger_(`switch media ${r} -> ${a} from ${n}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:n};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${n}`})}this.mainPlaylistLoader_.media(e,i)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const n=this.mediaTypes_[e],i=n?n.activeGroup():null,s=this.contentSteeringController_.getPathway();if(i&&s){const a=(i.length?i[0].playlists:i.playlists).filter(o=>o.attributes.serviceLocation===s);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=te.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(te.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;const i=e.mediaGroups.AUDIO,s=Object.keys(i);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const o=i.main||s.length&&i[s[0]];for(const l in o)if(o[l].default){r={label:l};break}}if(!r)return n;const a=[];for(const o in i)if(i[o][r.label]){const l=i[o][r.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:n}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const n=this.mainPlaylistLoader_.media(),i=n.targetDuration*1.5*1e3;rS(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,n.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.mainSegmentLoader_.load()),wre({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),n),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let n=this.mainPlaylistLoader_.media();if(!n){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let i;if(this.enableLowInitialPlaylist&&(i=this.selectInitialPlaylist()),i||(i=this.selectPlaylist()),!i||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;n=this.initialMedia_}this.handleUpdatedMediaPlaylist(n)}),this.mainPlaylistLoader_.on("error",()=>{const n=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const n=this.mainPlaylistLoader_.media(),i=n.targetDuration*1.5*1e3;rS(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const n=this.mainPlaylistLoader_.media();if(n.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(n)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(n=>{this.mainPlaylistLoader_.on(n,i=>{this.player_.trigger(zn({},i))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,n){const i=e.mediaGroups||{};let s=!0;const r=Object.keys(i.AUDIO);for(const a in i.AUDIO)for(const o in i.AUDIO[a])i.AUDIO[a][o].uri||(s=!1);s&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Do.Playlist.isAes(n)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const n=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),s=this.bufferLowWaterLine(),r=this.bufferHighWaterLine(),a=this.tech_.buffered();return Rre({buffered:a,currentTime:i,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const i=this.audioSegmentLoader_.pendingSegment_;if(!i||!i.segment||!i.segment.syncInfo)return;const s=i.segment.syncInfo.end+.01;this.tech_.setCurrentTime(s)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:kre}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(i=>{this.mainSegmentLoader_.on(i,s=>{this.player_.trigger(zn({},s))}),this.audioSegmentLoader_.on(i,s=>{this.player_.trigger(zn({},s))}),this.subtitleSegmentLoader_.on(i,s=>{this.player_.trigger(zn({},s))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const n=this.seekable();if(!n.length)return!1;const i=n.end(0);let s=i;if(e.start){const r=e.start.timeOffset;r<0?s=Math.max(i+r,n.start(0)):s=Math.min(i,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(s)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,n=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return!1;const s=Do.Playlist.playlistEnd(e,i),r=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return s-r<=ra;const o=a.end(a.length-1);return o-r<=ra&&s-o<=ra}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:n={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||n.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=n,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const s=this.mainPlaylistLoader_.main.playlists,r=s.filter(o_),a=r.length===1&&r[0]===e;if(s.length===1&&i!==1/0)return ve.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const g=this.pathwayAttribute_(e),v=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(g),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(g)},v);return}let f=!1;s.forEach(g=>{if(g===e)return;const v=g.excludeUntil;typeof v<"u"&&v!==1/0&&(f=!0,delete g.excludeUntil)}),f&&(ve.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+i*1e3,e.excludeUntil=o,n.reason&&(e.lastExcludeReason_=n.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=n.internal?this.logger_:ve.log.warn,c=n.message?" "+n.message:"";u(`${n.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const d=l.targetDuration/2*1e3||5*1e3,h=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=d;return this.switchMedia_(l,"exclude",a||h)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,n){const i=[],s=e==="all";(s||e==="main")&&i.push(this.mainPlaylistLoader_);const r=[];(s||e==="audio")&&r.push("AUDIO"),(s||e==="subtitle")&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&i.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&i.push(o)}),i.forEach(a=>n.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const n=Uc(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(n&&n.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Do.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,n){const i=e.media();if(!i)return null;const s=this.syncController_.getMediaSequenceSync(n);if(s&&s.isReliable){const o=s.start,l=s.end;if(!isFinite(o)||!isFinite(l))return null;const u=Do.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i),c=Math.max(o,l-u);return Ci([[o,c]])}const r=this.syncController_.getExpiredTime(i,this.duration());if(r===null)return null;const a=Do.Playlist.seekable(i,r,Do.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i));return a.length?a:null}computeFinalSeekable_(e,n){if(!n)return e;const i=e.start(0),s=e.end(0),r=n.start(0),a=n.end(0);return r>s||i>a?e:Ci([[Math.max(i,r),Math.min(s,a)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let n;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!n))return;const i=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,n),!this.seekable_||i&&i.length&&this.seekable_.length&&i.start(0)===this.seekable_.start(0)&&i.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${Q4(this.seekable_)}]`);const s={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:s}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1));return}const n=this.tech_.buffered();let i=Do.Playlist.duration(this.mainPlaylistLoader_.media());n.length>0&&(i=Math.max(i,n.end(n.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const n=this.mediaTypes_[e].groups;for(const i in n)n[i].forEach(s=>{s.playlistLoader&&s.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!i)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const i=Of(this.main(),n),s={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(s.video=i.video||e.main.videoCodec||_ee),e.main.isMuxed&&(s.video+=`,${i.audio||e.main.audioCodec||dk}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(s.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||dk,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!s.audio&&!s.video){this.excludePlaylist({playlistToExclude:n,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?kf(c,this.usingManagedMediaSource_):G0(c),o={};let l;if(["video","audio"].forEach(function(u){if(s.hasOwnProperty(u)&&!a(e[u].isFmp4,s[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(s[u]),u==="audio"&&(l=c)}}),r&&l&&n.attributes.AUDIO){const u=n.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==n&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${s.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,d)=>(c&&(c+=", "),c+=`${d} does not support codec(s): "${o[d].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:n,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const d=(Qr(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,h=(Qr(s[c]||"")[0]||{}).type;d&&h&&d.toLowerCase()!==h.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${s[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:n,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return s}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}excludeUnsupportedVariants_(){const e=this.main().playlists,n=[];Object.keys(e).forEach(i=>{const s=e[i];if(n.indexOf(s.id)!==-1)return;n.push(s.id);const r=Of(this.main,s),a=[];r.audio&&!G0(r.audio)&&!kf(r.audio,this.usingManagedMediaSource_)&&a.push(`audio codec ${r.audio}`),r.video&&!G0(r.video)&&!kf(r.video,this.usingManagedMediaSource_)&&a.push(`video codec ${r.video}`),r.text&&r.text==="stpp.ttml.im1t"&&a.push(`text codec ${r.text}`),a.length&&(s.excludeUntil=1/0,this.logger_(`excluding ${s.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const n=[],i=this.main().playlists,s=hm(Qr(e)),r=rP(s),a=s.video&&Qr(s.video)[0]||null,o=s.audio&&Qr(s.audio)[0]||null;Object.keys(i).forEach(l=>{const u=i[l];if(n.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;n.push(u.id);const c=[],d=Of(this.mainPlaylistLoader_.main,u),h=rP(d);if(!(!d.audio&&!d.video)){if(h!==r&&c.push(`codec count "${h}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const f=d.video&&Qr(d.video)[0]||null,g=d.audio&&Qr(d.audio)[0]||null;f&&a&&f.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${f.type}" !== "${a.type}"`),g&&o&&g.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${g.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let n=0;const i=this.seekable();i.length&&(n=i.start(0)),cre(e,this.cueTagsTrack_,n)}goalBufferLength(){const e=this.tech_.currentTime(),n=bi.GOAL_BUFFER_LENGTH,i=bi.GOAL_BUFFER_LENGTH_RATE,s=Math.max(n,bi.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*i,s)}bufferLowWaterLine(){const e=this.tech_.currentTime(),n=bi.BUFFER_LOW_WATER_LINE,i=bi.BUFFER_LOW_WATER_LINE_RATE,s=Math.max(n,bi.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(n,bi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*i,this.bufferBasedABR?r:s)}bufferHighWaterLine(){return bi.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){fP(this.inbandTextTracks_,"com.apple.streaming",this.tech_),jse({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,n,i){const s=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();fP(this.inbandTextTracks_,e,this.tech_),Use({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:s,videoDuration:i})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const n of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(n));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(n=>{this.contentSteeringController_.on(n,i=>{this.trigger(zn({},i))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const n=this.main();(this.contentSteeringController_.didDASHTagChange(n.uri,n.contentSteering)||(()=>{const r=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of n.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!r.has(l)))return!0}return!!(!a.length&&r.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const i=this.main().playlists,s=new Set;let r=!1;Object.keys(i).forEach(a=>{const o=i[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,r=!0);const d=!o.excludeUntil&&o.excludeUntil!==1/0;!s.has(o.id)&&u&&d&&(s.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(r=!0)}}),r&&this.changeSegmentPathway_()}handlePathwayClones_(){const n=this.main().playlists,i=this.contentSteeringController_.currentPathwayClones,s=this.contentSteeringController_.nextPathwayClones;if(i&&i.size||s&&s.size){for(const[a,o]of i.entries())s.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of s.entries()){const l=i.get(a);if(!l){n.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...s])))}}equalPathwayClones_(e,n){if(e["BASE-ID"]!==n["BASE-ID"]||e.ID!==n.ID||e["URI-REPLACEMENT"].HOST!==n["URI-REPLACEMENT"].HOST)return!1;const i=e["URI-REPLACEMENT"].PARAMS,s=n["URI-REPLACEMENT"].PARAMS;for(const r in i)if(i[r]!==s[r])return!1;for(const r in s)if(i[r]!==s[r])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const n="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(i=>{const s=this.mainPlaylistLoader_.getKeyIdSet(i);!s||!s.size||s.forEach(r=>{const a="usable",o=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===a,l=i.lastExcludeReason_===n&&i.excludeUntil===1/0;o?o&&l&&(delete i.excludeUntil,delete i.lastExcludeReason_,this.logger_(`enabling playlist ${i.id} because key ID ${r} is ${a}`)):(i.excludeUntil!==1/0&&i.lastExcludeReason_!==n&&(i.excludeUntil=1/0,i.lastExcludeReason_=n,this.logger_(`excluding playlist ${i.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{const s=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,r=i.excludeUntil===1/0&&i.lastExcludeReason_===n;s&&r&&(delete i.excludeUntil,ve.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${n} key IDs`))})}addKeyStatus_(e,n){const r=(typeof e=="string"?e:are(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${n}' with key ID ${r} added to the keyStatusMap`),this.keyStatusMap_.set(r,n)}updatePlaylistByKeyStatus(e,n){this.addKeyStatus_(e,n),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const Ore=(t,e,n)=>i=>{const s=t.main.playlists[e],r=AC(s),a=o_(s);if(typeof i>"u")return a;i?delete s.disabled:s.disabled=!0;const o={renditionInfo:{id:e,bandwidth:s.attributes.BANDWIDTH,resolution:s.attributes.RESOLUTION,codecs:s.attributes.CODECS},cause:"fast-quality"};return i!==a&&!r&&(i?(n(s),t.trigger({type:"renditionenabled",metadata:o})):t.trigger({type:"renditiondisabled",metadata:o})),i};class Nre{constructor(e,n,i){const{playlistController_:s}=e,r=s.fastQualityChange_.bind(s);if(n.attributes){const a=n.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=n.attributes.BANDWIDTH,this.frameRate=n.attributes["FRAME-RATE"]}this.codecs=Of(s.main(),n),this.playlist=n,this.id=i,this.enabled=Ore(e.playlists,n.id,r)}}const Mre=function(t){t.representations=()=>{const e=t.playlistController_.main(),n=Qm(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return n?n.filter(i=>!AC(i)).map((i,s)=>new Nre(t,i,i.id)):[]}},CP=["seeking","seeked","pause","playing","error"];class Vre extends ve.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=dr("PlaybackWatcher"),this.logger_("initialize");const n=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),s=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(d=>{a[`${d}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(CP,r),this.tech_.on("canplay",i),this.tech_.one("play",n),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",s),this.tech_.off(CP,r),this.tech_.off("canplay",i),this.tech_.off("play",n),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&te.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&te.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=te.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const n=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=n.buffered_()}checkSegmentDownloads_(e){const n=this.playlistController_,i=n[`${e}SegmentLoader_`],s=i.buffered_(),r=Sie(this[`${e}Buffered_`],s);if(this[`${e}Buffered_`]=s,r){const a={bufferedRanges:s};n.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:ru(s)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&n.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===e&&(!n.length||e+ra>=n.end(n.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(Ci([this.lastRecordedTime,e]));const i={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:i}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const n=this.seekable(),i=this.tech_.currentTime(),s=this.afterSeekableWindow_(n,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let r;if(s&&(r=n.end(n.length-1)),this.beforeSeekableWindow_(n,i)){const g=n.start(0);r=g+(g===n.end(0)?0:ra)}if(typeof r<"u")return this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${Q4(n)}. Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),d=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-sa)*2,h=[l,u];for(let g=0;g<h.length;g++){if(!h[g])continue;if(xC(h[g],i)<d)return!1}const f=sg(o,i);return f.length===0?!1:(r=f.start(0)+ra,this.logger_(`Buffered region starts (${f.start(0)})  just beyond seek point (${i}). Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),n=this.tech_.buffered(),i=Uc(n,e);if(i.length&&e+3<=i.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,n)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${n}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,s=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:n}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=sg(s,n);return a.length>0?(this.logger_(`Stopped at ${n} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(n),!0):!1}afterSeekableWindow_(e,n,i,s=!1){if(!e.length)return!1;let r=e.end(e.length-1)+ra;const a=!i.endList,o=typeof i.partTargetDuration=="number";return a&&(o||s)&&(r=e.end(e.length-1)+i.targetDuration*3),n>r}beforeSeekableWindow_(e,n){return!!(e.length&&e.start(0)>0&&n<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:n,currentTime:i}){if(!e)return;let s;if(e.length&&n.length){const r=Uc(e,i-3),a=Uc(e,i),o=Uc(n,i);o.length&&!a.length&&r.length&&(s={start:r.end(0),end:o.end(0)})}else sg(e,i).length||(s=this.gapFromVideoUnderflow_(e,i));return s?(this.logger_(`Encountered a gap in video from ${s.start} to ${s.end}. Seeking to current time ${i}`),!0):!1}skipTheGap_(e){const n=this.tech_.buffered(),i=this.tech_.currentTime(),s=sg(n,i);if(this.resetTimeUpdate_(),s.length===0||i!==e)return;this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+sa);const r={gapInfo:{from:i,to:s.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:r}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,n){const i=_ie(e);for(let s=0;s<i.length;s++){const r=i.start(s),a=i.end(s);if(n-r<4&&n-r>2)return{start:r,end:a}}return null}}const Fre={errorInterval:30,getSource(t){const n=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return t(n)}},H3=function(t,e){let n=0,i=0;const s=Qt(Fre,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const r=function(){i&&t.currentTime(i)},a=function(c){c!=null&&(i=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",r),t.src(c),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},o=function(){if(Date.now()-n<s.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){ve.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),s.getSource.call(t,a)},l=function(){t.off("loadedmetadata",r),t.off("error",o),t.off("dispose",l)},u=function(c){l(),H3(t,c)};t.on("error",o),t.on("dispose",l),t.reloadSourceOnError=u},Bre=function(t){H3(this,t)};var j3="3.17.0",Ure="7.1.0",$re="1.3.1",Hre="7.2.0",jre="4.0.2";const Ln={PlaylistLoader:$c,Playlist:Es,utils:Kie,STANDARD_PLAYLIST_SELECTOR:hP,INITIAL_PLAYLIST_SELECTOR:Nse,lastBandwidthSelector:hP,movingAverageBandwidthSelector:Lse,comparePlaylistBandwidth:DC,comparePlaylistResolution:Rse,xhr:g3()};Object.keys(bi).forEach(t=>{Object.defineProperty(Ln,t,{get(){return ve.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),bi[t]},set(e){if(ve.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){ve.log.warn(`value of Vhs.${t} must be greater than or equal to 0`);return}bi[t]=e}})});const q3="videojs-vhs",z3=function(t,e){const n=e.media();let i=-1;for(let s=0;s<t.length;s++)if(t[s].id===n.id){i=s;break}t.selectedIndex_=i,t.trigger({selectedIndex:i,type:"change"})},qre=function(t,e){e.representations().forEach(n=>{t.addQualityLevel(n)}),z3(t,e.playlists)};Ln.canPlaySource=function(){return ve.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const zre=(t,e,n)=>{if(!t)return t;let i={};e&&e.attributes&&e.attributes.CODECS&&(i=hm(Qr(e.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);const s=Id(i.video),r=Id(i.audio),a={};for(const o in t)a[o]={},r&&(a[o].audioContentType=r),s&&(a[o].videoContentType=s),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof t[o]=="string"&&(a[o].url=t[o]);return Qt(t,a)},Wre=(t,e)=>t.reduce((n,i)=>{if(!i.contentProtection)return n;const s=e.reduce((r,a)=>{const o=i.contentProtection[a];return o&&o.pssh&&(r[a]={pssh:o.pssh}),r},{});return Object.keys(s).length&&n.push(s),n},[]),Gre=({player:t,sourceKeySystems:e,audioMedia:n,mainPlaylists:i})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const s=n?i.concat([n]):i,r=Wre(s,Object.keys(e)),a=[],o=[];return r.forEach(l=>{o.push(new Promise((u,c)=>{t.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{t.eme.initializeMediaKeys({keySystems:l},d=>{if(d){c(d);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},Kre=({player:t,sourceKeySystems:e,media:n,audioMedia:i})=>{const s=zre(e,n,i);return s?(t.currentSource().keySystems=s,s&&!t.eme?(ve.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},W3=()=>{if(!te.localStorage)return null;const t=te.localStorage.getItem(q3);if(!t)return null;try{return JSON.parse(t)}catch{return null}},Yre=t=>{if(!te.localStorage)return!1;let e=W3();e=e?Qt(e,t):t;try{te.localStorage.setItem(q3,JSON.stringify(e))}catch{return!1}return e},Xre=t=>t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t,G3=(t,e)=>{t._requestCallbackSet||(t._requestCallbackSet=new Set),t._requestCallbackSet.add(e)},K3=(t,e)=>{t._responseCallbackSet||(t._responseCallbackSet=new Set),t._responseCallbackSet.add(e)},Y3=(t,e)=>{t._requestCallbackSet&&(t._requestCallbackSet.delete(e),t._requestCallbackSet.size||delete t._requestCallbackSet)},X3=(t,e)=>{t._responseCallbackSet&&(t._responseCallbackSet.delete(e),t._responseCallbackSet.size||delete t._responseCallbackSet)};Ln.supportsNativeHls=function(){if(!qe||!qe.createElement)return!1;const t=qe.createElement("video");return ve.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(n){return/maybe|probably/i.test(t.canPlayType(n))}):!1}();Ln.supportsNativeDash=function(){return!qe||!qe.createElement||!ve.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(qe.createElement("video").canPlayType("application/dash+xml"))}();Ln.supportsTypeNatively=t=>t==="hls"?Ln.supportsNativeHls:t==="dash"?Ln.supportsNativeDash:!1;Ln.isSupported=function(){return ve.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Ln.xhr.onRequest=function(t){G3(Ln.xhr,t)};Ln.xhr.onResponse=function(t){K3(Ln.xhr,t)};Ln.xhr.offRequest=function(t){Y3(Ln.xhr,t)};Ln.xhr.offResponse=function(t){X3(Ln.xhr,t)};const Qre=ve.getComponent("Component");class Q3 extends Qre{constructor(e,n,i){if(super(n,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=dr("VhsHandler"),n.options_&&n.options_.playerId){const s=ve.getPlayer(n.options_.playerId);this.player_=s}if(this.tech_=n,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(qe,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],s=>{const r=qe.fullscreenElement||qe.webkitFullscreenElement||qe.mozFullScreenElement||qe.msFullscreenElement;r&&r.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Qt(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const i=W3();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=bi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===bi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{typeof this.source_[i]<"u"&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const n=this.options_.customPixelRatio;typeof n=="number"&&n>=0&&(this.customPixelRatio=n)}setOptions(e={}){this.setOptions_(e)}src(e,n){if(!e)return;this.setOptions_(),this.options_.src=Xre(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ln,this.options_.sourceType=_V(n),this.options_.seekTo=r=>{this.tech_.setCurrentTime(r)},this.options_.player_=this.player_,this.playlistController_=new Lre(this.options_);const i=Qt({liveRangeSafeTimeDelta:ra},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Vre(i),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const r=ve.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),r.error(a)});const s=this.options_.bufferBasedABR?Ln.movingAverageBandwidthSelector(.55):Ln.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.playlistController_.selectInitialPlaylist=Ln.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(r){this.playlistController_.selectPlaylist=r.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(r){this.playlistController_.mainSegmentLoader_.throughput.rate=r,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let r=this.playlistController_.mainSegmentLoader_.bandwidth;const a=te.navigator.connection||te.navigator.mozConnection||te.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&r>=o?r=Math.max(r,l):r=l}return r},set(r){this.playlistController_.mainSegmentLoader_.bandwidth=r,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const r=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(r+a))},set(){ve.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>ru(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>ru(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&Yre({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{Mre(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=te.URL.createObjectURL(this.playlistController_.mediaSource),(ve.browser.IS_ANY_SAFARI||ve.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Gre({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(n=>{this.logger_("error while creating EME key session",n),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=Kre({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!n){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=ve.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{qre(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{z3(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":j3,"mux.js":Ure,"mpd-parser":$re,"m3u8-parser":Hre,"aes-decrypter":jre}}version(){return this.constructor.version()}canChangeType(){return F3.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&te.URL.revokeObjectURL&&(te.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,n){return tse({playlist:this.playlistController_.media(),time:e,callback:n})}seekToProgramTime(e,n,i=!0,s=2){return T3({programTime:e,playlist:this.playlistController_.media(),retryCount:s,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})}setupXhrHooks_(){this.xhr.onRequest=e=>{G3(this.xhr,e)},this.xhr.onResponse=e=>{K3(this.xhr,e)},this.xhr.offRequest=e=>{Y3(this.xhr,e)},this.xhr.offResponse=e=>{X3(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],n=["gapjumped","playedrangeschanged"];e.forEach(i=>{this.playlistController_.on(i,s=>{this.player_.trigger(zn({},s))})}),n.forEach(i=>{this.playbackWatcher_.on(i,s=>{this.player_.trigger(zn({},s))})})}}const Hv={name:"videojs-http-streaming",VERSION:j3,canHandleSource(t,e={}){const n=Qt(ve.options,e);return!n.vhs.experimentalUseMMS&&!kf("avc1.4d400d,mp4a.40.2",!1)?!1:Hv.canPlayType(t.type,n)},handleSource(t,e,n={}){const i=Qt(ve.options,n);return e.vhs=new Q3(t,e,i),e.vhs.xhr=g3(),e.vhs.setupXhrHooks_(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e){const n=_V(t);if(!n)return"";const i=Hv.getOverrideNative(e);return!Ln.supportsTypeNatively(n)||i?"maybe":""},getOverrideNative(t={}){const{vhs:e={}}=t,n=!(ve.browser.IS_ANY_SAFARI||ve.browser.IS_IOS),{overrideNative:i=n}=e;return i}},Jre=()=>kf("avc1.4d400d,mp4a.40.2",!0);Jre()&&ve.getTech("Html5").registerSourceHandler(Hv,0);ve.VhsHandler=Q3;ve.VhsSourceHandler=Hv;ve.Vhs=Ln;ve.use||ve.registerComponent("Vhs",Ln);ve.options.vhs=ve.options.vhs||{};(!ve.getPlugin||!ve.getPlugin("reloadSourceOnError"))&&ve.registerPlugin("reloadSourceOnError",Bre);const Zre=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"}));var Ag={exports:{}};const eae=fV(Zre);var tae=Ag.exports,wP;function nae(){return wP||(wP=1,function(t,e){(function(n,i){{var s=eae;t.exports=i(s.default||s)}})(tae,function(n){var i=n.browser.IS_IOS||n.browser.IS_NATIVE_ANDROID,s=n.getTech("Tech");class r extends s{constructor(c,d){super(c,d),this.setPoster(c.poster),this.setSrc(this.options_.source,!0),this.setTimeout((function(){this.el_&&(this.el_.parentNode.className+=" vjs-youtube",i&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),r.isApiReady?this.initYTPlayer():r.apiReadyQueue.push(this))}).bind(this))}dispose(){if(this.ytPlayer)this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),this.ytPlayer.destroy&&this.ytPlayer.destroy();else{var c=r.apiReadyQueue.indexOf(this);c!==-1&&r.apiReadyQueue.splice(c,1)}this.ytPlayer=null,this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile",""),this.el_.parentNode.removeChild(this.el_),s.prototype.dispose.call(this)}createEl(){var c=document.createElement("div");c.setAttribute("id",this.options_.techId),c.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute"),c.setAttribute("class","vjs-tech");var d=document.createElement("div");if(d.appendChild(c),!i&&!this.options_.ytControls){var h=document.createElement("div");h.setAttribute("class","vjs-iframe-blocker"),h.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),h.onclick=(function(){this.pause()}).bind(this),d.appendChild(h)}return d}initYTPlayer(){var c={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0};if(typeof this.options_.autohide<"u"&&(c.autohide=this.options_.autohide),typeof this.options_.cc_load_policy<"u"&&(c.cc_load_policy=this.options_.cc_load_policy),typeof this.options_.ytControls<"u"&&(c.controls=this.options_.ytControls),typeof this.options_.disablekb<"u"&&(c.disablekb=this.options_.disablekb),typeof this.options_.color<"u"&&(c.color=this.options_.color),c.controls?typeof this.options_.fs<"u"&&(c.fs=this.options_.fs):c.fs=0,this.options_.source.src.indexOf("end=")!==-1){var d=this.options_.source.src.match(/end=([0-9]*)/);this.options_.end=parseInt(d[1])}if(typeof this.options_.end<"u"&&(c.end=this.options_.end),typeof this.options_.hl<"u"?c.hl=this.options_.hl:typeof this.options_.language<"u"&&(c.hl=this.options_.language.substr(0,2)),typeof this.options_.iv_load_policy<"u"&&(c.iv_load_policy=this.options_.iv_load_policy),typeof this.options_.list<"u"?c.list=this.options_.list:this.url&&typeof this.url.listId<"u"&&(c.list=this.url.listId),typeof this.options_.listType<"u"&&(c.listType=this.options_.listType),typeof this.options_.modestbranding<"u"&&(c.modestbranding=this.options_.modestbranding),typeof this.options_.playlist<"u"&&(c.playlist=this.options_.playlist),typeof this.options_.playsinline<"u"&&(c.playsinline=this.options_.playsinline),typeof this.options_.rel<"u"&&(c.rel=this.options_.rel),typeof this.options_.showinfo<"u"&&(c.showinfo=this.options_.showinfo),this.options_.source.src.indexOf("start=")!==-1){var h=this.options_.source.src.match(/start=([0-9]*)/);this.options_.start=parseInt(h[1])}if(typeof this.options_.start<"u"&&(c.start=this.options_.start),typeof this.options_.theme<"u"&&(c.theme=this.options_.theme),typeof this.options_.customVars<"u"){var f=this.options_.customVars;Object.keys(f).forEach(function(v){c[v]=f[v]})}this.activeVideoId=this.url?this.url.videoId:null,this.activeList=c.list;var g={videoId:this.activeVideoId,playerVars:c,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};typeof this.options_.enablePrivacyEnhancedMode<"u"&&this.options_.enablePrivacyEnhancedMode&&(g.host="https://www.youtube-nocookie.com"),this.ytPlayer=new YT.Player(this.options_.techId,g)}onPlayerReady(){this.options_.muted&&this.ytPlayer.mute();var c=this.ytPlayer.getAvailablePlaybackRates();c.length>1&&(this.featuresPlaybackRate=!0),this.playerReady_=!0,this.triggerReady(),this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)}onPlayerPlaybackQualityChange(){}onPlayerPlaybackRateChange(){this.trigger("ratechange")}onPlayerStateChange(c){var d=c.data;if(!(d===this.lastState||this.errorNumber))switch(this.lastState=d,d){case-1:this.trigger("loadstart"),this.trigger("loadedmetadata"),this.trigger("durationchange"),this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate"),this.trigger("durationchange"),this.trigger("playing"),this.trigger("play"),this.isSeeking&&this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay"),this.isSeeking?this.onSeeked():this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting");break}}onPlayerVolumeChange(){this.trigger("volumechange")}onPlayerError(c){this.errorNumber=c.data,this.trigger("pause"),this.trigger("error")}error(){var c=1e3+this.errorNumber;switch(this.errorNumber){case 5:return{code:c,message:"Error while trying to play the video"};case 2:case 100:return{code:c,message:"Unable to find the video"};case 101:case 150:return{code:c,message:"Playback on other Websites has been disabled by the video owner."}}return{code:c,message:"YouTube unknown error ("+this.errorNumber+")"}}loadVideoById_(c){var d={videoId:c};this.options_.start&&(d.startSeconds=this.options_.start),this.options_.end&&(d.endSeconds=this.options_.end),this.ytPlayer.loadVideoById(d)}cueVideoById_(c){var d={videoId:c};this.options_.start&&(d.startSeconds=this.options_.start),this.options_.end&&(d.endSeconds=this.options_.end),this.ytPlayer.cueVideoById(d)}src(c){return c&&this.setSrc({src:c}),this.source}poster(){return i?null:this.poster_}setPoster(c){this.poster_=c}setSrc(c){!c||!c.src||(delete this.errorNumber,this.source=c,this.url=r.parseUrl(c.src),this.options_.poster||this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay&&!i?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))}autoplay(){return this.options_.autoplay}setAutoplay(c){this.options_.autoplay=c}loop(){return this.options_.loop}setLoop(c){this.options_.loop=c}play(){!this.url||!this.url.videoId||(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))}pause(){this.ytPlayer&&this.ytPlayer.pauseVideo()}paused(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0}currentTime(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0}setCurrentTime(c){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime()),this.isSeeking||(this.wasPausedBeforeSeek=this.paused()),this.ytPlayer.seekTo(c,!0),this.trigger("timeupdate"),this.trigger("seeking"),this.isSeeking=!0,this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==c&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval((function(){this.lastState!==YT.PlayerState.PAUSED||!this.isSeeking?clearInterval(this.checkSeekedInPauseInterval):this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked())}).bind(this),250))}seeking(){return this.isSeeking}seekable(){return this.ytPlayer?n.createTimeRange(0,this.ytPlayer.getDuration()):n.createTimeRange()}onSeeked(){clearInterval(this.checkSeekedInPauseInterval),this.isSeeking=!1,this.wasPausedBeforeSeek&&this.pause(),this.trigger("seeked")}playbackRate(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1}setPlaybackRate(c){this.ytPlayer&&this.ytPlayer.setPlaybackRate(c)}duration(){return this.ytPlayer?this.ytPlayer.getDuration():0}currentSrc(){return this.source&&this.source.src}ended(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:!1}volume(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1}setVolume(c){this.ytPlayer&&this.ytPlayer.setVolume(c*100)}muted(){return this.ytPlayer?this.ytPlayer.isMuted():!1}setMuted(c){if(this.ytPlayer)this.muted(!0);else return;c?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},50)}buffered(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return n.createTimeRange();var c=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return n.createTimeRange(0,c)}preload(){}load(){}reset(){}networkState(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case-1:return 0;case 3:return 2;default:return 1}}readyState(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case-1:return 0;case 5:return 1;case 3:return 2;default:return 4}}supportsFullScreen(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}checkHighResPoster(){var c="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var d=new Image;d.onload=(function(){if("naturalHeight"in d){if(d.naturalHeight<=90||d.naturalWidth<=120)return}else if(d.height<=90||d.width<=120)return;this.poster_=c,this.trigger("posterchange")}).bind(this),d.onerror=function(){},d.src=c}catch{}}}r.isSupported=function(){return!0},r.canPlaySource=function(u){return r.canPlayType(u.type)},r.canPlayType=function(u){return u==="video/youtube"},r.parseUrl=function(u){var c={videoId:null},d=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,h=u.match(d);h&&h[2].length===11&&(c.videoId=h[2]);var f=/[?&]list=([^#\&\?]+)/;return h=u.match(f),h&&h[1]&&(c.listId=h[1]),c};function a(){YT.ready(function(){r.isApiReady=!0;for(var u=0;u<r.apiReadyQueue.length;++u)r.apiReadyQueue[u].initYTPlayer()})}function o(u,c){var d=!1,h=document.createElement("script"),f=document.getElementsByTagName("script")[0];f&&(f.parentNode.insertBefore(h,f),h.onload=function(){d||(d=!0,c())},h.onreadystatechange=function(){!d&&(this.readyState==="complete"||this.readyState==="loaded")&&(d=!0,c())},h.src=u)}function l(){var u=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }",c=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css",d.styleSheet?d.styleSheet.cssText=u:d.appendChild(document.createTextNode(u)),c.appendChild(d)}r.apiReadyQueue=[],typeof document<"u"&&(o("https://www.youtube.com/iframe_api",a),l()),typeof n.registerTech<"u"?n.registerTech("Youtube",r):n.registerComponent("Youtube",r)})}(Ag)),Ag.exports}nae();const iae={key:0},sae=cr({__name:"MultiPlayer",props:{url:{}},setup(t){const e=t,n=PA(e.url),i=Me(null);let s=null;return ti(()=>{if(!i.value||!n)return;const r=PA(e.url);s=ve(i.value,{...r&&{techOrder:["youtube"],sources:[{type:"video/youtube",src:e.url}],youtube:{ytControls:0,iv_load_policy:3,rel:0,modestbranding:1}},controls:!1,muted:!0,fluid:!0,preload:"metadata",playsinline:!0}),s.ready(()=>{let o=0,l=!1;s.on("loadedmetadata",()=>{o=(((s==null?void 0:s.duration())||0)-5)/2,s.currentTime(o),s.play()}),s.on("timeupdate",()=>{if(!s)return;const u=s.currentTime();!l&&u>o+1&&(l=!0),l&&u>=o+5&&s.currentTime(o)})})}),Wn(()=>{s&&(s.dispose(),s=null)}),(r,a)=>{const o=qt("v-btn");return it(n)?($n(),Ko("div",iae,[la("video",{ref_key:"videoRef",ref:i,class:"video-js vjs-default-skin",playsinline:""},null,512)])):($n(),Cs(o,{key:1,href:it(QM)(r.url),disabled:!it(qE)(r.url),target:"_blank",class:"ma-6",variant:"plain",size:"small",rounded:"xl"},{default:ln(()=>[zs(Ir(r.url),1)]),_:1},8,["href","disabled"]))}}}),RC=f1("linksStore",{state:()=>({loading:!1,links:[],unsubscribeLinks:null}),actions:{async subscribeToLinks(t){const e=Sr();if(!await e.checkAuth())return;let n=$I(MI(Zp,"links"),HI("userId","==",e.currentUser.uid),dY("updatedAt","desc"));t&&(n=$I(n,HI("tags","array-contains",t))),this.unsubscribeLinks&&this.unsubscribeLinks(),this.unsubscribeLinks=_Y(n,i=>{this.links=i.docs.map(s=>({id:s.id,...s.data()}))})},unsubscribeFromLinks(){this.unsubscribeLinks&&(this.unsubscribeLinks(),this.unsubscribeLinks=null)},async addLink(t){const e=Sr(),n=xf();this.loading=!0;try{if(!await e.checkAuth())throw new Error("You are not logged in");await yY(MI(Zp,"links"),{...t,userId:e.currentUser.uid,createdAt:w0(),updatedAt:w0()})}catch({message:i}){n.displayError(i)}finally{this.loading=!1}},async updateLink(t,e){const n=Sr(),i=xf();this.loading=!0;try{if(!await n.checkAuth())throw new Error("You are not logged in");await gY(CT(Zp,"links",t),{...e,updatedAt:w0()})}catch({message:s}){i.displayError(s)}finally{this.loading=!1}},async deleteLink(t){const e=Sr(),n=xf();this.loading=!0;try{if(!await e.checkAuth())throw new Error("You are not logged in");await vY(CT(Zp,"links",t))}catch({message:i}){n.displayError(i)}finally{this.loading=!1}}}}),rae={class:"tags-wrapper"},aae=cr({__name:"LinkCard",props:{link:{}},setup(t){const e=Sr(),n=RC();return(i,s)=>{const r=qt("v-chip"),a=qt("v-spacer"),o=qt("v-btn"),l=qt("v-card-actions"),u=qt("v-card");return $n(),Cs(u,{rounded:"xl",class:"text-center"},{default:ln(()=>[_(sae,{url:i.link.url},null,8,["url"]),_(l,null,{default:ln(()=>[la("div",rae,[($n(!0),Ko(Ye,null,$D(i.link.tags,c=>($n(),Cs(r,{to:`?tag=${c}`,key:c,text:c,color:it(zE)(c,it(e).theme),size:"small"},null,8,["to","text","color"]))),128))]),_(a),_(o,{icon:it(lX),color:"error",size:"small",onClick:s[0]||(s[0]=c=>it(n).deleteLink(i.link.id))},null,8,["icon"]),_(o,{icon:it(rX),color:"primary",size:"small",onClick:s[1]||(s[1]=c=>i.editLink(i.link.id))},null,8,["icon"]),_(o,{href:it(QM)(i.link.url),icon:it(tX),disabled:!it(qE)(i.link.url),target:"_blank",color:"primary",size:"small"},null,8,["href","icon","disabled"])]),_:1})]),_:1})}}}),LC=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},oae=LC(aae,[["__scopeId","data-v-7e1481a1"]]),lae=cr({__name:"AddLinkForm",setup(t){const e=RC(),n=()=>({url:"",tags:[]}),i=Me(),s=Me(n()),r=Me(""),a=Me([]),o=Sr();function l(d){if(d&&d.includes(" ")){const h=d.split(" ").map(g=>g.trim()).filter(g=>g.length>0),f=h.filter(g=>!a.value.includes(g));a.value=[...new Set([...a.value,...f])],s.value.tags=[...new Set([...s.value.tags,...h])]}}async function u(){i.value.resetValidation(),s.value={url:s.value.url.trim(),tags:s.value.tags.map(d=>d.trim())},await e.addLink(s.value),c()}function c(){i.value.reset(),r.value="",s.value=n()}return(d,h)=>{const f=qt("v-text-field"),g=qt("v-chip"),v=qt("v-autocomplete"),b=qt("v-btn"),I=qt("v-form");return $n(),Cs(I,{ref_key:"form",ref:i,class:"d-flex flex-wrap ga-6",disabled:it(e).loading,onSubmit:Oc(u,["prevent"])},{default:ln(()=>[_(f,{modelValue:s.value.url,"onUpdate:modelValue":h[0]||(h[0]=w=>s.value.url=w),rules:[it(qE)],class:"flex-grow-1","min-width":"200",density:"compact","hide-details":"",label:"Link",required:"",variant:"underlined"},null,8,["modelValue","rules"]),_(v,{modelValue:s.value.tags,"onUpdate:modelValue":h[1]||(h[1]=w=>s.value.tags=w),search:r.value,items:a.value,class:"flex-grow-0","min-width":"200",density:"compact","hide-details":"",label:"Tags",variant:"underlined",chips:"",multiple:"","onUpdate:search":l},{chip:ln(({item:w})=>[_(g,{color:it(zE)(w.value,it(o).theme)},{default:ln(()=>[zs(Ir(w.value),1)]),_:2},1032,["color"])]),_:1},8,["modelValue","search","items"]),_(b,{"prepend-icon":it(aX),class:"flex-grow-0",rounded:"pill",color:"primary",text:"Add",type:"submit",variant:"outlined"},null,8,["prepend-icon"])]),_:1},8,["disabled"])}}}),uae=LC(lae,[["__scopeId","data-v-f0fb7bed"]]),cae={class:"masonry"},dae=cr({__name:"MasonryLayout",props:{items:{},getKey:{type:Function}},setup(t){return(e,n)=>($n(),Ko("div",cae,[($n(!0),Ko(Ye,null,$D(e.items,(i,s)=>($n(),Ko("div",{class:"masonry-item",key:e.getKey?e.getKey(i,s):s},[y6(e.$slots,"default",{item:i,index:s},void 0)]))),128))]))}}),hae=LC(dae,[["__scopeId","data-v-89884960"]]),fae={class:"py-4"},mae={key:0,class:"d-flex justify-center align-center py-4"},pae={class:"py-4"},gae=cr({__name:"HomeView",setup(t){const e=Sr(),n=RC(),i=dV();return ti(()=>{n.subscribeToLinks(i.query.tag)}),$e(()=>i.query.tag,s=>n.subscribeToLinks(s)),Wn(()=>{n.unsubscribeFromLinks()}),(s,r)=>{const a=qt("v-chip"),o=qt("v-expand-transition"),l=qt("v-container");return $n(),Cs(l,null,{default:ln(()=>[la("div",fae,[_(uae)]),_(o,null,{default:ln(()=>[it(i).query.tag?($n(),Ko("div",mae,[r[1]||(r[1]=la("span",{class:"me-2"},"Filters:",-1)),_(a,{text:it(i).query.tag,color:it(zE)(it(i).query.tag,it(e).theme),closable:"","onClick:close":r[0]||(r[0]=u=>it(l_).push(""))},null,8,["text","color"])])):Q6("",!0)]),_:1}),la("div",pae,[_(hae,{items:it(n).links,getKey:u=>u.id},{default:ln(({item:u})=>[_(oae,{link:u},null,8,["link"])]),_:1},8,["items","getKey"])])]),_:1})}}}),l_=FZ({history:mZ("/mylinks/"),routes:[{path:"/login",name:"login",component:zZ},{path:"/",name:"home",component:gae,meta:{requiresAuth:!0}}]});l_.beforeEach(async t=>{const e=Sr();if(t.meta.requiresAuth&&(await e.refreshCurrentUser(),!e.isAuthenticated))return{path:"/login",query:{redirect:t.fullPath}}});const vae=ue({...Ke(),...GM({fullHeight:!0}),...Dt()},"VApp"),yae=Te()({name:"VApp",props:vae(),setup(t,e){let{slots:n}=e;const i=zt(t),{layoutClasses:s,getLayoutItem:r,items:a,layoutRef:o}=YM(t),{rtlClasses:l}=Gn();return Pe(()=>{var u;return _("div",{ref:o,class:["v-application",i.themeClasses.value,s.value,l.value,t.class],style:[t.style]},[_("div",{class:"v-application__wrap"},[(u=n.default)==null?void 0:u.call(n)])])}),{getLayoutItem:r,items:a,theme:i}}}),yt=ue({tag:{type:[String,Object,Function],default:"div"}},"tag"),J3=ue({text:String,...Ke(),...yt()},"VToolbarTitle"),OC=Te()({name:"VToolbarTitle",props:J3(),setup(t,e){let{slots:n}=e;return Pe(()=>{const i=!!(n.default||n.text||t.text);return _(t.tag,{class:["v-toolbar-title",t.class],style:t.style},{default:()=>{var s;return[i&&_("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():t.text,(s=n.default)==null?void 0:s.call(n)])]}})}),{}}}),_ae=ue({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Xs(t,e,n){return Te()({name:t,props:_ae({mode:n,origin:e}),setup(i,s){let{slots:r}=s;const a={onBeforeEnter(o){i.origin&&(o.style.transformOrigin=i.origin)},onLeave(o){if(i.leaveAbsolute){const{offsetTop:l,offsetLeft:u,offsetWidth:c,offsetHeight:d}=o;o._transitionInitialStyles={position:o.style.position,top:o.style.top,left:o.style.left,width:o.style.width,height:o.style.height},o.style.position="absolute",o.style.top=`${l}px`,o.style.left=`${u}px`,o.style.width=`${c}px`,o.style.height=`${d}px`}i.hideOnLeave&&o.style.setProperty("display","none","important")},onAfterLeave(o){if(i.leaveAbsolute&&(o!=null&&o._transitionInitialStyles)){const{position:l,top:u,left:c,width:d,height:h}=o._transitionInitialStyles;delete o._transitionInitialStyles,o.style.position=l||"",o.style.top=u||"",o.style.left=c||"",o.style.width=d||"",o.style.height=h||""}}};return()=>{const o=i.group?h1:nl;return Mr(o,{name:i.disabled?"":t,css:!i.disabled,...i.group?void 0:{mode:i.mode},...i.disabled?{}:a},r.default)}}})}function Z3(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return Te()({name:t,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(i,s){let{slots:r}=s;const a=i.group?h1:nl;return()=>Mr(a,{name:i.disabled?"":t,css:!i.disabled,...i.disabled?{}:e},r.default)}})}function eF(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",i=Is(`offset-${n}`);return{onBeforeEnter(a){a._parent=a.parentNode,a._initialStyle={transition:a.style.transition,overflow:a.style.overflow,[n]:a.style[n]}},onEnter(a){const o=a._initialStyle;if(!o)return;a.style.setProperty("transition","none","important"),a.style.overflow="hidden";const l=`${a[i]}px`;a.style[n]="0",a.offsetHeight,a.style.transition=o.transition,t&&a._parent&&a._parent.classList.add(t),requestAnimationFrame(()=>{a.style[n]=l})},onAfterEnter:r,onEnterCancelled:r,onLeave(a){a._initialStyle={transition:"",overflow:a.style.overflow,[n]:a.style[n]},a.style.overflow="hidden",a.style[n]=`${a[i]}px`,a.offsetHeight,requestAnimationFrame(()=>a.style[n]="0")},onAfterLeave:s,onLeaveCancelled:s};function s(a){t&&a._parent&&a._parent.classList.remove(t),r(a)}function r(a){if(!a._initialStyle)return;const o=a._initialStyle[n];a.style.overflow=a._initialStyle.overflow,o!=null&&(a.style[n]=o),delete a._initialStyle}}const bae=ue({target:[Object,Array]},"v-dialog-transition"),u_=Te()({name:"VDialogTransition",props:bae(),setup(t,e){let{slots:n}=e;const i={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,r){var h;await new Promise(f=>requestAnimationFrame(f)),await new Promise(f=>requestAnimationFrame(f)),s.style.visibility="";const{x:a,y:o,sx:l,sy:u,speed:c}=IP(t.target,s),d=iu(s,[{transform:`translate(${a}px, ${o}px) scale(${l}, ${u})`,opacity:0},{}],{duration:225*c,easing:ZX});(h=xP(s))==null||h.forEach(f=>{iu(f,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*c,easing:im})}),d.finished.then(()=>r())},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,r){var h;await new Promise(f=>requestAnimationFrame(f));const{x:a,y:o,sx:l,sy:u,speed:c}=IP(t.target,s);iu(s,[{},{transform:`translate(${a}px, ${o}px) scale(${l}, ${u})`,opacity:0}],{duration:125*c,easing:eQ}).finished.then(()=>r()),(h=xP(s))==null||h.forEach(f=>{iu(f,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*c,easing:im})})},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>t.target?_(nl,Ie({name:"dialog-transition"},i,{css:!1}),n):_(nl,{name:"dialog-transition"},n)}});function xP(t){var n;const e=(n=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return e&&[...e]}function IP(t,e){const n=wM(t),i=ME(e),[s,r]=getComputedStyle(e).transformOrigin.split(" ").map(I=>parseFloat(I)),[a,o]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;a==="left"||o==="left"?l-=n.width/2:(a==="right"||o==="right")&&(l+=n.width/2);let u=n.top+n.height/2;a==="top"||o==="top"?u-=n.height/2:(a==="bottom"||o==="bottom")&&(u+=n.height/2);const c=n.width/i.width,d=n.height/i.height,h=Math.max(1,c,d),f=c/h||0,g=d/h||0,v=i.width*i.height/(window.innerWidth*window.innerHeight),b=v>.12?Math.min(1.5,(v-.12)*10+1):1;return{x:l-(s+i.left),y:u-(r+i.top),sx:f,sy:g,speed:b}}const Tae=Xs("fab-transition","center center","out-in"),Sae=Xs("dialog-bottom-transition"),Eae=Xs("dialog-top-transition"),fm=Xs("fade-transition"),NC=Xs("scale-transition"),Cae=Xs("scroll-x-transition"),wae=Xs("scroll-x-reverse-transition"),xae=Xs("scroll-y-transition"),Iae=Xs("scroll-y-reverse-transition"),Aae=Xs("slide-x-transition"),kae=Xs("slide-x-reverse-transition"),MC=Xs("slide-y-transition"),Pae=Xs("slide-y-reverse-transition"),c_=Z3("expand-transition",eF()),VC=Z3("expand-x-transition",eF("",!0)),Dae=ue({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),_t=Te(!1)({name:"VDefaultsProvider",props:Dae(),setup(t,e){let{slots:n}=e;const{defaults:i,disabled:s,reset:r,root:a,scoped:o}=gl(t);return Pn(i,{reset:r,root:a,scoped:o,disabled:s}),()=>{var l;return(l=n.default)==null?void 0:l.call(n)}}}),Kn=ue({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Yn(t){return{dimensionStyles:V(()=>{const n={},i=We(t.height),s=We(t.maxHeight),r=We(t.maxWidth),a=We(t.minHeight),o=We(t.minWidth),l=We(t.width);return i!=null&&(n.height=i),s!=null&&(n.maxHeight=s),r!=null&&(n.maxWidth=r),a!=null&&(n.minHeight=a),o!=null&&(n.minWidth=o),l!=null&&(n.width=l),n})}}function Rae(t){return{aspectStyles:V(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const tF=ue({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Ke(),...Kn()},"VResponsive"),gS=Te()({name:"VResponsive",props:tF(),setup(t,e){let{slots:n}=e;const{aspectStyles:i}=Rae(t),{dimensionStyles:s}=Yn(t);return Pe(()=>{var r;return _("div",{class:["v-responsive",{"v-responsive--inline":t.inline},t.class],style:[s.value,t.style]},[_("div",{class:"v-responsive__sizer",style:i.value},null),(r=n.additional)==null?void 0:r.call(n),n.default&&_("div",{class:["v-responsive__content",t.contentClass]},[n.default()])])}),{}}});function FC(t){return NE(()=>{const e=[],n={};if(t.value.background)if(PT(t.value.background)){if(n.backgroundColor=t.value.background,!t.value.text&&$X(t.value.background)){const i=Hs(t.value.background);if(i.a==null||i.a===1){const s=OM(i);n.color=s,n.caretColor=s}}}else e.push(`bg-${t.value.background}`);return t.value.text&&(PT(t.value.text)?(n.color=t.value.text,n.caretColor=t.value.text):e.push(`text-${t.value.text}`)),{colorClasses:e,colorStyles:n}})}function Li(t,e){const n=V(()=>({text:an(t)?t.value:e?t[e]:null})),{colorClasses:i,colorStyles:s}=FC(n);return{textColorClasses:i,textColorStyles:s}}function en(t,e){const n=V(()=>({background:an(t)?t.value:e?t[e]:null})),{colorClasses:i,colorStyles:s}=FC(n);return{backgroundColorClasses:i,backgroundColorStyles:s}}const fn=ue({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Rn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca();return{roundedClasses:V(()=>{const i=an(t)?t.value:t.rounded,s=an(t)?t.value:t.tile,r=[];if(i===!0||i==="")r.push(`${e}--rounded`);else if(typeof i=="string"||i===0)for(const a of String(i).split(" "))r.push(`rounded-${a}`);else(s||i===!1)&&r.push("rounded-0");return r})}}const Br=ue({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:t=>t!==!0}},"transition"),Ki=(t,e)=>{let{slots:n}=e;const{transition:i,disabled:s,group:r,...a}=t,{component:o=r?h1:nl,...l}=typeof i=="object"?i:{};return Mr(o,Ie(typeof i=="string"?{name:s?"":i}:l,typeof i=="string"?{}:Object.fromEntries(Object.entries({disabled:s,group:r}).filter(u=>{let[c,d]=u;return d!==void 0})),a),n)};function Lae(t,e){if(!DE)return;const n=e.modifiers||{},i=e.value,{handler:s,options:r}=typeof i=="object"?i:{handler:i,options:{}},a=new IntersectionObserver(function(){var d;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;const u=(d=t._observe)==null?void 0:d[e.instance.$.uid];if(!u)return;const c=o.some(h=>h.isIntersecting);s&&(!n.quiet||u.init)&&(!n.once||c||u.init)&&s(c,o,l),c&&n.once?nF(t,e):u.init=!0},r);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:a},a.observe(t)}function nF(t,e){var i;const n=(i=t._observe)==null?void 0:i[e.instance.$.uid];n&&(n.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const Jm={mounted:Lae,unmounted:nF},iF=ue({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...tF(),...Ke(),...fn(),...Br()},"VImg"),to=Te()({name:"VImg",directives:{intersect:Jm},props:iF(),emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,e){let{emit:n,slots:i}=e;const{backgroundColorClasses:s,backgroundColorStyles:r}=en(ye(t,"color")),{roundedClasses:a}=Rn(t),o=Vn("VImg"),l=Ue(""),u=Me(),c=Ue(t.eager?"loading":"idle"),d=Ue(),h=Ue(),f=V(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),g=V(()=>f.value.aspect||d.value/h.value||0);$e(()=>t.src,()=>{v(c.value!=="idle")}),$e(g,(k,R)=>{!k&&R&&u.value&&M(u.value)}),Ud(()=>v());function v(k){if(!(t.eager&&k)&&!(DE&&!k&&!t.eager)){if(c.value="loading",f.value.lazySrc){const R=new Image;R.src=f.value.lazySrc,M(R,null)}f.value.src&&kt(()=>{var R;n("loadstart",((R=u.value)==null?void 0:R.currentSrc)||f.value.src),setTimeout(()=>{var W;if(!o.isUnmounted)if((W=u.value)!=null&&W.complete){if(u.value.naturalWidth||I(),c.value==="error")return;g.value||M(u.value,null),c.value==="loading"&&b()}else g.value||M(u.value),w()})})}}function b(){var k;o.isUnmounted||(w(),M(u.value),c.value="loaded",n("load",((k=u.value)==null?void 0:k.currentSrc)||f.value.src))}function I(){var k;o.isUnmounted||(c.value="error",n("error",((k=u.value)==null?void 0:k.currentSrc)||f.value.src))}function w(){const k=u.value;k&&(l.value=k.currentSrc||k.src)}let P=-1;Wn(()=>{clearTimeout(P)});function M(k){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const W=()=>{if(clearTimeout(P),o.isUnmounted)return;const{naturalHeight:se,naturalWidth:ae}=k;se||ae?(d.value=ae,h.value=se):!k.complete&&c.value==="loading"&&R!=null?P=window.setTimeout(W,R):(k.currentSrc.endsWith(".svg")||k.currentSrc.startsWith("data:image/svg+xml"))&&(d.value=1,h.value=1)};W()}const F=V(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),U=()=>{var W;if(!f.value.src||c.value==="idle")return null;const k=_("img",{class:["v-img__img",F.value],style:{objectPosition:t.position},crossorigin:t.crossorigin,src:f.value.src,srcset:f.value.srcset,alt:t.alt,referrerpolicy:t.referrerpolicy,draggable:t.draggable,sizes:t.sizes,ref:u,onLoad:b,onError:I},null),R=(W=i.sources)==null?void 0:W.call(i);return _(Ki,{transition:t.transition,appear:!0},{default:()=>[Tn(R?_("picture",{class:"v-img__picture"},[R,k]):k,[[Vr,c.value==="loaded"]])]})},D=()=>_(Ki,{transition:t.transition},{default:()=>[f.value.lazySrc&&c.value!=="loaded"&&_("img",{class:["v-img__img","v-img__img--preload",F.value],style:{objectPosition:t.position},crossorigin:t.crossorigin,src:f.value.lazySrc,alt:t.alt,referrerpolicy:t.referrerpolicy,draggable:t.draggable},null)]}),S=()=>i.placeholder?_(Ki,{transition:t.transition,appear:!0},{default:()=>[(c.value==="loading"||c.value==="error"&&!i.error)&&_("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,y=()=>i.error?_(Ki,{transition:t.transition,appear:!0},{default:()=>[c.value==="error"&&_("div",{class:"v-img__error"},[i.error()])]}):null,E=()=>t.gradient?_("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,A=Ue(!1);{const k=$e(g,R=>{R&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{A.value=!0})}),k())})}return Pe(()=>{const k=gS.filterProps(t);return Tn(_(gS,Ie({class:["v-img",{"v-img--absolute":t.absolute,"v-img--booting":!A.value},s.value,a.value,t.class],style:[{width:We(t.width==="auto"?d.value:t.width)},r.value,t.style]},k,{aspectRatio:g.value,"aria-label":t.alt,role:t.alt?"img":void 0}),{additional:()=>_(Ye,null,[_(U,null,null),_(D,null,null),_(E,null,null),_(S,null,null),_(y,null,null)]),default:i.default}),[[Ks("intersect"),{handler:v,options:t.options},null,{once:!0}]])}),{currentSrc:l,image:u,state:c,naturalWidth:d,naturalHeight:h}}}),ks=ue({border:[Boolean,Number,String]},"border");function Qs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca();return{borderClasses:V(()=>{const i=an(t)?t.value:t.border,s=[];if(i===!0||i==="")s.push(`${e}--border`);else if(typeof i=="string"||i===0)for(const r of String(i).split(" "))s.push(`border-${r}`);return s})}}const ni=ue({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function xi(t){return{elevationClasses:V(()=>{const n=an(t)?t.value:t.elevation,i=[];return n==null||i.push(`elevation-${n}`),i})}}const Oae=[null,"prominent","default","comfortable","compact"],sF=ue({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:t=>Oae.includes(t)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ks(),...Ke(),...ni(),...fn(),...yt({tag:"header"}),...Dt()},"VToolbar"),vS=Te()({name:"VToolbar",props:sF(),setup(t,e){var f;let{slots:n}=e;const{backgroundColorClasses:i,backgroundColorStyles:s}=en(ye(t,"color")),{borderClasses:r}=Qs(t),{elevationClasses:a}=xi(t),{roundedClasses:o}=Rn(t),{themeClasses:l}=zt(t),{rtlClasses:u}=Gn(),c=Ue(!!(t.extended||(f=n.extension)!=null&&f.call(n))),d=V(()=>parseInt(Number(t.height)+(t.density==="prominent"?Number(t.height):0)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0),10)),h=V(()=>c.value?parseInt(Number(t.extensionHeight)+(t.density==="prominent"?Number(t.extensionHeight):0)-(t.density==="comfortable"?4:0)-(t.density==="compact"?8:0),10):0);return Pn({VBtn:{variant:"text"}}),Pe(()=>{var I;const g=!!(t.title||n.title),v=!!(n.image||t.image),b=(I=n.extension)==null?void 0:I.call(n);return c.value=!!(t.extended||b),_(t.tag,{class:["v-toolbar",{"v-toolbar--absolute":t.absolute,"v-toolbar--collapse":t.collapse,"v-toolbar--flat":t.flat,"v-toolbar--floating":t.floating,[`v-toolbar--density-${t.density}`]:!0},i.value,r.value,a.value,o.value,l.value,u.value,t.class],style:[s.value,t.style]},{default:()=>[v&&_("div",{key:"image",class:"v-toolbar__image"},[n.image?_(_t,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},n.image):_(to,{key:"image-img",cover:!0,src:t.image},null)]),_(_t,{defaults:{VTabs:{height:We(d.value)}}},{default:()=>{var w,P,M;return[_("div",{class:"v-toolbar__content",style:{height:We(d.value)}},[n.prepend&&_("div",{class:"v-toolbar__prepend"},[(w=n.prepend)==null?void 0:w.call(n)]),g&&_(OC,{key:"title",text:t.title},{text:n.title}),(P=n.default)==null?void 0:P.call(n),n.append&&_("div",{class:"v-toolbar__append"},[(M=n.append)==null?void 0:M.call(n)])])]}}),_(_t,{defaults:{VTabs:{height:We(h.value)}}},{default:()=>[_(c_,null,{default:()=>[c.value&&_("div",{class:"v-toolbar__extension",style:{height:We(h.value)}},[b])]})]})]})}),{contentHeight:d,extensionHeight:h}}}),Nae=ue({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Mae(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=e;let i=0,s=0;const r=Me(null),a=Ue(0),o=Ue(0),l=Ue(0),u=Ue(!1),c=Ue(!1),d=V(()=>Number(t.scrollThreshold)),h=V(()=>_n((d.value-a.value)/d.value||0)),f=()=>{const g=r.value;if(!g||n&&!n.value)return;i=a.value,a.value="window"in g?g.pageYOffset:g.scrollTop;const v=g instanceof Window?document.documentElement.scrollHeight:g.scrollHeight;if(s!==v){s=v;return}c.value=a.value<i,l.value=Math.abs(a.value-d.value)};return $e(c,()=>{o.value=o.value||a.value}),$e(u,()=>{o.value=0}),ti(()=>{$e(()=>t.scrollTarget,g=>{var b;const v=g?document.querySelector(g):window;v&&v!==r.value&&((b=r.value)==null||b.removeEventListener("scroll",f),r.value=v,r.value.addEventListener("scroll",f,{passive:!0}))},{immediate:!0})}),Wn(()=>{var g;(g=r.value)==null||g.removeEventListener("scroll",f)}),n&&$e(n,f,{immediate:!0}),{scrollThreshold:d,currentScroll:a,currentThreshold:l,isScrollActive:u,scrollRatio:h,isScrollingUp:c,savedScroll:o}}function Wu(){const t=Ue(!1);return ti(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:V(()=>t.value?void 0:{transition:"none !important"}),isBooted:Bd(t)}}const Vae=ue({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},...sF(),...qu(),...Nae(),height:{type:[Number,String],default:64}},"VAppBar"),Fae=Te()({name:"VAppBar",props:Vae(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=Me(),s=et(t,"modelValue"),r=V(()=>{var P;const w=new Set(((P=t.scrollBehavior)==null?void 0:P.split(" "))??[]);return{hide:w.has("hide"),fullyHide:w.has("fully-hide"),inverted:w.has("inverted"),collapse:w.has("collapse"),elevate:w.has("elevate"),fadeImage:w.has("fade-image")}}),a=V(()=>{const w=r.value;return w.hide||w.fullyHide||w.inverted||w.collapse||w.elevate||w.fadeImage||!s.value}),{currentScroll:o,scrollThreshold:l,isScrollingUp:u,scrollRatio:c}=Mae(t,{canScroll:a}),d=V(()=>r.value.hide||r.value.fullyHide),h=V(()=>t.collapse||r.value.collapse&&(r.value.inverted?c.value>0:c.value===0)),f=V(()=>t.flat||r.value.fullyHide&&!s.value||r.value.elevate&&(r.value.inverted?o.value>0:o.value===0)),g=V(()=>r.value.fadeImage?r.value.inverted?1-c.value:c.value:void 0),v=V(()=>{var M,F;if(r.value.hide&&r.value.inverted)return 0;const w=((M=i.value)==null?void 0:M.contentHeight)??0,P=((F=i.value)==null?void 0:F.extensionHeight)??0;return d.value?o.value<l.value||r.value.fullyHide?w+P:w:w+P});ds(V(()=>!!t.scrollBehavior),()=>{An(()=>{d.value?r.value.inverted?s.value=o.value>l.value:s.value=u.value||o.value<l.value:s.value=!0})});const{ssrBootStyles:b}=Wu(),{layoutItemStyles:I}=zu({id:t.name,order:V(()=>parseInt(t.order,10)),position:ye(t,"location"),layoutSize:v,elementSize:Ue(void 0),active:s,absolute:ye(t,"absolute")});return Pe(()=>{const w=vS.filterProps(t);return _(vS,Ie({ref:i,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"},t.class],style:[{...I.value,"--v-toolbar-image-opacity":g.value,height:void 0,...b.value},t.style]},w,{collapse:h.value,flat:f.value}),n)}),{}}}),Bae=[null,"default","comfortable","compact"],fi=ue({density:{type:String,default:"default",validator:t=>Bae.includes(t)}},"density");function es(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca();return{densityClasses:V(()=>`${e}--density-${t.density}`)}}const Uae=["elevated","flat","tonal","outlined","text","plain"];function wl(t,e){return _(Ye,null,[t&&_("span",{key:"overlay",class:`${e}__overlay`},null),_("span",{key:"underlay",class:`${e}__underlay`},null)])}const hr=ue({color:String,variant:{type:String,default:"elevated",validator:t=>Uae.includes(t)}},"variant");function Gu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca();const n=V(()=>{const{variant:r}=it(t);return`${e}--variant-${r}`}),{colorClasses:i,colorStyles:s}=FC(V(()=>{const{variant:r,color:a}=it(t);return{[["elevated","flat"].includes(r)?"background":"text"]:a}}));return{colorClasses:i,colorStyles:s,variantClasses:n}}const rF=ue({baseColor:String,divided:Boolean,...ks(),...Ke(),...fi(),...ni(),...fn(),...yt(),...Dt(),...hr()},"VBtnGroup"),yS=Te()({name:"VBtnGroup",props:rF(),setup(t,e){let{slots:n}=e;const{themeClasses:i}=zt(t),{densityClasses:s}=es(t),{borderClasses:r}=Qs(t),{elevationClasses:a}=xi(t),{roundedClasses:o}=Rn(t);Pn({VBtn:{height:"auto",baseColor:ye(t,"baseColor"),color:ye(t,"color"),density:ye(t,"density"),flat:!0,variant:ye(t,"variant")}}),Pe(()=>_(t.tag,{class:["v-btn-group",{"v-btn-group--divided":t.divided},i.value,r.value,s.value,a.value,o.value,t.class],style:t.style},n))}}),Ku=ue({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Yu=ue({value:null,disabled:Boolean,selectedClass:String},"group-item");function Xu(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=Vn("useGroupItem");if(!i)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const s=hs();Jt(Symbol.for(`${e.description}:id`),s);const r=vt(e,null);if(!r){if(!n)return r;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${e.description}`)}const a=ye(t,"value"),o=V(()=>!!(r.disabled.value||t.disabled));r.register({id:s,value:a,disabled:o},i),Wn(()=>{r.unregister(s)});const l=V(()=>r.isSelected(s)),u=V(()=>r.items.value[0].id===s),c=V(()=>r.items.value[r.items.value.length-1].id===s),d=V(()=>l.value&&[r.selectedClass.value,t.selectedClass]);return $e(l,h=>{i.emit("group:selected",{value:h})},{flush:"sync"}),{id:s,isSelected:l,isFirst:u,isLast:c,toggle:()=>r.select(s,!l.value),select:h=>r.select(s,h),selectedClass:d,value:a,disabled:o,group:r}}function xl(t,e){let n=!1;const i=ai([]),s=et(t,"modelValue",[],h=>h==null?[]:aF(i,bn(h)),h=>{const f=Hae(i,h);return t.multiple?f:f[0]}),r=Vn("useGroup");function a(h,f){const g=h,v=Symbol.for(`${e.description}:id`),I=Fc(v,r==null?void 0:r.vnode).indexOf(f);it(g.value)==null&&(g.value=I,g.useIndexAsValue=!0),I>-1?i.splice(I,0,g):i.push(g)}function o(h){if(n)return;l();const f=i.findIndex(g=>g.id===h);i.splice(f,1)}function l(){const h=i.find(f=>!f.disabled);h&&t.mandatory==="force"&&!s.value.length&&(s.value=[h.id])}ti(()=>{l()}),Wn(()=>{n=!0}),s1(()=>{for(let h=0;h<i.length;h++)i[h].useIndexAsValue&&(i[h].value=h)});function u(h,f){const g=i.find(v=>v.id===h);if(!(f&&(g!=null&&g.disabled)))if(t.multiple){const v=s.value.slice(),b=v.findIndex(w=>w===h),I=~b;if(f=f??!I,I&&t.mandatory&&v.length<=1||!I&&t.max!=null&&v.length+1>t.max)return;b<0&&f?v.push(h):b>=0&&!f&&v.splice(b,1),s.value=v}else{const v=s.value.includes(h);if(t.mandatory&&v)return;s.value=f??!v?[h]:[]}}function c(h){if(t.multiple,s.value.length){const f=s.value[0],g=i.findIndex(I=>I.id===f);let v=(g+h)%i.length,b=i[v];for(;b.disabled&&v!==g;)v=(v+h)%i.length,b=i[v];if(b.disabled)return;s.value=[i[v].id]}else{const f=i.find(g=>!g.disabled);f&&(s.value=[f.id])}}const d={register:a,unregister:o,selected:s,select:u,disabled:ye(t,"disabled"),prev:()=>c(i.length-1),next:()=>c(1),isSelected:h=>s.value.includes(h),selectedClass:V(()=>t.selectedClass),items:V(()=>i),getItemIndex:h=>$ae(i,h)};return Jt(e,d),d}function $ae(t,e){const n=aF(t,[e]);return n.length?t.findIndex(i=>i.id===n[0]):-1}function aF(t,e){const n=[];return e.forEach(i=>{const s=t.find(a=>Yi(i,a.value)),r=t[i];(s==null?void 0:s.value)!=null?n.push(s.id):r!=null&&n.push(r.id)}),n}function Hae(t,e){const n=[];return e.forEach(i=>{const s=t.findIndex(r=>r.id===i);if(~s){const r=t[s];n.push(r.value!=null?r.value:s)}}),n}const BC=Symbol.for("vuetify:v-btn-toggle"),jae=ue({...rF(),...Ku()},"VBtnToggle"),qae=Te()({name:"VBtnToggle",props:jae(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isSelected:i,next:s,prev:r,select:a,selected:o}=xl(t,BC);return Pe(()=>{const l=yS.filterProps(t);return _(yS,Ie({class:["v-btn-toggle",t.class]},l,{style:t.style}),{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:i,next:s,prev:r,select:a,selected:o})]}})}),{next:s,prev:r,select:a}}}),zae=["x-small","small","default","large","x-large"],xa=ue({size:{type:[String,Number],default:"default"}},"size");function ah(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca();return NE(()=>{let n,i;return gv(zae,t.size)?n=`${e}--size-${t.size}`:t.size&&(i={width:We(t.size),height:We(t.size)}),{sizeClasses:n,sizeStyles:i}})}const Wae=ue({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:nt,opacity:[String,Number],...Ke(),...xa(),...yt({tag:"i"}),...Dt()},"VIcon"),Ht=Te()({name:"VIcon",props:Wae(),setup(t,e){let{attrs:n,slots:i}=e;const s=Me(),{themeClasses:r}=qm(),{iconData:a}=sJ(V(()=>s.value||t.icon)),{sizeClasses:o}=ah(t),{textColorClasses:l,textColorStyles:u}=Li(ye(t,"color"));return Pe(()=>{var h,f;const c=(h=i.default)==null?void 0:h.call(i);c&&(s.value=(f=_M(c).filter(g=>g.type===Em&&g.children&&typeof g.children=="string")[0])==null?void 0:f.children);const d=!!(n.onClick||n.onClickOnce);return _(a.value.component,{tag:t.tag,icon:a.value.icon,class:["v-icon","notranslate",r.value,o.value,l.value,{"v-icon--clickable":d,"v-icon--disabled":t.disabled,"v-icon--start":t.start,"v-icon--end":t.end},t.class],style:[{"--v-icon-opacity":t.opacity},o.value?void 0:{fontSize:We(t.size),height:We(t.size),width:We(t.size)},u.value,t.style],role:d?"button":void 0,"aria-hidden":!d,tabindex:d?t.disabled?-1:0:void 0},{default:()=>[c]})}),{}}});function d_(t,e){const n=Me(),i=Ue(!1);if(DE){const s=new IntersectionObserver(r=>{i.value=!!r.find(a=>a.isIntersecting)},e);Wn(()=>{s.disconnect()}),$e(n,(r,a)=>{a&&(s.unobserve(a),i.value=!1),r&&s.observe(r)},{flush:"post"})}return{intersectionRef:n,isIntersecting:i}}const Gae=ue({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Ke(),...xa(),...yt({tag:"div"}),...Dt()},"VProgressCircular"),Vd=Te()({name:"VProgressCircular",props:Gae(),setup(t,e){let{slots:n}=e;const i=20,s=2*Math.PI*i,r=Me(),{themeClasses:a}=zt(t),{sizeClasses:o,sizeStyles:l}=ah(t),{textColorClasses:u,textColorStyles:c}=Li(ye(t,"color")),{textColorClasses:d,textColorStyles:h}=Li(ye(t,"bgColor")),{intersectionRef:f,isIntersecting:g}=d_(),{resizeRef:v,contentRect:b}=Lr(),I=V(()=>Math.max(0,Math.min(100,parseFloat(t.modelValue)))),w=V(()=>Number(t.width)),P=V(()=>l.value?Number(t.size):b.value?b.value.width:Math.max(w.value,32)),M=V(()=>i/(1-w.value/P.value)*2),F=V(()=>w.value/P.value*M.value),U=V(()=>We((100-I.value)/100*s));return An(()=>{f.value=r.value,v.value=r.value}),Pe(()=>_(t.tag,{ref:r,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":g.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},a.value,o.value,u.value,t.class],style:[l.value,c.value,t.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:I.value},{default:()=>[_("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${M.value} ${M.value}`},[_("circle",{class:["v-progress-circular__underlay",d.value],style:h.value,fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":F.value,"stroke-dasharray":s,"stroke-dashoffset":0},null),_("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":F.value,"stroke-dasharray":s,"stroke-dashoffset":U.value},null)]),n.default&&_("div",{class:"v-progress-circular__content"},[n.default({value:I.value})])]})),{}}}),AP={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},lo=ue({location:String},"location");function Qu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:i}=Gn();return{locationStyles:V(()=>{if(!t.location)return{};const{side:r,align:a}=AT(t.location.split(" ").length>1?t.location:`${t.location} center`,i.value);function o(u){return n?n(u):0}const l={};return r!=="center"&&(e?l[AP[r]]=`calc(100% - ${o(r)}px)`:l[r]=0),a!=="center"?e?l[AP[a]]=`calc(100% - ${o(a)}px)`:l[a]=0:(r==="center"?l.top=l.left="50%":l[{top:"left",bottom:"left",left:"top",right:"top"}[r]]="50%",l.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[r]),l})}}const Kae=ue({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Ke(),...lo({location:"top"}),...fn(),...yt(),...Dt()},"VProgressLinear"),h_=Te()({name:"VProgressLinear",props:Kae(),emits:{"update:modelValue":t=>!0},setup(t,e){var A;let{slots:n}=e;const i=et(t,"modelValue"),{isRtl:s,rtlClasses:r}=Gn(),{themeClasses:a}=zt(t),{locationStyles:o}=Qu(t),{textColorClasses:l,textColorStyles:u}=Li(t,"color"),{backgroundColorClasses:c,backgroundColorStyles:d}=en(V(()=>t.bgColor||t.color)),{backgroundColorClasses:h,backgroundColorStyles:f}=en(V(()=>t.bufferColor||t.bgColor||t.color)),{backgroundColorClasses:g,backgroundColorStyles:v}=en(t,"color"),{roundedClasses:b}=Rn(t),{intersectionRef:I,isIntersecting:w}=d_(),P=V(()=>parseFloat(t.max)),M=V(()=>parseFloat(t.height)),F=V(()=>_n(parseFloat(t.bufferValue)/P.value*100,0,100)),U=V(()=>_n(parseFloat(i.value)/P.value*100,0,100)),D=V(()=>s.value!==t.reverse),S=V(()=>t.indeterminate?"fade-transition":"slide-x-transition"),y=Vt&&((A=window.matchMedia)==null?void 0:A.call(window,"(forced-colors: active)").matches);function E(k){if(!I.value)return;const{left:R,right:W,width:se}=I.value.getBoundingClientRect(),ae=D.value?se-k.clientX+(W-se):k.clientX-R;i.value=Math.round(ae/se*P.value)}return Pe(()=>_(t.tag,{ref:I,class:["v-progress-linear",{"v-progress-linear--absolute":t.absolute,"v-progress-linear--active":t.active&&w.value,"v-progress-linear--reverse":D.value,"v-progress-linear--rounded":t.rounded,"v-progress-linear--rounded-bar":t.roundedBar,"v-progress-linear--striped":t.striped},b.value,a.value,r.value,t.class],style:[{bottom:t.location==="bottom"?0:void 0,top:t.location==="top"?0:void 0,height:t.active?We(M.value):0,"--v-progress-linear-height":We(M.value),...t.absolute?o.value:{}},t.style],role:"progressbar","aria-hidden":t.active?"false":"true","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.indeterminate?void 0:Math.min(parseFloat(i.value),P.value),onClick:t.clickable&&E},{default:()=>[t.stream&&_("div",{key:"stream",class:["v-progress-linear__stream",l.value],style:{...u.value,[D.value?"left":"right"]:We(-M.value),borderTop:`${We(M.value/2)} dotted`,opacity:parseFloat(t.bufferOpacity),top:`calc(50% - ${We(M.value/4)})`,width:We(100-F.value,"%"),"--v-progress-linear-stream-to":We(M.value*(D.value?1:-1))}},null),_("div",{class:["v-progress-linear__background",y?void 0:c.value],style:[d.value,{opacity:parseFloat(t.bgOpacity),width:t.stream?0:void 0}]},null),_("div",{class:["v-progress-linear__buffer",y?void 0:h.value],style:[f.value,{opacity:parseFloat(t.bufferOpacity),width:We(F.value,"%")}]},null),_(nl,{name:S.value},{default:()=>[t.indeterminate?_("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(k=>_("div",{key:k,class:["v-progress-linear__indeterminate",k,y?void 0:g.value],style:v.value},null))]):_("div",{class:["v-progress-linear__determinate",y?void 0:g.value],style:[v.value,{width:We(U.value,"%")}]},null)]}),n.default&&_("div",{class:"v-progress-linear__content"},[n.default({value:U.value,buffer:F.value})])]})),{}}}),f_=ue({loading:[Boolean,String]},"loader");function Zm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca();return{loaderClasses:V(()=>({[`${e}--loading`]:t.loading}))}}function ep(t,e){var i;let{slots:n}=e;return _("div",{class:`${t.name}__loader`},[((i=n.default)==null?void 0:i.call(n,{color:t.color,isActive:t.active}))||_(h_,{absolute:t.absolute,active:t.active,color:t.color,height:"2",indeterminate:!0},null)])}const Yae=["static","relative","fixed","absolute","sticky"],oh=ue({position:{type:String,validator:t=>Yae.includes(t)}},"position");function lh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca();return{positionClasses:V(()=>t.position?`${e}--${t.position}`:void 0)}}function Xae(){const t=Vn("useRoute");return V(()=>{var e;return(e=t==null?void 0:t.proxy)==null?void 0:e.$route})}function oF(){var t,e;return(e=(t=Vn("useRouter"))==null?void 0:t.proxy)==null?void 0:e.$router}function tp(t,e){var d,h;const n=v6("RouterLink"),i=V(()=>!!(t.href||t.to)),s=V(()=>(i==null?void 0:i.value)||sA(e,"click")||sA(t,"click"));if(typeof n=="string"||!("useLink"in n)){const f=ye(t,"href");return{isLink:i,isClickable:s,href:f,linkProps:ai({href:f})}}const r=V(()=>({...t,to:ye(()=>t.to||"")})),a=n.useLink(r.value),o=V(()=>t.to?a:void 0),l=Xae(),u=V(()=>{var f,g,v;return o.value?t.exact?l.value?((v=o.value.isExactActive)==null?void 0:v.value)&&Yi(o.value.route.value.query,l.value.query):((g=o.value.isExactActive)==null?void 0:g.value)??!1:((f=o.value.isActive)==null?void 0:f.value)??!1:!1}),c=V(()=>{var f;return t.to?(f=o.value)==null?void 0:f.route.value.href:t.href});return{isLink:i,isClickable:s,isActive:u,route:(d=o.value)==null?void 0:d.route,navigate:(h=o.value)==null?void 0:h.navigate,href:c,linkProps:ai({href:c,"aria-current":V(()=>u.value?"page":void 0)})}}const np=ue({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let mb=!1;function Qae(t,e){let n=!1,i,s;Vt&&(t!=null&&t.beforeEach)&&(kt(()=>{window.addEventListener("popstate",r),i=t.beforeEach((a,o,l)=>{mb?n?e(l):l():setTimeout(()=>n?e(l):l()),mb=!0}),s=t==null?void 0:t.afterEach(()=>{mb=!1})}),hi(()=>{window.removeEventListener("popstate",r),i==null||i(),s==null||s()}));function r(a){var o;(o=a.state)!=null&&o.replaced||(n=!0,setTimeout(()=>n=!1))}}function Jae(t,e){$e(()=>{var n;return(n=t.isActive)==null?void 0:n.value},n=>{t.isLink.value&&n&&e&&kt(()=>{e(!0)})},{immediate:!0})}const _S=Symbol("rippleStop"),Zae=80;function kP(t,e){t.style.transform=e,t.style.webkitTransform=e}function bS(t){return t.constructor.name==="TouchEvent"}function lF(t){return t.constructor.name==="KeyboardEvent"}const eoe=function(t,e){var d;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=0,s=0;if(!lF(t)){const h=e.getBoundingClientRect(),f=bS(t)?t.touches[t.touches.length-1]:t;i=f.clientX-h.left,s=f.clientY-h.top}let r=0,a=.3;(d=e._ripple)!=null&&d.circle?(a=.15,r=e.clientWidth/2,r=n.center?r:r+Math.sqrt((i-r)**2+(s-r)**2)/4):r=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const o=`${(e.clientWidth-r*2)/2}px`,l=`${(e.clientHeight-r*2)/2}px`,u=n.center?o:`${i-r}px`,c=n.center?l:`${s-r}px`;return{radius:r,scale:a,x:u,y:c,centerX:o,centerY:l}},jv={show(t,e){var f;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((f=e==null?void 0:e._ripple)!=null&&f.enabled))return;const i=document.createElement("span"),s=document.createElement("span");i.appendChild(s),i.className="v-ripple__container",n.class&&(i.className+=` ${n.class}`);const{radius:r,scale:a,x:o,y:l,centerX:u,centerY:c}=eoe(t,e,n),d=`${r*2}px`;s.className="v-ripple__animation",s.style.width=d,s.style.height=d,e.appendChild(i);const h=window.getComputedStyle(e);h&&h.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),kP(s,`translate(${o}, ${l}) scale3d(${a},${a},${a})`),s.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),kP(s,`translate(${u}, ${c}) scale3d(1,1,1)`)})})},hide(t){var r;if(!((r=t==null?void 0:t._ripple)!=null&&r.enabled))return;const e=t.getElementsByClassName("v-ripple__animation");if(e.length===0)return;const n=e[e.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const i=performance.now()-Number(n.dataset.activated),s=Math.max(250-i,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{var o;t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),((o=n.parentNode)==null?void 0:o.parentNode)===t&&t.removeChild(n.parentNode)},300)},s)}};function uF(t){return typeof t>"u"||!!t}function mm(t){const e={},n=t.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||t[_S])){if(t[_S]=!0,bS(t))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(e.center=n._ripple.centered||lF(t),n._ripple.class&&(e.class=n._ripple.class),bS(t)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{jv.show(t,n,e)},n._ripple.showTimer=window.setTimeout(()=>{var i;(i=n==null?void 0:n._ripple)!=null&&i.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},Zae)}else jv.show(t,n,e)}}function PP(t){t[_S]=!0}function Bs(t){const e=t.currentTarget;if(e!=null&&e._ripple){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{Bs(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),jv.hide(e)}}function cF(t){const e=t.currentTarget;e!=null&&e._ripple&&(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let pm=!1;function dF(t){!pm&&(t.keyCode===ZI.enter||t.keyCode===ZI.space)&&(pm=!0,mm(t))}function hF(t){pm=!1,Bs(t)}function fF(t){pm&&(pm=!1,Bs(t))}function mF(t,e,n){const{value:i,modifiers:s}=e,r=uF(i);if(r||jv.hide(t),t._ripple=t._ripple??{},t._ripple.enabled=r,t._ripple.centered=s.center,t._ripple.circle=s.circle,RE(i)&&i.class&&(t._ripple.class=i.class),r&&!n){if(s.stop){t.addEventListener("touchstart",PP,{passive:!0}),t.addEventListener("mousedown",PP);return}t.addEventListener("touchstart",mm,{passive:!0}),t.addEventListener("touchend",Bs,{passive:!0}),t.addEventListener("touchmove",cF,{passive:!0}),t.addEventListener("touchcancel",Bs),t.addEventListener("mousedown",mm),t.addEventListener("mouseup",Bs),t.addEventListener("mouseleave",Bs),t.addEventListener("keydown",dF),t.addEventListener("keyup",hF),t.addEventListener("blur",fF),t.addEventListener("dragstart",Bs,{passive:!0})}else!r&&n&&pF(t)}function pF(t){t.removeEventListener("mousedown",mm),t.removeEventListener("touchstart",mm),t.removeEventListener("touchend",Bs),t.removeEventListener("touchmove",cF),t.removeEventListener("touchcancel",Bs),t.removeEventListener("mouseup",Bs),t.removeEventListener("mouseleave",Bs),t.removeEventListener("keydown",dF),t.removeEventListener("keyup",hF),t.removeEventListener("dragstart",Bs),t.removeEventListener("blur",fF)}function toe(t,e){mF(t,e,!1)}function noe(t){delete t._ripple,pF(t)}function ioe(t,e){if(e.value===e.oldValue)return;const n=uF(e.oldValue);mF(t,e,n)}const uo={mounted:toe,unmounted:noe,updated:ioe},m_=ue({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:BC},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:nt,appendIcon:nt,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...ks(),...Ke(),...fi(),...Kn(),...ni(),...Yu(),...f_(),...lo(),...oh(),...fn(),...np(),...xa(),...yt({tag:"button"}),...Dt(),...hr({variant:"elevated"})},"VBtn"),Ot=Te()({name:"VBtn",props:m_(),emits:{"group:selected":t=>!0},setup(t,e){let{attrs:n,slots:i}=e;const{themeClasses:s}=zt(t),{borderClasses:r}=Qs(t),{densityClasses:a}=es(t),{dimensionStyles:o}=Yn(t),{elevationClasses:l}=xi(t),{loaderClasses:u}=Zm(t),{locationStyles:c}=Qu(t),{positionClasses:d}=lh(t),{roundedClasses:h}=Rn(t),{sizeClasses:f,sizeStyles:g}=ah(t),v=Xu(t,t.symbol,!1),b=tp(t,n),I=V(()=>{var A;return t.active!==void 0?t.active:b.isLink.value?(A=b.isActive)==null?void 0:A.value:v==null?void 0:v.isSelected.value}),w=V(()=>I.value?t.activeColor??t.color:t.color),P=V(()=>{var k,R;return{color:(v==null?void 0:v.isSelected.value)&&(!b.isLink.value||((k=b.isActive)==null?void 0:k.value))||!v||((R=b.isActive)==null?void 0:R.value)?w.value??t.baseColor:t.baseColor,variant:t.variant}}),{colorClasses:M,colorStyles:F,variantClasses:U}=Gu(P),D=V(()=>(v==null?void 0:v.disabled.value)||t.disabled),S=V(()=>t.variant==="elevated"&&!(t.disabled||t.flat||t.border)),y=V(()=>{if(!(t.value===void 0||typeof t.value=="symbol"))return Object(t.value)===t.value?JSON.stringify(t.value,null,0):t.value});function E(A){var k;D.value||b.isLink.value&&(A.metaKey||A.ctrlKey||A.shiftKey||A.button!==0||n.target==="_blank")||((k=b.navigate)==null||k.call(b,A),v==null||v.toggle())}return Jae(b,v==null?void 0:v.select),Pe(()=>{const A=b.isLink.value?"a":t.tag,k=!!(t.prependIcon||i.prepend),R=!!(t.appendIcon||i.append),W=!!(t.icon&&t.icon!==!0);return Tn(_(A,Ie({type:A==="a"?void 0:"button",class:["v-btn",v==null?void 0:v.selectedClass.value,{"v-btn--active":I.value,"v-btn--block":t.block,"v-btn--disabled":D.value,"v-btn--elevated":S.value,"v-btn--flat":t.flat,"v-btn--icon":!!t.icon,"v-btn--loading":t.loading,"v-btn--readonly":t.readonly,"v-btn--slim":t.slim,"v-btn--stacked":t.stacked},s.value,r.value,M.value,a.value,l.value,u.value,d.value,h.value,f.value,U.value,t.class],style:[F.value,o.value,c.value,g.value,t.style],"aria-busy":t.loading?!0:void 0,disabled:D.value||void 0,tabindex:t.loading||t.readonly?-1:void 0,onClick:E,value:y.value},b.linkProps),{default:()=>{var se;return[wl(!0,"v-btn"),!t.icon&&k&&_("span",{key:"prepend",class:"v-btn__prepend"},[i.prepend?_(_t,{key:"prepend-defaults",disabled:!t.prependIcon,defaults:{VIcon:{icon:t.prependIcon}}},i.prepend):_(Ht,{key:"prepend-icon",icon:t.prependIcon},null)]),_("span",{class:"v-btn__content","data-no-activator":""},[!i.default&&W?_(Ht,{key:"content-icon",icon:t.icon},null):_(_t,{key:"content-defaults",disabled:!W,defaults:{VIcon:{icon:t.icon}}},{default:()=>{var ae;return[((ae=i.default)==null?void 0:ae.call(i))??Ir(t.text)]}})]),!t.icon&&R&&_("span",{key:"append",class:"v-btn__append"},[i.append?_(_t,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VIcon:{icon:t.appendIcon}}},i.append):_(Ht,{key:"append-icon",icon:t.appendIcon},null)]),!!t.loading&&_("span",{key:"loader",class:"v-btn__loader"},[((se=i.loader)==null?void 0:se.call(i))??_(Vd,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,width:"2"},null)])]}}),[[uo,!D.value&&t.ripple,"",{center:!!t.icon}]])}),{group:v}}}),soe=ue({...m_({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),roe=Te()({name:"VAppBarNavIcon",props:soe(),setup(t,e){let{slots:n}=e;return Pe(()=>_(Ot,Ie(t,{class:["v-app-bar-nav-icon"]}),n)),{}}}),aoe=Te()({name:"VAppBarTitle",props:J3(),setup(t,e){let{slots:n}=e;return Pe(()=>_(OC,Ie(t,{class:"v-app-bar-title"}),n)),{}}}),gF=wa("v-alert-title"),ooe=["success","info","warning","error"],loe=ue({border:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["top","end","bottom","start"].includes(t)},borderColor:String,closable:Boolean,closeIcon:{type:nt,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:t=>ooe.includes(t)},...Ke(),...fi(),...Kn(),...ni(),...lo(),...oh(),...fn(),...yt(),...Dt(),...hr({variant:"flat"})},"VAlert"),uoe=Te()({name:"VAlert",props:loe(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:i}=e;const s=et(t,"modelValue"),r=V(()=>{if(t.icon!==!1)return t.type?t.icon??`$${t.type}`:t.icon}),a=V(()=>({color:t.color??t.type,variant:t.variant})),{themeClasses:o}=zt(t),{colorClasses:l,colorStyles:u,variantClasses:c}=Gu(a),{densityClasses:d}=es(t),{dimensionStyles:h}=Yn(t),{elevationClasses:f}=xi(t),{locationStyles:g}=Qu(t),{positionClasses:v}=lh(t),{roundedClasses:b}=Rn(t),{textColorClasses:I,textColorStyles:w}=Li(ye(t,"borderColor")),{t:P}=Dn(),M=V(()=>({"aria-label":P(t.closeLabel),onClick(F){s.value=!1,n("click:close",F)}}));return()=>{const F=!!(i.prepend||r.value),U=!!(i.title||t.title),D=!!(i.close||t.closable);return s.value&&_(t.tag,{class:["v-alert",t.border&&{"v-alert--border":!!t.border,[`v-alert--border-${t.border===!0?"start":t.border}`]:!0},{"v-alert--prominent":t.prominent},o.value,l.value,d.value,f.value,v.value,b.value,c.value,t.class],style:[u.value,h.value,g.value,t.style],role:"alert"},{default:()=>{var S,y;return[wl(!1,"v-alert"),t.border&&_("div",{key:"border",class:["v-alert__border",I.value],style:w.value},null),F&&_("div",{key:"prepend",class:"v-alert__prepend"},[i.prepend?_(_t,{key:"prepend-defaults",disabled:!r.value,defaults:{VIcon:{density:t.density,icon:r.value,size:t.prominent?44:28}}},i.prepend):_(Ht,{key:"prepend-icon",density:t.density,icon:r.value,size:t.prominent?44:28},null)]),_("div",{class:"v-alert__content"},[U&&_(gF,{key:"title"},{default:()=>{var E;return[((E=i.title)==null?void 0:E.call(i))??t.title]}}),((S=i.text)==null?void 0:S.call(i))??t.text,(y=i.default)==null?void 0:y.call(i)]),i.append&&_("div",{key:"append",class:"v-alert__append"},[i.append()]),D&&_("div",{key:"close",class:"v-alert__close"},[i.close?_(_t,{key:"close-defaults",defaults:{VBtn:{icon:t.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var E;return[(E=i.close)==null?void 0:E.call(i,{props:M.value})]}}):_(Ot,Ie({key:"close-btn",icon:t.closeIcon,size:"x-small",variant:"text"},M.value),null)])]}})}}}),coe=ue({start:Boolean,end:Boolean,icon:nt,image:String,text:String,...ks(),...Ke(),...fi(),...fn(),...xa(),...yt(),...Dt(),...hr({variant:"flat"})},"VAvatar"),ur=Te()({name:"VAvatar",props:coe(),setup(t,e){let{slots:n}=e;const{themeClasses:i}=zt(t),{borderClasses:s}=Qs(t),{colorClasses:r,colorStyles:a,variantClasses:o}=Gu(t),{densityClasses:l}=es(t),{roundedClasses:u}=Rn(t),{sizeClasses:c,sizeStyles:d}=ah(t);return Pe(()=>_(t.tag,{class:["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},i.value,s.value,r.value,l.value,u.value,c.value,o.value,t.class],style:[a.value,d.value,t.style]},{default:()=>[n.default?_(_t,{key:"content-defaults",defaults:{VImg:{cover:!0,src:t.image},VIcon:{icon:t.icon}}},{default:()=>[n.default()]}):t.image?_(to,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?_(Ht,{key:"icon",icon:t.icon},null):t.text,wl(!1,"v-avatar")]})),{}}}),doe=ue({text:String,onClick:wi(),...Ke(),...Dt()},"VLabel"),uh=Te()({name:"VLabel",props:doe(),setup(t,e){let{slots:n}=e;return Pe(()=>{var i;return _("label",{class:["v-label",{"v-label--clickable":!!t.onClick},t.class],style:t.style,onClick:t.onClick},[t.text,(i=n.default)==null?void 0:i.call(n)])}),{}}}),vF=Symbol.for("vuetify:selection-control-group"),UC=ue({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:nt,trueIcon:nt,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Yi},...Ke(),...fi(),...Dt()},"SelectionControlGroup"),hoe=ue({...UC({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),yF=Te()({name:"VSelectionControlGroup",props:hoe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"modelValue"),s=hs(),r=V(()=>t.id||`v-selection-control-group-${s}`),a=V(()=>t.name||r.value),o=new Set;return Jt(vF,{modelValue:i,forceUpdate:()=>{o.forEach(l=>l())},onForceUpdate:l=>{o.add(l),hi(()=>{o.delete(l)})}}),Pn({[t.defaultsTarget]:{color:ye(t,"color"),disabled:ye(t,"disabled"),density:ye(t,"density"),error:ye(t,"error"),inline:ye(t,"inline"),modelValue:i,multiple:V(()=>!!t.multiple||t.multiple==null&&Array.isArray(i.value)),name:a,falseIcon:ye(t,"falseIcon"),trueIcon:ye(t,"trueIcon"),readonly:ye(t,"readonly"),ripple:ye(t,"ripple"),type:ye(t,"type"),valueComparator:ye(t,"valueComparator")}}),Pe(()=>{var l;return _("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":t.inline},t.class],style:t.style,role:t.type==="radio"?"radiogroup":void 0},[(l=n.default)==null?void 0:l.call(n)])}),{}}}),p_=ue({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Ke(),...UC()},"VSelectionControl");function foe(t){const e=vt(vF,void 0),{densityClasses:n}=es(t),i=et(t,"modelValue"),s=V(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),r=V(()=>t.falseValue!==void 0?t.falseValue:!1),a=V(()=>!!t.multiple||t.multiple==null&&Array.isArray(i.value)),o=V({get(){const f=e?e.modelValue.value:i.value;return a.value?bn(f).some(g=>t.valueComparator(g,s.value)):t.valueComparator(f,s.value)},set(f){if(t.readonly)return;const g=f?s.value:r.value;let v=g;a.value&&(v=f?[...bn(i.value),g]:bn(i.value).filter(b=>!t.valueComparator(b,s.value))),e?e.modelValue.value=v:i.value=v}}),{textColorClasses:l,textColorStyles:u}=Li(V(()=>{if(!(t.error||t.disabled))return o.value?t.color:t.baseColor})),{backgroundColorClasses:c,backgroundColorStyles:d}=en(V(()=>o.value&&!t.error&&!t.disabled?t.color:t.baseColor)),h=V(()=>o.value?t.trueIcon:t.falseIcon);return{group:e,densityClasses:n,trueValue:s,falseValue:r,model:o,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,icon:h}}const hl=Te()({name:"VSelectionControl",directives:{Ripple:uo},inheritAttrs:!1,props:p_(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:i}=e;const{group:s,densityClasses:r,icon:a,model:o,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,trueValue:h}=foe(t),f=hs(),g=Ue(!1),v=Ue(!1),b=Me(),I=V(()=>t.id||`input-${f}`),w=V(()=>!t.disabled&&!t.readonly);s==null||s.onForceUpdate(()=>{b.value&&(b.value.checked=o.value)});function P(D){w.value&&(g.value=!0,Td(D.target,":focus-visible")!==!1&&(v.value=!0))}function M(){g.value=!1,v.value=!1}function F(D){D.stopPropagation()}function U(D){if(!w.value){b.value&&(b.value.checked=o.value);return}t.readonly&&s&&kt(()=>s.forceUpdate()),o.value=D.target.checked}return Pe(()=>{var A,k;const D=i.label?i.label({label:t.label,props:{for:I.value}}):t.label,[S,y]=El(n),E=_("input",Ie({ref:b,checked:o.value,disabled:!!t.disabled,id:I.value,onBlur:M,onFocus:P,onInput:U,"aria-disabled":!!t.disabled,"aria-label":t.label,type:t.type,value:h.value,name:t.name,"aria-checked":t.type==="checkbox"?o.value:void 0},y),null);return _("div",Ie({class:["v-selection-control",{"v-selection-control--dirty":o.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":g.value,"v-selection-control--focus-visible":v.value,"v-selection-control--inline":t.inline},r.value,t.class]},S,{style:t.style}),[_("div",{class:["v-selection-control__wrapper",l.value],style:u.value},[(A=i.default)==null?void 0:A.call(i,{backgroundColorClasses:c,backgroundColorStyles:d}),Tn(_("div",{class:["v-selection-control__input"]},[((k=i.input)==null?void 0:k.call(i,{model:o,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,inputNode:E,icon:a.value,props:{onFocus:P,onBlur:M,id:I.value}}))??_(Ye,null,[a.value&&_(Ht,{key:"icon",icon:a.value},null),E])]),[[Ks("ripple"),t.ripple&&[!t.disabled&&!t.readonly,null,["center","circle"]]]])]),D&&_(uh,{for:I.value,onClick:F},{default:()=>[D]})])}),{isFocused:g,input:b}}}),_F=ue({indeterminate:Boolean,indeterminateIcon:{type:nt,default:"$checkboxIndeterminate"},...p_({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),no=Te()({name:"VCheckboxBtn",props:_F(),emits:{"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"indeterminate"),s=et(t,"modelValue");function r(l){i.value&&(i.value=!1)}const a=V(()=>i.value?t.indeterminateIcon:t.falseIcon),o=V(()=>i.value?t.indeterminateIcon:t.trueIcon);return Pe(()=>{const l=kn(hl.filterProps(t),["modelValue"]);return _(hl,Ie(l,{modelValue:s.value,"onUpdate:modelValue":[u=>s.value=u,r],class:["v-checkbox-btn",t.class],style:t.style,type:"checkbox",falseIcon:a.value,trueIcon:o.value,"aria-checked":i.value?"mixed":void 0}),n)}),{}}});function bF(t){const{t:e}=Dn();function n(i){let{name:s,color:r}=i;const a={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[s],o=t[`onClick:${s}`];function l(c){c.key!=="Enter"&&c.key!==" "||(c.preventDefault(),c.stopPropagation(),Oy(o,new PointerEvent("click",c)))}const u=o&&a?e(`$vuetify.input.${a}`,t.label??""):void 0;return _(Ht,{icon:t[`${s}Icon`],"aria-label":u,onClick:o,onKeydown:l,color:r},null)}return{InputIcon:n}}const moe=ue({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Ke(),...Br({transition:{component:MC,leaveAbsolute:!0,group:!0}})},"VMessages"),TF=Te()({name:"VMessages",props:moe(),setup(t,e){let{slots:n}=e;const i=V(()=>bn(t.messages)),{textColorClasses:s,textColorStyles:r}=Li(V(()=>t.color));return Pe(()=>_(Ki,{transition:t.transition,tag:"div",class:["v-messages",s.value,t.class],style:[r.value,t.style]},{default:()=>[t.active&&i.value.map((a,o)=>_("div",{class:"v-messages__message",key:`${o}-${i.value}`},[n.message?n.message({message:a}):a]))]})),{}}}),ip=ue({focused:Boolean,"onUpdate:focused":wi()},"focus");function Ia(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca();const n=et(t,"focused"),i=V(()=>({[`${e}--focused`]:n.value}));function s(){n.value=!0}function r(){n.value=!1}return{focusClasses:i,isFocused:n,focus:s,blur:r}}const SF=Symbol.for("vuetify:form"),poe=ue({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function goe(t){const e=et(t,"modelValue"),n=V(()=>t.disabled),i=V(()=>t.readonly),s=Ue(!1),r=Me([]),a=Me([]);async function o(){const c=[];let d=!0;a.value=[],s.value=!0;for(const h of r.value){const f=await h.validate();if(f.length>0&&(d=!1,c.push({id:h.id,errorMessages:f})),!d&&t.fastFail)break}return a.value=c,s.value=!1,{valid:d,errors:a.value}}function l(){r.value.forEach(c=>c.reset())}function u(){r.value.forEach(c=>c.resetValidation())}return $e(r,()=>{let c=0,d=0;const h=[];for(const f of r.value)f.isValid===!1?(d++,h.push({id:f.id,errorMessages:f.errorMessages})):f.isValid===!0&&c++;a.value=h,e.value=d>0?!1:c===r.value.length?!0:null},{deep:!0,flush:"post"}),Jt(SF,{register:c=>{let{id:d,vm:h,validate:f,reset:g,resetValidation:v}=c;r.value.some(b=>b.id===d),r.value.push({id:d,validate:f,reset:g,resetValidation:v,vm:Jv(h),isValid:null,errorMessages:[]})},unregister:c=>{r.value=r.value.filter(d=>d.id!==c)},update:(c,d,h)=>{const f=r.value.find(g=>g.id===c);f&&(f.isValid=d,f.errorMessages=h)},isDisabled:n,isReadonly:i,isValidating:s,isValid:e,items:r,validateOn:ye(t,"validateOn")}),{errors:a,isDisabled:n,isReadonly:i,isValidating:s,isValid:e,items:r,validate:o,reset:l,resetValidation:u}}function sp(t){const e=vt(SF,null);return{...e,isReadonly:V(()=>!!((t==null?void 0:t.readonly)??(e==null?void 0:e.isReadonly.value))),isDisabled:V(()=>!!((t==null?void 0:t.disabled)??(e==null?void 0:e.isDisabled.value)))}}const EF=ue({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...ip()},"validation");function CF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hs();const i=et(t,"modelValue"),s=V(()=>t.validationValue===void 0?i.value:t.validationValue),r=sp(t),a=Me([]),o=Ue(!0),l=V(()=>!!(bn(i.value===""?null:i.value).length||bn(s.value===""?null:s.value).length)),u=V(()=>{var P;return(P=t.errorMessages)!=null&&P.length?bn(t.errorMessages).concat(a.value).slice(0,Math.max(0,Number(t.maxErrors))):a.value}),c=V(()=>{var F;let P=(t.validateOn??((F=r.validateOn)==null?void 0:F.value))||"input";P==="lazy"&&(P="input lazy"),P==="eager"&&(P="input eager");const M=new Set((P==null?void 0:P.split(" "))??[]);return{input:M.has("input"),blur:M.has("blur")||M.has("input")||M.has("invalid-input"),invalidInput:M.has("invalid-input"),lazy:M.has("lazy"),eager:M.has("eager")}}),d=V(()=>{var P;return t.error||(P=t.errorMessages)!=null&&P.length?!1:t.rules.length?o.value?a.value.length||c.value.lazy?null:!0:!a.value.length:!0}),h=Ue(!1),f=V(()=>({[`${e}--error`]:d.value===!1,[`${e}--dirty`]:l.value,[`${e}--disabled`]:r.isDisabled.value,[`${e}--readonly`]:r.isReadonly.value})),g=Vn("validation"),v=V(()=>t.name??it(n));Ud(()=>{var P;(P=r.register)==null||P.call(r,{id:v.value,vm:g,validate:w,reset:b,resetValidation:I})}),Wn(()=>{var P;(P=r.unregister)==null||P.call(r,v.value)}),ti(async()=>{var P;c.value.lazy||await w(!c.value.eager),(P=r.update)==null||P.call(r,v.value,d.value,u.value)}),ds(()=>c.value.input||c.value.invalidInput&&d.value===!1,()=>{$e(s,()=>{if(s.value!=null)w();else if(t.focused){const P=$e(()=>t.focused,M=>{M||w(),P()})}})}),ds(()=>c.value.blur,()=>{$e(()=>t.focused,P=>{P||w()})}),$e([d,u],()=>{var P;(P=r.update)==null||P.call(r,v.value,d.value,u.value)});async function b(){i.value=null,await kt(),await I()}async function I(){o.value=!0,c.value.lazy?a.value=[]:await w(!c.value.eager)}async function w(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(t.disabled||t.readonly)return a.value=[],h.value=!1,a.value;const M=[];h.value=!0;for(const F of t.rules){if(M.length>=Number(t.maxErrors??1))break;const D=await(typeof F=="function"?F:()=>F)(s.value);if(D!==!0){if(D!==!1&&typeof D!="string"){console.warn(`${D} is not a valid value. Rule functions must return boolean true or a string.`);continue}M.push(D||"")}}return a.value=M,h.value=!1,o.value=P,a.value}return{errorMessages:u,isDirty:l,isDisabled:r.isDisabled,isReadonly:r.isReadonly,isPristine:o,isValid:d,isValidating:h,reset:b,resetValidation:I,validate:w,validationClasses:f}}const co=ue({id:String,appendIcon:nt,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:nt,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:t=>["horizontal","vertical"].includes(t)},"onClick:prepend":wi(),"onClick:append":wi(),...Ke(),...fi(),...Sl(Kn(),["maxWidth","minWidth","width"]),...Dt(),...EF()},"VInput"),Oi=Te()({name:"VInput",props:{...co()},emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:i,emit:s}=e;const{densityClasses:r}=es(t),{dimensionStyles:a}=Yn(t),{themeClasses:o}=zt(t),{rtlClasses:l}=Gn(),{InputIcon:u}=bF(t),c=hs(),d=V(()=>t.id||`input-${c}`),h=V(()=>`${d.value}-messages`),{errorMessages:f,isDirty:g,isDisabled:v,isReadonly:b,isPristine:I,isValid:w,isValidating:P,reset:M,resetValidation:F,validate:U,validationClasses:D}=CF(t,"v-input",d),S=V(()=>({id:d,messagesId:h,isDirty:g,isDisabled:v,isReadonly:b,isPristine:I,isValid:w,isValidating:P,reset:M,resetValidation:F,validate:U})),y=V(()=>t.error||t.disabled?void 0:t.focused?t.color:t.baseColor),E=V(()=>{if(t.iconColor)return t.iconColor===!0?y.value:t.iconColor}),A=V(()=>{var k;return(k=t.errorMessages)!=null&&k.length||!I.value&&f.value.length?f.value:t.hint&&(t.persistentHint||t.focused)?t.hint:t.messages});return Pe(()=>{var ae,Z,ne,ee;const k=!!(i.prepend||t.prependIcon),R=!!(i.append||t.appendIcon),W=A.value.length>0,se=!t.hideDetails||t.hideDetails==="auto"&&(W||!!i.details);return _("div",{class:["v-input",`v-input--${t.direction}`,{"v-input--center-affix":t.centerAffix,"v-input--focused":t.focused,"v-input--glow":t.glow,"v-input--hide-spin-buttons":t.hideSpinButtons},r.value,o.value,l.value,D.value,t.class],style:[a.value,t.style]},[k&&_("div",{key:"prepend",class:"v-input__prepend"},[(ae=i.prepend)==null?void 0:ae.call(i,S.value),t.prependIcon&&_(u,{key:"prepend-icon",name:"prepend",color:E.value},null)]),i.default&&_("div",{class:"v-input__control"},[(Z=i.default)==null?void 0:Z.call(i,S.value)]),R&&_("div",{key:"append",class:"v-input__append"},[t.appendIcon&&_(u,{key:"append-icon",name:"append",color:E.value},null),(ne=i.append)==null?void 0:ne.call(i,S.value)]),se&&_("div",{id:h.value,class:"v-input__details",role:"alert","aria-live":"polite"},[_(TF,{active:W,messages:A.value},{message:i.message}),(ee=i.details)==null?void 0:ee.call(i,S.value)])])}),{reset:M,resetValidation:F,validate:U,isValid:w,errorMessages:f}}}),voe=ue({...co(),...kn(_F(),["inline"])},"VCheckbox"),yoe=Te()({name:"VCheckbox",inheritAttrs:!1,props:voe(),emits:{"update:modelValue":t=>!0,"update:focused":t=>!0},setup(t,e){let{attrs:n,slots:i}=e;const s=et(t,"modelValue"),{isFocused:r,focus:a,blur:o}=Ia(t),l=hs(),u=V(()=>t.id||`checkbox-${l}`);return Pe(()=>{const[c,d]=El(n),h=Oi.filterProps(t),f=no.filterProps(t);return _(Oi,Ie({class:["v-checkbox",t.class]},c,h,{modelValue:s.value,"onUpdate:modelValue":g=>s.value=g,id:u.value,focused:r.value,style:t.style}),{...i,default:g=>{let{id:v,messagesId:b,isDisabled:I,isReadonly:w,isValid:P}=g;return _(no,Ie(f,{id:v.value,"aria-describedby":b.value,disabled:I.value,readonly:w.value},d,{error:P.value===!1,modelValue:s.value,"onUpdate:modelValue":M=>s.value=M,onFocus:a,onBlur:o}),i)}})}),{}}});function _oe(t){let{selectedElement:e,containerElement:n,isRtl:i,isHorizontal:s}=t;const r=gm(s,n),a=wF(s,i,n),o=gm(s,e),l=xF(s,e),u=o*.4;return a>l?l-u:a+r<l+o?l-r+o+u:a}function boe(t){let{selectedElement:e,containerElement:n,isHorizontal:i}=t;const s=gm(i,n),r=xF(i,e),a=gm(i,e);return r-s/2+a/2}function DP(t,e){const n=t?"scrollWidth":"scrollHeight";return(e==null?void 0:e[n])||0}function Toe(t,e){const n=t?"clientWidth":"clientHeight";return(e==null?void 0:e[n])||0}function wF(t,e,n){if(!n)return 0;const{scrollLeft:i,offsetWidth:s,scrollWidth:r}=n;return t?e?r-s+i:i:n.scrollTop}function gm(t,e){const n=t?"offsetWidth":"offsetHeight";return(e==null?void 0:e[n])||0}function xF(t,e){const n=t?"offsetLeft":"offsetTop";return(e==null?void 0:e[n])||0}const IF=Symbol.for("vuetify:v-slide-group"),$C=ue({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:IF},nextIcon:{type:nt,default:"$next"},prevIcon:{type:nt,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...Ke(),...ju({mobile:null}),...yt(),...Ku({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),vm=Te()({name:"VSlideGroup",props:$C(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isRtl:i}=Gn(),{displayClasses:s,mobile:r}=As(t),a=xl(t,t.symbol),o=Ue(!1),l=Ue(0),u=Ue(0),c=Ue(0),d=V(()=>t.direction==="horizontal"),{resizeRef:h,contentRect:f}=Lr(),{resizeRef:g,contentRect:v}=Lr(),b=QQ(),I=V(()=>({container:h.el,duration:200,easing:"easeOutQuart"})),w=V(()=>a.selected.value.length?a.items.value.findIndex(j=>j.id===a.selected.value[0]):-1),P=V(()=>a.selected.value.length?a.items.value.findIndex(j=>j.id===a.selected.value[a.selected.value.length-1]):-1);if(Vt){let j=-1;$e(()=>[a.selected.value,f.value,v.value,d.value],()=>{cancelAnimationFrame(j),j=requestAnimationFrame(()=>{if(f.value&&v.value){const le=d.value?"width":"height";u.value=f.value[le],c.value=v.value[le],o.value=u.value+1<c.value}if(w.value>=0&&g.el){const le=g.el.children[P.value];F(le,t.centerActive)}})})}const M=Ue(!1);function F(j,le){let pe=0;le?pe=boe({containerElement:h.el,isHorizontal:d.value,selectedElement:j}):pe=_oe({containerElement:h.el,isHorizontal:d.value,isRtl:i.value,selectedElement:j}),U(pe)}function U(j){if(!Vt||!h.el)return;const le=gm(d.value,h.el),pe=wF(d.value,i.value,h.el);if(!(DP(d.value,h.el)<=le||Math.abs(j-pe)<16)){if(d.value&&i.value&&h.el){const{scrollWidth:Le,offsetWidth:we}=h.el;j=Le-we-j}d.value?b.horizontal(j,I.value):b(j,I.value)}}function D(j){const{scrollTop:le,scrollLeft:pe}=j.target;l.value=d.value?pe:le}function S(j){if(M.value=!0,!(!o.value||!g.el)){for(const le of j.composedPath())for(const pe of g.el.children)if(pe===le){F(pe);return}}}function y(j){M.value=!1}let E=!1;function A(j){var le;!E&&!M.value&&!(j.relatedTarget&&((le=g.el)!=null&&le.contains(j.relatedTarget)))&&se(),E=!1}function k(){E=!0}function R(j){if(!g.el)return;function le(pe){j.preventDefault(),se(pe)}d.value?j.key==="ArrowRight"?le(i.value?"prev":"next"):j.key==="ArrowLeft"&&le(i.value?"next":"prev"):j.key==="ArrowDown"?le("next"):j.key==="ArrowUp"&&le("prev"),j.key==="Home"?le("first"):j.key==="End"&&le("last")}function W(j,le){if(!j)return;let pe=j;do pe=pe==null?void 0:pe[le==="next"?"nextElementSibling":"previousElementSibling"];while(pe!=null&&pe.hasAttribute("disabled"));return pe}function se(j){if(!g.el)return;let le;if(!j)le=nm(g.el)[0];else if(j==="next"){if(le=W(g.el.querySelector(":focus"),j),!le)return se("first")}else if(j==="prev"){if(le=W(g.el.querySelector(":focus"),j),!le)return se("last")}else j==="first"?(le=g.el.firstElementChild,le!=null&&le.hasAttribute("disabled")&&(le=W(le,"next"))):j==="last"&&(le=g.el.lastElementChild,le!=null&&le.hasAttribute("disabled")&&(le=W(le,"prev")));le&&le.focus({preventScroll:!0})}function ae(j){const le=d.value&&i.value?-1:1,pe=(j==="prev"?-le:le)*u.value;let Se=l.value+pe;if(d.value&&i.value&&h.el){const{scrollWidth:Le,offsetWidth:we}=h.el;Se+=Le-we}U(Se)}const Z=V(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),ne=V(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!r.value;case!0:return o.value||Math.abs(l.value)>0;case"mobile":return r.value||o.value||Math.abs(l.value)>0;default:return!r.value&&(o.value||Math.abs(l.value)>0)}}),ee=V(()=>Math.abs(l.value)>1),Q=V(()=>{if(!h.value)return!1;const j=DP(d.value,h.el),le=Toe(d.value,h.el);return j-le-Math.abs(l.value)>1});return Pe(()=>_(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!d.value,"v-slide-group--has-affixes":ne.value,"v-slide-group--is-overflowing":o.value},s.value,t.class],style:t.style,tabindex:M.value||a.selected.value.length?-1:0,onFocus:A},{default:()=>{var j,le,pe;return[ne.value&&_("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!ee.value}],onMousedown:k,onClick:()=>ee.value&&ae("prev")},[((j=n.prev)==null?void 0:j.call(n,Z.value))??_(fm,null,{default:()=>[_(Ht,{icon:i.value?t.nextIcon:t.prevIcon},null)]})]),_("div",{key:"container",ref:h,class:"v-slide-group__container",onScroll:D},[_("div",{ref:g,class:"v-slide-group__content",onFocusin:S,onFocusout:y,onKeydown:R},[(le=n.default)==null?void 0:le.call(n,Z.value)])]),ne.value&&_("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Q.value}],onMousedown:k,onClick:()=>Q.value&&ae("next")},[((pe=n.next)==null?void 0:pe.call(n,Z.value))??_(fm,null,{default:()=>[_(Ht,{icon:i.value?t.prevIcon:t.nextIcon},null)]})])]}})),{selected:a.selected,scrollTo:ae,scrollOffset:l,focus:se,hasPrev:ee,hasNext:Q}}}),AF=Symbol.for("vuetify:v-chip-group"),Soe=ue({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Yi},...$C(),...Ke(),...Ku({selectedClass:"v-chip--selected"}),...yt(),...Dt(),...hr({variant:"tonal"})},"VChipGroup"),Eoe=Te()({name:"VChipGroup",props:Soe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:i}=zt(t),{isSelected:s,select:r,next:a,prev:o,selected:l}=xl(t,AF);return Pn({VChip:{baseColor:ye(t,"baseColor"),color:ye(t,"color"),disabled:ye(t,"disabled"),filter:ye(t,"filter"),variant:ye(t,"variant")}}),Pe(()=>{const u=vm.filterProps(t);return _(vm,Ie(u,{class:["v-chip-group",{"v-chip-group--column":t.column},i.value,t.class],style:t.style}),{default:()=>{var c;return[(c=n.default)==null?void 0:c.call(n,{isSelected:s,select:r,next:a,prev:o,selected:l.value})]}})}),{}}}),Coe=ue({activeClass:String,appendAvatar:String,appendIcon:nt,baseColor:String,closable:Boolean,closeIcon:{type:nt,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:nt,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:nt,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:wi(),onClickOnce:wi(),...ks(),...Ke(),...fi(),...ni(),...Yu(),...fn(),...np(),...xa(),...yt({tag:"span"}),...Dt(),...hr({variant:"tonal"})},"VChip"),ch=Te()({name:"VChip",directives:{Ripple:uo},props:Coe(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0,"group:selected":t=>!0,click:t=>!0},setup(t,e){let{attrs:n,emit:i,slots:s}=e;const{t:r}=Dn(),{borderClasses:a}=Qs(t),{densityClasses:o}=es(t),{elevationClasses:l}=xi(t),{roundedClasses:u}=Rn(t),{sizeClasses:c}=ah(t),{themeClasses:d}=zt(t),h=et(t,"modelValue"),f=Xu(t,AF,!1),g=tp(t,n),v=V(()=>t.link!==!1&&g.isLink.value),b=V(()=>!t.disabled&&t.link!==!1&&(!!f||t.link||g.isClickable.value)),I=V(()=>({"aria-label":r(t.closeLabel),onClick(S){S.preventDefault(),S.stopPropagation(),h.value=!1,i("click:close",S)}})),w=V(()=>({color:!f||f.isSelected.value?t.color??t.baseColor:t.baseColor,variant:t.variant})),{colorClasses:P,colorStyles:M,variantClasses:F}=Gu(w);function U(S){var y;i("click",S),b.value&&((y=g.navigate)==null||y.call(g,S),f==null||f.toggle())}function D(S){(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),U(S))}return()=>{var se;const S=g.isLink.value?"a":t.tag,y=!!(t.appendIcon||t.appendAvatar),E=!!(y||s.append),A=!!(s.close||t.closable),k=!!(s.filter||t.filter)&&f,R=!!(t.prependIcon||t.prependAvatar),W=!!(R||s.prepend);return h.value&&Tn(_(S,Ie({class:["v-chip",{"v-chip--disabled":t.disabled,"v-chip--label":t.label,"v-chip--link":b.value,"v-chip--filter":k,"v-chip--pill":t.pill,[`${t.activeClass}`]:t.activeClass&&((se=g.isActive)==null?void 0:se.value)},d.value,a.value,P.value,o.value,l.value,u.value,c.value,F.value,f==null?void 0:f.selectedClass.value,t.class],style:[M.value,t.style],disabled:t.disabled||void 0,draggable:t.draggable,tabindex:b.value?0:void 0,onClick:U,onKeydown:b.value&&!v.value&&D},g.linkProps),{default:()=>{var ae;return[wl(b.value,"v-chip"),k&&_(VC,{key:"filter"},{default:()=>[Tn(_("div",{class:"v-chip__filter"},[s.filter?_(_t,{key:"filter-defaults",disabled:!t.filterIcon,defaults:{VIcon:{icon:t.filterIcon}}},s.filter):_(Ht,{key:"filter-icon",icon:t.filterIcon},null)]),[[Vr,f.isSelected.value]])]}),W&&_("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?_(_t,{key:"prepend-defaults",disabled:!R,defaults:{VAvatar:{image:t.prependAvatar,start:!0},VIcon:{icon:t.prependIcon,start:!0}}},s.prepend):_(Ye,null,[t.prependIcon&&_(Ht,{key:"prepend-icon",icon:t.prependIcon,start:!0},null),t.prependAvatar&&_(ur,{key:"prepend-avatar",image:t.prependAvatar,start:!0},null)])]),_("div",{class:"v-chip__content","data-no-activator":""},[((ae=s.default)==null?void 0:ae.call(s,{isSelected:f==null?void 0:f.isSelected.value,selectedClass:f==null?void 0:f.selectedClass.value,select:f==null?void 0:f.select,toggle:f==null?void 0:f.toggle,value:f==null?void 0:f.value.value,disabled:t.disabled}))??Ir(t.text)]),E&&_("div",{key:"append",class:"v-chip__append"},[s.append?_(_t,{key:"append-defaults",disabled:!y,defaults:{VAvatar:{end:!0,image:t.appendAvatar},VIcon:{end:!0,icon:t.appendIcon}}},s.append):_(Ye,null,[t.appendIcon&&_(Ht,{key:"append-icon",end:!0,icon:t.appendIcon},null),t.appendAvatar&&_(ur,{key:"append-avatar",end:!0,image:t.appendAvatar},null)])]),A&&_("button",Ie({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},I.value),[s.close?_(_t,{key:"close-defaults",defaults:{VIcon:{icon:t.closeIcon,size:"x-small"}}},s.close):_(Ht,{key:"close-icon",icon:t.closeIcon,size:"x-small"},null)])]}}),[[Ks("ripple"),b.value&&t.ripple,null]])}}}),TS=Symbol.for("vuetify:list");function kF(){const t=vt(TS,{hasPrepend:Ue(!1),updateHasPrepend:()=>null}),e={hasPrepend:Ue(!1),updateHasPrepend:n=>{n&&(e.hasPrepend.value=n)}};return Jt(TS,e),t}function PF(){return vt(TS,null)}const HC=t=>{const e={activate:n=>{let{id:i,value:s,activated:r}=n;return i=ot(i),t&&!s&&r.size===1&&r.has(i)||(s?r.add(i):r.delete(i)),r},in:(n,i,s)=>{let r=new Set;if(n!=null)for(const a of bn(n))r=e.activate({id:a,value:!0,activated:new Set(r),children:i,parents:s});return r},out:n=>Array.from(n)};return e},DF=t=>{const e=HC(t);return{activate:i=>{let{activated:s,id:r,...a}=i;r=ot(r);const o=s.has(r)?new Set([r]):new Set;return e.activate({...a,id:r,activated:o})},in:(i,s,r)=>{let a=new Set;if(i!=null){const o=bn(i);o.length&&(a=e.in(o.slice(0,1),s,r))}return a},out:(i,s,r)=>e.out(i,s,r)}},woe=t=>{const e=HC(t);return{activate:i=>{let{id:s,activated:r,children:a,...o}=i;return s=ot(s),a.has(s)?r:e.activate({id:s,activated:r,children:a,...o})},in:e.in,out:e.out}},xoe=t=>{const e=DF(t);return{activate:i=>{let{id:s,activated:r,children:a,...o}=i;return s=ot(s),a.has(s)?r:e.activate({id:s,activated:r,children:a,...o})},in:e.in,out:e.out}},Ioe={open:t=>{let{id:e,value:n,opened:i,parents:s}=t;if(n){const r=new Set;r.add(e);let a=s.get(e);for(;a!=null;)r.add(a),a=s.get(a);return r}else return i.delete(e),i},select:()=>null},RF={open:t=>{let{id:e,value:n,opened:i,parents:s}=t;if(n){let r=s.get(e);for(i.add(e);r!=null&&r!==e;)i.add(r),r=s.get(r);return i}else i.delete(e);return i},select:()=>null},Aoe={open:RF.open,select:t=>{let{id:e,value:n,opened:i,parents:s}=t;if(!n)return i;const r=[];let a=s.get(e);for(;a!=null;)r.push(a),a=s.get(a);return new Set(r)}},jC=t=>{const e={select:n=>{let{id:i,value:s,selected:r}=n;if(i=ot(i),t&&!s){const a=Array.from(r.entries()).reduce((o,l)=>{let[u,c]=l;return c==="on"&&o.push(u),o},[]);if(a.length===1&&a[0]===i)return r}return r.set(i,s?"on":"off"),r},in:(n,i,s)=>{const r=new Map;for(const a of n||[])e.select({id:a,value:!0,selected:r,children:i,parents:s});return r},out:n=>{const i=[];for(const[s,r]of n.entries())r==="on"&&i.push(s);return i}};return e},LF=t=>{const e=jC(t);return{select:i=>{let{selected:s,id:r,...a}=i;r=ot(r);const o=s.has(r)?new Map([[r,s.get(r)]]):new Map;return e.select({...a,id:r,selected:o})},in:(i,s,r)=>i!=null&&i.length?e.in(i.slice(0,1),s,r):new Map,out:(i,s,r)=>e.out(i,s,r)}},koe=t=>{const e=jC(t);return{select:i=>{let{id:s,selected:r,children:a,...o}=i;return s=ot(s),a.has(s)?r:e.select({id:s,selected:r,children:a,...o})},in:e.in,out:e.out}},Poe=t=>{const e=LF(t);return{select:i=>{let{id:s,selected:r,children:a,...o}=i;return s=ot(s),a.has(s)?r:e.select({id:s,selected:r,children:a,...o})},in:e.in,out:e.out}},OF=t=>{const e={select:n=>{let{id:i,value:s,selected:r,children:a,parents:o}=n;i=ot(i);const l=new Map(r),u=[i];for(;u.length;){const d=u.shift();r.set(ot(d),s?"on":"off"),a.has(d)&&u.push(...a.get(d))}let c=ot(o.get(i));for(;c;){const d=a.get(c),h=d.every(g=>r.get(ot(g))==="on"),f=d.every(g=>!r.has(ot(g))||r.get(ot(g))==="off");r.set(c,h?"on":f?"off":"indeterminate"),c=ot(o.get(c))}return t&&!s&&Array.from(r.entries()).reduce((h,f)=>{let[g,v]=f;return v==="on"&&h.push(g),h},[]).length===0?l:r},in:(n,i,s)=>{let r=new Map;for(const a of n||[])r=e.select({id:a,value:!0,selected:r,children:i,parents:s});return r},out:(n,i)=>{const s=[];for(const[r,a]of n.entries())a==="on"&&!i.has(r)&&s.push(r);return s}};return e},Doe=t=>{const e=OF(t);return{select:e.select,in:e.in,out:(i,s,r)=>{const a=[];for(const[o,l]of i.entries())if(l==="on"){if(r.has(o)){const u=r.get(o);if(i.get(u)==="on")continue}a.push(o)}return a}}},ym=Symbol.for("vuetify:nested"),NF={id:Ue(),root:{register:()=>null,unregister:()=>null,parents:Me(new Map),children:Me(new Map),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:Me(!1),selectable:Me(!1),opened:Me(new Set),activated:Me(new Set),selected:Me(new Map),selectedValues:Me([]),getPath:()=>[]}},Roe=ue({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),Loe=t=>{let e=!1;const n=Me(new Map),i=Me(new Map),s=et(t,"opened",t.opened,g=>new Set(g),g=>[...g.values()]),r=V(()=>{if(typeof t.activeStrategy=="object")return t.activeStrategy;if(typeof t.activeStrategy=="function")return t.activeStrategy(t.mandatory);switch(t.activeStrategy){case"leaf":return woe(t.mandatory);case"single-leaf":return xoe(t.mandatory);case"independent":return HC(t.mandatory);case"single-independent":default:return DF(t.mandatory)}}),a=V(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;if(typeof t.selectStrategy=="function")return t.selectStrategy(t.mandatory);switch(t.selectStrategy){case"single-leaf":return Poe(t.mandatory);case"leaf":return koe(t.mandatory);case"independent":return jC(t.mandatory);case"single-independent":return LF(t.mandatory);case"trunk":return Doe(t.mandatory);case"classic":default:return OF(t.mandatory)}}),o=V(()=>{if(typeof t.openStrategy=="object")return t.openStrategy;switch(t.openStrategy){case"list":return Aoe;case"single":return Ioe;case"multiple":default:return RF}}),l=et(t,"activated",t.activated,g=>r.value.in(g,n.value,i.value),g=>r.value.out(g,n.value,i.value)),u=et(t,"selected",t.selected,g=>a.value.in(g,n.value,i.value),g=>a.value.out(g,n.value,i.value));Wn(()=>{e=!0});function c(g){const v=[];let b=g;for(;b!=null;)v.unshift(b),b=i.value.get(b);return v}const d=Vn("nested"),h=new Set,f={id:Ue(),root:{opened:s,activatable:ye(t,"activatable"),selectable:ye(t,"selectable"),activated:l,selected:u,selectedValues:V(()=>{const g=[];for(const[v,b]of u.value.entries())b==="on"&&g.push(v);return g}),register:(g,v,b)=>{if(h.has(g)){c(g).map(String).join(" -> "),c(v).concat(g).map(String).join(" -> ");return}else h.add(g);v&&g!==v&&i.value.set(g,v),b&&n.value.set(g,[]),v!=null&&n.value.set(v,[...n.value.get(v)||[],g])},unregister:g=>{if(e)return;h.delete(g),n.value.delete(g);const v=i.value.get(g);if(v){const b=n.value.get(v)??[];n.value.set(v,b.filter(I=>I!==g))}i.value.delete(g)},open:(g,v,b)=>{d.emit("click:open",{id:g,value:v,path:c(g),event:b});const I=o.value.open({id:g,value:v,opened:new Set(s.value),children:n.value,parents:i.value,event:b});I&&(s.value=I)},openOnSelect:(g,v,b)=>{const I=o.value.select({id:g,value:v,selected:new Map(u.value),opened:new Set(s.value),children:n.value,parents:i.value,event:b});I&&(s.value=I)},select:(g,v,b)=>{d.emit("click:select",{id:g,value:v,path:c(g),event:b});const I=a.value.select({id:g,value:v,selected:new Map(u.value),children:n.value,parents:i.value,event:b});I&&(u.value=I),f.root.openOnSelect(g,v,b)},activate:(g,v,b)=>{if(!t.activatable)return f.root.select(g,!0,b);d.emit("click:activate",{id:g,value:v,path:c(g),event:b});const I=r.value.activate({id:g,value:v,activated:new Set(l.value),children:n.value,parents:i.value,event:b});if(I.size!==l.value.size)l.value=I;else{for(const w of I)if(!l.value.has(w)){l.value=I;return}for(const w of l.value)if(!I.has(w)){l.value=I;return}}},children:n,parents:i,getPath:c}};return Jt(ym,f),f.root},MF=(t,e)=>{const n=vt(ym,NF),i=Symbol("nested item"),s=V(()=>t.value!==void 0?t.value:i),r={...n,id:s,open:(a,o)=>n.root.open(s.value,a,o),openOnSelect:(a,o)=>n.root.openOnSelect(s.value,a,o),isOpen:V(()=>n.root.opened.value.has(s.value)),parent:V(()=>n.root.parents.value.get(s.value)),activate:(a,o)=>n.root.activate(s.value,a,o),isActivated:V(()=>n.root.activated.value.has(ot(s.value))),select:(a,o)=>n.root.select(s.value,a,o),isSelected:V(()=>n.root.selected.value.get(ot(s.value))==="on"),isIndeterminate:V(()=>n.root.selected.value.get(ot(s.value))==="indeterminate"),isLeaf:V(()=>!n.root.children.value.get(s.value)),isGroupActivator:n.isGroupActivator};return Ud(()=>{!n.isGroupActivator&&n.root.register(s.value,n.id.value,e)}),Wn(()=>{!n.isGroupActivator&&n.root.unregister(s.value)}),e&&Jt(ym,r),r},Ooe=()=>{const t=vt(ym,NF);Jt(ym,{...t,isGroupActivator:!0})},Noe=Ys({name:"VListGroupActivator",setup(t,e){let{slots:n}=e;return Ooe(),()=>{var i;return(i=n.default)==null?void 0:i.call(n)}}}),Moe=ue({activeColor:String,baseColor:String,color:String,collapseIcon:{type:nt,default:"$collapse"},expandIcon:{type:nt,default:"$expand"},prependIcon:nt,appendIcon:nt,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Ke(),...yt()},"VListGroup"),SS=Te()({name:"VListGroup",props:Moe(),setup(t,e){let{slots:n}=e;const{isOpen:i,open:s,id:r}=MF(ye(t,"value"),!0),a=V(()=>`v-list-group--id-${String(r.value)}`),o=PF(),{isBooted:l}=Wu();function u(f){var g;f.stopPropagation(),!["INPUT","TEXTAREA"].includes((g=f.target)==null?void 0:g.tagName)&&s(!i.value,f)}const c=V(()=>({onClick:u,class:"v-list-group__header",id:a.value})),d=V(()=>i.value?t.collapseIcon:t.expandIcon),h=V(()=>({VListItem:{active:i.value,activeColor:t.activeColor,baseColor:t.baseColor,color:t.color,prependIcon:t.prependIcon||t.subgroup&&d.value,appendIcon:t.appendIcon||!t.subgroup&&d.value,title:t.title,value:t.value}}));return Pe(()=>_(t.tag,{class:["v-list-group",{"v-list-group--prepend":o==null?void 0:o.hasPrepend.value,"v-list-group--fluid":t.fluid,"v-list-group--subgroup":t.subgroup,"v-list-group--open":i.value},t.class],style:t.style},{default:()=>[n.activator&&_(_t,{defaults:h.value},{default:()=>[_(Noe,null,{default:()=>[n.activator({props:c.value,isOpen:i.value})]})]}),_(Ki,{transition:{component:c_},disabled:!l.value},{default:()=>{var f;return[Tn(_("div",{class:"v-list-group__items",role:"group","aria-labelledby":a.value},[(f=n.default)==null?void 0:f.call(n)]),[[Vr,i.value]])]}})]})),{isOpen:i}}}),Voe=ue({opacity:[Number,String],...Ke(),...yt()},"VListItemSubtitle"),VF=Te()({name:"VListItemSubtitle",props:Voe(),setup(t,e){let{slots:n}=e;return Pe(()=>_(t.tag,{class:["v-list-item-subtitle",t.class],style:[{"--v-list-item-subtitle-opacity":t.opacity},t.style]},n)),{}}}),FF=wa("v-list-item-title"),Foe=ue({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:nt,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:nt,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:wi(),onClickOnce:wi(),...ks(),...Ke(),...fi(),...Kn(),...ni(),...fn(),...np(),...yt(),...Dt(),...hr({variant:"text"})},"VListItem"),io=Te()({name:"VListItem",directives:{Ripple:uo},props:Foe(),emits:{click:t=>!0},setup(t,e){let{attrs:n,slots:i,emit:s}=e;const r=tp(t,n),a=V(()=>t.value===void 0?r.href.value:t.value),{activate:o,isActivated:l,select:u,isOpen:c,isSelected:d,isIndeterminate:h,isGroupActivator:f,root:g,parent:v,openOnSelect:b,id:I}=MF(a,!1),w=PF(),P=V(()=>{var Se;return t.active!==!1&&(t.active||((Se=r.isActive)==null?void 0:Se.value)||(g.activatable.value?l.value:d.value))}),M=V(()=>t.link!==!1&&r.isLink.value),F=V(()=>!!w&&(g.selectable.value||g.activatable.value||t.value!=null)),U=V(()=>!t.disabled&&t.link!==!1&&(t.link||r.isClickable.value||F.value)),D=V(()=>t.rounded||t.nav),S=V(()=>t.color??t.activeColor),y=V(()=>({color:P.value?S.value??t.baseColor:t.baseColor,variant:t.variant}));$e(()=>{var Se;return(Se=r.isActive)==null?void 0:Se.value},Se=>{Se&&E()}),Ud(()=>{var Se;(Se=r.isActive)!=null&&Se.value&&E()});function E(){v.value!=null&&g.open(v.value,!0),b(!0)}const{themeClasses:A}=zt(t),{borderClasses:k}=Qs(t),{colorClasses:R,colorStyles:W,variantClasses:se}=Gu(y),{densityClasses:ae}=es(t),{dimensionStyles:Z}=Yn(t),{elevationClasses:ne}=xi(t),{roundedClasses:ee}=Rn(D),Q=V(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),j=V(()=>({isActive:P.value,select:u,isOpen:c.value,isSelected:d.value,isIndeterminate:h.value}));function le(Se){var Le,we;s("click",Se),!["INPUT","TEXTAREA"].includes((Le=Se.target)==null?void 0:Le.tagName)&&U.value&&((we=r.navigate)==null||we.call(r,Se),!f&&(g.activatable.value?o(!l.value,Se):(g.selectable.value||t.value!=null)&&u(!d.value,Se)))}function pe(Se){const Le=Se.target;["INPUT","TEXTAREA"].includes(Le.tagName)||(Se.key==="Enter"||Se.key===" ")&&(Se.preventDefault(),Se.target.dispatchEvent(new MouseEvent("click",Se)))}return Pe(()=>{const Se=M.value?"a":t.tag,Le=i.title||t.title!=null,we=i.subtitle||t.subtitle!=null,re=!!(t.appendAvatar||t.appendIcon),fe=!!(re||i.append),xe=!!(t.prependAvatar||t.prependIcon),Ne=!!(xe||i.prepend);return w==null||w.updateHasPrepend(Ne),t.activeColor&&OX("active-color",["color","base-color"]),Tn(_(Se,Ie({class:["v-list-item",{"v-list-item--active":P.value,"v-list-item--disabled":t.disabled,"v-list-item--link":U.value,"v-list-item--nav":t.nav,"v-list-item--prepend":!Ne&&(w==null?void 0:w.hasPrepend.value),"v-list-item--slim":t.slim,[`${t.activeClass}`]:t.activeClass&&P.value},A.value,k.value,R.value,ae.value,ne.value,Q.value,ee.value,se.value,t.class],style:[W.value,Z.value,t.style],tabindex:U.value?w?-2:0:void 0,"aria-selected":F.value?g.activatable.value?l.value:g.selectable.value?d.value:P.value:void 0,onClick:le,onKeydown:U.value&&!M.value&&pe},r.linkProps),{default:()=>{var be;return[wl(U.value||P.value,"v-list-item"),Ne&&_("div",{key:"prepend",class:"v-list-item__prepend"},[i.prepend?_(_t,{key:"prepend-defaults",disabled:!xe,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var z;return[(z=i.prepend)==null?void 0:z.call(i,j.value)]}}):_(Ye,null,[t.prependAvatar&&_(ur,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&_(Ht,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)]),_("div",{class:"v-list-item__spacer"},null)]),_("div",{class:"v-list-item__content","data-no-activator":""},[Le&&_(FF,{key:"title"},{default:()=>{var z;return[((z=i.title)==null?void 0:z.call(i,{title:t.title}))??Ir(t.title)]}}),we&&_(VF,{key:"subtitle"},{default:()=>{var z;return[((z=i.subtitle)==null?void 0:z.call(i,{subtitle:t.subtitle}))??Ir(t.subtitle)]}}),(be=i.default)==null?void 0:be.call(i,j.value)]),fe&&_("div",{key:"append",class:"v-list-item__append"},[i.append?_(_t,{key:"append-defaults",disabled:!re,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var z;return[(z=i.append)==null?void 0:z.call(i,j.value)]}}):_(Ye,null,[t.appendIcon&&_(Ht,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&_(ur,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)]),_("div",{class:"v-list-item__spacer"},null)])]}}),[[Ks("ripple"),U.value&&t.ripple]])}),{activate:o,isActivated:l,isGroupActivator:f,isSelected:d,list:w,select:u,root:g,id:I,link:r}}}),Boe=ue({color:String,inset:Boolean,sticky:Boolean,title:String,...Ke(),...yt()},"VListSubheader"),BF=Te()({name:"VListSubheader",props:Boe(),setup(t,e){let{slots:n}=e;const{textColorClasses:i,textColorStyles:s}=Li(ye(t,"color"));return Pe(()=>{const r=!!(n.default||t.title);return _(t.tag,{class:["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},i.value,t.class],style:[{textColorStyles:s},t.style]},{default:()=>{var a;return[r&&_("div",{class:"v-list-subheader__text"},[((a=n.default)==null?void 0:a.call(n))??t.title])]}})}),{}}}),Uoe=ue({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Ke(),...Dt()},"VDivider"),za=Te()({name:"VDivider",props:Uoe(),setup(t,e){let{attrs:n,slots:i}=e;const{themeClasses:s}=zt(t),{textColorClasses:r,textColorStyles:a}=Li(ye(t,"color")),o=V(()=>{const l={};return t.length&&(l[t.vertical?"height":"width"]=We(t.length)),t.thickness&&(l[t.vertical?"borderRightWidth":"borderTopWidth"]=We(t.thickness)),l});return Pe(()=>{const l=_("hr",{class:[{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},s.value,r.value,t.class],style:[o.value,a.value,{"--v-border-opacity":t.opacity},t.style],"aria-orientation":!n.role||n.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return i.default?_("div",{class:["v-divider__wrapper",{"v-divider__wrapper--vertical":t.vertical,"v-divider__wrapper--inset":t.inset}]},[l,_("div",{class:"v-divider__content"},[i.default()]),l]):l}),{}}}),$oe=ue({items:Array,returnObject:Boolean},"VListChildren"),UF=Te()({name:"VListChildren",props:$oe(),setup(t,e){let{slots:n}=e;return kF(),()=>{var i,s;return((i=n.default)==null?void 0:i.call(n))??((s=t.items)==null?void 0:s.map(r=>{var h,f;let{children:a,props:o,type:l,raw:u}=r;if(l==="divider")return((h=n.divider)==null?void 0:h.call(n,{props:o}))??_(za,o,null);if(l==="subheader")return((f=n.subheader)==null?void 0:f.call(n,{props:o}))??_(BF,o,null);const c={subtitle:n.subtitle?g=>{var v;return(v=n.subtitle)==null?void 0:v.call(n,{...g,item:u})}:void 0,prepend:n.prepend?g=>{var v;return(v=n.prepend)==null?void 0:v.call(n,{...g,item:u})}:void 0,append:n.append?g=>{var v;return(v=n.append)==null?void 0:v.call(n,{...g,item:u})}:void 0,title:n.title?g=>{var v;return(v=n.title)==null?void 0:v.call(n,{...g,item:u})}:void 0},d=SS.filterProps(o);return a?_(SS,Ie({value:o==null?void 0:o.value},d),{activator:g=>{let{props:v}=g;const b={...o,...v,value:t.returnObject?u:o.value};return n.header?n.header({props:b}):_(io,b,c)},default:()=>_(UF,{items:a,returnObject:t.returnObject},n)}):n.item?n.item({props:o}):_(io,Ie(o,{value:t.returnObject?u:o.value}),c)}))}}}),$F=ue({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:Function},"list-items");function qo(t,e){const n=qn(e,t.itemTitle,e),i=qn(e,t.itemValue,n),s=qn(e,t.itemChildren),r=t.itemProps===!0?typeof e=="object"&&e!=null&&!Array.isArray(e)?"children"in e?kn(e,["children"]):e:void 0:qn(e,t.itemProps),a={title:n,value:i,...r};return{title:String(a.title??""),value:a.value,props:a,children:Array.isArray(s)?HF(t,s):void 0,raw:e}}function HF(t,e){const n=Sl(t,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),i=[];for(const s of e)i.push(qo(n,s));return i}function qC(t){const e=V(()=>HF(t,t.items)),n=V(()=>e.value.some(o=>o.value===null)),i=Ue(new Map),s=Ue([]);An(()=>{const o=e.value,l=new Map,u=[];for(let c=0;c<o.length;c++){const d=o[c];if(EM(d.value)||d.value===null){let h=l.get(d.value);h||(h=[],l.set(d.value,h)),h.push(d)}else u.push(d)}i.value=l,s.value=u});function r(o){const l=i.value,u=e.value,c=s.value,d=n.value,h=t.returnObject,f=!!t.valueComparator,g=t.valueComparator||Yi,v=Sl(t,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),b=[];e:for(const I of o){if(!d&&I===null)continue;if(h&&typeof I=="string"){b.push(qo(v,I));continue}const w=l.get(I);if(f||!w){for(const P of f?u:c)if(g(I,P.value)){b.push(P);continue e}b.push(qo(v,I));continue}b.push(...w)}return b}function a(o){return t.returnObject?o.map(l=>{let{raw:u}=l;return u}):o.map(l=>{let{value:u}=l;return u})}return{items:e,transformIn:r,transformOut:a}}function Hoe(t,e){const n=qn(e,t.itemType,"item"),i=EM(e)?e:qn(e,t.itemTitle),s=qn(e,t.itemValue,void 0),r=qn(e,t.itemChildren),a=t.itemProps===!0?kn(e,["children"]):qn(e,t.itemProps),o={title:i,value:s,...a};return{type:n,title:o.title,value:o.value,props:o,children:n==="item"&&r?jF(t,r):void 0,raw:e}}function jF(t,e){const n=[];for(const i of e)n.push(Hoe(t,i));return n}function joe(t){return{items:V(()=>jF(t,t.items))}}const qoe=ue({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,expandIcon:nt,collapseIcon:nt,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":wi(),"onClick:select":wi(),"onUpdate:opened":wi(),...Roe({selectStrategy:"single-leaf",openStrategy:"list"}),...ks(),...Ke(),...fi(),...Kn(),...ni(),itemType:{type:String,default:"type"},...$F(),...fn(),...yt(),...Dt(),...hr({variant:"text"})},"VList"),g_=Te()({name:"VList",props:qoe(),emits:{"update:selected":t=>!0,"update:activated":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:activate":t=>!0,"click:select":t=>!0},setup(t,e){let{slots:n}=e;const{items:i}=joe(t),{themeClasses:s}=zt(t),{backgroundColorClasses:r,backgroundColorStyles:a}=en(ye(t,"bgColor")),{borderClasses:o}=Qs(t),{densityClasses:l}=es(t),{dimensionStyles:u}=Yn(t),{elevationClasses:c}=xi(t),{roundedClasses:d}=Rn(t),{children:h,open:f,parents:g,select:v,getPath:b}=Loe(t),I=V(()=>t.lines?`v-list--${t.lines}-line`:void 0),w=ye(t,"activeColor"),P=ye(t,"baseColor"),M=ye(t,"color");kF(),Pn({VListGroup:{activeColor:w,baseColor:P,color:M,expandIcon:ye(t,"expandIcon"),collapseIcon:ye(t,"collapseIcon")},VListItem:{activeClass:ye(t,"activeClass"),activeColor:w,baseColor:P,color:M,density:ye(t,"density"),disabled:ye(t,"disabled"),lines:ye(t,"lines"),nav:ye(t,"nav"),slim:ye(t,"slim"),variant:ye(t,"variant")}});const F=Ue(!1),U=Me();function D(R){F.value=!0}function S(R){F.value=!1}function y(R){var W;!F.value&&!(R.relatedTarget&&((W=U.value)!=null&&W.contains(R.relatedTarget)))&&k()}function E(R){const W=R.target;if(!(!U.value||["INPUT","TEXTAREA"].includes(W.tagName))){if(R.key==="ArrowDown")k("next");else if(R.key==="ArrowUp")k("prev");else if(R.key==="Home")k("first");else if(R.key==="End")k("last");else return;R.preventDefault()}}function A(R){F.value=!0}function k(R){if(U.value)return cu(U.value,R)}return Pe(()=>_(t.tag,{ref:U,class:["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav,"v-list--slim":t.slim},s.value,r.value,o.value,l.value,c.value,I.value,d.value,t.class],style:[a.value,u.value,t.style],tabindex:t.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:D,onFocusout:S,onFocus:y,onKeydown:E,onMousedown:A},{default:()=>[_(UF,{items:i.value,returnObject:t.returnObject},n)]})),{open:f,select:v,focus:k,children:h,parents:g,getPath:b}}}),zoe=wa("v-list-img"),Woe=ue({start:Boolean,end:Boolean,...Ke(),...yt()},"VListItemAction"),Goe=Te()({name:"VListItemAction",props:Woe(),setup(t,e){let{slots:n}=e;return Pe(()=>_(t.tag,{class:["v-list-item-action",{"v-list-item-action--start":t.start,"v-list-item-action--end":t.end},t.class],style:t.style},n)),{}}}),Koe=ue({start:Boolean,end:Boolean,...Ke(),...yt()},"VListItemMedia"),Yoe=Te()({name:"VListItemMedia",props:Koe(),setup(t,e){let{slots:n}=e;return Pe(()=>_(t.tag,{class:["v-list-item-media",{"v-list-item-media--start":t.start,"v-list-item-media--end":t.end},t.class],style:t.style},n)),{}}});function pb(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Xoe(t,e){return{x:t.x-e.x,y:t.y-e.y}}function RP(t,e){if(t.side==="top"||t.side==="bottom"){const{side:n,align:i}=t,s=i==="left"?0:i==="center"?e.width/2:i==="right"?e.width:i,r=n==="top"?0:n==="bottom"?e.height:n;return pb({x:s,y:r},e)}else if(t.side==="left"||t.side==="right"){const{side:n,align:i}=t,s=n==="left"?0:n==="right"?e.width:n,r=i==="top"?0:i==="center"?e.height/2:i==="bottom"?e.height:i;return pb({x:s,y:r},e)}return pb({x:e.width/2,y:e.height/2},e)}const qF={static:Zoe,connected:tle},Qoe=ue({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in qF},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function Joe(t,e){const n=Me({}),i=Me();Vt&&ds(()=>!!(e.isActive.value&&t.locationStrategy),r=>{var a,o;$e(()=>t.locationStrategy,r),hi(()=>{window.removeEventListener("resize",s),i.value=void 0}),window.addEventListener("resize",s,{passive:!0}),typeof t.locationStrategy=="function"?i.value=(a=t.locationStrategy(e,t,n))==null?void 0:a.updateLocation:i.value=(o=qF[t.locationStrategy](e,t,n))==null?void 0:o.updateLocation});function s(r){var a;(a=i.value)==null||a.call(i,r)}return{contentStyles:n,updateLocation:i}}function Zoe(){}function ele(t,e){const n=ME(t);return e?n.x+=parseFloat(t.style.right||0):n.x-=parseFloat(t.style.left||0),n.y-=parseFloat(t.style.top||0),n}function tle(t,e,n){(Array.isArray(t.target.value)||nQ(t.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[t.isRtl.value?"right":"left"]:0});const{preferredAnchor:s,preferredOrigin:r}=NE(()=>{const g=AT(e.location,t.isRtl.value),v=e.origin==="overlap"?g:e.origin==="auto"?I0(g):AT(e.origin,t.isRtl.value);return g.side===v.side&&g.align===A0(v).align?{preferredAnchor:rA(g),preferredOrigin:rA(v)}:{preferredAnchor:g,preferredOrigin:v}}),[a,o,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(g=>V(()=>{const v=parseFloat(e[g]);return isNaN(v)?1/0:v})),c=V(()=>{if(Array.isArray(e.offset))return e.offset;if(typeof e.offset=="string"){const g=e.offset.split(" ").map(parseFloat);return g.length<2&&g.push(0),g}return typeof e.offset=="number"?[e.offset,0]:[0,0]});let d=!1;const h=new ResizeObserver(()=>{d&&f()});$e([t.target,t.contentEl],(g,v)=>{let[b,I]=g,[w,P]=v;w&&!Array.isArray(w)&&h.unobserve(w),b&&!Array.isArray(b)&&h.observe(b),P&&h.unobserve(P),I&&h.observe(I)},{immediate:!0}),hi(()=>{h.disconnect()});function f(){if(d=!1,requestAnimationFrame(()=>d=!0),!t.target.value||!t.contentEl.value)return;const g=wM(t.target.value),v=ele(t.contentEl.value,t.isRtl.value),b=_v(t.contentEl.value),I=12;b.length||(b.push(document.documentElement),t.contentEl.value.style.top&&t.contentEl.value.style.left||(v.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),v.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const w=b.reduce((A,k)=>{const R=k.getBoundingClientRect(),W=new du({x:k===document.documentElement?0:R.x,y:k===document.documentElement?0:R.y,width:k.clientWidth,height:k.clientHeight});return A?new du({x:Math.max(A.left,W.left),y:Math.max(A.top,W.top),width:Math.min(A.right,W.right)-Math.max(A.left,W.left),height:Math.min(A.bottom,W.bottom)-Math.max(A.top,W.top)}):W},void 0);w.x+=I,w.y+=I,w.width-=I*2,w.height-=I*2;let P={anchor:s.value,origin:r.value};function M(A){const k=new du(v),R=RP(A.anchor,g),W=RP(A.origin,k);let{x:se,y:ae}=Xoe(R,W);switch(A.anchor.side){case"top":ae-=c.value[0];break;case"bottom":ae+=c.value[0];break;case"left":se-=c.value[0];break;case"right":se+=c.value[0];break}switch(A.anchor.align){case"top":ae-=c.value[1];break;case"bottom":ae+=c.value[1];break;case"left":se-=c.value[1];break;case"right":se+=c.value[1];break}return k.x+=se,k.y+=ae,k.width=Math.min(k.width,l.value),k.height=Math.min(k.height,u.value),{overflows:oA(k,w),x:se,y:ae}}let F=0,U=0;const D={x:0,y:0},S={x:!1,y:!1};let y=-1;for(;!(y++>10);){const{x:A,y:k,overflows:R}=M(P);F+=A,U+=k,v.x+=A,v.y+=k;{const W=aA(P.anchor),se=R.x.before||R.x.after,ae=R.y.before||R.y.after;let Z=!1;if(["x","y"].forEach(ne=>{if(ne==="x"&&se&&!S.x||ne==="y"&&ae&&!S.y){const ee={anchor:{...P.anchor},origin:{...P.origin}},Q=ne==="x"?W==="y"?A0:I0:W==="y"?I0:A0;ee.anchor=Q(ee.anchor),ee.origin=Q(ee.origin);const{overflows:j}=M(ee);(j[ne].before<=R[ne].before&&j[ne].after<=R[ne].after||j[ne].before+j[ne].after<(R[ne].before+R[ne].after)/2)&&(P=ee,Z=S[ne]=!0)}}),Z)continue}R.x.before&&(F+=R.x.before,v.x+=R.x.before),R.x.after&&(F-=R.x.after,v.x-=R.x.after),R.y.before&&(U+=R.y.before,v.y+=R.y.before),R.y.after&&(U-=R.y.after,v.y-=R.y.after);{const W=oA(v,w);D.x=w.width-W.x.before-W.x.after,D.y=w.height-W.y.before-W.y.after,F+=W.x.before,v.x+=W.x.before,U+=W.y.before,v.y+=W.y.before}break}const E=aA(P.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${P.anchor.side} ${P.anchor.align}`,transformOrigin:`${P.origin.side} ${P.origin.align}`,top:We(gb(U)),left:t.isRtl.value?void 0:We(gb(F)),right:t.isRtl.value?We(gb(-F)):void 0,minWidth:We(E==="y"?Math.min(a.value,g.width):a.value),maxWidth:We(LP(_n(D.x,a.value===1/0?0:a.value,l.value))),maxHeight:We(LP(_n(D.y,o.value===1/0?0:o.value,u.value)))}),{available:D,contentBox:v}}return $e(()=>[s.value,r.value,e.offset,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight],()=>f()),kt(()=>{const g=f();if(!g)return;const{available:v,contentBox:b}=g;b.height>v.y&&requestAnimationFrame(()=>{f(),requestAnimationFrame(()=>{f()})})}),{updateLocation:f}}function gb(t){return Math.round(t*devicePixelRatio)/devicePixelRatio}function LP(t){return Math.ceil(t*devicePixelRatio)/devicePixelRatio}let ES=!0;const qv=[];function nle(t){!ES||qv.length?(qv.push(t),CS()):(ES=!1,t(),CS())}let OP=-1;function CS(){cancelAnimationFrame(OP),OP=requestAnimationFrame(()=>{const t=qv.shift();t&&t(),qv.length?CS():ES=!0})}const kg={none:null,close:rle,block:ale,reposition:ole},ile=ue({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in kg}},"VOverlay-scroll-strategies");function sle(t,e){if(!Vt)return;let n;An(async()=>{n==null||n.stop(),e.isActive.value&&t.scrollStrategy&&(n=tl(),await new Promise(i=>setTimeout(i)),n.active&&n.run(()=>{var i;typeof t.scrollStrategy=="function"?t.scrollStrategy(e,t,n):(i=kg[t.scrollStrategy])==null||i.call(kg,e,t,n)}))}),hi(()=>{n==null||n.stop()})}function rle(t){function e(n){t.isActive.value=!1}zF(t.targetEl.value??t.contentEl.value,e)}function ale(t,e){var a;const n=(a=t.root.value)==null?void 0:a.offsetParent,i=[...new Set([..._v(t.targetEl.value,e.contained?n:void 0),..._v(t.contentEl.value,e.contained?n:void 0)])].filter(o=>!o.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,r=(o=>$E(o)&&o)(n||document.documentElement);r&&t.root.value.classList.add("v-overlay--scroll-blocked"),i.forEach((o,l)=>{o.style.setProperty("--v-body-scroll-x",We(-o.scrollLeft)),o.style.setProperty("--v-body-scroll-y",We(-o.scrollTop)),o!==document.documentElement&&o.style.setProperty("--v-scrollbar-offset",We(s)),o.classList.add("v-overlay-scroll-blocked")}),hi(()=>{i.forEach((o,l)=>{const u=parseFloat(o.style.getPropertyValue("--v-body-scroll-x")),c=parseFloat(o.style.getPropertyValue("--v-body-scroll-y")),d=o.style.scrollBehavior;o.style.scrollBehavior="auto",o.style.removeProperty("--v-body-scroll-x"),o.style.removeProperty("--v-body-scroll-y"),o.style.removeProperty("--v-scrollbar-offset"),o.classList.remove("v-overlay-scroll-blocked"),o.scrollLeft=-u,o.scrollTop=-c,o.style.scrollBehavior=d}),r&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function ole(t,e,n){let i=!1,s=-1,r=-1;function a(o){nle(()=>{var c,d;const l=performance.now();(d=(c=t.updateLocation).value)==null||d.call(c,o),i=(performance.now()-l)/(1e3/60)>2})}r=(typeof requestIdleCallback>"u"?o=>o():requestIdleCallback)(()=>{n.run(()=>{zF(t.targetEl.value??t.contentEl.value,o=>{i?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{a(o)})})):a(o)})})}),hi(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(r),cancelAnimationFrame(s)})}function zF(t,e){const n=[document,..._v(t)];n.forEach(i=>{i.addEventListener("scroll",e,{passive:!0})}),hi(()=>{n.forEach(i=>{i.removeEventListener("scroll",e)})})}const wS=Symbol.for("vuetify:v-menu"),zC=ue({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function WC(t,e){let n=()=>{};function i(a){n==null||n();const o=Number(a?t.openDelay:t.closeDelay);return new Promise(l=>{n=bX(o,()=>{e==null||e(a),l(a)})})}function s(){return i(!0)}function r(){return i(!1)}return{clearDelay:n,runOpenDelay:s,runCloseDelay:r}}const lle=ue({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...zC()},"VOverlay-activator");function ule(t,e){let{isActive:n,isTop:i,contentEl:s}=e;const r=Vn("useActivator"),a=Me();let o=!1,l=!1,u=!0;const c=V(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),d=V(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!c.value),{runOpenDelay:h,runCloseDelay:f}=WC(t,S=>{S===(t.openOnHover&&o||c.value&&l)&&!(t.openOnHover&&n.value&&!i.value)&&(n.value!==S&&(u=!0),n.value=S)}),g=Me(),v={onClick:S=>{S.stopPropagation(),a.value=S.currentTarget||S.target,n.value||(g.value=[S.clientX,S.clientY]),n.value=!n.value},onMouseenter:S=>{var y;(y=S.sourceCapabilities)!=null&&y.firesTouchEvents||(o=!0,a.value=S.currentTarget||S.target,h())},onMouseleave:S=>{o=!1,f()},onFocus:S=>{Td(S.target,":focus-visible")!==!1&&(l=!0,S.stopPropagation(),a.value=S.currentTarget||S.target,h())},onBlur:S=>{l=!1,S.stopPropagation(),f()}},b=V(()=>{const S={};return d.value&&(S.onClick=v.onClick),t.openOnHover&&(S.onMouseenter=v.onMouseenter,S.onMouseleave=v.onMouseleave),c.value&&(S.onFocus=v.onFocus,S.onBlur=v.onBlur),S}),I=V(()=>{const S={};if(t.openOnHover&&(S.onMouseenter=()=>{o=!0,h()},S.onMouseleave=()=>{o=!1,f()}),c.value&&(S.onFocusin=()=>{l=!0,h()},S.onFocusout=()=>{l=!1,f()}),t.closeOnContentClick){const y=vt(wS,null);S.onClick=()=>{n.value=!1,y==null||y.closeParents()}}return S}),w=V(()=>{const S={};return t.openOnHover&&(S.onMouseenter=()=>{u&&(o=!0,u=!1,h())},S.onMouseleave=()=>{o=!1,f()}),S});$e(i,S=>{var y;S&&(t.openOnHover&&!o&&(!c.value||!l)||c.value&&!l&&(!t.openOnHover||!o))&&!((y=s.value)!=null&&y.contains(document.activeElement))&&(n.value=!1)}),$e(n,S=>{S||setTimeout(()=>{g.value=void 0})},{flush:"post"});const P=vv();An(()=>{P.value&&kt(()=>{a.value=P.el})});const M=vv(),F=V(()=>t.target==="cursor"&&g.value?g.value:M.value?M.el:WF(t.target,r)||a.value),U=V(()=>Array.isArray(F.value)?void 0:F.value);let D;return $e(()=>!!t.activator,S=>{S&&Vt?(D=tl(),D.run(()=>{cle(t,r,{activatorEl:a,activatorEvents:b})})):D&&D.stop()},{flush:"post",immediate:!0}),hi(()=>{D==null||D.stop()}),{activatorEl:a,activatorRef:P,target:F,targetEl:U,targetRef:M,activatorEvents:b,contentEvents:I,scrimEvents:w}}function cle(t,e,n){let{activatorEl:i,activatorEvents:s}=n;$e(()=>t.activator,(l,u)=>{if(u&&l!==u){const c=o(u);c&&a(c)}l&&kt(()=>r())},{immediate:!0}),$e(()=>t.activatorProps,()=>{r()}),hi(()=>{a()});function r(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;l&&EX(l,Ie(s.value,u))}function a(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;l&&CX(l,Ie(s.value,u))}function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator;const u=WF(l,e);return i.value=(u==null?void 0:u.nodeType)===Node.ELEMENT_NODE?u:void 0,i.value}}function WF(t,e){var i,s;if(!t)return;let n;if(t==="parent"){let r=(s=(i=e==null?void 0:e.proxy)==null?void 0:i.$el)==null?void 0:s.parentNode;for(;r!=null&&r.hasAttribute("data-no-activator");)r=r.parentNode;n=r}else typeof t=="string"?n=document.querySelector(t):"$el"in t?n=t.$el:n=t;return n}function GF(){if(!Vt)return Ue(!1);const{ssr:t}=As();if(t){const e=Ue(!1);return ti(()=>{e.value=!0}),e}else return Ue(!0)}const GC=ue({eager:Boolean},"lazy");function KC(t,e){const n=Ue(!1),i=V(()=>n.value||t.eager||e.value);$e(e,()=>n.value=!0);function s(){t.eager||(n.value=!1)}return{isBooted:n,hasContent:i,onAfterLeave:s}}function Ju(){const e=Vn("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const NP=Symbol.for("vuetify:stack"),Yh=ai([]);function dle(t,e,n){const i=Vn("useStack"),s=!n,r=vt(NP,void 0),a=ai({activeChildren:new Set});Jt(NP,a);const o=Ue(Number(e.value));ds(t,()=>{var d;const c=(d=Yh.at(-1))==null?void 0:d[1];o.value=c?c+10:Number(e.value),s&&Yh.push([i.uid,o.value]),r==null||r.activeChildren.add(i.uid),hi(()=>{if(s){const h=ot(Yh).findIndex(f=>f[0]===i.uid);Yh.splice(h,1)}r==null||r.activeChildren.delete(i.uid)})});const l=Ue(!0);s&&An(()=>{var d;const c=((d=Yh.at(-1))==null?void 0:d[0])===i.uid;setTimeout(()=>l.value=c)});const u=V(()=>!a.activeChildren.size);return{globalTop:Bd(l),localTop:u,stackStyles:V(()=>({zIndex:o.value}))}}function hle(t){return{teleportTarget:V(()=>{const n=t();if(n===!0||!Vt)return;const i=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(i==null)return;let s=[...i.children].find(r=>r.matches(".v-overlay-container"));return s||(s=document.createElement("div"),s.className="v-overlay-container",i.appendChild(s)),s})}}function fle(){return!0}function KF(t,e,n){if(!t||YF(t,n)===!1)return!1;const i=NM(e);if(typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&i.host===t.target)return!1;const s=(typeof n.value=="object"&&n.value.include||(()=>[]))();return s.push(e),!s.some(r=>r==null?void 0:r.contains(t.target))}function YF(t,e){return(typeof e.value=="object"&&e.value.closeConditional||fle)(t)}function mle(t,e,n){const i=typeof n.value=="function"?n.value:n.value.handler;t.shadowTarget=t.target,e._clickOutside.lastMousedownWasOutside&&KF(t,e,n)&&setTimeout(()=>{YF(t,n)&&i&&i(t)},0)}function MP(t,e){const n=NM(t);e(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&e(n)}const XF={mounted(t,e){const n=s=>mle(s,t,e),i=s=>{t._clickOutside.lastMousedownWasOutside=KF(s,t,e)};MP(t,s=>{s.addEventListener("click",n,!0),s.addEventListener("mousedown",i,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!1}),t._clickOutside[e.instance.$.uid]={onClick:n,onMousedown:i}},beforeUnmount(t,e){t._clickOutside&&(MP(t,n=>{var r;if(!n||!((r=t._clickOutside)!=null&&r[e.instance.$.uid]))return;const{onClick:i,onMousedown:s}=t._clickOutside[e.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",s,!0)}),delete t._clickOutside[e.instance.$.uid])}};function ple(t){const{modelValue:e,color:n,...i}=t;return _(nl,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&_("div",Ie({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},i),null)]})}const rp=ue({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...lle(),...Ke(),...Kn(),...GC(),...Qoe(),...ile(),...Dt(),...Br()},"VOverlay"),ba=Te()({name:"VOverlay",directives:{ClickOutside:XF},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...rp()},emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,keydown:t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,e){let{slots:n,attrs:i,emit:s}=e;const r=Vn("VOverlay"),a=Me(),o=Me(),l=Me(),u=et(t,"modelValue"),c=V({get:()=>u.value,set:re=>{re&&t.disabled||(u.value=re)}}),{themeClasses:d}=zt(t),{rtlClasses:h,isRtl:f}=Gn(),{hasContent:g,onAfterLeave:v}=KC(t,c),b=en(V(()=>typeof t.scrim=="string"?t.scrim:null)),{globalTop:I,localTop:w,stackStyles:P}=dle(c,ye(t,"zIndex"),t._disableGlobalStack),{activatorEl:M,activatorRef:F,target:U,targetEl:D,targetRef:S,activatorEvents:y,contentEvents:E,scrimEvents:A}=ule(t,{isActive:c,isTop:w,contentEl:l}),{teleportTarget:k}=hle(()=>{var xe,Ne,be;const re=t.attach||t.contained;if(re)return re;const fe=((xe=M==null?void 0:M.value)==null?void 0:xe.getRootNode())||((be=(Ne=r.proxy)==null?void 0:Ne.$el)==null?void 0:be.getRootNode());return fe instanceof ShadowRoot?fe:!1}),{dimensionStyles:R}=Yn(t),W=GF(),{scopeId:se}=Ju();$e(()=>t.disabled,re=>{re&&(c.value=!1)});const{contentStyles:ae,updateLocation:Z}=Joe(t,{isRtl:f,contentEl:l,target:U,isActive:c});sle(t,{root:a,contentEl:l,targetEl:D,isActive:c,updateLocation:Z});function ne(re){s("click:outside",re),t.persistent?Se():c.value=!1}function ee(re){return c.value&&I.value&&(!t.scrim||re.target===o.value||re instanceof MouseEvent&&re.shadowTarget===o.value)}Vt&&$e(c,re=>{re?window.addEventListener("keydown",Q):window.removeEventListener("keydown",Q)},{immediate:!0}),Wn(()=>{Vt&&window.removeEventListener("keydown",Q)});function Q(re){var fe,xe,Ne;re.key==="Escape"&&I.value&&((fe=l.value)!=null&&fe.contains(document.activeElement)||s("keydown",re),t.persistent?Se():(c.value=!1,(xe=l.value)!=null&&xe.contains(document.activeElement)&&((Ne=M.value)==null||Ne.focus())))}function j(re){re.key==="Escape"&&!I.value||s("keydown",re)}const le=oF();ds(()=>t.closeOnBack,()=>{Qae(le,re=>{I.value&&c.value?(re(!1),t.persistent?Se():c.value=!1):re()})});const pe=Me();$e(()=>c.value&&(t.absolute||t.contained)&&k.value==null,re=>{if(re){const fe=UE(a.value);fe&&fe!==document.scrollingElement&&(pe.value=fe.scrollTop)}});function Se(){t.noClickAnimation||l.value&&iu(l.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:im})}function Le(){s("afterEnter")}function we(){v(),s("afterLeave")}return Pe(()=>{var re;return _(Ye,null,[(re=n.activator)==null?void 0:re.call(n,{isActive:c.value,targetRef:S,props:Ie({ref:F},y.value,t.activatorProps)}),W.value&&g.value&&_(o6,{disabled:!k.value,to:k.value},{default:()=>[_("div",Ie({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":c.value,"v-overlay--contained":t.contained},d.value,h.value,t.class],style:[P.value,{"--v-overlay-opacity":t.opacity,top:We(pe.value)},t.style],ref:a,onKeydown:j},se,i),[_(ple,Ie({color:b,modelValue:c.value&&!!t.scrim,ref:o},A.value),null),_(Ki,{appear:!0,persisted:!0,transition:t.transition,target:U.value,onAfterEnter:Le,onAfterLeave:we},{default:()=>{var fe;return[Tn(_("div",Ie({ref:l,class:["v-overlay__content",t.contentClass],style:[R.value,ae.value]},E.value,t.contentProps),[(fe=n.default)==null?void 0:fe.call(n,{isActive:c})]),[[Vr,c.value],[Ks("click-outside"),{handler:ne,closeConditional:ee,include:()=>[M.value]}]])]}})])]})])}),{activatorEl:M,scrimEl:o,target:U,animateClick:Se,contentEl:l,globalTop:I,localTop:w,updateLocation:Z}}}),vb=Symbol("Forwarded refs");function yb(t,e){let n=t;for(;n;){const i=Reflect.getOwnPropertyDescriptor(n,e);if(i)return i;n=Object.getPrototypeOf(n)}}function Js(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t[vb]=n,new Proxy(t,{get(s,r){if(Reflect.has(s,r))return Reflect.get(s,r);if(!(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))){for(const a of n)if(a.value&&Reflect.has(a.value,r)){const o=Reflect.get(a.value,r);return typeof o=="function"?o.bind(a.value):o}}},has(s,r){if(Reflect.has(s,r))return!0;if(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))return!1;for(const a of n)if(a.value&&Reflect.has(a.value,r))return!0;return!1},set(s,r,a){if(Reflect.has(s,r))return Reflect.set(s,r,a);if(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,r))return Reflect.set(o.value,r,a);return!1},getOwnPropertyDescriptor(s,r){var o;const a=Reflect.getOwnPropertyDescriptor(s,r);if(a)return a;if(!(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))){for(const l of n){if(!l.value)continue;const u=yb(l.value,r)??("_"in l.value?yb((o=l.value._)==null?void 0:o.setupState,r):void 0);if(u)return u}for(const l of n){const u=l.value&&l.value[vb];if(!u)continue;const c=u.slice();for(;c.length;){const d=c.shift(),h=yb(d.value,r);if(h)return h;const f=d.value&&d.value[vb];f&&c.push(...f)}}}}})}const QF=ue({id:String,submenu:Boolean,...kn(rp({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:u_}}),["absolute"])},"VMenu"),Fd=Te()({name:"VMenu",props:QF(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"modelValue"),{scopeId:s}=Ju(),{isRtl:r}=Gn(),a=hs(),o=V(()=>t.id||`v-menu-${a}`),l=Me(),u=vt(wS,null),c=Ue(new Set);Jt(wS,{register(){c.value.add(a)},unregister(){c.value.delete(a)},closeParents(b){setTimeout(()=>{var I;!c.value.size&&!t.persistent&&(b==null||(I=l.value)!=null&&I.contentEl&&!TX(b,l.value.contentEl))&&(i.value=!1,u==null||u.closeParents())},40)}}),Wn(()=>{u==null||u.unregister(),document.removeEventListener("focusin",d)}),i1(()=>i.value=!1);async function d(b){var P,M,F;const I=b.relatedTarget,w=b.target;await kt(),i.value&&I!==w&&((P=l.value)!=null&&P.contentEl)&&((M=l.value)!=null&&M.globalTop)&&![document,l.value.contentEl].includes(w)&&!l.value.contentEl.contains(w)&&((F=nm(l.value.contentEl)[0])==null||F.focus())}$e(i,b=>{b?(u==null||u.register(),Vt&&document.addEventListener("focusin",d,{once:!0})):(u==null||u.unregister(),Vt&&document.removeEventListener("focusin",d))},{immediate:!0});function h(b){u==null||u.closeParents(b)}function f(b){var I,w,P,M,F;if(!t.disabled)if(b.key==="Tab"||b.key==="Enter"&&!t.closeOnContentClick){if(b.key==="Enter"&&(b.target instanceof HTMLTextAreaElement||b.target instanceof HTMLInputElement&&b.target.closest("form")))return;b.key==="Enter"&&b.preventDefault(),TM(nm((I=l.value)==null?void 0:I.contentEl,!1),b.shiftKey?"prev":"next",D=>D.tabIndex>=0)||(i.value=!1,(P=(w=l.value)==null?void 0:w.activatorEl)==null||P.focus())}else t.submenu&&b.key===(r.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,(F=(M=l.value)==null?void 0:M.activatorEl)==null||F.focus())}function g(b){var w;if(t.disabled)return;const I=(w=l.value)==null?void 0:w.contentEl;I&&i.value?b.key==="ArrowDown"?(b.preventDefault(),b.stopImmediatePropagation(),cu(I,"next")):b.key==="ArrowUp"?(b.preventDefault(),b.stopImmediatePropagation(),cu(I,"prev")):t.submenu&&(b.key===(r.value?"ArrowRight":"ArrowLeft")?i.value=!1:b.key===(r.value?"ArrowLeft":"ArrowRight")&&(b.preventDefault(),cu(I,"first"))):(t.submenu?b.key===(r.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(b.key))&&(i.value=!0,b.preventDefault(),setTimeout(()=>setTimeout(()=>g(b))))}const v=V(()=>Ie({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-controls":o.value,onKeydown:g},t.activatorProps));return Pe(()=>{const b=ba.filterProps(t);return _(ba,Ie({ref:l,id:o.value,class:["v-menu",t.class],style:t.style},b,{modelValue:i.value,"onUpdate:modelValue":I=>i.value=I,absolute:!0,activatorProps:v.value,location:t.location??(t.submenu?"end":"bottom"),"onClick:outside":h,onKeydown:f},s),{activator:n.activator,default:function(){for(var I=arguments.length,w=new Array(I),P=0;P<I;P++)w[P]=arguments[P];return _(_t,{root:"VMenu"},{default:()=>{var M;return[(M=n.default)==null?void 0:M.call(n,...w)]}})}})}),Js({id:o,ΨopenChildren:c},l)}}),gle=ue({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Ke(),...Br({transition:{component:MC}})},"VCounter"),v_=Te()({name:"VCounter",functional:!0,props:gle(),setup(t,e){let{slots:n}=e;const i=V(()=>t.max?`${t.value} / ${t.max}`:String(t.value));return Pe(()=>_(Ki,{transition:t.transition},{default:()=>[Tn(_("div",{class:["v-counter",{"text-error":t.max&&!t.disabled&&parseFloat(t.value)>parseFloat(t.max)},t.class],style:t.style},[n.default?n.default({counter:i.value,max:t.max,value:t.value}):i.value]),[[Vr,t.active]])]})),{}}}),vle=ue({floating:Boolean,...Ke()},"VFieldLabel"),uf=Te()({name:"VFieldLabel",props:vle(),setup(t,e){let{slots:n}=e;return Pe(()=>_(uh,{class:["v-field-label",{"v-field-label--floating":t.floating},t.class],style:t.style,"aria-hidden":t.floating||void 0},n)),{}}}),yle=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],ap=ue({appendInnerIcon:nt,bgColor:String,clearable:Boolean,clearIcon:{type:nt,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:nt,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:t=>yle.includes(t)},"onClick:clear":wi(),"onClick:appendInner":wi(),"onClick:prependInner":wi(),...Ke(),...f_(),...fn(),...Dt()},"VField"),fl=Te()({name:"VField",inheritAttrs:!1,props:{id:String,...ip(),...ap()},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:i,slots:s}=e;const{themeClasses:r}=zt(t),{loaderClasses:a}=Zm(t),{focusClasses:o,isFocused:l,focus:u,blur:c}=Ia(t),{InputIcon:d}=bF(t),{roundedClasses:h}=Rn(t),{rtlClasses:f}=Gn(),g=V(()=>t.dirty||t.active),v=V(()=>!!(t.label||s.label)),b=V(()=>!t.singleLine&&v.value),I=hs(),w=V(()=>t.id||`input-${I}`),P=V(()=>`${w.value}-messages`),M=Me(),F=Me(),U=Me(),D=V(()=>["plain","underlined"].includes(t.variant)),S=V(()=>t.error||t.disabled?void 0:g.value&&l.value?t.color:t.baseColor),y=V(()=>{if(!(!t.iconColor||t.glow&&!l.value))return t.iconColor===!0?S.value:t.iconColor}),{backgroundColorClasses:E,backgroundColorStyles:A}=en(ye(t,"bgColor")),{textColorClasses:k,textColorStyles:R}=Li(S);$e(g,ae=>{if(b.value){const Z=M.value.$el,ne=F.value.$el;requestAnimationFrame(()=>{const ee=ME(Z),Q=ne.getBoundingClientRect(),j=Q.x-ee.x,le=Q.y-ee.y-(ee.height/2-Q.height/2),pe=Q.width/.75,Se=Math.abs(pe-ee.width)>1?{maxWidth:We(pe)}:void 0,Le=getComputedStyle(Z),we=getComputedStyle(ne),re=parseFloat(Le.transitionDuration)*1e3||150,fe=parseFloat(we.getPropertyValue("--v-field-label-scale")),xe=we.getPropertyValue("color");Z.style.visibility="visible",ne.style.visibility="hidden",iu(Z,{transform:`translate(${j}px, ${le}px) scale(${fe})`,color:xe,...Se},{duration:re,easing:im,direction:ae?"normal":"reverse"}).finished.then(()=>{Z.style.removeProperty("visibility"),ne.style.removeProperty("visibility")})})}},{flush:"post"});const W=V(()=>({isActive:g,isFocused:l,controlRef:U,blur:c,focus:u}));function se(ae){ae.target!==document.activeElement&&ae.preventDefault()}return Pe(()=>{var j,le,pe;const ae=t.variant==="outlined",Z=!!(s["prepend-inner"]||t.prependInnerIcon),ne=!!(t.clearable||s.clear)&&!t.disabled,ee=!!(s["append-inner"]||t.appendInnerIcon||ne),Q=()=>s.label?s.label({...W.value,label:t.label,props:{for:w.value}}):t.label;return _("div",Ie({class:["v-field",{"v-field--active":g.value,"v-field--appended":ee,"v-field--center-affix":t.centerAffix??!D.value,"v-field--disabled":t.disabled,"v-field--dirty":t.dirty,"v-field--error":t.error,"v-field--glow":t.glow,"v-field--flat":t.flat,"v-field--has-background":!!t.bgColor,"v-field--persistent-clear":t.persistentClear,"v-field--prepended":Z,"v-field--reverse":t.reverse,"v-field--single-line":t.singleLine,"v-field--no-label":!Q(),[`v-field--variant-${t.variant}`]:!0},r.value,E.value,o.value,a.value,h.value,f.value,t.class],style:[A.value,t.style],onClick:se},n),[_("div",{class:"v-field__overlay"},null),_(ep,{name:"v-field",active:!!t.loading,color:t.error?"error":typeof t.loading=="string"?t.loading:t.color},{default:s.loader}),Z&&_("div",{key:"prepend",class:"v-field__prepend-inner"},[t.prependInnerIcon&&_(d,{key:"prepend-icon",name:"prependInner",color:y.value},null),(j=s["prepend-inner"])==null?void 0:j.call(s,W.value)]),_("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(t.variant)&&b.value&&_(uf,{key:"floating-label",ref:F,class:[k.value],floating:!0,for:w.value,style:R.value},{default:()=>[Q()]}),v.value&&_(uf,{key:"label",ref:M,for:w.value},{default:()=>[Q()]}),((le=s.default)==null?void 0:le.call(s,{...W.value,props:{id:w.value,class:"v-field__input","aria-describedby":P.value},focus:u,blur:c}))??_("div",{id:w.value,class:"v-field__input","aria-describedby":P.value},null)]),ne&&_(VC,{key:"clear"},{default:()=>[Tn(_("div",{class:"v-field__clearable",onMousedown:Se=>{Se.preventDefault(),Se.stopPropagation()}},[_(_t,{defaults:{VIcon:{icon:t.clearIcon}}},{default:()=>[s.clear?s.clear({...W.value,props:{onFocus:u,onBlur:c,onClick:t["onClick:clear"]}}):_(d,{name:"clear",onFocus:u,onBlur:c},null)]})]),[[Vr,t.dirty]])]}),ee&&_("div",{key:"append",class:"v-field__append-inner"},[(pe=s["append-inner"])==null?void 0:pe.call(s,W.value),t.appendInnerIcon&&_(d,{key:"append-icon",name:"appendInner",color:y.value},null)]),_("div",{class:["v-field__outline",k.value],style:R.value},[ae&&_(Ye,null,[_("div",{class:"v-field__outline__start"},null),b.value&&_("div",{class:"v-field__outline__notch"},[_(uf,{ref:F,floating:!0,for:w.value},{default:()=>[Q()]})]),_("div",{class:"v-field__outline__end"},null)]),D.value&&b.value&&_(uf,{ref:F,floating:!0,for:w.value},{default:()=>[Q()]})])])}),{controlRef:U,fieldIconColor:y}}}),_le=["color","file","time","date","datetime-local","week","month"],op=ue({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...co(),...ap()},"VTextField"),so=Te()({name:"VTextField",directives:{Intersect:Jm},inheritAttrs:!1,props:op(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:i,slots:s}=e;const r=et(t,"modelValue"),{isFocused:a,focus:o,blur:l}=Ia(t),u=V(()=>typeof t.counterValue=="function"?t.counterValue(r.value):typeof t.counterValue=="number"?t.counterValue:(r.value??"").toString().length),c=V(()=>{if(n.maxlength)return n.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter}),d=V(()=>["plain","underlined"].includes(t.variant));function h(U,D){var S,y;!t.autofocus||!U||(y=(S=D[0].target)==null?void 0:S.focus)==null||y.call(S)}const f=Me(),g=Me(),v=Me(),b=V(()=>_le.includes(t.type)||t.persistentPlaceholder||a.value||t.active);function I(){var U;v.value!==document.activeElement&&((U=v.value)==null||U.focus()),a.value||o()}function w(U){i("mousedown:control",U),U.target!==v.value&&(I(),U.preventDefault())}function P(U){I(),i("click:control",U)}function M(U){U.stopPropagation(),I(),kt(()=>{r.value=null,Oy(t["onClick:clear"],U)})}function F(U){var S;const D=U.target;if(r.value=D.value,(S=t.modelModifiers)!=null&&S.trim&&["text","search","password","tel","url"].includes(t.type)){const y=[D.selectionStart,D.selectionEnd];kt(()=>{D.selectionStart=y[0],D.selectionEnd=y[1]})}}return Pe(()=>{const U=!!(s.counter||t.counter!==!1&&t.counter!=null),D=!!(U||s.details),[S,y]=El(n),{modelValue:E,...A}=Oi.filterProps(t),k=fl.filterProps(t);return _(Oi,Ie({ref:f,modelValue:r.value,"onUpdate:modelValue":R=>r.value=R,class:["v-text-field",{"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-input--plain-underlined":d.value},t.class],style:t.style},S,A,{centerAffix:!d.value,focused:a.value}),{...s,default:R=>{let{id:W,isDisabled:se,isDirty:ae,isReadonly:Z,isValid:ne}=R;return _(fl,Ie({ref:g,onMousedown:w,onClick:P,"onClick:clear":M,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:t.role},k,{id:W.value,active:b.value||ae.value,dirty:ae.value||t.dirty,disabled:se.value,focused:a.value,error:ne.value===!1}),{...s,default:ee=>{let{props:{class:Q,...j}}=ee;const le=Tn(_("input",Ie({ref:v,value:r.value,onInput:F,autofocus:t.autofocus,readonly:Z.value,disabled:se.value,name:t.name,placeholder:t.placeholder,size:1,type:t.type,onFocus:I,onBlur:l},j,y),null),[[Ks("intersect"),{handler:h},null,{once:!0}]]);return _(Ye,null,[t.prefix&&_("span",{class:"v-text-field__prefix"},[_("span",{class:"v-text-field__prefix__text"},[t.prefix])]),s.default?_("div",{class:Q,"data-no-activator":""},[s.default(),le]):Ya(le,{class:Q}),t.suffix&&_("span",{class:"v-text-field__suffix"},[_("span",{class:"v-text-field__suffix__text"},[t.suffix])])])}})},details:D?R=>{var W;return _(Ye,null,[(W=s.details)==null?void 0:W.call(s,R),U&&_(Ye,null,[_("span",null,null),_(v_,{active:t.persistentCounter||a.value,value:u.value,max:c.value,disabled:t.disabled},s.counter)])])}:void 0})}),Js({},f,g,v)}}),ble=ue({renderless:Boolean,...Ke()},"VVirtualScrollItem"),JF=Te()({name:"VVirtualScrollItem",inheritAttrs:!1,props:ble(),emits:{"update:height":t=>!0},setup(t,e){let{attrs:n,emit:i,slots:s}=e;const{resizeRef:r,contentRect:a}=Lr(void 0,"border");$e(()=>{var o;return(o=a.value)==null?void 0:o.height},o=>{o!=null&&i("update:height",o)}),Pe(()=>{var o,l;return t.renderless?_(Ye,null,[(o=s.default)==null?void 0:o.call(s,{itemRef:r})]):_("div",Ie({ref:r,class:["v-virtual-scroll__item",t.class],style:t.style},n),[(l=s.default)==null?void 0:l.call(s)])})}}),Tle=-1,Sle=1,_b=100,ZF=ue({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function e5(t,e){const n=As(),i=Ue(0);An(()=>{i.value=parseFloat(t.itemHeight||0)});const s=Ue(0),r=Ue(Math.ceil((parseInt(t.height)||n.height.value)/(i.value||16))||1),a=Ue(0),o=Ue(0),l=Me(),u=Me();let c=0;const{resizeRef:d,contentRect:h}=Lr();An(()=>{d.value=l.value});const f=V(()=>{var Q;return l.value===document.documentElement?n.height.value:((Q=h.value)==null?void 0:Q.height)||parseInt(t.height)||0}),g=V(()=>!!(l.value&&u.value&&f.value&&i.value));let v=Array.from({length:e.value.length}),b=Array.from({length:e.value.length});const I=Ue(0);let w=-1;function P(Q){return v[Q]||i.value}const M=gX(()=>{const Q=performance.now();b[0]=0;const j=e.value.length;for(let le=1;le<=j-1;le++)b[le]=(b[le-1]||0)+P(le-1);I.value=Math.max(I.value,performance.now()-Q)},I),F=$e(g,Q=>{Q&&(F(),c=u.value.offsetTop,M.immediate(),ae(),~w&&kt(()=>{Vt&&window.requestAnimationFrame(()=>{ne(w),w=-1})}))});hi(()=>{M.clear()});function U(Q,j){const le=v[Q],pe=i.value;i.value=pe?Math.min(i.value,j):j,(le!==j||pe!==i.value)&&(v[Q]=j,M())}function D(Q){return Q=_n(Q,0,e.value.length-1),b[Q]||0}function S(Q){return Ele(b,Q)}let y=0,E=0,A=0;$e(f,(Q,j)=>{j&&(ae(),Q<j&&requestAnimationFrame(()=>{E=0,ae()}))});let k=-1;function R(){if(!l.value||!u.value)return;const Q=l.value.scrollTop,j=performance.now();j-A>500?(E=Math.sign(Q-y),c=u.value.offsetTop):E=Q-y,y=Q,A=j,window.clearTimeout(k),k=window.setTimeout(W,500),ae()}function W(){!l.value||!u.value||(E=0,A=0,window.clearTimeout(k),ae())}let se=-1;function ae(){cancelAnimationFrame(se),se=requestAnimationFrame(Z)}function Z(){if(!l.value||!f.value)return;const Q=y-c,j=Math.sign(E),le=Math.max(0,Q-_b),pe=_n(S(le),0,e.value.length),Se=Q+f.value+_b,Le=_n(S(Se)+1,pe+1,e.value.length);if((j!==Tle||pe<s.value)&&(j!==Sle||Le>r.value)){const we=D(s.value)-D(pe),re=D(Le)-D(r.value);Math.max(we,re)>_b?(s.value=pe,r.value=Le):(pe<=0&&(s.value=pe),Le>=e.value.length&&(r.value=Le))}a.value=D(s.value),o.value=D(e.value.length)-D(r.value)}function ne(Q){const j=D(Q);!l.value||Q&&!j?w=Q:l.value.scrollTop=j}const ee=V(()=>e.value.slice(s.value,r.value).map((Q,j)=>{const le=j+s.value;return{raw:Q,index:le,key:qn(Q,t.itemKey,le)}}));return $e(e,()=>{v=Array.from({length:e.value.length}),b=Array.from({length:e.value.length}),M.immediate(),ae()},{deep:1}),{calculateVisibleItems:ae,containerRef:l,markerRef:u,computedItems:ee,paddingTop:a,paddingBottom:o,scrollToIndex:ne,handleScroll:R,handleScrollend:W,handleItemResize:U}}function Ele(t,e){let n=t.length-1,i=0,s=0,r=null,a=-1;if(t[n]<e)return n;for(;i<=n;)if(s=i+n>>1,r=t[s],r>e)n=s-1;else if(r<e)a=s,i=s+1;else return r===e?s:i;return a}const Cle=ue({items:{type:Array,default:()=>[]},renderless:Boolean,...ZF(),...Ke(),...Kn()},"VVirtualScroll"),y_=Te()({name:"VVirtualScroll",props:Cle(),setup(t,e){let{slots:n}=e;const i=Vn("VVirtualScroll"),{dimensionStyles:s}=Yn(t),{calculateVisibleItems:r,containerRef:a,markerRef:o,handleScroll:l,handleScrollend:u,handleItemResize:c,scrollToIndex:d,paddingTop:h,paddingBottom:f,computedItems:g}=e5(t,ye(t,"items"));return ds(()=>t.renderless,()=>{function v(){var w,P;const I=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";a.value===document.documentElement?(document[I]("scroll",l,{passive:!0}),document[I]("scrollend",u)):((w=a.value)==null||w[I]("scroll",l,{passive:!0}),(P=a.value)==null||P[I]("scrollend",u))}ti(()=>{a.value=UE(i.vnode.el,!0),v(!0)}),hi(v)}),Pe(()=>{const v=g.value.map(b=>_(JF,{key:b.key,renderless:t.renderless,"onUpdate:height":I=>c(b.index,I)},{default:I=>{var w;return(w=n.default)==null?void 0:w.call(n,{item:b.raw,index:b.index,...I})}}));return t.renderless?_(Ye,null,[_("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:We(h.value)}},null),v,_("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:We(f.value)}},null)]):_("div",{ref:a,class:["v-virtual-scroll",t.class],onScrollPassive:l,onScrollend:u,style:[s.value,t.style]},[_("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:We(h.value),paddingBottom:We(f.value)}},[v])])}),{calculateVisibleItems:r,scrollToIndex:d}}});function YC(t,e){const n=Ue(!1);let i;function s(o){cancelAnimationFrame(i),n.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{n.value=!1})})}async function r(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(n.value){const l=$e(n,()=>{l(),o()})}else o()})}async function a(o){var c,d;if(o.key==="Tab"&&((c=e.value)==null||c.focus()),!["PageDown","PageUp","Home","End"].includes(o.key))return;const l=(d=t.value)==null?void 0:d.$el;if(!l)return;(o.key==="Home"||o.key==="End")&&l.scrollTo({top:o.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await r();const u=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const h=l.getBoundingClientRect().top;for(const f of u)if(f.getBoundingClientRect().top>=h){f.focus();break}}else{const h=l.getBoundingClientRect().bottom;for(const f of[...u].reverse())if(f.getBoundingClientRect().bottom<=h){f.focus();break}}}return{onScrollPassive:s,onKeydown:a}}const XC=ue({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:nt,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...$F({itemChildren:!1})},"Select"),wle=ue({...XC(),...kn(op({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Br({transition:{component:u_}})},"VSelect"),QC=Te()({name:"VSelect",props:wle(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:n}=e;const{t:i}=Dn(),s=Me(),r=Me(),a=Me(),{items:o,transformIn:l,transformOut:u}=qC(t),c=et(t,"modelValue",[],ee=>l(ee===null?[null]:bn(ee)),ee=>{const Q=u(ee);return t.multiple?Q:Q[0]??null}),d=V(()=>typeof t.counterValue=="function"?t.counterValue(c.value):typeof t.counterValue=="number"?t.counterValue:c.value.length),h=sp(t),f=V(()=>c.value.map(ee=>ee.value)),g=Ue(!1);let v="",b;const I=V(()=>t.hideSelected?o.value.filter(ee=>!c.value.some(Q=>(t.valueComparator||Yi)(Q,ee))):o.value),w=V(()=>t.hideNoData&&!I.value.length||h.isReadonly.value||h.isDisabled.value),P=et(t,"menu"),M=V({get:()=>P.value,set:ee=>{var Q;P.value&&!ee&&((Q=r.value)!=null&&Q.ΨopenChildren.size)||ee&&w.value||(P.value=ee)}}),F=V(()=>M.value?t.closeText:t.openText),U=V(()=>{var ee;return{...t.menuProps,activatorProps:{...((ee=t.menuProps)==null?void 0:ee.activatorProps)||{},"aria-haspopup":"listbox"}}}),D=Me(),S=YC(D,s);function y(ee){t.openOnClear&&(M.value=!0)}function E(){w.value||(M.value=!M.value)}function A(ee){Sd(ee)&&k(ee)}function k(ee){var pe,Se;if(!ee.key||h.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(ee.key)&&ee.preventDefault(),["Enter","ArrowDown"," "].includes(ee.key)&&(M.value=!0),["Escape","Tab"].includes(ee.key)&&(M.value=!1),ee.key==="Home"?(pe=D.value)==null||pe.focus("first"):ee.key==="End"&&((Se=D.value)==null||Se.focus("last"));const Q=1e3;if(!Sd(ee))return;const j=performance.now();j-b>Q&&(v=""),v+=ee.key.toLowerCase(),b=j;const le=o.value.find(Le=>Le.title.toLowerCase().startsWith(v));if(le!==void 0){c.value=[le];const Le=I.value.indexOf(le);Vt&&window.requestAnimationFrame(()=>{var we;Le>=0&&((we=a.value)==null||we.scrollToIndex(Le))})}}function R(ee){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!ee.props.disabled)if(t.multiple){const j=c.value.findIndex(pe=>(t.valueComparator||Yi)(pe.value,ee.value)),le=Q??!~j;if(~j){const pe=le?[...c.value,ee]:[...c.value];pe.splice(j,1),c.value=pe}else le&&(c.value=[...c.value,ee])}else{const j=Q!==!1;c.value=j?[ee]:[],kt(()=>{M.value=!1})}}function W(ee){var Q;(Q=D.value)!=null&&Q.$el.contains(ee.relatedTarget)||(M.value=!1)}function se(){var ee;t.eager&&((ee=a.value)==null||ee.calculateVisibleItems())}function ae(){var ee;g.value&&((ee=s.value)==null||ee.focus())}function Z(ee){g.value=!0}function ne(ee){if(ee==null)c.value=[];else if(Td(s.value,":autofill")||Td(s.value,":-webkit-autofill")){const Q=o.value.find(j=>j.title===ee);Q&&R(Q)}else s.value&&(s.value.value="")}return $e(M,()=>{if(!t.hideSelected&&M.value&&c.value.length){const ee=I.value.findIndex(Q=>c.value.some(j=>(t.valueComparator||Yi)(j.value,Q.value)));Vt&&window.requestAnimationFrame(()=>{var Q;ee>=0&&((Q=a.value)==null||Q.scrollToIndex(ee))})}}),$e(()=>t.items,(ee,Q)=>{M.value||g.value&&!Q.length&&ee.length&&(M.value=!0)}),Pe(()=>{const ee=!!(t.chips||n.chip),Q=!!(!t.hideNoData||I.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),j=c.value.length>0,le=so.filterProps(t),pe=j||!g.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return _(so,Ie({ref:s},le,{modelValue:c.value.map(Se=>Se.props.value).join(", "),"onUpdate:modelValue":ne,focused:g.value,"onUpdate:focused":Se=>g.value=Se,validationValue:c.externalValue,counterValue:d.value,dirty:j,class:["v-select",{"v-select--active-menu":M.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":c.value.length,"v-select--selection-slot":!!n.selection},t.class],style:t.style,inputmode:"none",placeholder:pe,"onClick:clear":y,"onMousedown:control":E,onBlur:W,onKeydown:k,"aria-label":i(F.value),title:i(F.value)}),{...n,default:()=>_(Ye,null,[_(Fd,Ie({ref:r,modelValue:M.value,"onUpdate:modelValue":Se=>M.value=Se,activator:"parent",contentClass:"v-select__content",disabled:w.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:se,onAfterLeave:ae},U.value),{default:()=>[Q&&_(g_,Ie({ref:D,selected:f.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:Se=>Se.preventDefault(),onKeydown:A,onFocusin:Z,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},S,t.listProps),{default:()=>{var Se,Le,we;return[(Se=n["prepend-item"])==null?void 0:Se.call(n),!I.value.length&&!t.hideNoData&&(((Le=n["no-data"])==null?void 0:Le.call(n))??_(io,{key:"no-data",title:i(t.noDataText)},null)),_(y_,{ref:a,renderless:!0,items:I.value,itemKey:"value"},{default:re=>{var z;let{item:fe,index:xe,itemRef:Ne}=re;const be=Ie(fe.props,{ref:Ne,key:fe.value,onClick:()=>R(fe,null)});return((z=n.item)==null?void 0:z.call(n,{item:fe,index:xe,props:be}))??_(io,Ie(be,{role:"option"}),{prepend:H=>{let{isSelected:X}=H;return _(Ye,null,[t.multiple&&!t.hideSelected?_(no,{key:fe.value,modelValue:X,ripple:!1,tabindex:"-1"},null):void 0,fe.props.prependAvatar&&_(ur,{image:fe.props.prependAvatar},null),fe.props.prependIcon&&_(Ht,{icon:fe.props.prependIcon},null)])}})}}),(we=n["append-item"])==null?void 0:we.call(n)]}})]}),c.value.map((Se,Le)=>{function we(Ne){Ne.stopPropagation(),Ne.preventDefault(),R(Se,!1)}const re={"onClick:close":we,onKeydown(Ne){Ne.key!=="Enter"&&Ne.key!==" "||(Ne.preventDefault(),Ne.stopPropagation(),we(Ne))},onMousedown(Ne){Ne.preventDefault(),Ne.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},fe=ee?!!n.chip:!!n.selection,xe=fe?Ny(ee?n.chip({item:Se,index:Le,props:re}):n.selection({item:Se,index:Le})):void 0;if(!(fe&&!xe))return _("div",{key:Se.value,class:"v-select__selection"},[ee?n.chip?_(_t,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:Se.title}}},{default:()=>[xe]}):_(ch,Ie({key:"chip",closable:t.closableChips,size:"small",text:Se.title,disabled:Se.props.disabled},re),null):xe??_("span",{class:"v-select__selection-text"},[Se.title,t.multiple&&Le<c.value.length-1&&_("span",{class:"v-select__selection-comma"},[zs(",")])])])})]),"append-inner":function(){var re,fe;for(var Se=arguments.length,Le=new Array(Se),we=0;we<Se;we++)Le[we]=arguments[we];return _(Ye,null,[(re=n["append-inner"])==null?void 0:re.call(n,...Le),t.menuIcon?_(Ht,{class:"v-select__menu-icon",color:(fe=s.value)==null?void 0:fe.fieldIconColor,icon:t.menuIcon},null):void 0])}})}),Js({isFocused:g,menu:M,select:R},s)}}),xle=(t,e,n)=>{if(t==null||e==null)return-1;if(!e.length)return 0;t=t.toString().toLocaleLowerCase(),e=e.toString().toLocaleLowerCase();const i=[];let s=t.indexOf(e);for(;~s;)i.push([s,s+e.length]),s=t.indexOf(e,s+e.length);return i.length?i:-1};function bb(t,e){if(!(t==null||typeof t=="boolean"||t===-1))return typeof t=="number"?[[t,t+e.length]]:Array.isArray(t[0])?t:[t]}const lp=ue({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Ile(t,e,n){var o;const i=[],s=(n==null?void 0:n.default)??xle,r=n!=null&&n.filterKeys?bn(n.filterKeys):!1,a=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(t!=null&&t.length))return i;e:for(let l=0;l<t.length;l++){const[u,c=u]=bn(t[l]),d={},h={};let f=-1;if((e||a>0)&&!(n!=null&&n.noFilter)){if(typeof u=="object"){const b=r||Object.keys(c);for(const I of b){const w=qn(c,I),P=(o=n==null?void 0:n.customKeyFilter)==null?void 0:o[I];if(f=P?P(w,e,u):s(w,e,u),f!==-1&&f!==!1)P?d[I]=bb(f,e):h[I]=bb(f,e);else if((n==null?void 0:n.filterMode)==="every")continue e}}else f=s(u,e,u),f!==-1&&f!==!1&&(h.title=bb(f,e));const g=Object.keys(h).length,v=Object.keys(d).length;if(!g&&!v||(n==null?void 0:n.filterMode)==="union"&&v!==a&&!g||(n==null?void 0:n.filterMode)==="intersection"&&(v!==a||!g))continue}i.push({index:l,matches:{...h,...d}})}return i}function up(t,e,n,i){const s=Ue([]),r=Ue(new Map),a=V(()=>i!=null&&i.transform?it(e).map(l=>[l,i.transform(l)]):it(e));An(()=>{const l=typeof n=="function"?n():it(n),u=typeof l!="string"&&typeof l!="number"?"":String(l),c=Ile(a.value,u,{customKeyFilter:{...t.customKeyFilter,...it(i==null?void 0:i.customKeyFilter)},default:t.customFilter,filterKeys:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}),d=it(e),h=[],f=new Map;c.forEach(g=>{let{index:v,matches:b}=g;const I=d[v];h.push(I),f.set(I.value,b)}),s.value=h,r.value=f});function o(l){return r.value.get(l.value)}return{filteredItems:s,filteredMatches:r,getMatches:o}}function t5(t,e,n){return n==null||!n.length?e:n.map((i,s)=>{const r=s===0?0:n[s-1][1],a=[_("span",{class:`${t}__unmask`},[e.slice(r,i[0])]),_("span",{class:`${t}__mask`},[e.slice(i[0],i[1])])];return s===n.length-1&&a.push(_("span",{class:`${t}__unmask`},[e.slice(i[1])])),_(Ye,null,[a])})}const Ale=ue({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...lp({filterKeys:["title"]}),...XC(),...kn(op({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Br({transition:!1})},"VAutocomplete"),kle=Te()({name:"VAutocomplete",props:Ale(),emits:{"update:focused":t=>!0,"update:search":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:n}=e;const{t:i}=Dn(),s=Me(),r=Ue(!1),a=Ue(!0),o=Ue(!1),l=Me(),u=Me(),c=Ue(-1),d=V(()=>{var be;return(be=s.value)==null?void 0:be.color}),{items:h,transformIn:f,transformOut:g}=qC(t),{textColorClasses:v,textColorStyles:b}=Li(d),I=et(t,"search",""),w=et(t,"modelValue",[],be=>f(be===null?[null]:bn(be)),be=>{const z=g(be);return t.multiple?z:z[0]??null}),P=V(()=>typeof t.counterValue=="function"?t.counterValue(w.value):typeof t.counterValue=="number"?t.counterValue:w.value.length),M=sp(t),{filteredItems:F,getMatches:U}=up(t,h,()=>a.value?"":I.value),D=V(()=>t.hideSelected?F.value.filter(be=>!w.value.some(z=>z.value===be.value)):F.value),S=V(()=>!!(t.chips||n.chip)),y=V(()=>S.value||!!n.selection),E=V(()=>w.value.map(be=>be.props.value)),A=V(()=>{var z;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&I.value===((z=D.value[0])==null?void 0:z.title))&&D.value.length>0&&!a.value&&!o.value}),k=V(()=>t.hideNoData&&!D.value.length||M.isReadonly.value||M.isDisabled.value),R=et(t,"menu"),W=V({get:()=>R.value,set:be=>{var z;R.value&&!be&&((z=l.value)!=null&&z.ΨopenChildren.size)||be&&k.value||(R.value=be)}}),se=V(()=>W.value?t.closeText:t.openText),ae=Me(),Z=YC(ae,s);function ne(be){t.openOnClear&&(W.value=!0),I.value=""}function ee(){k.value||(W.value=!0)}function Q(be){k.value||(r.value&&(be.preventDefault(),be.stopPropagation()),W.value=!W.value)}function j(be){var z;be.key!==" "&&Sd(be)&&((z=s.value)==null||z.focus())}function le(be){var X,he,de,_e,Oe;if(M.isReadonly.value)return;const z=(X=s.value)==null?void 0:X.selectionStart,H=w.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(be.key)&&be.preventDefault(),["Enter","ArrowDown"].includes(be.key)&&(W.value=!0),["Escape"].includes(be.key)&&(W.value=!1),A.value&&["Enter","Tab"].includes(be.key)&&!w.value.some(Re=>{let{value:me}=Re;return me===D.value[0].value})&&Ne(D.value[0]),be.key==="ArrowDown"&&A.value&&((he=ae.value)==null||he.focus("next")),["Backspace","Delete"].includes(be.key)){if(!t.multiple&&y.value&&w.value.length>0&&!I.value)return Ne(w.value[0],!1);if(~c.value){be.preventDefault();const Re=c.value;Ne(w.value[c.value],!1),c.value=Re>=H-1?H-2:Re}else be.key==="Backspace"&&!I.value&&(c.value=H-1);return}if(t.multiple)if(be.key==="ArrowLeft"){if(c.value<0&&z&&z>0)return;const Re=c.value>-1?c.value-1:H-1;if(w.value[Re])c.value=Re;else{const me=((de=I.value)==null?void 0:de.length)??null;c.value=-1,(_e=s.value)==null||_e.setSelectionRange(me,me)}}else if(be.key==="ArrowRight"){if(c.value<0)return;const Re=c.value+1;w.value[Re]?c.value=Re:(c.value=-1,(Oe=s.value)==null||Oe.setSelectionRange(0,0))}else~c.value&&Sd(be)&&(c.value=-1)}function pe(be){if(Td(s.value,":autofill")||Td(s.value,":-webkit-autofill")){const z=h.value.find(H=>H.title===be.target.value);z&&Ne(z)}}function Se(){var be;t.eager&&((be=u.value)==null||be.calculateVisibleItems())}function Le(){var be;r.value&&(a.value=!0,(be=s.value)==null||be.focus())}function we(be){r.value=!0,setTimeout(()=>{o.value=!0})}function re(be){o.value=!1}function fe(be){(be==null||be===""&&!t.multiple&&!y.value)&&(w.value=[])}const xe=Ue(!1);function Ne(be){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!be||be.props.disabled))if(t.multiple){const H=w.value.findIndex(he=>(t.valueComparator||Yi)(he.value,be.value)),X=z??!~H;if(~H){const he=X?[...w.value,be]:[...w.value];he.splice(H,1),w.value=he}else X&&(w.value=[...w.value,be]);t.clearOnSelect&&(I.value="")}else{const H=z!==!1;w.value=H?[be]:[],I.value=H&&!y.value?be.title:"",kt(()=>{W.value=!1,a.value=!0})}}return $e(r,(be,z)=>{var H;be!==z&&(be?(xe.value=!0,I.value=t.multiple||y.value?"":String(((H=w.value.at(-1))==null?void 0:H.props.title)??""),a.value=!0,kt(()=>xe.value=!1)):(!t.multiple&&I.value==null&&(w.value=[]),W.value=!1,(t.multiple||y.value)&&(I.value=""),c.value=-1))}),$e(I,be=>{!r.value||xe.value||(be&&(W.value=!0),a.value=!be)}),$e(W,()=>{if(!t.hideSelected&&W.value&&w.value.length){const be=D.value.findIndex(z=>w.value.some(H=>z.value===H.value));Vt&&window.requestAnimationFrame(()=>{var z;be>=0&&((z=u.value)==null||z.scrollToIndex(be))})}}),$e(()=>t.items,(be,z)=>{W.value||r.value&&!z.length&&be.length&&(W.value=!0)}),Pe(()=>{const be=!!(!t.hideNoData||D.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),z=w.value.length>0,H=so.filterProps(t);return _(so,Ie({ref:s},H,{modelValue:I.value,"onUpdate:modelValue":[X=>I.value=X,fe],focused:r.value,"onUpdate:focused":X=>r.value=X,validationValue:w.externalValue,counterValue:P.value,dirty:z,onChange:pe,class:["v-autocomplete",`v-autocomplete--${t.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":W.value,"v-autocomplete--chips":!!t.chips,"v-autocomplete--selection-slot":!!y.value,"v-autocomplete--selecting-index":c.value>-1},t.class],style:t.style,readonly:M.isReadonly.value,placeholder:z?void 0:t.placeholder,"onClick:clear":ne,"onMousedown:control":ee,onKeydown:le}),{...n,default:()=>_(Ye,null,[_(Fd,Ie({ref:l,modelValue:W.value,"onUpdate:modelValue":X=>W.value=X,activator:"parent",contentClass:"v-autocomplete__content",disabled:k.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:Se,onAfterLeave:Le},t.menuProps),{default:()=>[be&&_(g_,Ie({ref:ae,selected:E.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:X=>X.preventDefault(),onKeydown:j,onFocusin:we,onFocusout:re,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},Z,t.listProps),{default:()=>{var X,he,de;return[(X=n["prepend-item"])==null?void 0:X.call(n),!D.value.length&&!t.hideNoData&&(((he=n["no-data"])==null?void 0:he.call(n))??_(io,{key:"no-data",title:i(t.noDataText)},null)),_(y_,{ref:u,renderless:!0,items:D.value,itemKey:"value"},{default:_e=>{var He;let{item:Oe,index:Re,itemRef:me}=_e;const Ce=Ie(Oe.props,{ref:me,key:Oe.value,active:A.value&&Re===0?!0:void 0,onClick:()=>Ne(Oe,null)});return((He=n.item)==null?void 0:He.call(n,{item:Oe,index:Re,props:Ce}))??_(io,Ie(Ce,{role:"option"}),{prepend:ze=>{let{isSelected:Ze}=ze;return _(Ye,null,[t.multiple&&!t.hideSelected?_(no,{key:Oe.value,modelValue:Ze,ripple:!1,tabindex:"-1"},null):void 0,Oe.props.prependAvatar&&_(ur,{image:Oe.props.prependAvatar},null),Oe.props.prependIcon&&_(Ht,{icon:Oe.props.prependIcon},null)])},title:()=>{var ze;return a.value?Oe.title:t5("v-autocomplete",Oe.title,(ze=U(Oe))==null?void 0:ze.title)}})}}),(de=n["append-item"])==null?void 0:de.call(n)]}})]}),w.value.map((X,he)=>{function de(me){me.stopPropagation(),me.preventDefault(),Ne(X,!1)}const _e={"onClick:close":de,onKeydown(me){me.key!=="Enter"&&me.key!==" "||(me.preventDefault(),me.stopPropagation(),de(me))},onMousedown(me){me.preventDefault(),me.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Oe=S.value?!!n.chip:!!n.selection,Re=Oe?Ny(S.value?n.chip({item:X,index:he,props:_e}):n.selection({item:X,index:he})):void 0;if(!(Oe&&!Re))return _("div",{key:X.value,class:["v-autocomplete__selection",he===c.value&&["v-autocomplete__selection--selected",v.value]],style:he===c.value?b.value:{}},[S.value?n.chip?_(_t,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:X.title}}},{default:()=>[Re]}):_(ch,Ie({key:"chip",closable:t.closableChips,size:"small",text:X.title,disabled:X.props.disabled},_e),null):Re??_("span",{class:"v-autocomplete__selection-text"},[X.title,t.multiple&&he<w.value.length-1&&_("span",{class:"v-autocomplete__selection-comma"},[zs(",")])])])})]),"append-inner":function(){var _e,Oe;for(var X=arguments.length,he=new Array(X),de=0;de<X;de++)he[de]=arguments[de];return _(Ye,null,[(_e=n["append-inner"])==null?void 0:_e.call(n,...he),t.menuIcon?_(Ht,{class:"v-autocomplete__menu-icon",color:(Oe=s.value)==null?void 0:Oe.fieldIconColor,icon:t.menuIcon,onMousedown:Q,onClick:SM,"aria-label":i(se.value),title:i(se.value),tabindex:"-1"},null):void 0])}})}),Js({isFocused:r,isPristine:a,menu:W,search:I,filteredItems:F,select:Ne},s)}}),Ple=ue({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:nt,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Ke(),...lo({location:"top end"}),...fn(),...yt(),...Dt(),...Br({transition:"scale-rotate-transition"})},"VBadge"),Dle=Te()({name:"VBadge",inheritAttrs:!1,props:Ple(),setup(t,e){const{backgroundColorClasses:n,backgroundColorStyles:i}=en(ye(t,"color")),{roundedClasses:s}=Rn(t),{t:r}=Dn(),{textColorClasses:a,textColorStyles:o}=Li(ye(t,"textColor")),{themeClasses:l}=qm(),{locationStyles:u}=Qu(t,!0,c=>(t.floating?t.dot?2:4:t.dot?8:12)+(["top","bottom"].includes(c)?Number(t.offsetY??0):["left","right"].includes(c)?Number(t.offsetX??0):0));return Pe(()=>{const c=Number(t.content),d=!t.max||isNaN(c)?t.content:c<=Number(t.max)?c:`${t.max}+`,[h,f]=IT(e.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return _(t.tag,Ie({class:["v-badge",{"v-badge--bordered":t.bordered,"v-badge--dot":t.dot,"v-badge--floating":t.floating,"v-badge--inline":t.inline},t.class]},f,{style:t.style}),{default:()=>{var g,v;return[_("div",{class:"v-badge__wrapper"},[(v=(g=e.slots).default)==null?void 0:v.call(g),_(Ki,{transition:t.transition},{default:()=>{var b,I;return[Tn(_("span",Ie({class:["v-badge__badge",l.value,n.value,s.value,a.value],style:[i.value,o.value,t.inline?{}:u.value],"aria-atomic":"true","aria-label":r(t.label,c),"aria-live":"polite",role:"status"},h),[t.dot?void 0:e.slots.badge?(I=(b=e.slots).badge)==null?void 0:I.call(b):t.icon?_(Ht,{icon:t.icon},null):d]),[[Vr,t.modelValue]])]}})])]}})}),{}}}),Rle=ue({color:String,density:String,...Ke()},"VBannerActions"),n5=Te()({name:"VBannerActions",props:Rle(),setup(t,e){let{slots:n}=e;return Pn({VBtn:{color:t.color,density:t.density,slim:!0,variant:"text"}}),Pe(()=>{var i;return _("div",{class:["v-banner-actions",t.class],style:t.style},[(i=n.default)==null?void 0:i.call(n)])}),{}}}),i5=wa("v-banner-text"),Lle=ue({avatar:String,bgColor:String,color:String,icon:nt,lines:String,stacked:Boolean,sticky:Boolean,text:String,...ks(),...Ke(),...fi(),...Kn(),...ju({mobile:null}),...ni(),...lo(),...oh(),...fn(),...yt(),...Dt()},"VBanner"),Ole=Te()({name:"VBanner",props:Lle(),setup(t,e){let{slots:n}=e;const{backgroundColorClasses:i,backgroundColorStyles:s}=en(t,"bgColor"),{borderClasses:r}=Qs(t),{densityClasses:a}=es(t),{displayClasses:o,mobile:l}=As(t),{dimensionStyles:u}=Yn(t),{elevationClasses:c}=xi(t),{locationStyles:d}=Qu(t),{positionClasses:h}=lh(t),{roundedClasses:f}=Rn(t),{themeClasses:g}=zt(t),v=ye(t,"color"),b=ye(t,"density");Pn({VBannerActions:{color:v,density:b}}),Pe(()=>{const I=!!(t.text||n.text),w=!!(t.avatar||t.icon),P=!!(w||n.prepend);return _(t.tag,{class:["v-banner",{"v-banner--stacked":t.stacked||l.value,"v-banner--sticky":t.sticky,[`v-banner--${t.lines}-line`]:!!t.lines},g.value,i.value,r.value,a.value,o.value,c.value,h.value,f.value,t.class],style:[s.value,u.value,d.value,t.style],role:"banner"},{default:()=>{var M;return[P&&_("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?_(_t,{key:"prepend-defaults",disabled:!w,defaults:{VAvatar:{color:v.value,density:b.value,icon:t.icon,image:t.avatar}}},n.prepend):_(ur,{key:"prepend-avatar",color:v.value,density:b.value,icon:t.icon,image:t.avatar},null)]),_("div",{class:"v-banner__content"},[I&&_(i5,{key:"text"},{default:()=>{var F;return[((F=n.text)==null?void 0:F.call(n))??t.text]}}),(M=n.default)==null?void 0:M.call(n)]),n.actions&&_(n5,{key:"actions"},n.actions)]}})})}}),Nle=ue({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...ks(),...Ke(),...fi(),...ni(),...fn(),...qu({name:"bottom-navigation"}),...yt({tag:"header"}),...Ku({selectedClass:"v-btn--selected"}),...Dt()},"VBottomNavigation"),Mle=Te()({name:"VBottomNavigation",props:Nle(),emits:{"update:active":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:i}=qm(),{borderClasses:s}=Qs(t),{backgroundColorClasses:r,backgroundColorStyles:a}=en(ye(t,"bgColor")),{densityClasses:o}=es(t),{elevationClasses:l}=xi(t),{roundedClasses:u}=Rn(t),{ssrBootStyles:c}=Wu(),d=V(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),h=et(t,"active",t.active),{layoutItemStyles:f}=zu({id:t.name,order:V(()=>parseInt(t.order,10)),position:V(()=>"bottom"),layoutSize:V(()=>h.value?d.value:0),elementSize:d,active:h,absolute:ye(t,"absolute")});return xl(t,BC),Pn({VBtn:{baseColor:ye(t,"baseColor"),color:ye(t,"color"),density:ye(t,"density"),stacked:V(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),Pe(()=>_(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":h.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},i.value,r.value,s.value,o.value,l.value,u.value,t.class],style:[a.value,f.value,{height:We(d.value)},c.value,t.style]},{default:()=>[n.default&&_("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),s5=ue({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...rp({origin:"center center",scrollStrategy:"block",transition:{component:u_},zIndex:2400})},"VDialog"),xS=Te()({name:"VDialog",props:s5(),emits:{"update:modelValue":t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,e){let{emit:n,slots:i}=e;const s=et(t,"modelValue"),{scopeId:r}=Ju(),a=Me();function o(c){var f,g;const d=c.relatedTarget,h=c.target;if(d!==h&&((f=a.value)!=null&&f.contentEl)&&((g=a.value)!=null&&g.globalTop)&&![document,a.value.contentEl].includes(h)&&!a.value.contentEl.contains(h)){const v=nm(a.value.contentEl);if(!v.length)return;const b=v[0],I=v[v.length-1];d===b?I.focus():b.focus()}}Wn(()=>{document.removeEventListener("focusin",o)}),Vt&&$e(()=>s.value&&t.retainFocus,c=>{c?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0});function l(){var c;n("afterEnter"),(c=a.value)!=null&&c.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function u(){n("afterLeave")}return $e(s,async c=>{var d;c||(await kt(),(d=a.value.activatorEl)==null||d.focus({preventScroll:!0}))}),Pe(()=>{const c=ba.filterProps(t),d=Ie({"aria-haspopup":"dialog"},t.activatorProps),h=Ie({tabindex:-1},t.contentProps);return _(ba,Ie({ref:a,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},c,{modelValue:s.value,"onUpdate:modelValue":f=>s.value=f,"aria-modal":"true",activatorProps:d,contentProps:h,height:t.fullscreen?void 0:t.height,width:t.fullscreen?void 0:t.width,maxHeight:t.fullscreen?void 0:t.maxHeight,maxWidth:t.fullscreen?void 0:t.maxWidth,role:"dialog",onAfterEnter:l,onAfterLeave:u},r),{activator:i.activator,default:function(){for(var f=arguments.length,g=new Array(f),v=0;v<f;v++)g[v]=arguments[v];return _(_t,{root:"VDialog"},{default:()=>{var b;return[(b=i.default)==null?void 0:b.call(i,...g)]}})}})}),Js({},a)}}),Vle=ue({inset:Boolean,...s5({transition:"bottom-sheet-transition"})},"VBottomSheet"),Fle=Te()({name:"VBottomSheet",props:Vle(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"modelValue");return Pe(()=>{const s=xS.filterProps(t);return _(xS,Ie(s,{contentClass:["v-bottom-sheet__content",t.contentClass],modelValue:i.value,"onUpdate:modelValue":r=>i.value=r,class:["v-bottom-sheet",{"v-bottom-sheet--inset":t.inset},t.class],style:t.style}),n)}),{}}}),Ble=ue({divider:[Number,String],...Ke()},"VBreadcrumbsDivider"),r5=Te()({name:"VBreadcrumbsDivider",props:Ble(),setup(t,e){let{slots:n}=e;return Pe(()=>{var i;return _("li",{"aria-hidden":"true",class:["v-breadcrumbs-divider",t.class],style:t.style},[((i=n==null?void 0:n.default)==null?void 0:i.call(n))??t.divider])}),{}}}),Ule=ue({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Ke(),...np(),...yt({tag:"li"})},"VBreadcrumbsItem"),a5=Te()({name:"VBreadcrumbsItem",props:Ule(),setup(t,e){let{slots:n,attrs:i}=e;const s=tp(t,i),r=V(()=>{var u;return t.active||((u=s.isActive)==null?void 0:u.value)}),a=V(()=>r.value?t.activeColor:t.color),{textColorClasses:o,textColorStyles:l}=Li(a);return Pe(()=>_(t.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":r.value,"v-breadcrumbs-item--disabled":t.disabled,[`${t.activeClass}`]:r.value&&t.activeClass},o.value,t.class],style:[l.value,t.style],"aria-current":r.value?"page":void 0},{default:()=>{var u,c;return[s.isLink.value?_("a",Ie({class:"v-breadcrumbs-item--link",onClick:s.navigate},s.linkProps),[((c=n.default)==null?void 0:c.call(n))??t.title]):((u=n.default)==null?void 0:u.call(n))??t.title]}})),{}}}),$le=ue({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:nt,items:{type:Array,default:()=>[]},...Ke(),...fi(),...fn(),...yt({tag:"ul"})},"VBreadcrumbs"),Hle=Te()({name:"VBreadcrumbs",props:$le(),setup(t,e){let{slots:n}=e;const{backgroundColorClasses:i,backgroundColorStyles:s}=en(ye(t,"bgColor")),{densityClasses:r}=es(t),{roundedClasses:a}=Rn(t);Pn({VBreadcrumbsDivider:{divider:ye(t,"divider")},VBreadcrumbsItem:{activeClass:ye(t,"activeClass"),activeColor:ye(t,"activeColor"),color:ye(t,"color"),disabled:ye(t,"disabled")}});const o=V(()=>t.items.map(l=>typeof l=="string"?{item:{title:l},raw:l}:{item:l,raw:l}));return Pe(()=>{const l=!!(n.prepend||t.icon);return _(t.tag,{class:["v-breadcrumbs",i.value,r.value,a.value,t.class],style:[s.value,t.style]},{default:()=>{var u;return[l&&_("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?_(_t,{key:"prepend-defaults",disabled:!t.icon,defaults:{VIcon:{icon:t.icon,start:!0}}},n.prepend):_(Ht,{key:"prepend-icon",start:!0,icon:t.icon},null)]),o.value.map((c,d,h)=>{var v;let{item:f,raw:g}=c;return _(Ye,null,[((v=n.item)==null?void 0:v.call(n,{item:f,index:d}))??_(a5,Ie({key:d,disabled:d>=h.length-1},typeof f=="string"?{title:f}:f),{default:n.title?()=>{var b;return(b=n.title)==null?void 0:b.call(n,{item:f,index:d})}:void 0}),d<h.length-1&&_(r5,null,{default:n.divider?()=>{var b;return(b=n.divider)==null?void 0:b.call(n,{item:g,index:d})}:void 0})])}),(u=n.default)==null?void 0:u.call(n)]}})}),{}}}),o5=Te()({name:"VCardActions",props:Ke(),setup(t,e){let{slots:n}=e;return Pn({VBtn:{slim:!0,variant:"text"}}),Pe(()=>{var i;return _("div",{class:["v-card-actions",t.class],style:t.style},[(i=n.default)==null?void 0:i.call(n)])}),{}}}),jle=ue({opacity:[Number,String],...Ke(),...yt()},"VCardSubtitle"),l5=Te()({name:"VCardSubtitle",props:jle(),setup(t,e){let{slots:n}=e;return Pe(()=>_(t.tag,{class:["v-card-subtitle",t.class],style:[{"--v-card-subtitle-opacity":t.opacity},t.style]},n)),{}}}),u5=wa("v-card-title"),qle=ue({appendAvatar:String,appendIcon:nt,prependAvatar:String,prependIcon:nt,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Ke(),...fi()},"VCardItem"),c5=Te()({name:"VCardItem",props:qle(),setup(t,e){let{slots:n}=e;return Pe(()=>{var u;const i=!!(t.prependAvatar||t.prependIcon),s=!!(i||n.prepend),r=!!(t.appendAvatar||t.appendIcon),a=!!(r||n.append),o=!!(t.title!=null||n.title),l=!!(t.subtitle!=null||n.subtitle);return _("div",{class:["v-card-item",t.class],style:t.style},[s&&_("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?_(_t,{key:"prepend-defaults",disabled:!i,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon}}},n.prepend):_(Ye,null,[t.prependAvatar&&_(ur,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&_(Ht,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)])]),_("div",{class:"v-card-item__content"},[o&&_(u5,{key:"title"},{default:()=>{var c;return[((c=n.title)==null?void 0:c.call(n))??Ir(t.title)]}}),l&&_(l5,{key:"subtitle"},{default:()=>{var c;return[((c=n.subtitle)==null?void 0:c.call(n))??Ir(t.subtitle)]}}),(u=n.default)==null?void 0:u.call(n)]),a&&_("div",{key:"append",class:"v-card-item__append"},[n.append?_(_t,{key:"append-defaults",disabled:!r,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon}}},n.append):_(Ye,null,[t.appendIcon&&_(Ht,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&_(ur,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)])])])}),{}}}),zle=ue({opacity:[Number,String],...Ke(),...yt()},"VCardText"),d5=Te()({name:"VCardText",props:zle(),setup(t,e){let{slots:n}=e;return Pe(()=>_(t.tag,{class:["v-card-text",t.class],style:[{"--v-card-text-opacity":t.opacity},t.style]},n)),{}}}),Wle=ue({appendAvatar:String,appendIcon:nt,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:nt,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...ks(),...Ke(),...fi(),...Kn(),...ni(),...f_(),...lo(),...oh(),...fn(),...np(),...yt(),...Dt(),...hr({variant:"elevated"})},"VCard"),Gle=Te()({name:"VCard",directives:{Ripple:uo},props:Wle(),setup(t,e){let{attrs:n,slots:i}=e;const{themeClasses:s}=zt(t),{borderClasses:r}=Qs(t),{colorClasses:a,colorStyles:o,variantClasses:l}=Gu(t),{densityClasses:u}=es(t),{dimensionStyles:c}=Yn(t),{elevationClasses:d}=xi(t),{loaderClasses:h}=Zm(t),{locationStyles:f}=Qu(t),{positionClasses:g}=lh(t),{roundedClasses:v}=Rn(t),b=tp(t,n),I=V(()=>t.link!==!1&&b.isLink.value),w=V(()=>!t.disabled&&t.link!==!1&&(t.link||b.isClickable.value));return Pe(()=>{const P=I.value?"a":t.tag,M=!!(i.title||t.title!=null),F=!!(i.subtitle||t.subtitle!=null),U=M||F,D=!!(i.append||t.appendAvatar||t.appendIcon),S=!!(i.prepend||t.prependAvatar||t.prependIcon),y=!!(i.image||t.image),E=U||S||D,A=!!(i.text||t.text!=null);return Tn(_(P,Ie({class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":w.value},s.value,r.value,a.value,u.value,d.value,h.value,g.value,v.value,l.value,t.class],style:[o.value,c.value,f.value,t.style],onClick:w.value&&b.navigate,tabindex:t.disabled?-1:void 0},b.linkProps),{default:()=>{var k;return[y&&_("div",{key:"image",class:"v-card__image"},[i.image?_(_t,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},i.image):_(to,{key:"image-img",cover:!0,src:t.image},null)]),_(ep,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:i.loader}),E&&_(c5,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:i.item,prepend:i.prepend,title:i.title,subtitle:i.subtitle,append:i.append}),A&&_(d5,{key:"text"},{default:()=>{var R;return[((R=i.text)==null?void 0:R.call(i))??t.text]}}),(k=i.default)==null?void 0:k.call(i),i.actions&&_(o5,null,{default:i.actions}),wl(w.value,"v-card")]}}),[[Ks("ripple"),w.value&&t.ripple]])}),{}}}),Kle=t=>{const{touchstartX:e,touchendX:n,touchstartY:i,touchendY:s}=t,r=.5,a=16;t.offsetX=n-e,t.offsetY=s-i,Math.abs(t.offsetY)<r*Math.abs(t.offsetX)&&(t.left&&n<e-a&&t.left(t),t.right&&n>e+a&&t.right(t)),Math.abs(t.offsetX)<r*Math.abs(t.offsetY)&&(t.up&&s<i-a&&t.up(t),t.down&&s>i+a&&t.down(t))};function Yle(t,e){var i;const n=t.changedTouches[0];e.touchstartX=n.clientX,e.touchstartY=n.clientY,(i=e.start)==null||i.call(e,{originalEvent:t,...e})}function Xle(t,e){var i;const n=t.changedTouches[0];e.touchendX=n.clientX,e.touchendY=n.clientY,(i=e.end)==null||i.call(e,{originalEvent:t,...e}),Kle(e)}function Qle(t,e){var i;const n=t.changedTouches[0];e.touchmoveX=n.clientX,e.touchmoveY=n.clientY,(i=e.move)==null||i.call(e,{originalEvent:t,...e})}function Jle(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:n=>Yle(n,e),touchend:n=>Xle(n,e),touchmove:n=>Qle(n,e)}}function Zle(t,e){var o;const n=e.value,i=n!=null&&n.parent?t.parentElement:t,s=(n==null?void 0:n.options)??{passive:!0},r=(o=e.instance)==null?void 0:o.$.uid;if(!i||!r)return;const a=Jle(e.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[r]=a,vM(a).forEach(l=>{i.addEventListener(l,a[l],s)})}function eue(t,e){var r,a;const n=(r=e.value)!=null&&r.parent?t.parentElement:t,i=(a=e.instance)==null?void 0:a.$.uid;if(!(n!=null&&n._touchHandlers)||!i)return;const s=n._touchHandlers[i];vM(s).forEach(o=>{n.removeEventListener(o,s[o])}),delete n._touchHandlers[i]}const JC={mounted:Zle,unmounted:eue},h5=Symbol.for("vuetify:v-window"),f5=Symbol.for("vuetify:v-window-group"),__=ue({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ke(),...yt(),...Dt()},"VWindow"),Du=Te()({name:"VWindow",directives:{Touch:JC},props:__(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:i}=zt(t),{isRtl:s}=Gn(),{t:r}=Dn(),a=xl(t,f5),o=Me(),l=V(()=>s.value?!t.reverse:t.reverse),u=Ue(!1),c=V(()=>{const M=t.direction==="vertical"?"y":"x",U=(l.value?!u.value:u.value)?"-reverse":"";return`v-window-${M}${U}-transition`}),d=Ue(0),h=Me(void 0),f=V(()=>a.items.value.findIndex(M=>a.selected.value.includes(M.id)));$e(f,(M,F)=>{const U=a.items.value.length,D=U-1;U<=2?u.value=M<F:M===D&&F===0?u.value=!0:M===0&&F===D?u.value=!1:u.value=M<F}),Jt(h5,{transition:c,isReversed:u,transitionCount:d,transitionHeight:h,rootRef:o});const g=V(()=>t.continuous||f.value!==0),v=V(()=>t.continuous||f.value!==a.items.value.length-1);function b(){g.value&&a.prev()}function I(){v.value&&a.next()}const w=V(()=>{const M=[],F={icon:s.value?t.nextIcon:t.prevIcon,class:`v-window__${l.value?"right":"left"}`,onClick:a.prev,"aria-label":r("$vuetify.carousel.prev")};M.push(g.value?n.prev?n.prev({props:F}):_(Ot,F,null):_("div",null,null));const U={icon:s.value?t.prevIcon:t.nextIcon,class:`v-window__${l.value?"left":"right"}`,onClick:a.next,"aria-label":r("$vuetify.carousel.next")};return M.push(v.value?n.next?n.next({props:U}):_(Ot,U,null):_("div",null,null)),M}),P=V(()=>t.touch===!1?t.touch:{...{left:()=>{l.value?b():I()},right:()=>{l.value?I():b()},start:F=>{let{originalEvent:U}=F;U.stopPropagation()}},...t.touch===!0?{}:t.touch});return Pe(()=>Tn(_(t.tag,{ref:o,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},i.value,t.class],style:t.style},{default:()=>{var M,F;return[_("div",{class:"v-window__container",style:{height:h.value}},[(M=n.default)==null?void 0:M.call(n,{group:a}),t.showArrows!==!1&&_("div",{class:"v-window__controls"},[w.value])]),(F=n.additional)==null?void 0:F.call(n,{group:a})]}}),[[Ks("touch"),P.value]])),{group:a}}}),tue=ue({color:String,cycle:Boolean,delimiterIcon:{type:nt,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:t=>Number(t)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...__({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),nue=Te()({name:"VCarousel",props:tue(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"modelValue"),{t:s}=Dn(),r=Me();let a=-1;$e(i,l),$e(()=>t.interval,l),$e(()=>t.cycle,u=>{u?l():window.clearTimeout(a)}),ti(o);function o(){!t.cycle||!r.value||(a=window.setTimeout(r.value.group.next,Number(t.interval)>0?Number(t.interval):6e3))}function l(){window.clearTimeout(a),window.requestAnimationFrame(o)}return Pe(()=>{const u=Du.filterProps(t);return _(Du,Ie({ref:r},u,{modelValue:i.value,"onUpdate:modelValue":c=>i.value=c,class:["v-carousel",{"v-carousel--hide-delimiter-background":t.hideDelimiterBackground,"v-carousel--vertical-delimiters":t.verticalDelimiters},t.class],style:[{height:We(t.height)},t.style]}),{default:n.default,additional:c=>{let{group:d}=c;return _(Ye,null,[!t.hideDelimiters&&_("div",{class:"v-carousel__controls",style:{left:t.verticalDelimiters==="left"&&t.verticalDelimiters?0:"auto",right:t.verticalDelimiters==="right"?0:"auto"}},[d.items.value.length>0&&_(_t,{defaults:{VBtn:{color:t.color,icon:t.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[d.items.value.map((h,f)=>{const g={id:`carousel-item-${h.id}`,"aria-label":s("$vuetify.carousel.ariaLabel.delimiter",f+1,d.items.value.length),class:["v-carousel__controls__item",d.isSelected(h.id)&&"v-btn--active"],onClick:()=>d.select(h.id,!0)};return n.item?n.item({props:g,item:h}):_(Ot,Ie(h,g),null)})]})]),t.progress&&_(h_,{class:"v-carousel__progress",color:typeof t.progress=="string"?t.progress:void 0,modelValue:(d.getItemIndex(i.value)+1)/d.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),b_=ue({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ke(),...Yu(),...GC()},"VWindowItem"),Ru=Te()({name:"VWindowItem",directives:{Touch:JC},props:b_(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const i=vt(h5),s=Xu(t,f5),{isBooted:r}=Wu();if(!i||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const a=Ue(!1),o=V(()=>r.value&&(i.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function l(){!a.value||!i||(a.value=!1,i.transitionCount.value>0&&(i.transitionCount.value-=1,i.transitionCount.value===0&&(i.transitionHeight.value=void 0)))}function u(){var g;a.value||!i||(a.value=!0,i.transitionCount.value===0&&(i.transitionHeight.value=We((g=i.rootRef.value)==null?void 0:g.clientHeight)),i.transitionCount.value+=1)}function c(){l()}function d(g){a.value&&kt(()=>{!o.value||!a.value||!i||(i.transitionHeight.value=We(g.clientHeight))})}const h=V(()=>{const g=i.isReversed.value?t.reverseTransition:t.transition;return o.value?{name:typeof g!="string"?i.transition.value:g,onBeforeEnter:u,onAfterEnter:l,onEnterCancelled:c,onBeforeLeave:u,onAfterLeave:l,onLeaveCancelled:c,onEnter:d}:!1}),{hasContent:f}=KC(t,s.isSelected);return Pe(()=>_(Ki,{transition:h.value,disabled:!r.value},{default:()=>{var g;return[Tn(_("div",{class:["v-window-item",s.selectedClass.value,t.class],style:t.style},[f.value&&((g=n.default)==null?void 0:g.call(n))]),[[Vr,s.isSelected.value]])]}})),{groupItem:s}}}),iue=ue({...iF(),...b_()},"VCarouselItem"),sue=Te()({name:"VCarouselItem",inheritAttrs:!1,props:iue(),setup(t,e){let{slots:n,attrs:i}=e;Pe(()=>{const s=to.filterProps(t),r=Ru.filterProps(t);return _(Ru,Ie({class:["v-carousel-item",t.class]},r),{default:()=>[_(to,Ie(i,s),n)]})})}}),rue=wa("v-code","code"),aue=ue({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Ke()},"VColorPickerCanvas"),oue=Ys({name:"VColorPickerCanvas",props:aue(),emits:{"update:color":t=>!0,"update:position":t=>!0},setup(t,e){let{emit:n}=e;const i=Ue(!1),s=Me(),r=Ue(parseFloat(t.width)),a=Ue(parseFloat(t.height)),o=Me({x:0,y:0}),l=V({get:()=>o.value,set(b){var P,M;if(!s.value)return;const{x:I,y:w}=b;o.value=b,n("update:color",{h:((P=t.color)==null?void 0:P.h)??0,s:_n(I,0,r.value)/r.value,v:1-_n(w,0,a.value)/a.value,a:((M=t.color)==null?void 0:M.a)??1})}}),u=V(()=>{const{x:b,y:I}=l.value,w=parseInt(t.dotSize,10)/2;return{width:We(t.dotSize),height:We(t.dotSize),transform:`translate(${We(b-w)}, ${We(I-w)})`}}),{resizeRef:c}=Lr(b=>{var P;if(!((P=c.el)!=null&&P.offsetParent))return;const{width:I,height:w}=b[0].contentRect;r.value=I,a.value=w});function d(b,I,w){const{left:P,top:M,width:F,height:U}=w;l.value={x:_n(b-P,0,F),y:_n(I-M,0,U)}}function h(b){b.type==="mousedown"&&b.preventDefault(),!t.disabled&&(f(b),window.addEventListener("mousemove",f),window.addEventListener("mouseup",g),window.addEventListener("touchmove",f),window.addEventListener("touchend",g))}function f(b){if(t.disabled||!s.value)return;i.value=!0;const I=_X(b);d(I.clientX,I.clientY,s.value.getBoundingClientRect())}function g(){window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",g),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",g)}function v(){var M;if(!s.value)return;const b=s.value,I=b.getContext("2d");if(!I)return;const w=I.createLinearGradient(0,0,b.width,0);w.addColorStop(0,"hsla(0, 0%, 100%, 1)"),w.addColorStop(1,`hsla(${((M=t.color)==null?void 0:M.h)??0}, 100%, 50%, 1)`),I.fillStyle=w,I.fillRect(0,0,b.width,b.height);const P=I.createLinearGradient(0,0,0,b.height);P.addColorStop(0,"hsla(0, 0%, 0%, 0)"),P.addColorStop(1,"hsla(0, 0%, 0%, 1)"),I.fillStyle=P,I.fillRect(0,0,b.width,b.height)}return $e(()=>{var b;return(b=t.color)==null?void 0:b.h},v,{immediate:!0}),$e(()=>[r.value,a.value],(b,I)=>{v(),o.value={x:l.value.x*b[0]/I[0],y:l.value.y*b[1]/I[1]}},{flush:"post"}),$e(()=>t.color,()=>{if(i.value){i.value=!1;return}o.value=t.color?{x:t.color.s*r.value,y:(1-t.color.v)*a.value}:{x:0,y:0}},{deep:!0,immediate:!0}),ti(()=>v()),Pe(()=>_("div",{ref:c,class:["v-color-picker-canvas",t.class],style:t.style,onMousedown:h,onTouchstartPassive:h},[_("canvas",{ref:s,width:r.value,height:a.value},null),t.color&&_("div",{class:["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":t.disabled}],style:u.value},null)])),{}}});function lue(t,e){if(e){const{a:n,...i}=t;return i}return t}function uue(t,e){if(e==null||typeof e=="string"){const n=t.a!==1;if(e!=null&&e.startsWith("rgb(")){const{r:s,g:r,b:a,a:o}=ga(t);return`rgb(${s} ${r} ${a}`+(n?` / ${o})`:")")}else if(e!=null&&e.startsWith("hsl(")){const{h:s,s:r,l:a,a:o}=DT(t);return`hsl(${s} ${Math.round(r*100)} ${Math.round(a*100)}`+(n?` / ${o})`:")")}const i=LM(t);return t.a===1?i.slice(0,7):i}if(typeof e=="object"){let n;return nu(e,["r","g","b"])?n=ga(t):nu(e,["h","s","l"])?n=DT(t):nu(e,["h","s","v"])&&(n=t),lue(n,!nu(e,["a"])&&t.a===1)}return t}const Hc={h:0,s:0,v:0,a:1},IS={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:t=>Math.round(t.r),getColor:(t,e)=>({...t,r:Number(e)})},{label:"G",max:255,step:1,getValue:t=>Math.round(t.g),getColor:(t,e)=>({...t,g:Number(e)})},{label:"B",max:255,step:1,getValue:t=>Math.round(t.b),getColor:(t,e)=>({...t,b:Number(e)})},{label:"A",max:1,step:.01,getValue:t=>{let{a:e}=t;return e!=null?Math.round(e*100)/100:1},getColor:(t,e)=>({...t,a:Number(e)})}],to:ga,from:$m};var KP;const cue={...IS,inputs:(KP=IS.inputs)==null?void 0:KP.slice(0,3)},AS={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:t=>Math.round(t.h),getColor:(t,e)=>({...t,h:Number(e)})},{label:"S",max:1,step:.01,getValue:t=>Math.round(t.s*100)/100,getColor:(t,e)=>({...t,s:Number(e)})},{label:"L",max:1,step:.01,getValue:t=>Math.round(t.l*100)/100,getColor:(t,e)=>({...t,l:Number(e)})},{label:"A",max:1,step:.01,getValue:t=>{let{a:e}=t;return e!=null?Math.round(e*100)/100:1},getColor:(t,e)=>({...t,a:Number(e)})}],to:DT,from:FE},due={...AS,inputs:AS.inputs.slice(0,3)},m5={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:t=>t,getColor:(t,e)=>e}],to:LM,from:jX},hue={...m5,inputs:[{label:"HEX",getValue:t=>t.slice(0,7),getColor:(t,e)=>e}]},vu={rgb:cue,rgba:IS,hsl:due,hsla:AS,hex:hue,hexa:m5},fue=t=>{let{label:e,...n}=t;return _("div",{class:"v-color-picker-edit__input"},[_("input",n,null),_("span",null,[e])])},mue=ue({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:t=>Object.keys(vu).includes(t)},modes:{type:Array,default:()=>Object.keys(vu),validator:t=>Array.isArray(t)&&t.every(e=>Object.keys(vu).includes(e))},...Ke()},"VColorPickerEdit"),pue=Ys({name:"VColorPickerEdit",props:mue(),emits:{"update:color":t=>!0,"update:mode":t=>!0},setup(t,e){let{emit:n}=e;const i=V(()=>t.modes.map(r=>({...vu[r],name:r}))),s=V(()=>{var o;const r=i.value.find(l=>l.name===t.mode);if(!r)return[];const a=t.color?r.to(t.color):null;return(o=r.inputs)==null?void 0:o.map(l=>{let{getValue:u,getColor:c,...d}=l;return{...r.inputProps,...d,disabled:t.disabled,value:a&&u(a),onChange:h=>{const f=h.target;f&&n("update:color",r.from(c(a??r.to(Hc),f.value)))}}})});return Pe(()=>{var r;return _("div",{class:["v-color-picker-edit",t.class],style:t.style},[(r=s.value)==null?void 0:r.map(a=>_(fue,a,null)),i.value.length>1&&_(Ot,{icon:"$unfold",size:"x-small",variant:"plain",onClick:()=>{const a=i.value.findIndex(o=>o.name===t.mode);n("update:mode",i.value[(a+1)%i.value.length].name)}},null)])}),{}}}),ZC=Symbol.for("vuetify:v-slider");function kS(t,e,n){const i=n==="vertical",s=e.getBoundingClientRect(),r="touches"in t?t.touches[0]:t;return i?r.clientY-(s.top+s.height/2):r.clientX-(s.left+s.width/2)}function gue(t,e){return"touches"in t&&t.touches.length?t.touches[0][e]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0][e]:t[e]}const p5=ue({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:t=>typeof t=="boolean"||t==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:t=>typeof t=="boolean"||t==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:t=>["vertical","horizontal"].includes(t)},reverse:Boolean,...fn(),...ni({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),g5=t=>{const e=V(()=>parseFloat(t.min)),n=V(()=>parseFloat(t.max)),i=V(()=>Number(t.step)>0?parseFloat(t.step):0),s=V(()=>Math.max(eA(i.value),eA(e.value)));function r(a){if(a=parseFloat(a),i.value<=0)return a;const o=_n(a,e.value,n.value),l=e.value%i.value,u=Math.round((o-l)/i.value)*i.value+l;return parseFloat(Math.min(u,n.value).toFixed(s.value))}return{min:e,max:n,step:i,decimals:s,roundValue:r}},v5=t=>{let{props:e,steps:n,onSliderStart:i,onSliderMove:s,onSliderEnd:r,getActiveThumb:a}=t;const{isRtl:o}=Gn(),l=ye(e,"reverse"),u=V(()=>e.direction==="vertical"),c=V(()=>u.value!==l.value),{min:d,max:h,step:f,decimals:g,roundValue:v}=n,b=V(()=>parseInt(e.thumbSize,10)),I=V(()=>parseInt(e.tickSize,10)),w=V(()=>parseInt(e.trackSize,10)),P=V(()=>(h.value-d.value)/f.value),M=ye(e,"disabled"),F=V(()=>e.error||e.disabled?void 0:e.thumbColor??e.color),U=V(()=>e.error||e.disabled?void 0:e.trackColor??e.color),D=V(()=>e.error||e.disabled?void 0:e.trackFillColor??e.color),S=Ue(!1),y=Ue(0),E=Me(),A=Me();function k(we){var de;const re=(de=E.value)==null?void 0:de.$el;if(!re)return;const fe=e.direction==="vertical",xe=fe?"top":"left",Ne=fe?"height":"width",be=fe?"clientY":"clientX",{[xe]:z,[Ne]:H}=re.getBoundingClientRect(),X=gue(we,be);let he=Math.min(Math.max((X-z-y.value)/H,0),1)||0;return(fe?c.value:c.value!==o.value)&&(he=1-he),v(d.value+he*(h.value-d.value))}const R=we=>{const re=k(we);re!=null&&r({value:re}),S.value=!1,y.value=0},W=we=>{const re=k(we);A.value=a(we),A.value&&(S.value=!0,A.value.contains(we.target)?y.value=kS(we,A.value,e.direction):(y.value=0,re!=null&&s({value:re})),re!=null&&i({value:re}),kt(()=>{var fe;return(fe=A.value)==null?void 0:fe.focus()}))},se={passive:!0,capture:!0};function ae(we){const re=k(we);re!=null&&s({value:re})}function Z(we){we.stopPropagation(),we.preventDefault(),R(we),window.removeEventListener("mousemove",ae,se),window.removeEventListener("mouseup",Z)}function ne(we){var re;R(we),window.removeEventListener("touchmove",ae,se),(re=we.target)==null||re.removeEventListener("touchend",ne)}function ee(we){var re;W(we),window.addEventListener("touchmove",ae,se),(re=we.target)==null||re.addEventListener("touchend",ne,{passive:!1})}function Q(we){we.button===0&&(we.preventDefault(),W(we),window.addEventListener("mousemove",ae,se),window.addEventListener("mouseup",Z,{passive:!1}))}const j=we=>{const re=(we-d.value)/(h.value-d.value)*100;return _n(isNaN(re)?0:re,0,100)},le=ye(e,"showTicks"),pe=V(()=>le.value?e.ticks?Array.isArray(e.ticks)?e.ticks.map(we=>({value:we,position:j(we),label:we.toString()})):Object.keys(e.ticks).map(we=>({value:parseFloat(we),position:j(parseFloat(we)),label:e.ticks[we]})):P.value!==1/0?na(P.value+1).map(we=>{const re=d.value+we*f.value;return{value:re,position:j(re)}}):[]:[]),Se=V(()=>pe.value.some(we=>{let{label:re}=we;return!!re})),Le={activeThumbRef:A,color:ye(e,"color"),decimals:g,disabled:M,direction:ye(e,"direction"),elevation:ye(e,"elevation"),hasLabels:Se,isReversed:l,indexFromEnd:c,min:d,max:h,mousePressed:S,numTicks:P,onSliderMousedown:Q,onSliderTouchstart:ee,parsedTicks:pe,parseMouseMove:k,position:j,readonly:ye(e,"readonly"),rounded:ye(e,"rounded"),roundValue:v,showTicks:le,startOffset:y,step:f,thumbSize:b,thumbColor:F,thumbLabel:ye(e,"thumbLabel"),ticks:ye(e,"ticks"),tickSize:I,trackColor:U,trackContainerRef:E,trackFillColor:D,trackSize:w,vertical:u};return Jt(ZC,Le),Le},vue=ue({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,...Ke()},"VSliderThumb"),PS=Te()({name:"VSliderThumb",directives:{Ripple:uo},props:vue(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n,emit:i}=e;const s=vt(ZC),{isRtl:r,rtlClasses:a}=Gn();if(!s)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:o,step:l,disabled:u,thumbSize:c,thumbLabel:d,direction:h,isReversed:f,vertical:g,readonly:v,elevation:b,mousePressed:I,decimals:w,indexFromEnd:P}=s,M=V(()=>u.value?void 0:b.value),{elevationClasses:F}=xi(M),{textColorClasses:U,textColorStyles:D}=Li(o),{pageup:S,pagedown:y,end:E,home:A,left:k,right:R,down:W,up:se}=xT,ae=[S,y,E,A,k,R,W,se],Z=V(()=>l.value?[1,2,3]:[1,5,10]);function ne(Q,j){if(!ae.includes(Q.key))return;Q.preventDefault();const le=l.value||.1,pe=(t.max-t.min)/le;if([k,R,W,se].includes(Q.key)){const Le=(g.value?[r.value?k:R,f.value?W:se]:P.value!==r.value?[k,se]:[R,se]).includes(Q.key)?1:-1,we=Q.shiftKey?2:Q.ctrlKey?1:0;j=j+Le*le*Z.value[we]}else if(Q.key===A)j=t.min;else if(Q.key===E)j=t.max;else{const Se=Q.key===y?1:-1;j=j-Se*le*(pe>100?pe/10:10)}return Math.max(t.min,Math.min(t.max,j))}function ee(Q){const j=ne(Q,t.modelValue);j!=null&&i("update:modelValue",j)}return Pe(()=>{const Q=We(P.value?100-t.position:t.position,"%");return _("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":t.focused,"v-slider-thumb--pressed":t.focused&&I.value},t.class,a.value],style:[{"--v-slider-thumb-position":Q,"--v-slider-thumb-size":We(c.value)},t.style],role:"slider",tabindex:u.value?-1:0,"aria-label":t.name,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.modelValue,"aria-readonly":!!v.value,"aria-orientation":h.value,onKeydown:v.value?void 0:ee},[_("div",{class:["v-slider-thumb__surface",U.value,F.value],style:{...D.value}},null),Tn(_("div",{class:["v-slider-thumb__ripple",U.value],style:D.value},null),[[Ks("ripple"),t.ripple,null,{circle:!0,center:!0}]]),_(NC,{origin:"bottom center"},{default:()=>{var j;return[Tn(_("div",{class:"v-slider-thumb__label-container"},[_("div",{class:["v-slider-thumb__label"]},[_("div",null,[((j=n["thumb-label"])==null?void 0:j.call(n,{modelValue:t.modelValue}))??t.modelValue.toFixed(l.value?w.value:1)])])]),[[Vr,d.value&&t.focused||d.value==="always"]])]}})])}),{}}}),yue=ue({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Ke()},"VSliderTrack"),y5=Te()({name:"VSliderTrack",props:yue(),emits:{},setup(t,e){let{slots:n}=e;const i=vt(ZC);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:s,parsedTicks:r,rounded:a,showTicks:o,tickSize:l,trackColor:u,trackFillColor:c,trackSize:d,vertical:h,min:f,max:g,indexFromEnd:v}=i,{roundedClasses:b}=Rn(a),{backgroundColorClasses:I,backgroundColorStyles:w}=en(c),{backgroundColorClasses:P,backgroundColorStyles:M}=en(u),F=V(()=>`inset-${h.value?"block":"inline"}-${v.value?"end":"start"}`),U=V(()=>h.value?"height":"width"),D=V(()=>({[F.value]:"0%",[U.value]:"100%"})),S=V(()=>t.stop-t.start),y=V(()=>({[F.value]:We(t.start,"%"),[U.value]:We(S.value,"%")})),E=V(()=>o.value?(h.value?r.value.slice().reverse():r.value).map((k,R)=>{var se;const W=k.value!==f.value&&k.value!==g.value?We(k.position,"%"):void 0;return _("div",{key:k.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":k.position>=t.start&&k.position<=t.stop,"v-slider-track__tick--first":k.value===f.value,"v-slider-track__tick--last":k.value===g.value}],style:{[F.value]:W}},[(k.label||n["tick-label"])&&_("div",{class:"v-slider-track__tick-label"},[((se=n["tick-label"])==null?void 0:se.call(n,{tick:k,index:R}))??k.label])])}):[]);return Pe(()=>_("div",{class:["v-slider-track",b.value,t.class],style:[{"--v-slider-track-size":We(d.value),"--v-slider-tick-size":We(l.value)},t.style]},[_("div",{class:["v-slider-track__background",P.value,{"v-slider-track__background--opacity":!!s.value||!c.value}],style:{...D.value,...M.value}},null),_("div",{class:["v-slider-track__fill",I.value],style:{...y.value,...w.value}},null),o.value&&_("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":o.value==="always"}]},[E.value])])),{}}}),_ue=ue({...ip(),...p5(),...co(),modelValue:{type:[Number,String],default:0}},"VSlider"),DS=Te()({name:"VSlider",props:_ue(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,start:t=>!0,end:t=>!0},setup(t,e){let{slots:n,emit:i}=e;const s=Me(),{rtlClasses:r}=Gn(),a=g5(t),o=et(t,"modelValue",void 0,U=>a.roundValue(U??a.min.value)),{min:l,max:u,mousePressed:c,roundValue:d,onSliderMousedown:h,onSliderTouchstart:f,trackContainerRef:g,position:v,hasLabels:b,readonly:I}=v5({props:t,steps:a,onSliderStart:()=>{i("start",o.value)},onSliderEnd:U=>{let{value:D}=U;const S=d(D);o.value=S,i("end",S)},onSliderMove:U=>{let{value:D}=U;return o.value=d(D)},getActiveThumb:()=>{var U;return(U=s.value)==null?void 0:U.$el}}),{isFocused:w,focus:P,blur:M}=Ia(t),F=V(()=>v(o.value));return Pe(()=>{const U=Oi.filterProps(t),D=!!(t.label||n.label||n.prepend);return _(Oi,Ie({class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||b.value,"v-slider--focused":w.value,"v-slider--pressed":c.value,"v-slider--disabled":t.disabled},r.value,t.class],style:t.style},U,{focused:w.value}),{...n,prepend:D?S=>{var y,E;return _(Ye,null,[((y=n.label)==null?void 0:y.call(n,S))??(t.label?_(uh,{id:S.id.value,class:"v-slider__label",text:t.label},null):void 0),(E=n.prepend)==null?void 0:E.call(n,S)])}:void 0,default:S=>{let{id:y,messagesId:E}=S;return _("div",{class:"v-slider__container",onMousedown:I.value?void 0:h,onTouchstartPassive:I.value?void 0:f},[_("input",{id:y.value,name:t.name||y.value,disabled:!!t.disabled,readonly:!!t.readonly,tabindex:"-1",value:o.value},null),_(y5,{ref:g,start:0,stop:F.value},{"tick-label":n["tick-label"]}),_(PS,{ref:s,"aria-describedby":E.value,focused:w.value,min:l.value,max:u.value,modelValue:o.value,"onUpdate:modelValue":A=>o.value=A,position:F.value,elevation:t.elevation,onFocus:P,onBlur:M,ripple:t.ripple,name:t.name},{"thumb-label":n["thumb-label"]})])}})}),{}}}),bue=ue({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...Ke()},"VColorPickerPreview"),Tue=Ys({name:"VColorPickerPreview",props:bue(),emits:{"update:color":t=>!0},setup(t,e){let{emit:n}=e;const i=new AbortController;r1(()=>i.abort());async function s(){if(!XI||t.disabled)return;const r=new window.EyeDropper;try{const a=await r.open({signal:i.signal}),o=$m(Hs(a.sRGBHex));n("update:color",{...t.color??Hc,...o})}catch{}}return Pe(()=>{var r,a;return _("div",{class:["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":t.hideAlpha},t.class],style:t.style},[XI&&_("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[_(Ot,{density:"comfortable",disabled:t.disabled,icon:"$eyeDropper",variant:"plain",onClick:s},null)]),_("div",{class:"v-color-picker-preview__dot"},[_("div",{style:{background:PM(t.color??Hc)}},null)]),_("div",{class:"v-color-picker-preview__sliders"},[_(DS,{class:"v-color-picker-preview__track v-color-picker-preview__hue",modelValue:(r=t.color)==null?void 0:r.h,"onUpdate:modelValue":o=>n("update:color",{...t.color??Hc,h:o}),step:0,min:0,max:360,disabled:t.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!t.hideAlpha&&_(DS,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",modelValue:((a=t.color)==null?void 0:a.a)??1,"onUpdate:modelValue":o=>n("update:color",{...t.color??Hc,a:o}),step:1/256,min:0,max:1,disabled:t.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])}),{}}}),Sue=ue({swatches:{type:Array,default:()=>Eue(Tv)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Ke()},"VColorPickerSwatches");function Eue(t){return Object.keys(t).map(e=>{const n=t[e];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const Cue=Ys({name:"VColorPickerSwatches",props:Sue(),emits:{"update:color":t=>!0},setup(t,e){let{emit:n}=e;return Pe(()=>_("div",{class:["v-color-picker-swatches",t.class],style:[{maxHeight:We(t.maxHeight)},t.style]},[_("div",null,[t.swatches.map(i=>_("div",{class:"v-color-picker-swatches__swatch"},[i.map(s=>{const r=Hs(s),a=$m(r),o=kM(r);return _("div",{class:"v-color-picker-swatches__color",onClick:()=>a&&n("update:color",a)},[_("div",{style:{background:o}},[t.color&&Yi(t.color,a)?_(Ht,{size:"x-small",icon:"$success",color:GX(s,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),wue=wa("v-picker-title"),ew=ue({color:String,...ks(),...Ke(),...Kn(),...ni(),...lo(),...oh(),...fn(),...yt(),...Dt()},"VSheet"),_m=Te()({name:"VSheet",props:ew(),setup(t,e){let{slots:n}=e;const{themeClasses:i}=zt(t),{backgroundColorClasses:s,backgroundColorStyles:r}=en(ye(t,"color")),{borderClasses:a}=Qs(t),{dimensionStyles:o}=Yn(t),{elevationClasses:l}=xi(t),{locationStyles:u}=Qu(t),{positionClasses:c}=lh(t),{roundedClasses:d}=Rn(t);return Pe(()=>_(t.tag,{class:["v-sheet",i.value,s.value,a.value,l.value,c.value,d.value,t.class],style:[r.value,o.value,u.value,t.style]},n)),{}}}),tw=ue({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,...ew()},"VPicker"),zv=Te()({name:"VPicker",props:tw(),setup(t,e){let{slots:n}=e;const{backgroundColorClasses:i,backgroundColorStyles:s}=en(ye(t,"color"));return Pe(()=>{const r=_m.filterProps(t),a=!!(t.title||n.title);return _(_m,Ie(r,{color:t.bgColor,class:["v-picker",{"v-picker--divided":t.divided,"v-picker--landscape":t.landscape,"v-picker--with-actions":!!n.actions},t.class],style:t.style}),{default:()=>{var o;return[!t.hideHeader&&_("div",{key:"header",class:[i.value],style:[s.value]},[a&&_(wue,{key:"picker-title"},{default:()=>{var l;return[((l=n.title)==null?void 0:l.call(n))??t.title]}}),n.header&&_("div",{class:"v-picker__header"},[n.header()])]),_("div",{class:"v-picker__body"},[(o=n.default)==null?void 0:o.call(n)]),n.actions&&_(_t,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[_("div",{class:"v-picker__actions"},[n.actions()])]})]}})}),{}}}),xue=ue({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:t=>Object.keys(vu).includes(t)},modes:{type:Array,default:()=>Object.keys(vu),validator:t=>Array.isArray(t)&&t.every(e=>Object.keys(vu).includes(e))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...tw({hideHeader:!0})},"VColorPicker"),Iue=Ys({name:"VColorPicker",props:xue(),emits:{"update:modelValue":t=>!0,"update:mode":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"mode"),s=Me(null),r=et(t,"modelValue",void 0,c=>{if(c==null||c==="")return null;let d;try{d=$m(Hs(c))}catch{return null}return d},c=>c?uue(c,t.modelValue):null),a=V(()=>r.value?{...r.value,h:s.value??r.value.h}:null),{rtlClasses:o}=Gn();let l=!0;$e(r,c=>{if(!l){l=!0;return}c&&(s.value=c.h)},{immediate:!0});const u=c=>{l=!1,s.value=c.h,r.value=c};return Ud(()=>{t.modes.includes(i.value)||(i.value=t.modes[0])}),Pn({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),Pe(()=>{const c=zv.filterProps(t);return _(zv,Ie(c,{class:["v-color-picker",o.value,t.class],style:[{"--v-color-picker-color-hsv":PM({...a.value??Hc,a:1})},t.style]}),{...n,default:()=>_(Ye,null,[!t.hideCanvas&&_(oue,{key:"canvas",color:a.value,"onUpdate:color":u,disabled:t.disabled,dotSize:t.dotSize,width:t.width,height:t.canvasHeight},null),(!t.hideSliders||!t.hideInputs)&&_("div",{key:"controls",class:"v-color-picker__controls"},[!t.hideSliders&&_(Tue,{key:"preview",color:a.value,"onUpdate:color":u,hideAlpha:!i.value.endsWith("a"),disabled:t.disabled},null),!t.hideInputs&&_(pue,{key:"edit",modes:t.modes,mode:i.value,"onUpdate:mode":d=>i.value=d,color:a.value,"onUpdate:color":u,disabled:t.disabled},null)]),t.showSwatches&&_(Cue,{key:"swatches",color:a.value,"onUpdate:color":u,maxHeight:t.swatchesMaxHeight,swatches:t.swatches,disabled:t.disabled},null)])})}),{}}}),Aue=ue({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...lp({filterKeys:["title"]}),...XC({hideNoData:!0,returnObject:!0}),...kn(op({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Br({transition:!1})},"VCombobox"),kue=Te()({name:"VCombobox",props:Aue(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,e){var z;let{emit:n,slots:i}=e;const{t:s}=Dn(),r=Me(),a=Ue(!1),o=Ue(!0),l=Ue(!1),u=Me(),c=Me(),d=Ue(-1);let h=!1;const f=V(()=>{var H;return(H=r.value)==null?void 0:H.color}),{items:g,transformIn:v,transformOut:b}=qC(t),{textColorClasses:I,textColorStyles:w}=Li(f),P=et(t,"modelValue",[],H=>v(bn(H)),H=>{const X=b(H);return t.multiple?X:X[0]??null}),M=sp(t),F=V(()=>!!(t.chips||i.chip)),U=V(()=>F.value||!!i.selection),D=Ue(!t.multiple&&!U.value?((z=P.value[0])==null?void 0:z.title)??"":""),S=V({get:()=>D.value,set:H=>{var X;if(D.value=H??"",!t.multiple&&!U.value&&(P.value=[qo(t,H)]),H&&t.multiple&&((X=t.delimiters)!=null&&X.length)){const he=H.split(new RegExp(`(?:${t.delimiters.join("|")})+`));he.length>1&&(he.forEach(de=>{de=de.trim(),de&&fe(qo(t,de))}),D.value="")}H||(d.value=-1),o.value=!H}}),y=V(()=>typeof t.counterValue=="function"?t.counterValue(P.value):typeof t.counterValue=="number"?t.counterValue:t.multiple?P.value.length:S.value.length),{filteredItems:E,getMatches:A}=up(t,g,()=>o.value?"":S.value),k=V(()=>t.hideSelected?E.value.filter(H=>!P.value.some(X=>X.value===H.value)):E.value),R=V(()=>t.hideNoData&&!k.value.length||M.isReadonly.value||M.isDisabled.value),W=et(t,"menu"),se=V({get:()=>W.value,set:H=>{var X;W.value&&!H&&((X=u.value)!=null&&X.ΨopenChildren.size)||H&&R.value||(W.value=H)}}),ae=V(()=>se.value?t.closeText:t.openText);$e(D,H=>{h?kt(()=>h=!1):a.value&&!se.value&&(se.value=!0),n("update:search",H)}),$e(P,H=>{var X;!t.multiple&&!U.value&&(D.value=((X=H[0])==null?void 0:X.title)??"")});const Z=V(()=>P.value.map(H=>H.value)),ne=V(()=>{var X;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&S.value===((X=k.value[0])==null?void 0:X.title))&&k.value.length>0&&!o.value&&!l.value}),ee=Me(),Q=YC(ee,r);function j(H){h=!0,t.openOnClear&&(se.value=!0)}function le(){R.value||(se.value=!0)}function pe(H){R.value||(a.value&&(H.preventDefault(),H.stopPropagation()),se.value=!se.value)}function Se(H){var X;H.key!==" "&&Sd(H)&&((X=r.value)==null||X.focus())}function Le(H){var de,_e,Oe,Re;if(pX(H)||M.isReadonly.value)return;const X=(de=r.value)==null?void 0:de.selectionStart,he=P.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(H.key)&&H.preventDefault(),["Enter","ArrowDown"].includes(H.key)&&(se.value=!0),["Escape"].includes(H.key)&&(se.value=!1),["Enter","Escape","Tab"].includes(H.key)&&(ne.value&&["Enter","Tab"].includes(H.key)&&!P.value.some(me=>{let{value:Ce}=me;return Ce===k.value[0].value})&&fe(E.value[0]),o.value=!0),H.key==="ArrowDown"&&ne.value&&((_e=ee.value)==null||_e.focus("next")),H.key==="Enter"&&S.value&&(fe(qo(t,S.value)),U.value&&(D.value="")),["Backspace","Delete"].includes(H.key)){if(!t.multiple&&U.value&&P.value.length>0&&!S.value)return fe(P.value[0],!1);if(~d.value){H.preventDefault();const me=d.value;fe(P.value[d.value],!1),d.value=me>=he-1?he-2:me}else H.key==="Backspace"&&!S.value&&(d.value=he-1);return}if(t.multiple)if(H.key==="ArrowLeft"){if(d.value<0&&X&&X>0)return;const me=d.value>-1?d.value-1:he-1;P.value[me]?d.value=me:(d.value=-1,(Oe=r.value)==null||Oe.setSelectionRange(S.value.length,S.value.length))}else if(H.key==="ArrowRight"){if(d.value<0)return;const me=d.value+1;P.value[me]?d.value=me:(d.value=-1,(Re=r.value)==null||Re.setSelectionRange(0,0))}else~d.value&&Sd(H)&&(d.value=-1)}function we(){var H;t.eager&&((H=c.value)==null||H.calculateVisibleItems())}function re(){var H;a.value&&(o.value=!0,(H=r.value)==null||H.focus())}function fe(H){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!H||H.props.disabled))if(t.multiple){const he=P.value.findIndex(_e=>(t.valueComparator||Yi)(_e.value,H.value)),de=X??!~he;if(~he){const _e=de?[...P.value,H]:[...P.value];_e.splice(he,1),P.value=_e}else de&&(P.value=[...P.value,H]);t.clearOnSelect&&(S.value="")}else{const he=X!==!1;P.value=he?[H]:[],D.value=he&&!U.value?H.title:"",kt(()=>{se.value=!1,o.value=!0})}}function xe(H){a.value=!0,setTimeout(()=>{l.value=!0})}function Ne(H){l.value=!1}function be(H){(H==null||H===""&&!t.multiple&&!U.value)&&(P.value=[])}return $e(a,(H,X)=>{if(!(H||H===X)&&(d.value=-1,se.value=!1,S.value)){if(t.multiple){fe(qo(t,S.value));return}if(!U.value)return;P.value.some(he=>{let{title:de}=he;return de===S.value})?D.value="":fe(qo(t,S.value))}}),$e(se,()=>{if(!t.hideSelected&&se.value&&P.value.length){const H=k.value.findIndex(X=>P.value.some(he=>(t.valueComparator||Yi)(he.value,X.value)));Vt&&window.requestAnimationFrame(()=>{var X;H>=0&&((X=c.value)==null||X.scrollToIndex(H))})}}),$e(()=>t.items,(H,X)=>{se.value||a.value&&!X.length&&H.length&&(se.value=!0)}),Pe(()=>{const H=!!(!t.hideNoData||k.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),X=P.value.length>0,he=so.filterProps(t);return _(so,Ie({ref:r},he,{modelValue:S.value,"onUpdate:modelValue":[de=>S.value=de,be],focused:a.value,"onUpdate:focused":de=>a.value=de,validationValue:P.externalValue,counterValue:y.value,dirty:X,class:["v-combobox",{"v-combobox--active-menu":se.value,"v-combobox--chips":!!t.chips,"v-combobox--selection-slot":!!U.value,"v-combobox--selecting-index":d.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,readonly:M.isReadonly.value,placeholder:X?void 0:t.placeholder,"onClick:clear":j,"onMousedown:control":le,onKeydown:Le}),{...i,default:()=>_(Ye,null,[_(Fd,Ie({ref:u,modelValue:se.value,"onUpdate:modelValue":de=>se.value=de,activator:"parent",contentClass:"v-combobox__content",disabled:R.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:we,onAfterLeave:re},t.menuProps),{default:()=>[H&&_(g_,Ie({ref:ee,selected:Z.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:de=>de.preventDefault(),onKeydown:Se,onFocusin:xe,onFocusout:Ne,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},Q,t.listProps),{default:()=>{var de,_e,Oe;return[(de=i["prepend-item"])==null?void 0:de.call(i),!k.value.length&&!t.hideNoData&&(((_e=i["no-data"])==null?void 0:_e.call(i))??_(io,{key:"no-data",title:s(t.noDataText)},null)),_(y_,{ref:c,renderless:!0,items:k.value,itemKey:"value"},{default:Re=>{var Ze;let{item:me,index:Ce,itemRef:He}=Re;const ze=Ie(me.props,{ref:He,key:me.value,active:ne.value&&Ce===0?!0:void 0,onClick:()=>fe(me,null)});return((Ze=i.item)==null?void 0:Ze.call(i,{item:me,index:Ce,props:ze}))??_(io,Ie(ze,{role:"option"}),{prepend:rt=>{let{isSelected:at}=rt;return _(Ye,null,[t.multiple&&!t.hideSelected?_(no,{key:me.value,modelValue:at,ripple:!1,tabindex:"-1"},null):void 0,me.props.prependAvatar&&_(ur,{image:me.props.prependAvatar},null),me.props.prependIcon&&_(Ht,{icon:me.props.prependIcon},null)])},title:()=>{var rt;return o.value?me.title:t5("v-combobox",me.title,(rt=A(me))==null?void 0:rt.title)}})}}),(Oe=i["append-item"])==null?void 0:Oe.call(i)]}})]}),P.value.map((de,_e)=>{function Oe(He){He.stopPropagation(),He.preventDefault(),fe(de,!1)}const Re={"onClick:close":Oe,onKeydown(He){He.key!=="Enter"&&He.key!==" "||(He.preventDefault(),He.stopPropagation(),Oe(He))},onMousedown(He){He.preventDefault(),He.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},me=F.value?!!i.chip:!!i.selection,Ce=me?Ny(F.value?i.chip({item:de,index:_e,props:Re}):i.selection({item:de,index:_e})):void 0;if(!(me&&!Ce))return _("div",{key:de.value,class:["v-combobox__selection",_e===d.value&&["v-combobox__selection--selected",I.value]],style:_e===d.value?w.value:{}},[F.value?i.chip?_(_t,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:de.title}}},{default:()=>[Ce]}):_(ch,Ie({key:"chip",closable:t.closableChips,size:"small",text:de.title,disabled:de.props.disabled},Re),null):Ce??_("span",{class:"v-combobox__selection-text"},[de.title,t.multiple&&_e<P.value.length-1&&_("span",{class:"v-combobox__selection-comma"},[zs(",")])])])})]),"append-inner":function(){var Re,me;for(var de=arguments.length,_e=new Array(de),Oe=0;Oe<de;Oe++)_e[Oe]=arguments[Oe];return _(Ye,null,[(Re=i["append-inner"])==null?void 0:Re.call(i,..._e),(!t.hideNoData||t.items.length)&&t.menuIcon?_(Ht,{class:"v-combobox__menu-icon",color:(me=r.value)==null?void 0:me.fieldIconColor,icon:t.menuIcon,onMousedown:pe,onClick:SM,"aria-label":s(ae.value),title:s(ae.value),tabindex:"-1"},null):void 0])}})}),Js({isFocused:a,isPristine:o,menu:se,search:S,selectionIndex:d,filteredItems:E,select:fe},r)}}),Pue=ue({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),Due=Te()({name:"VConfirmEdit",props:Pue(),emits:{cancel:()=>!0,save:t=>!0,"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:i}=e;const s=et(t,"modelValue"),r=Me();An(()=>{r.value=structuredClone(ot(s.value))});const{t:a}=Dn(),o=V(()=>Yi(s.value,r.value));function l(v){return typeof t.disabled=="boolean"?t.disabled:Array.isArray(t.disabled)?t.disabled.includes(v):o.value}const u=V(()=>l("save")),c=V(()=>l("cancel"));function d(){s.value=r.value,n("save",r.value)}function h(){r.value=structuredClone(ot(s.value)),n("cancel")}function f(v){return _(Ye,null,[_(Ot,Ie({disabled:c.value,variant:"text",color:t.color,onClick:h,text:a(t.cancelText)},v),null),_(Ot,Ie({disabled:u.value,variant:"text",color:t.color,onClick:d,text:a(t.okText)},v),null)])}let g=!1;return Pe(()=>{var v;return _(Ye,null,[(v=i.default)==null?void 0:v.call(i,{model:r,save:d,cancel:h,isPristine:o.value,get actions(){return g=!0,f}}),!t.hideActions&&!g&&f()])}),{save:d,cancel:h,isPristine:o}}}),_5=ue({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),b5=Symbol.for("vuetify:datatable:expanded");function T_(t){const e=ye(t,"expandOnClick"),n=et(t,"expanded",t.expanded,o=>new Set(o),o=>[...o.values()]);function i(o,l){const u=new Set(n.value);l?u.add(o.value):u.delete(o.value),n.value=u}function s(o){return n.value.has(o.value)}function r(o){i(o,!s(o))}const a={expand:i,expanded:n,expandOnClick:e,isExpanded:s,toggleExpand:r};return Jt(b5,a),a}function T5(){const t=vt(b5);if(!t)throw new Error("foo");return t}const nw=ue({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),S5=Symbol.for("vuetify:data-table-group");function iw(t){return{groupBy:et(t,"groupBy")}}function S_(t){const{disableSort:e,groupBy:n,sortBy:i}=t,s=Me(new Set),r=V(()=>n.value.map(c=>({...c,order:c.order??!1})).concat(e!=null&&e.value?[]:i.value));function a(c){return s.value.has(c.id)}function o(c){const d=new Set(s.value);a(c)?d.delete(c.id):d.add(c.id),s.value=d}function l(c){function d(h){const f=[];for(const g of h.items)"type"in g&&g.type==="group"?f.push(...d(g)):f.push(g);return[...new Set(f)]}return d({items:c})}const u={sortByWithGroups:r,toggleGroup:o,opened:s,groupBy:n,extractRows:l,isGroupOpen:a};return Jt(S5,u),u}function E5(){const t=vt(S5);if(!t)throw new Error("Missing group!");return t}function Rue(t,e){if(!t.length)return[];const n=new Map;for(const i of t){const s=ku(i.raw,e);n.has(s)||n.set(s,[]),n.get(s).push(i)}return n}function C5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!e.length)return[];const s=Rue(t,e[0]),r=[],a=e.slice(1);return s.forEach((o,l)=>{const u=e[0],c=`${i}_${u}_${l}`;r.push({depth:n,id:c,key:u,value:l,items:a.length?C5(o,a,n+1,c):o,type:"group"})}),r}function w5(t,e){const n=[];for(const i of t)"type"in i&&i.type==="group"?(i.value!=null&&n.push(i),(e.has(i.id)||i.value==null)&&n.push(...w5(i.items,e))):n.push(i);return n}function E_(t,e,n){return{flatItems:V(()=>{if(!e.value.length)return t.value;const s=C5(t.value,e.value.map(r=>r.key));return w5(s,n.value)})}}function C_(t){let{page:e,itemsPerPage:n,sortBy:i,groupBy:s,search:r}=t;const a=Vn("VDataTable"),o=V(()=>({page:e.value,itemsPerPage:n.value,sortBy:i.value,groupBy:s.value,search:r.value}));let l=null;$e(o,()=>{Yi(l,o.value)||(l&&l.search!==o.value.search&&(e.value=1),a.emit("update:options",o.value),l=o.value)},{deep:!0,immediate:!0})}const sw=ue({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),x5=Symbol.for("vuetify:data-table-pagination");function rw(t){const e=et(t,"page",void 0,i=>Number(i??1)),n=et(t,"itemsPerPage",void 0,i=>Number(i??10));return{page:e,itemsPerPage:n}}function aw(t){const{page:e,itemsPerPage:n,itemsLength:i}=t,s=V(()=>n.value===-1?0:n.value*(e.value-1)),r=V(()=>n.value===-1?i.value:Math.min(i.value,s.value+n.value)),a=V(()=>n.value===-1||i.value===0?1:Math.ceil(i.value/n.value));$e([e,a],()=>{e.value>a.value&&(e.value=a.value)});function o(h){n.value=h,e.value=1}function l(){e.value=_n(e.value+1,1,a.value)}function u(){e.value=_n(e.value-1,1,a.value)}function c(h){e.value=_n(h,1,a.value)}const d={page:e,itemsPerPage:n,startIndex:s,stopIndex:r,pageCount:a,itemsLength:i,nextPage:l,prevPage:u,setPage:c,setItemsPerPage:o};return Jt(x5,d),d}function Lue(){const t=vt(x5);if(!t)throw new Error("Missing pagination!");return t}function I5(t){const e=Vn("usePaginatedItems"),{items:n,startIndex:i,stopIndex:s,itemsPerPage:r}=t,a=V(()=>r.value<=0?n.value:n.value.slice(i.value,s.value));return $e(a,o=>{e.emit("update:currentItems",o)},{immediate:!0}),{paginatedItems:a}}const Oue={showSelectAll:!1,allSelected:()=>[],select:t=>{var i;let{items:e,value:n}=t;return new Set(n?[(i=e[0])==null?void 0:i.value]:[])},selectAll:t=>{let{selected:e}=t;return e}},A5={showSelectAll:!0,allSelected:t=>{let{currentPage:e}=t;return e},select:t=>{let{items:e,value:n,selected:i}=t;for(const s of e)n?i.add(s.value):i.delete(s.value);return i},selectAll:t=>{let{value:e,currentPage:n,selected:i}=t;return A5.select({items:n,value:e,selected:i})}},k5={showSelectAll:!0,allSelected:t=>{let{allItems:e}=t;return e},select:t=>{let{items:e,value:n,selected:i}=t;for(const s of e)n?i.add(s.value):i.delete(s.value);return i},selectAll:t=>{let{value:e,allItems:n,selected:i}=t;return k5.select({items:n,value:e,selected:i})}},P5=ue({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Yi}},"DataTable-select"),D5=Symbol.for("vuetify:data-table-selection");function w_(t,e){let{allItems:n,currentPage:i}=e;const s=et(t,"modelValue",t.modelValue,w=>new Set(bn(w).map(P=>{var M;return((M=n.value.find(F=>t.valueComparator(P,F.value)))==null?void 0:M.value)??P})),w=>[...w.values()]),r=V(()=>n.value.filter(w=>w.selectable)),a=V(()=>i.value.filter(w=>w.selectable)),o=V(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;switch(t.selectStrategy){case"single":return Oue;case"all":return k5;case"page":default:return A5}}),l=Ue(null);function u(w){return bn(w).every(P=>s.value.has(P.value))}function c(w){return bn(w).some(P=>s.value.has(P.value))}function d(w,P){const M=o.value.select({items:w,value:P,selected:new Set(s.value)});s.value=M}function h(w,P,M){const F=[];if(P=P??i.value.findIndex(U=>U.value===w.value),t.selectStrategy!=="single"&&(M!=null&&M.shiftKey)&&l.value!==null){const[U,D]=[l.value,P].sort((S,y)=>S-y);F.push(...i.value.slice(U,D+1))}else F.push(w),l.value=P;d(F,!u([w]))}function f(w){const P=o.value.selectAll({value:w,allItems:r.value,currentPage:a.value,selected:new Set(s.value)});s.value=P}const g=V(()=>s.value.size>0),v=V(()=>{const w=o.value.allSelected({allItems:r.value,currentPage:a.value});return!!w.length&&u(w)}),b=V(()=>o.value.showSelectAll),I={toggleSelect:h,select:d,selectAll:f,isSelected:u,isSomeSelected:c,someSelected:g,allSelected:v,showSelectAll:b,lastSelectedIndex:l,selectStrategy:o};return Jt(D5,I),I}function x_(){const t=vt(D5);if(!t)throw new Error("Missing selection!");return t}const R5=ue({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),L5=Symbol.for("vuetify:data-table-sort");function I_(t){const e=et(t,"sortBy"),n=ye(t,"mustSort"),i=ye(t,"multiSort");return{sortBy:e,mustSort:n,multiSort:i}}function A_(t){const{sortBy:e,mustSort:n,multiSort:i,page:s}=t,r=l=>{if(l.key==null)return;let u=e.value.map(d=>({...d}))??[];const c=u.find(d=>d.key===l.key);c?c.order==="desc"?n.value&&u.length===1?c.order="asc":u=u.filter(d=>d.key!==l.key):c.order="desc":i.value?u.push({key:l.key,order:"asc"}):u=[{key:l.key,order:"asc"}],e.value=u,s&&(s.value=1)};function a(l){return!!e.value.find(u=>u.key===l.key)}const o={sortBy:e,toggleSort:r,isSorted:a};return Jt(L5,o),o}function O5(){const t=vt(L5);if(!t)throw new Error("Missing sort!");return t}function ow(t,e,n,i){const s=Dn();return{sortedItems:V(()=>{var a,o;return n.value.length?Nue(e.value,n.value,s.current.value,{transform:i==null?void 0:i.transform,sortFunctions:{...t.customKeySort,...(a=i==null?void 0:i.sortFunctions)==null?void 0:a.value},sortRawFunctions:(o=i==null?void 0:i.sortRawFunctions)==null?void 0:o.value}):e.value})}}function Nue(t,e,n,i){const s=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return t.map(a=>[a,i!=null&&i.transform?i.transform(a):a]).sort((a,o)=>{var l,u;for(let c=0;c<e.length;c++){let d=!1;const h=e[c].key,f=e[c].order??"asc";if(f===!1)continue;let g=ku(a[1],h),v=ku(o[1],h),b=a[0].raw,I=o[0].raw;if(f==="desc"&&([g,v]=[v,g],[b,I]=[I,b]),(l=i==null?void 0:i.sortRawFunctions)!=null&&l[h]){const w=i.sortRawFunctions[h](b,I);if(w==null)continue;if(d=!0,w)return w}if((u=i==null?void 0:i.sortFunctions)!=null&&u[h]){const w=i.sortFunctions[h](g,v);if(w==null)continue;if(d=!0,w)return w}if(!d){if(g instanceof Date&&v instanceof Date)return g.getTime()-v.getTime();if([g,v]=[g,v].map(w=>w!=null?w.toString().toLocaleLowerCase():w),g!==v)return Yp(g)&&Yp(v)?0:Yp(g)?-1:Yp(v)?1:!isNaN(g)&&!isNaN(v)?Number(g)-Number(v):s.compare(g,v)}}return 0}).map(a=>{let[o]=a;return o})}const Mue=ue({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function Vue(t,e){const n=t.returnObject?e:qn(e,t.itemValue),i=qn(e,t.itemSelectable,!0);return{type:"item",value:n,selectable:i,raw:e}}function Fue(t,e){const n=[];for(const i of e)n.push(Vue(t,i));return n}function Bue(t){return{items:V(()=>Fue(t,t.items))}}const Uue=ue({search:String,loading:Boolean,...Ke(),...Mue(),...P5(),...R5(),...sw({itemsPerPage:5}),..._5(),...nw(),...lp(),...yt(),...Br({transition:{component:fm,hideOnLeave:!0}})},"VDataIterator"),$ue=Te()({name:"VDataIterator",props:Uue(),emits:{"update:modelValue":t=>!0,"update:groupBy":t=>!0,"update:page":t=>!0,"update:itemsPerPage":t=>!0,"update:sortBy":t=>!0,"update:options":t=>!0,"update:expanded":t=>!0,"update:currentItems":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"groupBy"),s=ye(t,"search"),{items:r}=Bue(t),{filteredItems:a}=up(t,r,s,{transform:j=>j.raw}),{sortBy:o,multiSort:l,mustSort:u}=I_(t),{page:c,itemsPerPage:d}=rw(t),{toggleSort:h}=A_({sortBy:o,multiSort:l,mustSort:u,page:c}),{sortByWithGroups:f,opened:g,extractRows:v,isGroupOpen:b,toggleGroup:I}=S_({groupBy:i,sortBy:o}),{sortedItems:w}=ow(t,a,f,{transform:j=>j.raw}),{flatItems:P}=E_(w,i,g),M=V(()=>P.value.length),{startIndex:F,stopIndex:U,pageCount:D,prevPage:S,nextPage:y,setItemsPerPage:E,setPage:A}=aw({page:c,itemsPerPage:d,itemsLength:M}),{paginatedItems:k}=I5({items:P,startIndex:F,stopIndex:U,itemsPerPage:d}),R=V(()=>v(k.value)),{isSelected:W,select:se,selectAll:ae,toggleSelect:Z}=w_(t,{allItems:r,currentPage:R}),{isExpanded:ne,toggleExpand:ee}=T_(t);C_({page:c,itemsPerPage:d,sortBy:o,groupBy:i,search:s});const Q=V(()=>({page:c.value,itemsPerPage:d.value,sortBy:o.value,pageCount:D.value,toggleSort:h,prevPage:S,nextPage:y,setPage:A,setItemsPerPage:E,isSelected:W,select:se,selectAll:ae,toggleSelect:Z,isExpanded:ne,toggleExpand:ee,isGroupOpen:b,toggleGroup:I,items:R.value,groupedItems:k.value}));return Pe(()=>_(t.tag,{class:["v-data-iterator",{"v-data-iterator--loading":t.loading},t.class],style:t.style},{default:()=>{var j,le;return[(j=n.header)==null?void 0:j.call(n,Q.value),_(Ki,{transition:t.transition},{default:()=>{var pe,Se;return[t.loading?_(ep,{key:"loader",name:"v-data-iterator",active:!0},{default:Le=>{var we;return(we=n.loader)==null?void 0:we.call(n,Le)}}):_("div",{key:"items"},[k.value.length?(Se=n.default)==null?void 0:Se.call(n,Q.value):(pe=n["no-data"])==null?void 0:pe.call(n)])]}}),(le=n.footer)==null?void 0:le.call(n,Q.value)]}})),{}}});function Hue(){const t=Me([]);UD(()=>t.value=[]);function e(n,i){t.value[i]=n}return{refs:t,updateRef:e}}const jue=ue({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:t=>t.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:t=>t%1===0},totalVisible:[Number,String],firstIcon:{type:nt,default:"$first"},prevIcon:{type:nt,default:"$prev"},nextIcon:{type:nt,default:"$next"},lastIcon:{type:nt,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ks(),...Ke(),...fi(),...ni(),...fn(),...xa(),...yt({tag:"nav"}),...Dt(),...hr({variant:"text"})},"VPagination"),RS=Te()({name:"VPagination",props:jue(),emits:{"update:modelValue":t=>!0,first:t=>!0,prev:t=>!0,next:t=>!0,last:t=>!0},setup(t,e){let{slots:n,emit:i}=e;const s=et(t,"modelValue"),{t:r,n:a}=Dn(),{isRtl:o}=Gn(),{themeClasses:l}=zt(t),{width:u}=As(),c=Ue(-1);Pn(void 0,{scoped:!0});const{resizeRef:d}=Lr(S=>{if(!S.length)return;const{target:y,contentRect:E}=S[0],A=y.querySelector(".v-pagination__list > *");if(!A)return;const k=E.width,R=A.offsetWidth+parseFloat(getComputedStyle(A).marginRight)*2;c.value=v(k,R)}),h=V(()=>parseInt(t.length,10)),f=V(()=>parseInt(t.start,10)),g=V(()=>t.totalVisible!=null?parseInt(t.totalVisible,10):c.value>=0?c.value:v(u.value,58));function v(S,y){const E=t.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((S-y*E)/y).toFixed(2))))}const b=V(()=>{if(h.value<=0||isNaN(h.value)||h.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=0)return[];if(g.value===1)return[s.value];if(h.value<=g.value)return na(h.value,f.value);const S=g.value%2===0,y=S?g.value/2:Math.floor(g.value/2),E=S?y:y+1,A=h.value-y;if(E-s.value>=0)return[...na(Math.max(1,g.value-1),f.value),t.ellipsis,h.value];if(s.value-A>=(S?1:0)){const k=g.value-1,R=h.value-k+f.value;return[f.value,t.ellipsis,...na(k,R)]}else{const k=Math.max(1,g.value-2),R=k===1?s.value:s.value-Math.ceil(k/2)+f.value;return[f.value,t.ellipsis,...na(k,R),t.ellipsis,h.value]}});function I(S,y,E){S.preventDefault(),s.value=y,E&&i(E,y)}const{refs:w,updateRef:P}=Hue();Pn({VPaginationBtn:{color:ye(t,"color"),border:ye(t,"border"),density:ye(t,"density"),size:ye(t,"size"),variant:ye(t,"variant"),rounded:ye(t,"rounded"),elevation:ye(t,"elevation")}});const M=V(()=>b.value.map((S,y)=>{const E=A=>P(A,y);if(typeof S=="string")return{isActive:!1,key:`ellipsis-${y}`,page:S,props:{ref:E,ellipsis:!0,icon:!0,disabled:!0}};{const A=S===s.value;return{isActive:A,key:S,page:a(S),props:{ref:E,ellipsis:!1,icon:!0,disabled:!!t.disabled||Number(t.length)<2,color:A?t.activeColor:t.color,"aria-current":A,"aria-label":r(A?t.currentPageAriaLabel:t.pageAriaLabel,S),onClick:k=>I(k,S)}}}})),F=V(()=>{const S=!!t.disabled||s.value<=f.value,y=!!t.disabled||s.value>=f.value+h.value-1;return{first:t.showFirstLastPage?{icon:o.value?t.lastIcon:t.firstIcon,onClick:E=>I(E,f.value,"first"),disabled:S,"aria-label":r(t.firstAriaLabel),"aria-disabled":S}:void 0,prev:{icon:o.value?t.nextIcon:t.prevIcon,onClick:E=>I(E,s.value-1,"prev"),disabled:S,"aria-label":r(t.previousAriaLabel),"aria-disabled":S},next:{icon:o.value?t.prevIcon:t.nextIcon,onClick:E=>I(E,s.value+1,"next"),disabled:y,"aria-label":r(t.nextAriaLabel),"aria-disabled":y},last:t.showFirstLastPage?{icon:o.value?t.firstIcon:t.lastIcon,onClick:E=>I(E,f.value+h.value-1,"last"),disabled:y,"aria-label":r(t.lastAriaLabel),"aria-disabled":y}:void 0}});function U(){var y;const S=s.value-f.value;(y=w.value[S])==null||y.$el.focus()}function D(S){S.key===xT.left&&!t.disabled&&s.value>Number(t.start)?(s.value=s.value-1,kt(U)):S.key===xT.right&&!t.disabled&&s.value<f.value+h.value-1&&(s.value=s.value+1,kt(U))}return Pe(()=>_(t.tag,{ref:d,class:["v-pagination",l.value,t.class],style:t.style,role:"navigation","aria-label":r(t.ariaLabel),onKeydown:D,"data-test":"v-pagination-root"},{default:()=>[_("ul",{class:"v-pagination__list"},[t.showFirstLastPage&&_("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(F.value.first):_(Ot,Ie({_as:"VPaginationBtn"},F.value.first),null)]),_("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(F.value.prev):_(Ot,Ie({_as:"VPaginationBtn"},F.value.prev),null)]),M.value.map((S,y)=>_("li",{key:S.key,class:["v-pagination__item",{"v-pagination__item--is-active":S.isActive}],"data-test":"v-pagination-item"},[n.item?n.item(S):_(Ot,Ie({_as:"VPaginationBtn"},S.props),{default:()=>[S.page]})])),_("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(F.value.next):_(Ot,Ie({_as:"VPaginationBtn"},F.value.next),null)]),t.showFirstLastPage&&_("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(F.value.last):_(Ot,Ie({_as:"VPaginationBtn"},F.value.last),null)])])]})),{}}}),lw=ue({prevIcon:{type:nt,default:"$prev"},nextIcon:{type:nt,default:"$next"},firstIcon:{type:nt,default:"$first"},lastIcon:{type:nt,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),bm=Te()({name:"VDataTableFooter",props:lw(),setup(t,e){let{slots:n}=e;const{t:i}=Dn(),{page:s,pageCount:r,startIndex:a,stopIndex:o,itemsLength:l,itemsPerPage:u,setItemsPerPage:c}=Lue(),d=V(()=>t.itemsPerPageOptions.map(h=>typeof h=="number"?{value:h,title:h===-1?i("$vuetify.dataFooter.itemsPerPageAll"):String(h)}:{...h,title:isNaN(Number(h.title))?i(h.title):h.title}));return Pe(()=>{var f;const h=RS.filterProps(t);return _("div",{class:"v-data-table-footer"},[(f=n.prepend)==null?void 0:f.call(n),_("div",{class:"v-data-table-footer__items-per-page"},[_("span",null,[i(t.itemsPerPageText)]),_(QC,{items:d.value,modelValue:u.value,"onUpdate:modelValue":g=>c(Number(g)),density:"compact",variant:"outlined","hide-details":!0},null)]),_("div",{class:"v-data-table-footer__info"},[_("div",null,[i(t.pageText,l.value?a.value+1:0,o.value,l.value)])]),_("div",{class:"v-data-table-footer__pagination"},[_(RS,Ie({modelValue:s.value,"onUpdate:modelValue":g=>s.value=g,density:"comfortable","first-aria-label":t.firstPageLabel,"last-aria-label":t.lastPageLabel,length:r.value,"next-aria-label":t.nextPageLabel,"previous-aria-label":t.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":t.showCurrentPage?1:0,variant:"plain"},h),null)])])}),{}}}),Wv=JX({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(t,e)=>{let{slots:n}=e;const i=t.tag??"td";return _(i,{class:["v-data-table__td",{"v-data-table-column--fixed":t.fixed,"v-data-table-column--last-fixed":t.lastFixed,"v-data-table-column--no-padding":t.noPadding,"v-data-table-column--nowrap":t.nowrap},`v-data-table-column--align-${t.align}`],style:{height:We(t.height),width:We(t.width),maxWidth:We(t.maxWidth),left:We(t.fixedOffset||null)}},{default:()=>{var s;return[(s=n.default)==null?void 0:s.call(n)]}})}),que=ue({headers:Array},"DataTable-header"),N5=Symbol.for("vuetify:data-table-headers"),M5={title:"",sortable:!1},zue={...M5,width:48};function Wue(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,i)=>{let s=!1;for(let r=0;r<e.length;r++)if(e[r].priority>i){e.splice(r,0,{element:n,priority:i}),s=!0;break}s||e.push({element:n,priority:i})},size:()=>e.length,count:()=>{let n=0;if(!e.length)return 0;const i=Math.floor(e[0].priority);for(let s=0;s<e.length;s++)Math.floor(e[s].priority)===i&&(n+=1);return n},dequeue:()=>e.shift()}}function LS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!t.children)e.push(t);else for(const n of t.children)LS(n,e);return e}function V5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of t)n.key&&e.add(n.key),n.children&&V5(n.children,e);return e}function Gue(t){if(t.key){if(t.key==="data-table-group")return M5;if(["data-table-expand","data-table-select"].includes(t.key))return zue}}function uw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.children?Math.max(e,...t.children.map(n=>uw(n,e+1))):e}function Kue(t){let e=!1;function n(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r)if(a&&(r.fixed=!0),r.fixed)if(r.children)for(let o=r.children.length-1;o>=0;o--)n(r.children[o],!0);else e?isNaN(Number(r.width))?(`${r.key}`,void 0):r.minWidth=Math.max(Number(r.width)||0,Number(r.minWidth)||0):r.lastFixed=!0,e=!0;else if(r.children)for(let o=r.children.length-1;o>=0;o--)n(r.children[o]);else e=!1}for(let r=t.length-1;r>=0;r--)n(t[r]);function i(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!r)return a;if(r.children){r.fixedOffset=a;for(const o of r.children)a=i(o,a)}else r.fixed&&(r.fixedOffset=a,a+=parseFloat(r.width||"0")||0);return a}let s=0;for(const r of t)s=i(r,s)}function Yue(t,e){const n=[];let i=0;const s=Wue(t);for(;s.size()>0;){let a=s.count();const o=[];let l=1;for(;a>0;){const{element:u,priority:c}=s.dequeue(),d=e-i-uw(u);if(o.push({...u,rowspan:d??1,colspan:u.children?LS(u).length:1}),u.children)for(const h of u.children){const f=c%1+l/Math.pow(10,i+2);s.enqueue(h,i+d+f)}l+=1,a-=1}i+=1,n.push(o)}return{columns:t.map(a=>LS(a)).flat(),headers:n}}function F5(t){const e=[];for(const n of t){const i={...Gue(n),...n},s=i.key??(typeof i.value=="string"?i.value:null),r=i.value??s??null,a={...i,key:s,value:r,sortable:i.sortable??(i.key!=null||!!i.sort),children:i.children?F5(i.children):void 0};e.push(a)}return e}function cw(t,e){const n=Me([]),i=Me([]),s=Me({}),r=Me({}),a=Me({});An(()=>{var v,b,I;const u=(t.headers||Object.keys(t.items[0]??{}).map(w=>({key:w,title:Ta(w)}))).slice(),c=V5(u);(v=e==null?void 0:e.groupBy)!=null&&v.value.length&&!c.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),(b=e==null?void 0:e.showSelect)!=null&&b.value&&!c.has("data-table-select")&&u.unshift({key:"data-table-select"}),(I=e==null?void 0:e.showExpand)!=null&&I.value&&!c.has("data-table-expand")&&u.push({key:"data-table-expand"});const d=F5(u);Kue(d);const h=Math.max(...d.map(w=>uw(w)))+1,f=Yue(d,h);n.value=f.headers,i.value=f.columns;const g=f.headers.flat(1);for(const w of g)w.key&&(w.sortable&&(w.sort&&(s.value[w.key]=w.sort),w.sortRaw&&(r.value[w.key]=w.sortRaw)),w.filter&&(a.value[w.key]=w.filter))});const o={headers:n,columns:i,sortFunctions:s,sortRawFunctions:r,filterFunctions:a};return Jt(N5,o),o}function k_(){const t=vt(N5);if(!t)throw new Error("Missing headers!");return t}const B5=ue({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:nt,default:"$sortAsc"},sortDescIcon:{type:nt,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...ju(),...f_()},"VDataTableHeaders"),Lu=Te()({name:"VDataTableHeaders",props:B5(),setup(t,e){let{slots:n}=e;const{t:i}=Dn(),{toggleSort:s,sortBy:r,isSorted:a}=O5(),{someSelected:o,allSelected:l,selectAll:u,showSelectAll:c}=x_(),{columns:d,headers:h}=k_(),{loaderClasses:f}=Zm(t);function g(S,y){if(!(!(t.sticky||t.fixedHeader)&&!S.fixed))return{position:"sticky",left:S.fixed?We(S.fixedOffset):void 0,top:t.sticky||t.fixedHeader?`calc(var(--v-table-header-height) * ${y})`:void 0}}function v(S){const y=r.value.find(E=>E.key===S.key);return y?y.order==="asc"?t.sortAscIcon:t.sortDescIcon:t.sortAscIcon}const{backgroundColorClasses:b,backgroundColorStyles:I}=en(t,"color"),{displayClasses:w,mobile:P}=As(t),M=V(()=>({headers:h.value,columns:d.value,toggleSort:s,isSorted:a,sortBy:r.value,someSelected:o.value,allSelected:l.value,selectAll:u,getSortIcon:v})),F=V(()=>["v-data-table__th",{"v-data-table__th--sticky":t.sticky||t.fixedHeader},w.value,f.value]),U=S=>{let{column:y,x:E,y:A}=S;const k=y.key==="data-table-select"||y.key==="data-table-expand",R=Ie(t.headerProps??{},y.headerProps??{});return _(Wv,Ie({tag:"th",align:y.align,class:[{"v-data-table__th--sortable":y.sortable&&!t.disableSort,"v-data-table__th--sorted":a(y),"v-data-table__th--fixed":y.fixed},...F.value],style:{width:We(y.width),minWidth:We(y.minWidth),maxWidth:We(y.maxWidth),...g(y,A)},colspan:y.colspan,rowspan:y.rowspan,onClick:y.sortable?()=>s(y):void 0,fixed:y.fixed,nowrap:y.nowrap,lastFixed:y.lastFixed,noPadding:k},R),{default:()=>{var ae;const W=`header.${y.key}`,se={column:y,selectAll:u,isSorted:a,toggleSort:s,sortBy:r.value,someSelected:o.value,allSelected:l.value,getSortIcon:v};return n[W]?n[W](se):y.key==="data-table-select"?((ae=n["header.data-table-select"])==null?void 0:ae.call(n,se))??(c.value&&_(no,{modelValue:l.value,indeterminate:o.value&&!l.value,"onUpdate:modelValue":u},null)):_("div",{class:"v-data-table-header__content"},[_("span",null,[y.title]),y.sortable&&!t.disableSort&&_(Ht,{key:"icon",class:"v-data-table-header__sort-icon",icon:v(y)},null),t.multiSort&&a(y)&&_("div",{key:"badge",class:["v-data-table-header__sort-badge",...b.value],style:I.value},[r.value.findIndex(Z=>Z.key===y.key)+1])])}})},D=()=>{const S=Ie(t.headerProps??{}??{}),y=V(()=>d.value.filter(A=>(A==null?void 0:A.sortable)&&!t.disableSort)),E=V(()=>{if(d.value.find(k=>k.key==="data-table-select")!=null)return l.value?"$checkboxOn":o.value?"$checkboxIndeterminate":"$checkboxOff"});return _(Wv,Ie({tag:"th",class:[...F.value],colspan:h.value.length+1},S),{default:()=>[_("div",{class:"v-data-table-header__content"},[_(QC,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:y.value,label:i("$vuetify.dataTable.sortBy"),multiple:t.multiSort,variant:"underlined","onClick:clear":()=>r.value=[],appendIcon:E.value,"onClick:append":()=>u(!l.value)},{...n,chip:A=>{var k;return _(ch,{onClick:(k=A.item.raw)!=null&&k.sortable?()=>s(A.item.raw):void 0,onMousedown:R=>{R.preventDefault(),R.stopPropagation()}},{default:()=>[A.item.title,_(Ht,{class:["v-data-table__td-sort-icon",a(A.item.raw)&&"v-data-table__td-sort-icon-active"],icon:v(A.item.raw),size:"small"},null)]})}})])]})};Pe(()=>P.value?_("tr",null,[_(D,null,null)]):_(Ye,null,[n.headers?n.headers(M.value):h.value.map((S,y)=>_("tr",null,[S.map((E,A)=>_(U,{column:E,x:A,y},null))])),t.loading&&_("tr",{class:"v-data-table-progress"},[_("th",{colspan:d.value.length},[_(ep,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0},{default:n.loader})])])]))}}),Xue=ue({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),Que=Te()({name:"VDataTableGroupHeaderRow",props:Xue(),setup(t,e){let{slots:n}=e;const{isGroupOpen:i,toggleGroup:s,extractRows:r}=E5(),{isSelected:a,isSomeSelected:o,select:l}=x_(),{columns:u}=k_(),c=V(()=>r([t.item]));return()=>_("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":t.item.depth}},[u.value.map(d=>{var h,f;if(d.key==="data-table-group"){const g=i(t.item)?"$expand":"$next",v=()=>s(t.item);return((h=n["data-table-group"])==null?void 0:h.call(n,{item:t.item,count:c.value.length,props:{icon:g,onClick:v}}))??_(Wv,{class:"v-data-table-group-header-row__column"},{default:()=>[_(Ot,{size:"small",variant:"text",icon:g,onClick:v},null),_("span",null,[t.item.value]),_("span",null,[zs("("),c.value.length,zs(")")])]})}if(d.key==="data-table-select"){const g=a(c.value),v=o(c.value)&&!g,b=I=>l(c.value,I);return((f=n["data-table-select"])==null?void 0:f.call(n,{props:{modelValue:g,indeterminate:v,"onUpdate:modelValue":b}}))??_("td",null,[_(no,{modelValue:g,indeterminate:v,"onUpdate:modelValue":b},null)])}return _("td",null,null)})])}}),Jue=ue({index:Number,item:Object,cellProps:[Object,Function],onClick:wi(),onContextmenu:wi(),onDblclick:wi(),...ju()},"VDataTableRow"),dw=Te()({name:"VDataTableRow",props:Jue(),setup(t,e){let{slots:n}=e;const{displayClasses:i,mobile:s}=As(t,"v-data-table__tr"),{isSelected:r,toggleSelect:a,someSelected:o,allSelected:l,selectAll:u}=x_(),{isExpanded:c,toggleExpand:d}=T5(),{toggleSort:h,sortBy:f,isSorted:g}=O5(),{columns:v}=k_();Pe(()=>_("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(t.onClick||t.onContextmenu||t.onDblclick)},i.value],onClick:t.onClick,onContextmenu:t.onContextmenu,onDblclick:t.onDblclick},[t.item&&v.value.map((b,I)=>{const w=t.item,P=`item.${b.key}`,M=`header.${b.key}`,F={index:t.index,item:w.raw,internalItem:w,value:ku(w.columns,b.key),column:b,isSelected:r,toggleSelect:a,isExpanded:c,toggleExpand:d},U={column:b,selectAll:u,isSorted:g,toggleSort:h,sortBy:f.value,someSelected:o.value,allSelected:l.value,getSortIcon:()=>""},D=typeof t.cellProps=="function"?t.cellProps({index:F.index,item:F.item,internalItem:F.internalItem,value:F.value,column:b}):t.cellProps,S=typeof b.cellProps=="function"?b.cellProps({index:F.index,item:F.item,internalItem:F.internalItem,value:F.value}):b.cellProps;return _(Wv,Ie({align:b.align,class:{"v-data-table__td--expanded-row":b.key==="data-table-expand","v-data-table__td--select-row":b.key==="data-table-select"},fixed:b.fixed,fixedOffset:b.fixedOffset,lastFixed:b.lastFixed,maxWidth:s.value?void 0:b.maxWidth,noPadding:b.key==="data-table-select"||b.key==="data-table-expand",nowrap:b.nowrap,width:s.value?void 0:b.width},D,S),{default:()=>{var E,A,k,R;if(b.key==="data-table-select")return((E=n["item.data-table-select"])==null?void 0:E.call(n,{...F,props:{disabled:!w.selectable,modelValue:r([w]),onClick:Oc(()=>a(w),["stop"])}}))??_(no,{disabled:!w.selectable,modelValue:r([w]),onClick:Oc(W=>a(w,t.index,W),["stop"])},null);if(b.key==="data-table-expand")return((A=n["item.data-table-expand"])==null?void 0:A.call(n,{...F,props:{icon:c(w)?"$collapse":"$expand",size:"small",variant:"text",onClick:Oc(()=>d(w),["stop"])}}))??_(Ot,{icon:c(w)?"$collapse":"$expand",size:"small",variant:"text",onClick:Oc(()=>d(w),["stop"])},null);if(n[P]&&!s.value)return n[P](F);const y=Ir(F.value);return s.value?_(Ye,null,[_("div",{class:"v-data-table__td-title"},[((k=n[M])==null?void 0:k.call(n,U))??b.title]),_("div",{class:"v-data-table__td-value"},[((R=n[P])==null?void 0:R.call(n,F))??y])]):y}})})]))}}),U5=ue({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...ju()},"VDataTableRows"),Ou=Te()({name:"VDataTableRows",inheritAttrs:!1,props:U5(),setup(t,e){let{attrs:n,slots:i}=e;const{columns:s}=k_(),{expandOnClick:r,toggleExpand:a,isExpanded:o}=T5(),{isSelected:l,toggleSelect:u}=x_(),{toggleGroup:c,isGroupOpen:d}=E5(),{t:h}=Dn(),{mobile:f}=As(t);return Pe(()=>{var g,v;return t.loading&&(!t.items.length||i.loading)?_("tr",{class:"v-data-table-rows-loading",key:"loading"},[_("td",{colspan:s.value.length},[((g=i.loading)==null?void 0:g.call(i))??h(t.loadingText)])]):!t.loading&&!t.items.length&&!t.hideNoData?_("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[_("td",{colspan:s.value.length},[((v=i["no-data"])==null?void 0:v.call(i))??h(t.noDataText)])]):_(Ye,null,[t.items.map((b,I)=>{var M;if(b.type==="group"){const F={index:I,item:b,columns:s.value,isExpanded:o,toggleExpand:a,isSelected:l,toggleSelect:u,toggleGroup:c,isGroupOpen:d};return i["group-header"]?i["group-header"](F):_(Que,Ie({key:`group-header_${b.id}`,item:b},gA(n,":group-header",()=>F)),i)}const w={index:I,item:b.raw,internalItem:b,columns:s.value,isExpanded:o,toggleExpand:a,isSelected:l,toggleSelect:u},P={...w,props:Ie({key:`item_${b.key??b.index}`,onClick:r.value?()=>{a(b)}:void 0,index:I,item:b,cellProps:t.cellProps,mobile:f.value},gA(n,":row",()=>w),typeof t.rowProps=="function"?t.rowProps({item:w.item,index:w.index,internalItem:w.internalItem}):t.rowProps)};return _(Ye,{key:P.props.key},[i.item?i.item(P):_(dw,P.props,i),o(b)&&((M=i["expanded-row"])==null?void 0:M.call(i,w))])})])}),{}}}),$5=ue({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...Ke(),...fi(),...yt(),...Dt()},"VTable"),Nu=Te()({name:"VTable",props:$5(),setup(t,e){let{slots:n,emit:i}=e;const{themeClasses:s}=zt(t),{densityClasses:r}=es(t);return Pe(()=>_(t.tag,{class:["v-table",{"v-table--fixed-height":!!t.height,"v-table--fixed-header":t.fixedHeader,"v-table--fixed-footer":t.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":t.hover},s.value,r.value,t.class],style:t.style},{default:()=>{var a,o,l;return[(a=n.top)==null?void 0:a.call(n),n.default?_("div",{class:"v-table__wrapper",style:{height:We(t.height)}},[_("table",null,[n.default()])]):(o=n.wrapper)==null?void 0:o.call(n),(l=n.bottom)==null?void 0:l.call(n)]}})),{}}}),Zue=ue({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function ece(t,e,n,i){const s=t.returnObject?e:qn(e,t.itemValue),r=qn(e,t.itemSelectable,!0),a=i.reduce((o,l)=>(l.key!=null&&(o[l.key]=qn(e,l.value)),o),{});return{type:"item",key:t.returnObject?qn(e,t.itemValue):s,index:n,value:s,selectable:r,columns:a,raw:e}}function tce(t,e,n){return e.map((i,s)=>ece(t,i,s,n))}function hw(t,e){return{items:V(()=>tce(t,t.items,e.value))}}const fw=ue({...U5(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,..._5(),...nw(),...que(),...Zue(),...P5(),...R5(),...B5(),...$5()},"DataTable"),nce=ue({...sw(),...fw(),...lp(),...lw()},"VDataTable"),ice=Te()({name:"VDataTable",props:nce(),emits:{"update:modelValue":t=>!0,"update:page":t=>!0,"update:itemsPerPage":t=>!0,"update:sortBy":t=>!0,"update:options":t=>!0,"update:groupBy":t=>!0,"update:expanded":t=>!0,"update:currentItems":t=>!0},setup(t,e){let{attrs:n,slots:i}=e;const{groupBy:s}=iw(t),{sortBy:r,multiSort:a,mustSort:o}=I_(t),{page:l,itemsPerPage:u}=rw(t),{disableSort:c}=gl(t),{columns:d,headers:h,sortFunctions:f,sortRawFunctions:g,filterFunctions:v}=cw(t,{groupBy:s,showSelect:ye(t,"showSelect"),showExpand:ye(t,"showExpand")}),{items:b}=hw(t,d),I=ye(t,"search"),{filteredItems:w}=up(t,b,I,{transform:re=>re.columns,customKeyFilter:v}),{toggleSort:P}=A_({sortBy:r,multiSort:a,mustSort:o,page:l}),{sortByWithGroups:M,opened:F,extractRows:U,isGroupOpen:D,toggleGroup:S}=S_({groupBy:s,sortBy:r,disableSort:c}),{sortedItems:y}=ow(t,w,M,{transform:re=>({...re.raw,...re.columns}),sortFunctions:f,sortRawFunctions:g}),{flatItems:E}=E_(y,s,F),A=V(()=>E.value.length),{startIndex:k,stopIndex:R,pageCount:W,setItemsPerPage:se}=aw({page:l,itemsPerPage:u,itemsLength:A}),{paginatedItems:ae}=I5({items:E,startIndex:k,stopIndex:R,itemsPerPage:u}),Z=V(()=>U(ae.value)),{isSelected:ne,select:ee,selectAll:Q,toggleSelect:j,someSelected:le,allSelected:pe}=w_(t,{allItems:b,currentPage:Z}),{isExpanded:Se,toggleExpand:Le}=T_(t);C_({page:l,itemsPerPage:u,sortBy:r,groupBy:s,search:I}),Pn({VDataTableRows:{hideNoData:ye(t,"hideNoData"),noDataText:ye(t,"noDataText"),loading:ye(t,"loading"),loadingText:ye(t,"loadingText")}});const we=V(()=>({page:l.value,itemsPerPage:u.value,sortBy:r.value,pageCount:W.value,toggleSort:P,setItemsPerPage:se,someSelected:le.value,allSelected:pe.value,isSelected:ne,select:ee,selectAll:Q,toggleSelect:j,isExpanded:Se,toggleExpand:Le,isGroupOpen:D,toggleGroup:S,items:Z.value.map(re=>re.raw),internalItems:Z.value,groupedItems:ae.value,columns:d.value,headers:h.value}));return Pe(()=>{const re=bm.filterProps(t),fe=Lu.filterProps(t),xe=Ou.filterProps(t),Ne=Nu.filterProps(t);return _(Nu,Ie({class:["v-data-table",{"v-data-table--show-select":t.showSelect,"v-data-table--loading":t.loading},t.class],style:t.style},Ne,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var be;return(be=i.top)==null?void 0:be.call(i,we.value)},default:()=>{var be,z,H,X,he,de;return i.default?i.default(we.value):_(Ye,null,[(be=i.colgroup)==null?void 0:be.call(i,we.value),!t.hideDefaultHeader&&_("thead",{key:"thead"},[_(Lu,fe,i)]),(z=i.thead)==null?void 0:z.call(i,we.value),!t.hideDefaultBody&&_("tbody",null,[(H=i["body.prepend"])==null?void 0:H.call(i,we.value),i.body?i.body(we.value):_(Ou,Ie(n,xe,{items:ae.value}),i),(X=i["body.append"])==null?void 0:X.call(i,we.value)]),(he=i.tbody)==null?void 0:he.call(i,we.value),(de=i.tfoot)==null?void 0:de.call(i,we.value)])},bottom:()=>i.bottom?i.bottom(we.value):!t.hideDefaultFooter&&_(Ye,null,[_(za,null,null),_(bm,re,{prepend:i["footer.prepend"]})])})}),{}}}),sce=ue({...kn(fw(),["hideDefaultFooter"]),...nw(),...ZF(),...lp()},"VDataTableVirtual"),rce=Te()({name:"VDataTableVirtual",props:sce(),emits:{"update:modelValue":t=>!0,"update:sortBy":t=>!0,"update:options":t=>!0,"update:groupBy":t=>!0,"update:expanded":t=>!0},setup(t,e){let{attrs:n,slots:i}=e;const{groupBy:s}=iw(t),{sortBy:r,multiSort:a,mustSort:o}=I_(t),{disableSort:l}=gl(t),{columns:u,headers:c,filterFunctions:d,sortFunctions:h,sortRawFunctions:f}=cw(t,{groupBy:s,showSelect:ye(t,"showSelect"),showExpand:ye(t,"showExpand")}),{items:g}=hw(t,u),v=ye(t,"search"),{filteredItems:b}=up(t,g,v,{transform:Ne=>Ne.columns,customKeyFilter:d}),{toggleSort:I}=A_({sortBy:r,multiSort:a,mustSort:o}),{sortByWithGroups:w,opened:P,extractRows:M,isGroupOpen:F,toggleGroup:U}=S_({groupBy:s,sortBy:r,disableSort:l}),{sortedItems:D}=ow(t,b,w,{transform:Ne=>({...Ne.raw,...Ne.columns}),sortFunctions:h,sortRawFunctions:f}),{flatItems:S}=E_(D,s,P),y=V(()=>M(S.value)),{isSelected:E,select:A,selectAll:k,toggleSelect:R,someSelected:W,allSelected:se}=w_(t,{allItems:y,currentPage:y}),{isExpanded:ae,toggleExpand:Z}=T_(t),{containerRef:ne,markerRef:ee,paddingTop:Q,paddingBottom:j,computedItems:le,handleItemResize:pe,handleScroll:Se,handleScrollend:Le,calculateVisibleItems:we,scrollToIndex:re}=e5(t,S),fe=V(()=>le.value.map(Ne=>Ne.raw));C_({sortBy:r,page:Ue(1),itemsPerPage:Ue(-1),groupBy:s,search:v}),Pn({VDataTableRows:{hideNoData:ye(t,"hideNoData"),noDataText:ye(t,"noDataText"),loading:ye(t,"loading"),loadingText:ye(t,"loadingText")}});const xe=V(()=>({sortBy:r.value,toggleSort:I,someSelected:W.value,allSelected:se.value,isSelected:E,select:A,selectAll:k,toggleSelect:R,isExpanded:ae,toggleExpand:Z,isGroupOpen:F,toggleGroup:U,items:y.value.map(Ne=>Ne.raw),internalItems:y.value,groupedItems:S.value,columns:u.value,headers:c.value}));return Pe(()=>{const Ne=Lu.filterProps(t),be=Ou.filterProps(t),z=Nu.filterProps(t);return _(Nu,Ie({class:["v-data-table",{"v-data-table--loading":t.loading},t.class],style:t.style},z,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var H;return(H=i.top)==null?void 0:H.call(i,xe.value)},wrapper:()=>{var H,X,he,de,_e,Oe;return _("div",{ref:ne,onScrollPassive:Se,onScrollend:Le,class:"v-table__wrapper",style:{height:We(t.height)}},[_("table",null,[(H=i.colgroup)==null?void 0:H.call(i,xe.value),!t.hideDefaultHeader&&_("thead",{key:"thead"},[_(Lu,Ne,i)]),(X=i.thead)==null?void 0:X.call(i,xe.value),!t.hideDefaultBody&&_("tbody",{key:"tbody"},[_("tr",{ref:ee,style:{height:We(Q.value),border:0}},[_("td",{colspan:u.value.length,style:{height:0,border:0}},null)]),(he=i["body.prepend"])==null?void 0:he.call(i,xe.value),_(Ou,Ie(n,be,{items:fe.value}),{...i,item:Re=>_(JF,{key:Re.internalItem.index,renderless:!0,"onUpdate:height":me=>pe(Re.internalItem.index,me)},{default:me=>{var He;let{itemRef:Ce}=me;return((He=i.item)==null?void 0:He.call(i,{...Re,itemRef:Ce}))??_(dw,Ie(Re.props,{ref:Ce,key:Re.internalItem.index,index:Re.internalItem.index}),i)}})}),(de=i["body.append"])==null?void 0:de.call(i,xe.value),_("tr",{style:{height:We(j.value),border:0}},[_("td",{colspan:u.value.length,style:{height:0,border:0}},null)])]),(_e=i.tbody)==null?void 0:_e.call(i,xe.value),(Oe=i.tfoot)==null?void 0:Oe.call(i,xe.value)])])},bottom:()=>{var H;return(H=i.bottom)==null?void 0:H.call(i,xe.value)}})}),{calculateVisibleItems:we,scrollToIndex:re}}}),ace=ue({itemsLength:{type:[Number,String],required:!0},...sw(),...fw(),...lw()},"VDataTableServer"),oce=Te()({name:"VDataTableServer",props:ace(),emits:{"update:modelValue":t=>!0,"update:page":t=>!0,"update:itemsPerPage":t=>!0,"update:sortBy":t=>!0,"update:options":t=>!0,"update:expanded":t=>!0,"update:groupBy":t=>!0},setup(t,e){let{attrs:n,slots:i}=e;const{groupBy:s}=iw(t),{sortBy:r,multiSort:a,mustSort:o}=I_(t),{page:l,itemsPerPage:u}=rw(t),{disableSort:c}=gl(t),d=V(()=>parseInt(t.itemsLength,10)),{columns:h,headers:f}=cw(t,{groupBy:s,showSelect:ye(t,"showSelect"),showExpand:ye(t,"showExpand")}),{items:g}=hw(t,h),{toggleSort:v}=A_({sortBy:r,multiSort:a,mustSort:o,page:l}),{opened:b,isGroupOpen:I,toggleGroup:w,extractRows:P}=S_({groupBy:s,sortBy:r,disableSort:c}),{pageCount:M,setItemsPerPage:F}=aw({page:l,itemsPerPage:u,itemsLength:d}),{flatItems:U}=E_(g,s,b),{isSelected:D,select:S,selectAll:y,toggleSelect:E,someSelected:A,allSelected:k}=w_(t,{allItems:g,currentPage:g}),{isExpanded:R,toggleExpand:W}=T_(t),se=V(()=>P(g.value));C_({page:l,itemsPerPage:u,sortBy:r,groupBy:s,search:ye(t,"search")}),Jt("v-data-table",{toggleSort:v,sortBy:r}),Pn({VDataTableRows:{hideNoData:ye(t,"hideNoData"),noDataText:ye(t,"noDataText"),loading:ye(t,"loading"),loadingText:ye(t,"loadingText")}});const ae=V(()=>({page:l.value,itemsPerPage:u.value,sortBy:r.value,pageCount:M.value,toggleSort:v,setItemsPerPage:F,someSelected:A.value,allSelected:k.value,isSelected:D,select:S,selectAll:y,toggleSelect:E,isExpanded:R,toggleExpand:W,isGroupOpen:I,toggleGroup:w,items:se.value.map(Z=>Z.raw),internalItems:se.value,groupedItems:U.value,columns:h.value,headers:f.value}));Pe(()=>{const Z=bm.filterProps(t),ne=Lu.filterProps(t),ee=Ou.filterProps(t),Q=Nu.filterProps(t);return _(Nu,Ie({class:["v-data-table",{"v-data-table--loading":t.loading},t.class],style:t.style},Q,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var j;return(j=i.top)==null?void 0:j.call(i,ae.value)},default:()=>{var j,le,pe,Se,Le,we;return i.default?i.default(ae.value):_(Ye,null,[(j=i.colgroup)==null?void 0:j.call(i,ae.value),!t.hideDefaultHeader&&_("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[_(Lu,ne,i)]),(le=i.thead)==null?void 0:le.call(i,ae.value),!t.hideDefaultBody&&_("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(pe=i["body.prepend"])==null?void 0:pe.call(i,ae.value),i.body?i.body(ae.value):_(Ou,Ie(n,ee,{items:U.value}),i),(Se=i["body.append"])==null?void 0:Se.call(i,ae.value)]),(Le=i.tbody)==null?void 0:Le.call(i,ae.value),(we=i.tfoot)==null?void 0:we.call(i,ae.value)])},bottom:()=>i.bottom?i.bottom(ae.value):!t.hideDefaultFooter&&_(Ye,null,[_(za,null,null),_(bm,Z,{prepend:i["footer.prepend"]})])})})}}),lce=ue({fluid:{type:Boolean,default:!1},...Ke(),...Kn(),...yt()},"VContainer"),uce=Te()({name:"VContainer",props:lce(),setup(t,e){let{slots:n}=e;const{rtlClasses:i}=Gn(),{dimensionStyles:s}=Yn(t);return Pe(()=>_(t.tag,{class:["v-container",{"v-container--fluid":t.fluid},i.value,t.class],style:[s.value,t.style]},n)),{}}}),H5=My.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}),j5=My.reduce((t,e)=>{const n="offset"+Ta(e);return t[n]={type:[String,Number],default:null},t},{}),q5=My.reduce((t,e)=>{const n="order"+Ta(e);return t[n]={type:[String,Number],default:null},t},{}),VP={col:Object.keys(H5),offset:Object.keys(j5),order:Object.keys(q5)};function cce(t,e,n){let i=t;if(!(n==null||n===!1)){if(e){const s=e.replace(t,"");i+=`-${s}`}return t==="col"&&(i="v-"+i),t==="col"&&(n===""||n===!0)||(i+=`-${n}`),i.toLowerCase()}}const dce=["auto","start","end","center","baseline","stretch"],hce=ue({cols:{type:[Boolean,String,Number],default:!1},...H5,offset:{type:[String,Number],default:null},...j5,order:{type:[String,Number],default:null},...q5,alignSelf:{type:String,default:null,validator:t=>dce.includes(t)},...Ke(),...yt()},"VCol"),fce=Te()({name:"VCol",props:hce(),setup(t,e){let{slots:n}=e;const i=V(()=>{const s=[];let r;for(r in VP)VP[r].forEach(o=>{const l=t[o],u=cce(r,o,l);u&&s.push(u)});const a=s.some(o=>o.startsWith("v-col-"));return s.push({"v-col":!a||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),s});return()=>{var s;return Mr(t.tag,{class:[i.value,t.class],style:t.style},(s=n.default)==null?void 0:s.call(n))}}}),mw=["start","end","center"],z5=["space-between","space-around","space-evenly"];function pw(t,e){return My.reduce((n,i)=>{const s=t+Ta(i);return n[s]=e(),n},{})}const mce=[...mw,"baseline","stretch"],W5=t=>mce.includes(t),G5=pw("align",()=>({type:String,default:null,validator:W5})),pce=[...mw,...z5],K5=t=>pce.includes(t),Y5=pw("justify",()=>({type:String,default:null,validator:K5})),gce=[...mw,...z5,"stretch"],X5=t=>gce.includes(t),Q5=pw("alignContent",()=>({type:String,default:null,validator:X5})),FP={align:Object.keys(G5),justify:Object.keys(Y5),alignContent:Object.keys(Q5)},vce={align:"align",justify:"justify",alignContent:"align-content"};function yce(t,e,n){let i=vce[t];if(n!=null){if(e){const s=e.replace(t,"");i+=`-${s}`}return i+=`-${n}`,i.toLowerCase()}}const _ce=ue({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:W5},...G5,justify:{type:String,default:null,validator:K5},...Y5,alignContent:{type:String,default:null,validator:X5},...Q5,...Ke(),...yt()},"VRow"),bce=Te()({name:"VRow",props:_ce(),setup(t,e){let{slots:n}=e;const i=V(()=>{const s=[];let r;for(r in FP)FP[r].forEach(a=>{const o=t[a],l=yce(r,a,o);l&&s.push(l)});return s.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),s});return()=>{var s;return Mr(t.tag,{class:["v-row",i.value,t.class],style:t.style},(s=n.default)==null?void 0:s.call(n))}}}),J5=wa("v-spacer","div","VSpacer"),Z5=ue({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:nt,default:"$next"},prevIcon:{type:nt,default:"$prev"},modeIcon:{type:nt,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),OS=Te()({name:"VDatePickerControls",props:Z5(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(t,e){let{emit:n}=e;const i=V(()=>Array.isArray(t.disabled)?t.disabled.includes("text"):!!t.disabled),s=V(()=>Array.isArray(t.disabled)?t.disabled.includes("mode"):!!t.disabled),r=V(()=>Array.isArray(t.disabled)?t.disabled.includes("prev"):!!t.disabled),a=V(()=>Array.isArray(t.disabled)?t.disabled.includes("next"):!!t.disabled);function o(){n("click:prev")}function l(){n("click:next")}function u(){n("click:year")}function c(){n("click:month")}return Pe(()=>_("div",{class:["v-date-picker-controls"],style:{"--v-date-picker-controls-height":We(t.controlHeight)}},[_(Ot,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:i.value,text:t.text,variant:"text",rounded:!0,onClick:c},null),_(Ot,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:s.value,density:"comfortable",icon:t.modeIcon,variant:"text",onClick:u},null),_(J5,null,null),_("div",{class:"v-date-picker-controls__month"},[_(Ot,{"data-testid":"prev-month",disabled:r.value,density:"comfortable",icon:t.prevIcon,variant:"text",onClick:o},null),_(Ot,{"data-testid":"next-month",disabled:a.value,icon:t.nextIcon,density:"comfortable",variant:"text",onClick:l},null)])])),{}}}),Tce=ue({appendIcon:nt,color:String,header:String,transition:String,onClick:wi()},"VDatePickerHeader"),NS=Te()({name:"VDatePickerHeader",props:Tce(),emits:{click:()=>!0,"click:append":()=>!0},setup(t,e){let{emit:n,slots:i}=e;const{backgroundColorClasses:s,backgroundColorStyles:r}=en(t,"color");function a(){n("click")}function o(){n("click:append")}return Pe(()=>{const l=!!(i.default||t.header),u=!!(i.append||t.appendIcon);return _("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!t.onClick},s.value],style:r.value,onClick:a},[i.prepend&&_("div",{key:"prepend",class:"v-date-picker-header__prepend"},[i.prepend()]),l&&_(Ki,{key:"content",name:t.transition},{default:()=>{var c;return[_("div",{key:t.header,class:"v-date-picker-header__content"},[((c=i.default)==null?void 0:c.call(i))??t.header])]}}),u&&_("div",{class:"v-date-picker-header__append"},[i.append?_(_t,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VBtn:{icon:t.appendIcon,variant:"text"}}},{default:()=>{var c;return[(c=i.append)==null?void 0:c.call(i)]}}):_(Ot,{key:"append-btn",icon:t.appendIcon,variant:"text",onClick:o},null)])])}),{}}}),Sce=ue({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0}},"calendar");function Ece(t){const e=jm(),n=et(t,"modelValue",[],f=>bn(f).map(g=>e.date(g))),i=V(()=>t.displayValue?e.date(t.displayValue):n.value.length>0?e.date(n.value[0]):t.min?e.date(t.min):Array.isArray(t.allowedDates)?e.date(t.allowedDates[0]):e.date()),s=et(t,"year",void 0,f=>{const g=f!=null?Number(f):e.getYear(i.value);return e.startOfYear(e.setYear(e.date(),g))},f=>e.getYear(f)),r=et(t,"month",void 0,f=>{const g=f!=null?Number(f):e.getMonth(i.value),v=e.setYear(e.startOfMonth(e.date()),e.getYear(s.value));return e.setMonth(v,g)},f=>e.getMonth(f)),a=V(()=>{const f=e.toJsDate(e.startOfWeek(e.date(),t.firstDayOfWeek)).getDay();return[0,1,2,3,4,5,6].map(g=>(g+f)%7)}),o=V(()=>{const f=e.getWeekArray(r.value,t.firstDayOfWeek),g=f.flat(),v=6*7;if(t.weeksInMonth==="static"&&g.length<v){const b=g[g.length-1];let I=[];for(let w=1;w<=v-g.length;w++)I.push(e.addDays(b,w)),w%7===0&&(f.push(I),I=[])}return f});function l(f,g){return f.filter(v=>a.value.includes(e.toJsDate(v).getDay())).map((v,b)=>{const I=e.toISO(v),w=!e.isSameMonth(v,r.value),P=e.isSameDay(v,e.startOfMonth(r.value)),M=e.isSameDay(v,e.endOfMonth(r.value)),F=e.isSameDay(v,r.value);return{date:v,isoDate:I,formatted:e.format(v,"keyboardDate"),year:e.getYear(v),month:e.getMonth(v),isDisabled:h(v),isWeekStart:b%7===0,isWeekEnd:b%7===6,isToday:e.isSameDay(v,g),isAdjacent:w,isHidden:w&&!t.showAdjacentMonths,isStart:P,isSelected:n.value.some(U=>e.isSameDay(v,U)),isEnd:M,isSame:F,localized:e.format(v,"dayOfMonth")}})}const u=V(()=>{const f=e.startOfWeek(i.value,t.firstDayOfWeek),g=[];for(let b=0;b<=6;b++)g.push(e.addDays(f,b));const v=e.date();return l(g,v)}),c=V(()=>{const f=o.value.flat(),g=e.date();return l(f,g)}),d=V(()=>o.value.map(f=>f.length?e.getWeek(f[0],t.firstDayOfWeek):null));function h(f){if(t.disabled)return!0;const g=e.date(f);return t.min&&e.isAfter(e.date(t.min),g)||t.max&&e.isAfter(g,e.date(t.max))?!0:Array.isArray(t.allowedDates)&&t.allowedDates.length>0?!t.allowedDates.some(v=>e.isSameDay(e.date(v),g)):typeof t.allowedDates=="function"?!t.allowedDates(g):!t.weekdays.includes(e.toJsDate(g).getDay())}return{displayValue:i,daysInMonth:c,daysInWeek:u,genDays:l,model:n,weeksInMonth:o,weekDays:a,weekNumbers:d}}const eB=ue({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...kn(Sce(),["displayValue"])},"VDatePickerMonth"),MS=Te()({name:"VDatePickerMonth",props:eB(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0},setup(t,e){let{emit:n,slots:i}=e;const s=Me(),{daysInMonth:r,model:a,weekNumbers:o}=Ece(t),l=jm(),u=Ue(),c=Ue(),d=Ue(!1),h=V(()=>d.value?t.reverseTransition:t.transition);t.multiple==="range"&&a.value.length>0&&(u.value=a.value[0],a.value.length>1&&(c.value=a.value[a.value.length-1]));const f=V(()=>{const I=["number","string"].includes(typeof t.multiple)?Number(t.multiple):1/0;return a.value.length>=I});$e(r,(I,w)=>{w&&(d.value=l.isBefore(I[0].date,w[0].date))});function g(I){const w=l.startOfDay(I);if(a.value.length===0?u.value=void 0:a.value.length===1&&(u.value=a.value[0],c.value=void 0),!u.value)u.value=w,a.value=[u.value];else if(c.value)u.value=I,c.value=void 0,a.value=[u.value];else{if(l.isSameDay(w,u.value)){u.value=void 0,a.value=[];return}else l.isBefore(w,u.value)?(c.value=l.endOfDay(u.value),u.value=w):c.value=l.endOfDay(w);const P=l.getDiff(c.value,u.value,"days"),M=[u.value];for(let F=1;F<P;F++){const U=l.addDays(u.value,F);M.push(U)}M.push(c.value),a.value=M}}function v(I){const w=a.value.findIndex(P=>l.isSameDay(P,I));if(w===-1)a.value=[...a.value,I];else{const P=[...a.value];P.splice(w,1),a.value=P}}function b(I){t.multiple==="range"?g(I):t.multiple?v(I):a.value=[I]}Pe(()=>_("div",{class:"v-date-picker-month"},[t.showWeek&&_("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!t.hideWeekdays&&_("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[zs(" ")]),o.value.map(I=>_("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[I]))]),_(Ki,{name:h.value},{default:()=>{var I;return[_("div",{ref:s,key:(I=r.value[0].date)==null?void 0:I.toString(),class:"v-date-picker-month__days"},[!t.hideWeekdays&&l.getWeekdays(t.firstDayOfWeek).map(w=>_("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[w])),r.value.map((w,P)=>{var F;const M={props:{class:"v-date-picker-month__day-btn",color:w.isSelected||w.isToday?t.color:void 0,disabled:w.isDisabled,icon:!0,ripple:!1,text:w.localized,variant:w.isSelected?"flat":w.isToday?"outlined":"text",onClick:()=>b(w.date)},item:w,i:P};return f.value&&!w.isSelected&&(w.isDisabled=!0),_("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":w.isAdjacent,"v-date-picker-month__day--hide-adjacent":w.isHidden,"v-date-picker-month__day--selected":w.isSelected,"v-date-picker-month__day--week-end":w.isWeekEnd,"v-date-picker-month__day--week-start":w.isWeekStart}],"data-v-date":w.isDisabled?void 0:w.isoDate},[(t.showAdjacentMonths||!w.isAdjacent)&&(((F=i.day)==null?void 0:F.call(i,M))??_(Ot,M.props,null))])})])]}})]))}}),tB=ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),VS=Te()({name:"VDatePickerMonths",props:tB(),emits:{"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:i}=e;const s=jm(),r=et(t,"modelValue"),a=V(()=>{let o=s.startOfYear(s.date());return t.year&&(o=s.setYear(o,t.year)),na(12).map(l=>{const u=s.format(o,"monthShort"),c=!!(t.min&&s.isAfter(s.startOfMonth(s.date(t.min)),o)||t.max&&s.isAfter(o,s.startOfMonth(s.date(t.max))));return o=s.getNextMonth(o),{isDisabled:c,text:u,value:l}})});return An(()=>{r.value=r.value??s.getMonth(s.date())}),Pe(()=>_("div",{class:"v-date-picker-months",style:{height:We(t.height)}},[_("div",{class:"v-date-picker-months__content"},[a.value.map((o,l)=>{var d;const u={active:r.value===l,color:r.value===l?t.color:void 0,disabled:o.isDisabled,rounded:!0,text:o.text,variant:r.value===o.value?"flat":"text",onClick:()=>c(l)};function c(h){if(r.value===h){n("update:modelValue",r.value);return}r.value=h}return((d=i.month)==null?void 0:d.call(i,{month:o,i:l,props:u}))??_(Ot,Ie({key:"month"},u),null)})])])),{}}}),nB=ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),FS=Te()({name:"VDatePickerYears",props:nB(),emits:{"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:i}=e;const s=jm(),r=et(t,"modelValue"),a=V(()=>{const l=s.getYear(s.date());let u=l-100,c=l+52;t.min&&(u=s.getYear(s.date(t.min))),t.max&&(c=s.getYear(s.date(t.max)));let d=s.startOfYear(s.date());return d=s.setYear(d,u),na(c-u+1,u).map(h=>{const f=s.format(d,"year");return d=s.setYear(d,s.getYear(d)+1),{text:f,value:h}})});An(()=>{r.value=r.value??s.getYear(s.date())});const o=vv();return ti(async()=>{var l;await kt(),(l=o.el)==null||l.scrollIntoView({block:"center"})}),Pe(()=>_("div",{class:"v-date-picker-years",style:{height:We(t.height)}},[_("div",{class:"v-date-picker-years__content"},[a.value.map((l,u)=>{var d;const c={ref:r.value===l.value?o:void 0,active:r.value===l.value,color:r.value===l.value?t.color:void 0,rounded:!0,text:l.text,variant:r.value===l.value?"flat":"text",onClick:()=>{if(r.value===l.value){n("update:modelValue",r.value);return}r.value=l.value}};return((d=i.year)==null?void 0:d.call(i,{year:l,i:u,props:c}))??_(Ot,Ie({key:"month"},c),null)})])])),{}}}),Cce=ue({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...Z5(),...eB({weeksInMonth:"static"}),...kn(tB(),["modelValue"]),...kn(nB(),["modelValue"]),...tw({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),wce=Te()({name:"VDatePicker",props:Cce(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0,"update:viewMode":t=>!0},setup(t,e){let{emit:n,slots:i}=e;const s=jm(),{t:r}=Dn(),{rtlClasses:a}=Gn(),o=et(t,"modelValue",void 0,A=>bn(A).map(k=>s.date(k)),A=>t.multiple?A:A[0]),l=et(t,"viewMode"),u=V(()=>{const A=s.date(t.min);return t.min&&s.isValid(A)?A:null}),c=V(()=>{const A=s.date(t.max);return t.max&&s.isValid(A)?A:null}),d=V(()=>{var R;const A=s.date();let k=A;return(R=o.value)!=null&&R[0]?k=s.date(o.value[0]):u.value&&s.isBefore(A,u.value)?k=u.value:c.value&&s.isAfter(A,c.value)&&(k=c.value),k&&s.isValid(k)?k:A}),h=V(()=>t.headerColor??t.color),f=Me(Number(t.month??s.getMonth(s.startOfMonth(d.value)))),g=Me(Number(t.year??s.getYear(s.startOfYear(s.setMonth(d.value,f.value))))),v=Ue(!1),b=V(()=>t.multiple&&o.value.length>1?r("$vuetify.datePicker.itemsSelected",o.value.length):o.value[0]&&s.isValid(o.value[0])?s.format(s.date(o.value[0]),"normalDateWithWeekday"):r(t.header)),I=V(()=>{let A=s.date();return A=s.setDate(A,1),A=s.setMonth(A,f.value),A=s.setYear(A,g.value),s.format(A,"monthAndYear")}),w=V(()=>`date-picker-header${v.value?"-reverse":""}-transition`),P=V(()=>{if(t.disabled)return!0;const A=[];if(l.value!=="month")A.push("prev","next");else{let k=s.date();if(k=s.startOfMonth(k),k=s.setMonth(k,f.value),k=s.setYear(k,g.value),u.value){const R=s.addDays(s.startOfMonth(k),-1);s.isAfter(u.value,R)&&A.push("prev")}if(c.value){const R=s.addDays(s.endOfMonth(k),1);s.isAfter(R,c.value)&&A.push("next")}}return A});function M(){f.value<11?f.value++:(g.value++,f.value=0,E(g.value)),y(f.value)}function F(){f.value>0?f.value--:(g.value--,f.value=11,E(g.value)),y(f.value)}function U(){l.value="month"}function D(){l.value=l.value==="months"?"month":"months"}function S(){l.value=l.value==="year"?"month":"year"}function y(A){l.value==="months"&&D(),n("update:month",A)}function E(A){l.value==="year"&&S(),n("update:year",A)}return $e(o,(A,k)=>{const R=bn(k),W=bn(A);if(!W.length)return;const se=s.date(R[R.length-1]),ae=s.date(W[W.length-1]),Z=s.getMonth(ae),ne=s.getYear(ae);Z!==f.value&&(f.value=Z,y(f.value)),ne!==g.value&&(g.value=ne,E(g.value)),v.value=s.isBefore(se,ae)}),Pe(()=>{const A=zv.filterProps(t),k=OS.filterProps(t),R=NS.filterProps(t),W=MS.filterProps(t),se=kn(VS.filterProps(t),["modelValue"]),ae=kn(FS.filterProps(t),["modelValue"]),Z={color:h.value,header:b.value,transition:w.value};return _(zv,Ie(A,{color:h.value,class:["v-date-picker",`v-date-picker--${l.value}`,{"v-date-picker--show-week":t.showWeek},a.value,t.class],style:t.style}),{title:()=>{var ne;return((ne=i.title)==null?void 0:ne.call(i))??_("div",{class:"v-date-picker__title"},[r(t.title)])},header:()=>i.header?_(_t,{defaults:{VDatePickerHeader:{...Z}}},{default:()=>{var ne;return[(ne=i.header)==null?void 0:ne.call(i,Z)]}}):_(NS,Ie({key:"header"},R,Z,{onClick:l.value!=="month"?U:void 0}),{...i,default:void 0}),default:()=>_(Ye,null,[_(OS,Ie(k,{disabled:P.value,text:I.value,"onClick:next":M,"onClick:prev":F,"onClick:month":D,"onClick:year":S}),null),_(fm,{hideOnLeave:!0},{default:()=>[l.value==="months"?_(VS,Ie({key:"date-picker-months"},se,{modelValue:f.value,"onUpdate:modelValue":[ne=>f.value=ne,y],min:u.value,max:c.value,year:g.value}),null):l.value==="year"?_(FS,Ie({key:"date-picker-years"},ae,{modelValue:g.value,"onUpdate:modelValue":[ne=>g.value=ne,E],min:u.value,max:c.value}),null):_(MS,Ie({key:"date-picker-month"},W,{modelValue:o.value,"onUpdate:modelValue":ne=>o.value=ne,month:f.value,"onUpdate:month":[ne=>f.value=ne,y],year:g.value,"onUpdate:year":[ne=>g.value=ne,E],min:u.value,max:c.value}),null)]})]),actions:i.actions})}),{}}}),xce=ue({actionText:String,bgColor:String,color:String,icon:nt,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Ke(),...Kn(),...xa({size:void 0}),...Dt()},"VEmptyState"),Ice=Te()({name:"VEmptyState",props:xce(),emits:{"click:action":t=>!0},setup(t,e){let{emit:n,slots:i}=e;const{themeClasses:s}=zt(t),{backgroundColorClasses:r,backgroundColorStyles:a}=en(ye(t,"bgColor")),{dimensionStyles:o}=Yn(t),{displayClasses:l}=As();function u(c){n("click:action",c)}return Pe(()=>{var b,I,w;const c=!!(i.actions||t.actionText),d=!!(i.headline||t.headline),h=!!(i.title||t.title),f=!!(i.text||t.text),g=!!(i.media||t.image||t.icon),v=t.size||(t.image?200:96);return _("div",{class:["v-empty-state",{[`v-empty-state--${t.justify}`]:!0},s.value,r.value,l.value,t.class],style:[a.value,o.value,t.style]},[g&&_("div",{key:"media",class:"v-empty-state__media"},[i.media?_(_t,{key:"media-defaults",defaults:{VImg:{src:t.image,height:v},VIcon:{size:v,icon:t.icon}}},{default:()=>[i.media()]}):_(Ye,null,[t.image?_(to,{key:"image",src:t.image,height:v},null):t.icon?_(Ht,{key:"icon",color:t.color,size:v,icon:t.icon},null):void 0])]),d&&_("div",{key:"headline",class:"v-empty-state__headline"},[((b=i.headline)==null?void 0:b.call(i))??t.headline]),h&&_("div",{key:"title",class:"v-empty-state__title"},[((I=i.title)==null?void 0:I.call(i))??t.title]),f&&_("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:We(t.textWidth)}},[((w=i.text)==null?void 0:w.call(i))??t.text]),i.default&&_("div",{key:"content",class:"v-empty-state__content"},[i.default()]),c&&_("div",{key:"actions",class:"v-empty-state__actions"},[_(_t,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:t.color??"surface-variant",href:t.href,text:t.actionText,to:t.to}}},{default:()=>{var P;return[((P=i.actions)==null?void 0:P.call(i,{props:{onClick:u}}))??_(Ot,{onClick:u},null)]}})])])}),{}}}),Tm=Symbol.for("vuetify:v-expansion-panel"),iB=ue({...Ke(),...GC()},"VExpansionPanelText"),BS=Te()({name:"VExpansionPanelText",props:iB(),setup(t,e){let{slots:n}=e;const i=vt(Tm);if(!i)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:s,onAfterLeave:r}=KC(t,i.isSelected);return Pe(()=>_(c_,{onAfterLeave:r},{default:()=>{var a;return[Tn(_("div",{class:["v-expansion-panel-text",t.class],style:t.style},[n.default&&s.value&&_("div",{class:"v-expansion-panel-text__wrapper"},[(a=n.default)==null?void 0:a.call(n)])]),[[Vr,i.isSelected.value]])]}})),{}}}),sB=ue({color:String,expandIcon:{type:nt,default:"$expand"},collapseIcon:{type:nt,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Ke(),...Kn()},"VExpansionPanelTitle"),US=Te()({name:"VExpansionPanelTitle",directives:{Ripple:uo},props:sB(),setup(t,e){let{slots:n}=e;const i=vt(Tm);if(!i)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:s,backgroundColorStyles:r}=en(t,"color"),{dimensionStyles:a}=Yn(t),o=V(()=>({collapseIcon:t.collapseIcon,disabled:i.disabled.value,expanded:i.isSelected.value,expandIcon:t.expandIcon,readonly:t.readonly})),l=V(()=>i.isSelected.value?t.collapseIcon:t.expandIcon);return Pe(()=>{var u;return Tn(_("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":i.isSelected.value,"v-expansion-panel-title--focusable":t.focusable,"v-expansion-panel-title--static":t.static},s.value,t.class],style:[r.value,a.value,t.style],type:"button",tabindex:i.disabled.value?-1:void 0,disabled:i.disabled.value,"aria-expanded":i.isSelected.value,onClick:t.readonly?void 0:i.toggle},[_("span",{class:"v-expansion-panel-title__overlay"},null),(u=n.default)==null?void 0:u.call(n,o.value),!t.hideActions&&_(_t,{defaults:{VIcon:{icon:l.value}}},{default:()=>{var c;return[_("span",{class:"v-expansion-panel-title__icon"},[((c=n.actions)==null?void 0:c.call(n,o.value))??_(Ht,null,null)])]}})]),[[Ks("ripple"),t.ripple]])}),{}}}),rB=ue({title:String,text:String,bgColor:String,...ni(),...Yu(),...fn(),...yt(),...sB(),...iB()},"VExpansionPanel"),Ace=Te()({name:"VExpansionPanel",props:rB(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const i=Xu(t,Tm),{backgroundColorClasses:s,backgroundColorStyles:r}=en(t,"bgColor"),{elevationClasses:a}=xi(t),{roundedClasses:o}=Rn(t),l=V(()=>(i==null?void 0:i.disabled.value)||t.disabled),u=V(()=>i.group.items.value.reduce((h,f,g)=>(i.group.selected.value.includes(f.id)&&h.push(g),h),[])),c=V(()=>{const h=i.group.items.value.findIndex(f=>f.id===i.id);return!i.isSelected.value&&u.value.some(f=>f-h===1)}),d=V(()=>{const h=i.group.items.value.findIndex(f=>f.id===i.id);return!i.isSelected.value&&u.value.some(f=>f-h===-1)});return Jt(Tm,i),Pe(()=>{const h=!!(n.text||t.text),f=!!(n.title||t.title),g=US.filterProps(t),v=BS.filterProps(t);return _(t.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":i.isSelected.value,"v-expansion-panel--before-active":c.value,"v-expansion-panel--after-active":d.value,"v-expansion-panel--disabled":l.value},o.value,s.value,t.class],style:[r.value,t.style]},{default:()=>[_("div",{class:["v-expansion-panel__shadow",...a.value]},null),_(_t,{defaults:{VExpansionPanelTitle:{...g},VExpansionPanelText:{...v}}},{default:()=>{var b;return[f&&_(US,{key:"title"},{default:()=>[n.title?n.title():t.title]}),h&&_(BS,{key:"text"},{default:()=>[n.text?n.text():t.text]}),(b=n.default)==null?void 0:b.call(n)]}})]})}),{groupItem:i}}}),kce=["default","accordion","inset","popout"],Pce=ue({flat:Boolean,...Ku(),...Sl(rB(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Dt(),...Ke(),...yt(),variant:{type:String,default:"default",validator:t=>kce.includes(t)}},"VExpansionPanels"),Dce=Te()({name:"VExpansionPanels",props:Pce(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{next:i,prev:s}=xl(t,Tm),{themeClasses:r}=zt(t),a=V(()=>t.variant&&`v-expansion-panels--variant-${t.variant}`);return Pn({VExpansionPanel:{bgColor:ye(t,"bgColor"),collapseIcon:ye(t,"collapseIcon"),color:ye(t,"color"),eager:ye(t,"eager"),elevation:ye(t,"elevation"),expandIcon:ye(t,"expandIcon"),focusable:ye(t,"focusable"),hideActions:ye(t,"hideActions"),readonly:ye(t,"readonly"),ripple:ye(t,"ripple"),rounded:ye(t,"rounded"),static:ye(t,"static")}}),Pe(()=>_(t.tag,{class:["v-expansion-panels",{"v-expansion-panels--flat":t.flat,"v-expansion-panels--tile":t.tile},r.value,a.value,t.class],style:t.style},{default:()=>{var o;return[(o=n.default)==null?void 0:o.call(n,{prev:s,next:i})]}})),{next:i,prev:s}}}),Rce=ue({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...kn(m_({active:!0}),["location"]),...qu(),...lo(),...Br({transition:"fab-transition"})},"VFab"),Lce=Te()({name:"VFab",props:Rce(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"modelValue"),s=Ue(56),r=Me(),{resizeRef:a}=Lr(d=>{d.length&&(s.value=d[0].target.clientHeight)}),o=V(()=>t.app||t.absolute),l=V(()=>{var d;return o.value?((d=t.location)==null?void 0:d.split(" ").shift())??"bottom":!1}),u=V(()=>{var d;return o.value?((d=t.location)==null?void 0:d.split(" ")[1])??"end":!1});ds(()=>t.app,()=>{const d=zu({id:t.name,order:V(()=>parseInt(t.order,10)),position:l,layoutSize:V(()=>t.layout?s.value+24:0),elementSize:V(()=>s.value+24),active:V(()=>t.app&&i.value),absolute:ye(t,"absolute")});An(()=>{r.value=d.layoutItemStyles.value})});const c=Me();return Pe(()=>{const d=Ot.filterProps(t);return _("div",{ref:c,class:["v-fab",{"v-fab--absolute":t.absolute,"v-fab--app":!!t.app,"v-fab--extended":t.extended,"v-fab--offset":t.offset,[`v-fab--${l.value}`]:o.value,[`v-fab--${u.value}`]:o.value},t.class],style:[t.app?{...r.value}:{height:t.absolute?"100%":"inherit"},t.style]},[_("div",{class:"v-fab__container"},[_(Ki,{appear:t.appear,transition:t.transition},{default:()=>[Tn(_(Ot,Ie({ref:a},d,{active:void 0,location:void 0}),n),[[Vr,t.active]])]})])])}),{}}}),Oce=ue({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:t=>typeof t=="boolean"||[1e3,1024].includes(Number(t))},...co({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:t=>t.multiple?[]:null,validator:t=>bn(t).every(e=>e!=null&&typeof e=="object")},...ap({clearable:!0})},"VFileInput"),Nce=Te()({name:"VFileInput",inheritAttrs:!1,props:Oce(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:i,slots:s}=e;const{t:r}=Dn(),a=et(t,"modelValue",t.modelValue,A=>bn(A),A=>!t.multiple&&Array.isArray(A)?A[0]:A),{isFocused:o,focus:l,blur:u}=Ia(t),c=V(()=>typeof t.showSize!="boolean"?t.showSize:void 0),d=V(()=>(a.value??[]).reduce((A,k)=>{let{size:R=0}=k;return A+R},0)),h=V(()=>iA(d.value,c.value)),f=V(()=>(a.value??[]).map(A=>{const{name:k="",size:R=0}=A;return t.showSize?`${k} (${iA(R,c.value)})`:k})),g=V(()=>{var k;const A=((k=a.value)==null?void 0:k.length)??0;return t.showSize?r(t.counterSizeString,A,h.value):r(t.counterString,A)}),v=Me(),b=Me(),I=Me(),w=V(()=>o.value||t.active),P=V(()=>["plain","underlined"].includes(t.variant));function M(){var A;I.value!==document.activeElement&&((A=I.value)==null||A.focus()),o.value||l()}function F(A){var k;(k=I.value)==null||k.click()}function U(A){i("mousedown:control",A)}function D(A){var k;(k=I.value)==null||k.click(),i("click:control",A)}function S(A){A.stopPropagation(),M(),kt(()=>{a.value=[],Oy(t["onClick:clear"],A)})}function y(A){A.preventDefault()}function E(A){A.preventDefault(),A.dataTransfer&&(a.value=[...A.dataTransfer.files??[]])}return $e(a,A=>{(!Array.isArray(A)||!A.length)&&I.value&&(I.value.value="")}),Pe(()=>{const A=!!(s.counter||t.counter),k=!!(A||s.details),[R,W]=El(n),{modelValue:se,...ae}=Oi.filterProps(t),Z=fl.filterProps(t);return _(Oi,Ie({ref:v,modelValue:t.multiple?a.value:a.value[0],class:["v-file-input",{"v-file-input--chips":!!t.chips,"v-file-input--hide":t.hideInput,"v-input--plain-underlined":P.value},t.class],style:t.style,"onClick:prepend":F},R,ae,{centerAffix:!P.value,focused:o.value}),{...s,default:ne=>{let{id:ee,isDisabled:Q,isDirty:j,isReadonly:le,isValid:pe}=ne;return _(fl,Ie({ref:b,"prepend-icon":t.prependIcon,onMousedown:U,onClick:D,"onClick:clear":S,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"]},Z,{id:ee.value,active:w.value||j.value,dirty:j.value||t.dirty,disabled:Q.value,focused:o.value,error:pe.value===!1,onDragover:y,onDrop:E}),{...s,default:Se=>{var re;let{props:{class:Le,...we}}=Se;return _(Ye,null,[_("input",Ie({ref:I,type:"file",readonly:le.value,disabled:Q.value,multiple:t.multiple,name:t.name,onClick:fe=>{fe.stopPropagation(),le.value&&fe.preventDefault(),M()},onChange:fe=>{if(!fe.target)return;const xe=fe.target;a.value=[...xe.files??[]]},onFocus:M,onBlur:u},we,W),null),_("div",{class:Le},[!!((re=a.value)!=null&&re.length)&&!t.hideInput&&(s.selection?s.selection({fileNames:f.value,totalBytes:d.value,totalBytesReadable:h.value}):t.chips?f.value.map(fe=>_(ch,{key:fe,size:"small",text:fe},null)):f.value.join(", "))])])}})},details:k?ne=>{var ee,Q;return _(Ye,null,[(ee=s.details)==null?void 0:ee.call(s,ne),A&&_(Ye,null,[_("span",null,null),_(v_,{active:!!((Q=a.value)!=null&&Q.length),value:g.value,disabled:t.disabled},s.counter)])])}:void 0})}),Js({},v,b,I)}}),Mce=ue({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ks(),...Ke(),...ni(),...qu(),...fn(),...yt({tag:"footer"}),...Dt()},"VFooter"),Vce=Te()({name:"VFooter",props:Mce(),setup(t,e){let{slots:n}=e;const i=Me(),{themeClasses:s}=zt(t),{backgroundColorClasses:r,backgroundColorStyles:a}=en(ye(t,"color")),{borderClasses:o}=Qs(t),{elevationClasses:l}=xi(t),{roundedClasses:u}=Rn(t),c=Ue(32),{resizeRef:d}=Lr(f=>{f.length&&(c.value=f[0].target.clientHeight)}),h=V(()=>t.height==="auto"?c.value:parseInt(t.height,10));return ds(()=>t.app,()=>{const f=zu({id:t.name,order:V(()=>parseInt(t.order,10)),position:V(()=>"bottom"),layoutSize:h,elementSize:V(()=>t.height==="auto"?void 0:h.value),active:V(()=>t.app),absolute:ye(t,"absolute")});An(()=>{i.value=f.layoutItemStyles.value})}),Pe(()=>_(t.tag,{ref:d,class:["v-footer",s.value,r.value,o.value,l.value,u.value,t.class],style:[a.value,t.app?i.value:{height:We(t.height)},t.style]},n)),{}}}),Fce=ue({...Ke(),...poe()},"VForm"),Bce=Te()({name:"VForm",props:Fce(),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,e){let{slots:n,emit:i}=e;const s=goe(t),r=Me();function a(l){l.preventDefault(),s.reset()}function o(l){const u=l,c=s.validate();u.then=c.then.bind(c),u.catch=c.catch.bind(c),u.finally=c.finally.bind(c),i("submit",u),u.defaultPrevented||c.then(d=>{var f;let{valid:h}=d;h&&((f=r.value)==null||f.submit())}),u.preventDefault()}return Pe(()=>{var l;return _("form",{ref:r,class:["v-form",t.class],style:t.style,novalidate:!0,onReset:a,onSubmit:o},[(l=n.default)==null?void 0:l.call(n,s)])}),Js(s,r)}}),Uce=ue({disabled:Boolean,modelValue:{type:Boolean,default:null},...zC()},"VHover"),$ce=Te()({name:"VHover",props:Uce(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"modelValue"),{runOpenDelay:s,runCloseDelay:r}=WC(t,a=>!t.disabled&&(i.value=a));return()=>{var a;return(a=n.default)==null?void 0:a.call(n,{isHovering:i.value,props:{onMouseenter:s,onMouseleave:r}})}}}),Hce=ue({color:String,direction:{type:String,default:"vertical",validator:t=>["vertical","horizontal"].includes(t)},side:{type:String,default:"end",validator:t=>["start","end","both"].includes(t)},mode:{type:String,default:"intersect",validator:t=>["intersect","manual"].includes(t)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Kn(),...yt()},"VInfiniteScroll"),BP=Ys({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(t,e)=>!0},setup(t,e){let{emit:n}=e;const{intersectionRef:i,isIntersecting:s}=d_();return $e(s,async r=>{n("intersect",t.side,r)}),Pe(()=>_("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":t.rootMargin},ref:i},[zs(" ")])),{}}}),jce=Te()({name:"VInfiniteScroll",props:Hce(),emits:{load:t=>!0},setup(t,e){let{slots:n,emit:i}=e;const s=Me(),r=Ue("ok"),a=Ue("ok"),o=V(()=>We(t.margin)),l=Ue(!1);function u(F){if(!s.value)return;const U=t.direction==="vertical"?"scrollTop":"scrollLeft";s.value[U]=F}function c(){if(!s.value)return 0;const F=t.direction==="vertical"?"scrollTop":"scrollLeft";return s.value[F]}function d(){if(!s.value)return 0;const F=t.direction==="vertical"?"scrollHeight":"scrollWidth";return s.value[F]}function h(){if(!s.value)return 0;const F=t.direction==="vertical"?"clientHeight":"clientWidth";return s.value[F]}ti(()=>{s.value&&(t.side==="start"?u(d()):t.side==="both"&&u(d()/2-h()/2))});function f(F,U){F==="start"?r.value=U:F==="end"&&(a.value=U)}function g(F){return F==="start"?r.value:a.value}let v=0;function b(F,U){l.value=U,l.value&&I(F)}function I(F){if(t.mode!=="manual"&&!l.value)return;const U=g(F);if(!s.value||["empty","loading"].includes(U))return;v=d(),f(F,"loading");function D(S){f(F,S),kt(()=>{S==="empty"||S==="error"||(S==="ok"&&F==="start"&&u(d()-v+c()),t.mode!=="manual"&&kt(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{I(F)})})})}))})}i("load",{side:F,done:D})}const{t:w}=Dn();function P(F,U){var y,E,A,k,R;if(t.side!==F&&t.side!=="both")return;const D=()=>I(F),S={side:F,props:{onClick:D,color:t.color}};return U==="error"?(y=n.error)==null?void 0:y.call(n,S):U==="empty"?((E=n.empty)==null?void 0:E.call(n,S))??_("div",null,[w(t.emptyText)]):t.mode==="manual"?U==="loading"?((A=n.loading)==null?void 0:A.call(n,S))??_(Vd,{indeterminate:!0,color:t.color},null):((k=n["load-more"])==null?void 0:k.call(n,S))??_(Ot,{variant:"outlined",color:t.color,onClick:D},{default:()=>[w(t.loadMoreText)]}):((R=n.loading)==null?void 0:R.call(n,S))??_(Vd,{indeterminate:!0,color:t.color},null)}const{dimensionStyles:M}=Yn(t);Pe(()=>{const F=t.tag,U=t.side==="start"||t.side==="both",D=t.side==="end"||t.side==="both",S=t.mode==="intersect";return _(F,{ref:s,class:["v-infinite-scroll",`v-infinite-scroll--${t.direction}`,{"v-infinite-scroll--start":U,"v-infinite-scroll--end":D}],style:M.value},{default:()=>{var y;return[_("div",{class:"v-infinite-scroll__side"},[P("start",r.value)]),U&&S&&_(BP,{key:"start",side:"start",onIntersect:b,rootMargin:o.value},null),(y=n.default)==null?void 0:y.call(n),D&&S&&_(BP,{key:"end",side:"end",onIntersect:b,rootMargin:o.value},null),_("div",{class:"v-infinite-scroll__side"},[P("end",a.value)])]}})})}}),aB=Symbol.for("vuetify:v-item-group"),qce=ue({...Ke(),...Ku({selectedClass:"v-item--selected"}),...yt(),...Dt()},"VItemGroup"),zce=Te()({name:"VItemGroup",props:qce(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:i}=zt(t),{isSelected:s,select:r,next:a,prev:o,selected:l}=xl(t,aB);return()=>_(t.tag,{class:["v-item-group",i.value,t.class],style:t.style},{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:s,select:r,next:a,prev:o,selected:l.value})]}})}}),Wce=Te()({name:"VItem",props:Yu(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const{isSelected:i,select:s,toggle:r,selectedClass:a,value:o,disabled:l}=Xu(t,aB);return()=>{var u;return(u=n.default)==null?void 0:u.call(n,{isSelected:i.value,selectedClass:a.value,select:s,toggle:r,value:o.value,disabled:l.value})}}}),Gce=wa("v-kbd","kbd"),Kce=ue({...Ke(),...Kn(),...GM()},"VLayout"),Yce=Te()({name:"VLayout",props:Kce(),setup(t,e){let{slots:n}=e;const{layoutClasses:i,layoutStyles:s,getLayoutItem:r,items:a,layoutRef:o}=YM(t),{dimensionStyles:l}=Yn(t);return Pe(()=>{var u;return _("div",{ref:o,class:[i.value,t.class],style:[l.value,s.value,t.style]},[(u=n.default)==null?void 0:u.call(n)])}),{getLayoutItem:r,items:a}}}),Xce=ue({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Ke(),...qu()},"VLayoutItem"),Qce=Te()({name:"VLayoutItem",props:Xce(),setup(t,e){let{slots:n}=e;const{layoutItemStyles:i}=zu({id:t.name,order:V(()=>parseInt(t.order,10)),position:ye(t,"position"),elementSize:ye(t,"size"),layoutSize:ye(t,"size"),active:ye(t,"modelValue"),absolute:ye(t,"absolute")});return()=>{var s;return _("div",{class:["v-layout-item",t.class],style:[i.value,t.style]},[(s=n.default)==null?void 0:s.call(n)])}}}),Jce=ue({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Ke(),...Kn(),...yt(),...Br({transition:"fade-transition"})},"VLazy"),Zce=Te()({name:"VLazy",directives:{intersect:Jm},props:Jce(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{dimensionStyles:i}=Yn(t),s=et(t,"modelValue");function r(a){s.value||(s.value=a)}return Pe(()=>Tn(_(t.tag,{class:["v-lazy",t.class],style:[i.value,t.style]},{default:()=>[s.value&&_(Ki,{transition:t.transition,appear:!0},{default:()=>{var a;return[(a=n.default)==null?void 0:a.call(n)]}})]}),[[Ks("intersect"),{handler:r,options:t.options},null]])),{}}}),ede=ue({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Ke()},"VLocaleProvider"),tde=Te()({name:"VLocaleProvider",props:ede(),setup(t,e){let{slots:n}=e;const{rtlClasses:i}=oQ(t);return Pe(()=>{var s;return _("div",{class:["v-locale-provider",i.value,t.class],style:t.style},[(s=n.default)==null?void 0:s.call(n)])}),{}}}),nde=ue({scrollable:Boolean,...Ke(),...Kn(),...yt({tag:"main"})},"VMain"),ide=Te()({name:"VMain",props:nde(),setup(t,e){let{slots:n}=e;const{dimensionStyles:i}=Yn(t),{mainStyles:s}=KM(),{ssrBootStyles:r}=Wu();return Pe(()=>_(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[s.value,r.value,i.value,t.style]},{default:()=>{var a,o;return[t.scrollable?_("div",{class:"v-main__scroller"},[(a=n.default)==null?void 0:a.call(n)]):(o=n.default)==null?void 0:o.call(n)]}})),{}}});function sde(t){let{rootEl:e,isSticky:n,layoutItemStyles:i}=t;const s=Ue(!1),r=Ue(0),a=V(()=>{const u=typeof s.value=="boolean"?"top":s.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,s.value?{[u]:We(r.value)}:{top:i.value.top}]});ti(()=>{$e(n,u=>{u?window.addEventListener("scroll",l,{passive:!0}):window.removeEventListener("scroll",l)},{immediate:!0})}),Wn(()=>{window.removeEventListener("scroll",l)});let o=0;function l(){const u=o>window.scrollY?"up":"down",c=e.value.getBoundingClientRect(),d=parseFloat(i.value.top??0),h=window.scrollY-Math.max(0,r.value-d),f=c.height+Math.max(r.value,d)-window.scrollY-window.innerHeight,g=parseFloat(getComputedStyle(e.value).getPropertyValue("--v-body-scroll-y"))||0;c.height<window.innerHeight-d?(s.value="top",r.value=d):u==="up"&&s.value==="bottom"||u==="down"&&s.value==="top"?(r.value=window.scrollY+c.top-g,s.value=!0):u==="down"&&f<=0?(r.value=0,s.value="bottom"):u==="up"&&h<=0&&(g?s.value!=="top"&&(r.value=-h+g+d,s.value="top"):(r.value=c.top+h,s.value="top")),o=window.scrollY}return{isStuck:s,stickyStyles:a}}const rde=100,ade=20;function UP(t){return(t<0?-1:1)*Math.sqrt(Math.abs(t))*1.41421356237}function $P(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let e=0;for(let n=t.length-1;n>0;n--){if(t[n].t===t[n-1].t)continue;const i=UP(e),s=(t[n].d-t[n-1].d)/(t[n].t-t[n-1].t);e+=(s-i)*Math.abs(s),n===t.length-1&&(e*=.5)}return UP(e)*1e3}function ode(){const t={};function e(s){Array.from(s.changedTouches).forEach(r=>{(t[r.identifier]??(t[r.identifier]=new yX(ade))).push([s.timeStamp,r])})}function n(s){Array.from(s.changedTouches).forEach(r=>{delete t[r.identifier]})}function i(s){var u;const r=(u=t[s])==null?void 0:u.values().reverse();if(!r)throw new Error(`No samples for touch id ${s}`);const a=r[0],o=[],l=[];for(const c of r){if(a[0]-c[0]>rde)break;o.push({t:c[0],d:c[1].clientX}),l.push({t:c[0],d:c[1].clientY})}return{x:$P(o),y:$P(l),get direction(){const{x:c,y:d}=this,[h,f]=[Math.abs(c),Math.abs(d)];return h>f&&c>=0?"right":h>f&&c<=0?"left":f>h&&d>=0?"down":f>h&&d<=0?"up":lde()}}}return{addMovement:e,endTouch:n,getVelocity:i}}function lde(){throw new Error}function ude(t){let{el:e,isActive:n,isTemporary:i,width:s,touchless:r,position:a}=t;ti(()=>{window.addEventListener("touchstart",w,{passive:!0}),window.addEventListener("touchmove",P,{passive:!1}),window.addEventListener("touchend",M,{passive:!0})}),Wn(()=>{window.removeEventListener("touchstart",w),window.removeEventListener("touchmove",P),window.removeEventListener("touchend",M)});const o=V(()=>["left","right"].includes(a.value)),{addMovement:l,endTouch:u,getVelocity:c}=ode();let d=!1;const h=Ue(!1),f=Ue(0),g=Ue(0);let v;function b(U,D){return(a.value==="left"?U:a.value==="right"?document.documentElement.clientWidth-U:a.value==="top"?U:a.value==="bottom"?document.documentElement.clientHeight-U:xc())-(D?s.value:0)}function I(U){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const S=a.value==="left"?(U-g.value)/s.value:a.value==="right"?(document.documentElement.clientWidth-U-g.value)/s.value:a.value==="top"?(U-g.value)/s.value:a.value==="bottom"?(document.documentElement.clientHeight-U-g.value)/s.value:xc();return D?Math.max(0,Math.min(1,S)):S}function w(U){if(r.value)return;const D=U.changedTouches[0].clientX,S=U.changedTouches[0].clientY,y=25,E=a.value==="left"?D<y:a.value==="right"?D>document.documentElement.clientWidth-y:a.value==="top"?S<y:a.value==="bottom"?S>document.documentElement.clientHeight-y:xc(),A=n.value&&(a.value==="left"?D<s.value:a.value==="right"?D>document.documentElement.clientWidth-s.value:a.value==="top"?S<s.value:a.value==="bottom"?S>document.documentElement.clientHeight-s.value:xc());(E||A||n.value&&i.value)&&(v=[D,S],g.value=b(o.value?D:S,n.value),f.value=I(o.value?D:S),d=g.value>-20&&g.value<80,u(U),l(U))}function P(U){const D=U.changedTouches[0].clientX,S=U.changedTouches[0].clientY;if(d){if(!U.cancelable){d=!1;return}const E=Math.abs(D-v[0]),A=Math.abs(S-v[1]);(o.value?E>A&&E>3:A>E&&A>3)?(h.value=!0,d=!1):(o.value?A:E)>3&&(d=!1)}if(!h.value)return;U.preventDefault(),l(U);const y=I(o.value?D:S,!1);f.value=Math.max(0,Math.min(1,y)),y>1?g.value=b(o.value?D:S,!0):y<0&&(g.value=b(o.value?D:S,!1))}function M(U){if(d=!1,!h.value)return;l(U),h.value=!1;const D=c(U.changedTouches[0].identifier),S=Math.abs(D.x),y=Math.abs(D.y);(o.value?S>y&&S>400:y>S&&y>3)?n.value=D.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||xc()):n.value=f.value>.5}const F=V(()=>h.value?{transform:a.value==="left"?`translateX(calc(-100% + ${f.value*s.value}px))`:a.value==="right"?`translateX(calc(100% - ${f.value*s.value}px))`:a.value==="top"?`translateY(calc(-100% + ${f.value*s.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${f.value*s.value}px))`:xc(),transition:"none"}:void 0);return ds(h,()=>{var S,y;const U=((S=e.value)==null?void 0:S.style.transform)??null,D=((y=e.value)==null?void 0:y.style.transition)??null;An(()=>{var E,A,k,R;(A=e.value)==null||A.style.setProperty("transform",((E=F.value)==null?void 0:E.transform)||"none"),(R=e.value)==null||R.style.setProperty("transition",((k=F.value)==null?void 0:k.transition)||null)}),hi(()=>{var E,A;(E=e.value)==null||E.style.setProperty("transform",U),(A=e.value)==null||A.style.setProperty("transition",D)})}),{isDragging:h,dragProgress:f,dragStyles:F}}function xc(){throw new Error}const cde=["start","end","left","right","top","bottom"],dde=ue({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>cde.includes(t)},sticky:Boolean,...ks(),...Ke(),...zC(),...ju({mobile:null}),...ni(),...qu(),...fn(),...yt({tag:"nav"}),...Dt()},"VNavigationDrawer"),hde=Te()({name:"VNavigationDrawer",props:dde(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,e){let{attrs:n,emit:i,slots:s}=e;const{isRtl:r}=Gn(),{themeClasses:a}=zt(t),{borderClasses:o}=Qs(t),{backgroundColorClasses:l,backgroundColorStyles:u}=en(ye(t,"color")),{elevationClasses:c}=xi(t),{displayClasses:d,mobile:h}=As(t),{roundedClasses:f}=Rn(t),g=oF(),v=et(t,"modelValue",null,Q=>!!Q),{ssrBootStyles:b}=Wu(),{scopeId:I}=Ju(),w=Me(),P=Ue(!1),{runOpenDelay:M,runCloseDelay:F}=WC(t,Q=>{P.value=Q}),U=V(()=>t.rail&&t.expandOnHover&&P.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),D=V(()=>kT(t.location,r.value)),S=V(()=>t.persistent),y=V(()=>!t.permanent&&(h.value||t.temporary)),E=V(()=>t.sticky&&!y.value&&D.value!=="bottom");ds(()=>t.expandOnHover&&t.rail!=null,()=>{$e(P,Q=>i("update:rail",!Q))}),ds(()=>!t.disableResizeWatcher,()=>{$e(y,Q=>!t.permanent&&kt(()=>v.value=!Q))}),ds(()=>!t.disableRouteWatcher&&!!g,()=>{$e(g.currentRoute,()=>y.value&&(v.value=!1))}),$e(()=>t.permanent,Q=>{Q&&(v.value=!0)}),t.modelValue==null&&!y.value&&(v.value=t.permanent||!h.value);const{isDragging:A,dragProgress:k}=ude({el:w,isActive:v,isTemporary:y,width:U,touchless:ye(t,"touchless"),position:D}),R=V(()=>{const Q=y.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):U.value;return A.value?Q*k.value:Q}),{layoutItemStyles:W,layoutItemScrimStyles:se}=zu({id:t.name,order:V(()=>parseInt(t.order,10)),position:D,layoutSize:R,elementSize:U,active:Bd(v),disableTransitions:V(()=>A.value),absolute:V(()=>t.absolute||E.value&&typeof ae.value!="string")}),{isStuck:ae,stickyStyles:Z}=sde({rootEl:w,isSticky:E,layoutItemStyles:W}),ne=en(V(()=>typeof t.scrim=="string"?t.scrim:null)),ee=V(()=>({...A.value?{opacity:k.value*.2,transition:"none"}:void 0,...se.value}));return Pn({VList:{bgColor:"transparent"}}),Pe(()=>{const Q=s.image||t.image;return _(Ye,null,[_(t.tag,Ie({ref:w,onMouseenter:M,onMouseleave:F,class:["v-navigation-drawer",`v-navigation-drawer--${D.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":P.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":y.value,"v-navigation-drawer--persistent":S.value,"v-navigation-drawer--active":v.value,"v-navigation-drawer--sticky":E.value},a.value,l.value,o.value,d.value,c.value,f.value,t.class],style:[u.value,W.value,b.value,Z.value,t.style]},I,n),{default:()=>{var j,le,pe;return[Q&&_("div",{key:"image",class:"v-navigation-drawer__img"},[s.image?_(_t,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:t.image}}},s.image):_(to,{key:"image-img",alt:"",cover:!0,height:"inherit",src:t.image},null)]),s.prepend&&_("div",{class:"v-navigation-drawer__prepend"},[(j=s.prepend)==null?void 0:j.call(s)]),_("div",{class:"v-navigation-drawer__content"},[(le=s.default)==null?void 0:le.call(s)]),s.append&&_("div",{class:"v-navigation-drawer__append"},[(pe=s.append)==null?void 0:pe.call(s)])]}}),_(nl,{name:"fade-transition"},{default:()=>[y.value&&(A.value||v.value)&&!!t.scrim&&_("div",Ie({class:["v-navigation-drawer__scrim",ne.backgroundColorClasses.value],style:[ee.value,ne.backgroundColorStyles.value],onClick:()=>{S.value||(v.value=!1)}},I),null)]})])}),{isStuck:ae}}}),fde=Ys({name:"VNoSsr",setup(t,e){let{slots:n}=e;const i=GF();return()=>{var s;return i.value&&((s=n.default)==null?void 0:s.call(n))}}}),mde=50,pde=500;function gde(t){let{toggleUpDown:e}=t,n=-1,i=-1;hi(r);function s(o){r(),a(o),n=window.setTimeout(()=>{i=window.setInterval(()=>a(o),mde)},pde)}function r(){window.clearTimeout(n),window.clearInterval(i)}function a(o){e(o==="up")}return{holdStart:s,holdStop:r}}const vde=ue({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},...kn(op(),["modelValue","validationValue"])},"VNumberInput"),yde=Te()({name:"VNumberInput",props:{...vde()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=Me(),{holdStart:s,holdStop:r}=gde({toggleUpDown:y}),a=sp(t),o=V(()=>a.isDisabled.value||a.isReadonly.value),{isFocused:l,focus:u,blur:c}=Ia(t);function d(j){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.precision;const pe=le==null?String(j):j.toFixed(le);return l.value?Number(pe).toString():pe}const h=et(t,"modelValue",null,j=>j??null,j=>j==null?j??null:_n(Number(j),t.min,t.max)),f=Ue(null);An(()=>{l.value&&!o.value||(h.value==null?f.value=null:isNaN(h.value)||(f.value=d(h.value)))});const g=V({get:()=>f.value,set(j){j===null||j===""?(h.value=null,f.value=null):!isNaN(Number(j))&&Number(j)<=t.max&&Number(j)>=t.min&&(h.value=Number(j),f.value=j)}}),v=V(()=>o.value?!1:(h.value??0)+t.step<=t.max),b=V(()=>o.value?!1:(h.value??0)-t.step>=t.min),I=V(()=>t.hideInput?"stacked":t.controlVariant),w=V(()=>I.value==="split"?"$plus":"$collapse"),P=V(()=>I.value==="split"?"$minus":"$expand"),M=V(()=>I.value==="split"?"default":"small"),F=V(()=>I.value==="stacked"?"auto":"100%"),U=V(()=>({props:{onClick:k,onPointerup:R,onPointerdown:W}})),D=V(()=>({props:{onClick:k,onPointerup:R,onPointerdown:se}}));$e(()=>t.precision,()=>Z()),ti(()=>{ae()});function S(j){if(j==null)return 0;const le=j.toString(),pe=le.indexOf(".");return~pe?le.length-pe:0}function y(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(o.value)return;if(h.value==null){g.value=d(_n(0,t.min,t.max));return}let le=Math.max(S(h.value),S(t.step));t.precision!=null&&(le=Math.max(le,t.precision)),j?v.value&&(g.value=d(h.value+t.step,le)):b.value&&(g.value=d(h.value-t.step,le))}function E(j){var we,re,fe,xe;if(!j.data)return;const le=(we=j.target)==null?void 0:we.value,pe=(re=j.target)==null?void 0:re.selectionStart,Se=(fe=j.target)==null?void 0:fe.selectionEnd,Le=le?le.slice(0,pe)+j.data+le.slice(Se):j.data;/^-?(\d+(\.\d*)?|(\.\d+)|\d*|\.)$/.test(Le)||j.preventDefault(),t.precision!=null&&(((xe=Le.split(".")[1])==null?void 0:xe.length)>t.precision&&j.preventDefault(),t.precision===0&&Le.includes(".")&&j.preventDefault())}async function A(j){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(j.key)||j.ctrlKey||["ArrowDown","ArrowUp"].includes(j.key)&&(j.preventDefault(),ae(),await kt(),j.key==="ArrowDown"?y(!1):y())}function k(j){j.stopPropagation()}function R(j){const le=j.currentTarget;le==null||le.releasePointerCapture(j.pointerId),j.preventDefault(),j.stopPropagation(),r()}function W(j){const le=j.currentTarget;le==null||le.setPointerCapture(j.pointerId),j.preventDefault(),j.stopPropagation(),s("up")}function se(j){const le=j.currentTarget;le==null||le.setPointerCapture(j.pointerId),j.preventDefault(),j.stopPropagation(),s("down")}function ae(){if(o.value||!i.value)return;const j=i.value.value;j&&!isNaN(Number(j))?g.value=d(_n(Number(j),t.min,t.max)):g.value=null}function Z(){if(!o.value){if(h.value===null||isNaN(h.value)){g.value=null;return}g.value=t.precision==null?String(h.value):h.value.toFixed(t.precision)}}function ne(){if(!o.value){if(h.value===null||isNaN(h.value)){g.value=null;return}g.value=h.value.toString()}}function ee(){u(),ne()}function Q(){c(),ae()}return Pe(()=>{const{modelValue:j,...le}=so.filterProps(t);function pe(){return n.increment?_(_t,{key:"increment-defaults",defaults:{VBtn:{disabled:!v.value,flat:!0,height:F.value,size:M.value,icon:w.value}}},{default:()=>[n.increment(U.value)]}):_(Ot,{disabled:!v.value,flat:!0,key:"increment-btn",height:F.value,"data-testid":"increment","aria-hidden":"true",icon:w.value,onClick:k,onPointerup:R,onPointerdown:W,size:M.value,tabindex:"-1"},null)}function Se(){return n.decrement?_(_t,{key:"decrement-defaults",defaults:{VBtn:{disabled:!b.value,flat:!0,height:F.value,size:M.value,icon:P.value}}},{default:()=>[n.decrement(D.value)]}):_(Ot,{disabled:!b.value,flat:!0,key:"decrement-btn",height:F.value,"data-testid":"decrement","aria-hidden":"true",icon:P.value,size:M.value,tabindex:"-1",onClick:k,onPointerup:R,onPointerdown:se},null)}function Le(){return _("div",{class:"v-number-input__control"},[Se(),_(za,{vertical:I.value!=="stacked"},null),pe()])}function we(){return!t.hideInput&&!t.inset?_(za,{vertical:!0},null):void 0}const re=I.value==="split"?_("div",{class:"v-number-input__control"},[_(za,{vertical:!0},null),pe()]):t.reverse||I.value==="hidden"?void 0:_(Ye,null,[we(),Le()]),fe=n["append-inner"]||re,xe=I.value==="split"?_("div",{class:"v-number-input__control"},[Se(),_(za,{vertical:!0},null)]):t.reverse&&I.value!=="hidden"?_(Ye,null,[Le(),we()]):void 0,Ne=n["prepend-inner"]||xe;return _(so,Ie({ref:i,modelValue:g.value,"onUpdate:modelValue":be=>g.value=be,validationValue:h.value,onBeforeinput:E,onFocus:ee,onBlur:Q,onKeydown:A,class:["v-number-input",{"v-number-input--default":I.value==="default","v-number-input--hide-input":t.hideInput,"v-number-input--inset":t.inset,"v-number-input--reverse":t.reverse,"v-number-input--split":I.value==="split","v-number-input--stacked":I.value==="stacked"},t.class]},le,{style:t.style,inputmode:"decimal"}),{...n,"append-inner":fe?function(){var X;for(var be=arguments.length,z=new Array(be),H=0;H<be;H++)z[H]=arguments[H];return _(Ye,null,[(X=n["append-inner"])==null?void 0:X.call(n,...z),re])}:void 0,"prepend-inner":Ne?function(){var X;for(var be=arguments.length,z=new Array(be),H=0;H<be;H++)z[H]=arguments[H];return _(Ye,null,[xe,(X=n["prepend-inner"])==null?void 0:X.call(n,...z)])}:void 0})}),Js({},i)}}),_de=ue({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Kn(),...ip(),...Sl(ap({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),bde=Te()({name:"VOtpInput",props:_de(),emits:{finish:t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:i,slots:s}=e;const{dimensionStyles:r}=Yn(t),{isFocused:a,focus:o,blur:l}=Ia(t),u=et(t,"modelValue","",S=>S==null?[]:String(S).split(""),S=>S.join("")),{t:c}=Dn(),d=V(()=>Number(t.length)),h=V(()=>Array(d.value).fill(0)),f=Me(-1),g=Me(),v=Me([]),b=V(()=>v.value[f.value]);function I(){if(D(b.value.value)){b.value.value="";return}const S=u.value.slice(),y=b.value.value;S[f.value]=y;let E=null;f.value>u.value.length?E=u.value.length+1:f.value+1!==d.value&&(E="next"),u.value=S,E&&cu(g.value,E)}function w(S){const y=u.value.slice(),E=f.value;let A=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(S.key)&&(S.preventDefault(),S.key==="ArrowLeft"?A="prev":S.key==="ArrowRight"?A="next":["Backspace","Delete"].includes(S.key)&&(y[f.value]="",u.value=y,f.value>0&&S.key==="Backspace"?A="prev":requestAnimationFrame(()=>{var k;(k=v.value[E])==null||k.select()})),requestAnimationFrame(()=>{A!=null&&cu(g.value,A)}))}function P(S,y){var A,k;y.preventDefault(),y.stopPropagation();const E=((A=y==null?void 0:y.clipboardData)==null?void 0:A.getData("Text").slice(0,d.value))??"";D(E)||(u.value=E.split(""),(k=v.value)==null||k[S].blur())}function M(){u.value=[]}function F(S,y){o(),f.value=y}function U(){l(),f.value=-1}function D(S){return t.type==="number"&&/[^0-9]/g.test(S)}return Pn({VField:{color:V(()=>t.color),bgColor:V(()=>t.color),baseColor:V(()=>t.baseColor),disabled:V(()=>t.disabled),error:V(()=>t.error),variant:V(()=>t.variant)}},{scoped:!0}),$e(u,S=>{S.length===d.value&&i("finish",S.join(""))},{deep:!0}),$e(f,S=>{S<0||kt(()=>{var y;(y=v.value[S])==null||y.select()})}),Pe(()=>{var E;const[S,y]=El(n);return _("div",Ie({class:["v-otp-input",{"v-otp-input--divided":!!t.divider},t.class],style:[t.style]},S),[_("div",{ref:g,class:"v-otp-input__content",style:[r.value]},[h.value.map((A,k)=>_(Ye,null,[t.divider&&k!==0&&_("span",{class:"v-otp-input__divider"},[t.divider]),_(fl,{focused:a.value&&t.focusAll||f.value===k,key:k},{...s,loader:void 0,default:()=>_("input",{ref:R=>v.value[k]=R,"aria-label":c(t.label,k+1),autofocus:k===0&&t.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:t.disabled,inputmode:t.type==="number"?"numeric":"text",min:t.type==="number"?0:void 0,maxlength:k===0?d.value:"1",placeholder:t.placeholder,type:t.type==="number"?"text":t.type,value:u.value[k],onInput:I,onFocus:R=>F(R,k),onBlur:U,onKeydown:w,onPaste:R=>P(k,R)},null)})])),_("input",Ie({class:"v-otp-input-input",type:"hidden"},y,{value:u.value.join("")}),null),_(ba,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!t.loading,persistent:!0},{default:()=>{var A;return[((A=s.loader)==null?void 0:A.call(s))??_(Vd,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(E=s.default)==null?void 0:E.call(s)])])}),{blur:()=>{var S;(S=v.value)==null||S.some(y=>y.blur())},focus:()=>{var S;(S=v.value)==null||S[0].focus()},reset:M,isFocused:a}}});function Tde(t){return Math.floor(Math.abs(t))*Math.sign(t)}const Sde=ue({scale:{type:[Number,String],default:.5},...Ke()},"VParallax"),Ede=Te()({name:"VParallax",props:Sde(),setup(t,e){let{slots:n}=e;const{intersectionRef:i,isIntersecting:s}=d_(),{resizeRef:r,contentRect:a}=Lr(),{height:o}=As(),l=Me();An(()=>{var f;i.value=r.value=(f=l.value)==null?void 0:f.$el});let u;$e(s,f=>{f?(u=UE(i.value),u=u===document.scrollingElement?document:u,u.addEventListener("scroll",h,{passive:!0}),h()):u.removeEventListener("scroll",h)}),Wn(()=>{u==null||u.removeEventListener("scroll",h)}),$e(o,h),$e(()=>{var f;return(f=a.value)==null?void 0:f.height},h);const c=V(()=>1-_n(Number(t.scale)));let d=-1;function h(){s.value&&(cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var F;const f=((F=l.value)==null?void 0:F.$el).querySelector(".v-img__img");if(!f)return;const g=u instanceof Document?document.documentElement.clientHeight:u.clientHeight,v=u instanceof Document?window.scrollY:u.scrollTop,b=i.value.getBoundingClientRect().top+v,I=a.value.height,w=b+(I-g)/2,P=Tde((v-w)*c.value),M=Math.max(1,(c.value*(g-I)+I)/I);f.style.setProperty("transform",`translateY(${P}px) scale(${M})`)}))}return Pe(()=>_(to,{class:["v-parallax",{"v-parallax--active":s.value},t.class],style:t.style,ref:l,cover:!0,onLoadstart:h,onLoad:h},n)),{}}}),Cde=ue({...p_({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),wde=Te()({name:"VRadio",props:Cde(),setup(t,e){let{slots:n}=e;return Pe(()=>{const i=hl.filterProps(t);return _(hl,Ie(i,{class:["v-radio",t.class],style:t.style,type:"radio"}),n)}),{}}}),xde=ue({height:{type:[Number,String],default:"auto"},...co(),...kn(UC(),["multiple"]),trueIcon:{type:nt,default:"$radioOn"},falseIcon:{type:nt,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Ide=Te()({name:"VRadioGroup",inheritAttrs:!1,props:xde(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:i}=e;const s=hs(),r=V(()=>t.id||`radio-group-${s}`),a=et(t,"modelValue");return Pe(()=>{const[o,l]=El(n),u=Oi.filterProps(t),c=hl.filterProps(t),d=i.label?i.label({label:t.label,props:{for:r.value}}):t.label;return _(Oi,Ie({class:["v-radio-group",t.class],style:t.style},o,u,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,id:r.value}),{...i,default:h=>{let{id:f,messagesId:g,isDisabled:v,isReadonly:b}=h;return _(Ye,null,[d&&_(uh,{id:f.value},{default:()=>[d]}),_(yF,Ie(c,{id:f.value,"aria-describedby":g.value,defaultsTarget:"VRadio",trueIcon:t.trueIcon,falseIcon:t.falseIcon,type:t.type,disabled:v.value,readonly:b.value,"aria-labelledby":d?f.value:void 0,multiple:!1},l,{modelValue:a.value,"onUpdate:modelValue":I=>a.value=I}),i)])}})}),{}}}),Ade=ue({...ip(),...co(),...p5(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),kde=Te()({name:"VRangeSlider",props:Ade(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,end:t=>!0,start:t=>!0},setup(t,e){let{slots:n,emit:i}=e;const s=Me(),r=Me(),a=Me(),{rtlClasses:o}=Gn();function l(E){if(!s.value||!r.value)return;const A=kS(E,s.value.$el,t.direction),k=kS(E,r.value.$el,t.direction),R=Math.abs(A),W=Math.abs(k);return R<W||R===W&&A<0?s.value.$el:r.value.$el}const u=g5(t),c=et(t,"modelValue",void 0,E=>E!=null&&E.length?E.map(A=>u.roundValue(A)):[0,0]),{activeThumbRef:d,hasLabels:h,max:f,min:g,mousePressed:v,onSliderMousedown:b,onSliderTouchstart:I,position:w,trackContainerRef:P,readonly:M}=v5({props:t,steps:u,onSliderStart:()=>{i("start",c.value)},onSliderEnd:E=>{var R;let{value:A}=E;const k=d.value===((R=s.value)==null?void 0:R.$el)?[A,c.value[1]]:[c.value[0],A];!t.strict&&k[0]<k[1]&&(c.value=k),i("end",c.value)},onSliderMove:E=>{var W,se,ae,Z;let{value:A}=E;const[k,R]=c.value;!t.strict&&k===R&&k!==g.value&&(d.value=A>k?(W=r.value)==null?void 0:W.$el:(se=s.value)==null?void 0:se.$el,(ae=d.value)==null||ae.focus()),d.value===((Z=s.value)==null?void 0:Z.$el)?c.value=[Math.min(A,R),R]:c.value=[k,Math.max(k,A)]},getActiveThumb:l}),{isFocused:F,focus:U,blur:D}=Ia(t),S=V(()=>w(c.value[0])),y=V(()=>w(c.value[1]));return Pe(()=>{const E=Oi.filterProps(t),A=!!(t.label||n.label||n.prepend);return _(Oi,Ie({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||h.value,"v-slider--focused":F.value,"v-slider--pressed":v.value,"v-slider--disabled":t.disabled},o.value,t.class],style:t.style,ref:a},E,{focused:F.value}),{...n,prepend:A?k=>{var R,W;return _(Ye,null,[((R=n.label)==null?void 0:R.call(n,k))??(t.label?_(uh,{class:"v-slider__label",text:t.label},null):void 0),(W=n.prepend)==null?void 0:W.call(n,k)])}:void 0,default:k=>{var se,ae;let{id:R,messagesId:W}=k;return _("div",{class:"v-slider__container",onMousedown:M.value?void 0:b,onTouchstartPassive:M.value?void 0:I},[_("input",{id:`${R.value}_start`,name:t.name||R.value,disabled:!!t.disabled,readonly:!!t.readonly,tabindex:"-1",value:c.value[0]},null),_("input",{id:`${R.value}_stop`,name:t.name||R.value,disabled:!!t.disabled,readonly:!!t.readonly,tabindex:"-1",value:c.value[1]},null),_(y5,{ref:P,start:S.value,stop:y.value},{"tick-label":n["tick-label"]}),_(PS,{ref:s,"aria-describedby":W.value,focused:F&&d.value===((se=s.value)==null?void 0:se.$el),modelValue:c.value[0],"onUpdate:modelValue":Z=>c.value=[Z,c.value[1]],onFocus:Z=>{var ne,ee,Q,j;U(),d.value=(ne=s.value)==null?void 0:ne.$el,f.value!==g.value&&c.value[0]===c.value[1]&&c.value[1]===g.value&&Z.relatedTarget!==((ee=r.value)==null?void 0:ee.$el)&&((Q=s.value)==null||Q.$el.blur(),(j=r.value)==null||j.$el.focus())},onBlur:()=>{D(),d.value=void 0},min:g.value,max:c.value[1],position:S.value,ripple:t.ripple},{"thumb-label":n["thumb-label"]}),_(PS,{ref:r,"aria-describedby":W.value,focused:F&&d.value===((ae=r.value)==null?void 0:ae.$el),modelValue:c.value[1],"onUpdate:modelValue":Z=>c.value=[c.value[0],Z],onFocus:Z=>{var ne,ee,Q,j;U(),d.value=(ne=r.value)==null?void 0:ne.$el,f.value!==g.value&&c.value[0]===c.value[1]&&c.value[0]===f.value&&Z.relatedTarget!==((ee=s.value)==null?void 0:ee.$el)&&((Q=r.value)==null||Q.$el.blur(),(j=s.value)==null||j.$el.focus())},onBlur:()=>{D(),d.value=void 0},min:c.value[0],max:f.value,position:y.value,ripple:t.ripple},{"thumb-label":n["thumb-label"]})])}})}),{}}}),Pde=ue({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:nt,default:"$ratingEmpty"},fullIcon:{type:nt,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},ripple:Boolean,...Ke(),...fi(),...xa(),...yt(),...Dt()},"VRating"),Dde=Te()({name:"VRating",props:Pde(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{t:i}=Dn(),{themeClasses:s}=zt(t),r=et(t,"modelValue"),a=V(()=>_n(parseFloat(r.value),0,Number(t.length))),o=V(()=>na(Number(t.length),1)),l=V(()=>o.value.flatMap(b=>t.halfIncrements?[b-.5,b]:[b])),u=Ue(-1),c=V(()=>l.value.map(b=>{const I=t.hover&&u.value>-1,w=a.value>=b,P=u.value>=b,F=(I?P:w)?t.fullIcon:t.emptyIcon,U=t.activeColor??t.color,D=w||P?U:t.color;return{isFilled:w,isHovered:P,icon:F,color:D}})),d=V(()=>[0,...l.value].map(b=>{function I(){u.value=b}function w(){u.value=-1}function P(){t.disabled||t.readonly||(r.value=a.value===b&&t.clearable?0:b)}return{onMouseenter:t.hover?I:void 0,onMouseleave:t.hover?w:void 0,onClick:P}})),h=hs(),f=V(()=>t.name??`v-rating-${h}`);function g(b){var y,E;let{value:I,index:w,showStar:P=!0}=b;const{onMouseenter:M,onMouseleave:F,onClick:U}=d.value[w+1],D=`${f.value}-${String(I).replace(".","-")}`,S={color:(y=c.value[w])==null?void 0:y.color,density:t.density,disabled:t.disabled,icon:(E=c.value[w])==null?void 0:E.icon,ripple:t.ripple,size:t.size,variant:"plain"};return _(Ye,null,[_("label",{for:D,class:{"v-rating__item--half":t.halfIncrements&&I%1>0,"v-rating__item--full":t.halfIncrements&&I%1===0},onMouseenter:M,onMouseleave:F,onClick:U},[_("span",{class:"v-rating__hidden"},[i(t.itemAriaLabel,I,t.length)]),P?n.item?n.item({...c.value[w],props:S,value:I,index:w,rating:a.value}):_(Ot,Ie({"aria-label":i(t.itemAriaLabel,I,t.length)},S),null):void 0]),_("input",{class:"v-rating__hidden",name:f.value,id:D,type:"radio",value:I,checked:a.value===I,tabindex:-1,readonly:t.readonly,disabled:t.disabled},null)])}function v(b){return n["item-label"]?n["item-label"](b):b.label?_("span",null,[b.label]):_("span",null,[zs(" ")])}return Pe(()=>{var I;const b=!!((I=t.itemLabels)!=null&&I.length)||n["item-label"];return _(t.tag,{class:["v-rating",{"v-rating--hover":t.hover,"v-rating--readonly":t.readonly},s.value,t.class],style:t.style},{default:()=>[_(g,{value:0,index:-1,showStar:!1},null),o.value.map((w,P)=>{var M,F;return _("div",{class:"v-rating__wrapper"},[b&&t.itemLabelPosition==="top"?v({value:w,index:P,label:(M=t.itemLabels)==null?void 0:M[P]}):void 0,_("div",{class:"v-rating__item"},[t.halfIncrements?_(Ye,null,[_(g,{value:w-.5,index:P*2},null),_(g,{value:w,index:P*2+1},null)]):_(g,{value:w,index:P},null)]),b&&t.itemLabelPosition==="bottom"?v({value:w,index:P,label:(F=t.itemLabels)==null?void 0:F[P]}):void 0])})]})}),{}}}),Rde={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Lde(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${t}`]},[e])}function HP(t){const[e,n]=t.split("@");return Array.from({length:n}).map(()=>P_(e))}function P_(t){let e=[];if(!t)return e;const n=Rde[t];if(t!==n){if(t.includes(","))return jP(t);if(t.includes("@"))return HP(t);n.includes(",")?e=jP(n):n.includes("@")?e=HP(n):n&&e.push(P_(n))}return[Lde(t,e)]}function jP(t){return t.replace(/\s/g,"").split(",").map(P_)}const Ode=ue({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Kn(),...ni(),...Dt()},"VSkeletonLoader"),Nde=Te()({name:"VSkeletonLoader",props:Ode(),setup(t,e){let{slots:n}=e;const{backgroundColorClasses:i,backgroundColorStyles:s}=en(ye(t,"color")),{dimensionStyles:r}=Yn(t),{elevationClasses:a}=xi(t),{themeClasses:o}=zt(t),{t:l}=Dn(),u=V(()=>P_(bn(t.type).join(",")));return Pe(()=>{var h;const c=!n.default||t.loading,d=t.boilerplate||!c?{}:{ariaLive:"polite",ariaLabel:l(t.loadingText),role:"alert"};return _("div",Ie({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":t.boilerplate},o.value,i.value,a.value],style:[s.value,c?r.value:{}]},d),[c?u.value:(h=n.default)==null?void 0:h.call(n)])}),{}}}),Mde=Te()({name:"VSlideGroupItem",props:Yu(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const i=Xu(t,IF);return()=>{var s;return(s=n.default)==null?void 0:s.call(n,{isSelected:i.isSelected.value,select:i.select,toggle:i.toggle,selectedClass:i.selectedClass.value})}}});function Vde(t){const e=Ue(t());let n=-1;function i(){clearInterval(n)}function s(){i(),kt(()=>e.value=t())}function r(a){const o=a?getComputedStyle(a):{transitionDuration:.2},l=parseFloat(o.transitionDuration)*1e3||200;if(i(),e.value<=0)return;const u=performance.now();n=window.setInterval(()=>{const c=performance.now()-u+l;e.value=Math.max(t()-c,0),e.value<=0&&i()},l)}return hi(i),{clear:i,time:e,start:r,reset:s}}const oB=ue({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...lo({location:"bottom"}),...oh(),...fn(),...hr(),...Dt(),...kn(rp({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),$S=Te()({name:"VSnackbar",props:oB(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"modelValue"),{positionClasses:s}=lh(t),{scopeId:r}=Ju(),{themeClasses:a}=zt(t),{colorClasses:o,colorStyles:l,variantClasses:u}=Gu(t),{roundedClasses:c}=Rn(t),d=Vde(()=>Number(t.timeout)),h=Me(),f=Me(),g=Ue(!1),v=Ue(0),b=Me(),I=vt(rm,void 0);ds(()=>!!I,()=>{const A=KM();An(()=>{b.value=A.mainStyles.value})}),$e(i,P),$e(()=>t.timeout,P),ti(()=>{i.value&&P()});let w=-1;function P(){d.reset(),window.clearTimeout(w);const A=Number(t.timeout);if(!i.value||A===-1)return;const k=LE(f.value);d.start(k),w=window.setTimeout(()=>{i.value=!1},A)}function M(){d.reset(),window.clearTimeout(w)}function F(){g.value=!0,M()}function U(){g.value=!1,P()}function D(A){v.value=A.touches[0].clientY}function S(A){Math.abs(v.value-A.changedTouches[0].clientY)>50&&(i.value=!1)}function y(){g.value&&U()}const E=V(()=>t.location.split(" ").reduce((A,k)=>(A[`v-snackbar--${k}`]=!0,A),{}));return Pe(()=>{const A=ba.filterProps(t),k=!!(n.default||n.text||t.text);return _(ba,Ie({ref:h,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--timer":!!t.timer,"v-snackbar--vertical":t.vertical},E.value,s.value,t.class],style:[b.value,t.style]},A,{modelValue:i.value,"onUpdate:modelValue":R=>i.value=R,contentProps:Ie({class:["v-snackbar__wrapper",a.value,o.value,c.value,u.value],style:[l.value],onPointerenter:F,onPointerleave:U},A.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:D,onTouchend:S,onAfterLeave:y},r),{default:()=>{var R,W;return[wl(!1,"v-snackbar"),t.timer&&!g.value&&_("div",{key:"timer",class:"v-snackbar__timer"},[_(h_,{ref:f,color:typeof t.timer=="string"?t.timer:"info",max:t.timeout,"model-value":d.time.value},null)]),k&&_("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((R=n.text)==null?void 0:R.call(n))??t.text,(W=n.default)==null?void 0:W.call(n)]),n.actions&&_(_t,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[_("div",{class:"v-snackbar__actions"},[n.actions({isActive:i})])]})]},activator:n.activator})}),Js({},h)}}),Fde=ue({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...kn(oB(),["modelValue"])},"VSnackbarQueue"),Bde=Te()({name:"VSnackbarQueue",props:Fde(),emits:{"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:i}=e;const{t:s}=Dn(),r=Ue(!1),a=Ue(!1),o=Ue();$e(()=>t.modelValue.length,(h,f)=>{!a.value&&h>f&&u()}),$e(r,h=>{h&&(a.value=!0)});function l(){t.modelValue.length?u():(o.value=void 0,a.value=!1)}function u(){const[h,...f]=t.modelValue;n("update:modelValue",f),o.value=typeof h=="string"?{text:h}:h,kt(()=>{r.value=!0})}function c(){r.value=!1}const d=V(()=>({color:typeof t.closable=="string"?t.closable:void 0,text:s(t.closeText)}));Pe(()=>{const h=!!(t.closable||i.actions),{modelValue:f,...g}=$S.filterProps(t);return _(Ye,null,[a.value&&!!o.value&&(i.default?_(_t,{defaults:{VSnackbar:o.value}},{default:()=>[i.default({item:o.value})]}):_($S,Ie(g,o.value,{modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,onAfterLeave:l}),{text:i.text?()=>{var v;return(v=i.text)==null?void 0:v.call(i,{item:o.value})}:void 0,actions:h?()=>_(Ye,null,[i.actions?_(_t,{defaults:{VBtn:d.value}},{default:()=>[i.actions({item:o.value,props:{onClick:c}})]}):_(Ot,Ie(d.value,{onClick:c}),null)]):void 0}))])})}}),lB=ue({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:t=>["top","bottom","left","right"].includes(t),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),uB=ue({autoLineWidth:Boolean,...lB()},"VBarline"),qP=Te()({name:"VBarline",props:uB(),setup(t,e){let{slots:n}=e;const i=hs(),s=V(()=>t.id||`barline-${i}`),r=V(()=>Number(t.autoDrawDuration)||500),a=V(()=>!!(t.showLabels||t.labels.length>0||n!=null&&n.label)),o=V(()=>parseFloat(t.lineWidth)||4),l=V(()=>Math.max(t.modelValue.length*o.value,Number(t.width))),u=V(()=>({minX:0,maxX:l.value,minY:0,maxY:parseInt(t.height,10)})),c=V(()=>t.modelValue.map(b=>qn(b,t.itemValue,b)));function d(b,I){const{minX:w,maxX:P,minY:M,maxY:F}=I,U=b.length;let D=t.max!=null?Number(t.max):Math.max(...b),S=t.min!=null?Number(t.min):Math.min(...b);S>0&&t.min==null&&(S=0),D<0&&t.max==null&&(D=0);const y=P/U,E=(F-M)/(D-S||1),A=F-Math.abs(S*E);return b.map((k,R)=>{const W=Math.abs(E*k);return{x:w+R*y,y:A-W+ +(k<0)*W,height:W,value:k}})}const h=V(()=>{const b=[],I=d(c.value,u.value),w=I.length;for(let P=0;b.length<w;P++){const M=I[P];let F=t.labels[P];F||(F=typeof M=="object"?M.value:M),b.push({x:M.x,value:String(F)})}return b}),f=V(()=>d(c.value,u.value)),g=V(()=>(Math.abs(f.value[0].x-f.value[1].x)-o.value)/2),v=V(()=>typeof t.smooth=="boolean"?t.smooth?2:0:Number(t.smooth));Pe(()=>{const b=t.gradient.slice().length?t.gradient.slice().reverse():[""];return _("svg",{display:"block"},[_("defs",null,[_("linearGradient",{id:s.value,gradientUnits:"userSpaceOnUse",x1:t.gradientDirection==="left"?"100%":"0",y1:t.gradientDirection==="top"?"100%":"0",x2:t.gradientDirection==="right"?"100%":"0",y2:t.gradientDirection==="bottom"?"100%":"0"},[b.map((I,w)=>_("stop",{offset:w/Math.max(b.length-1,1),"stop-color":I||"currentColor"},null))])]),_("clipPath",{id:`${s.value}-clip`},[f.value.map(I=>_("rect",{x:I.x+g.value,y:I.y,width:o.value,height:I.height,rx:v.value,ry:v.value},[t.autoDraw&&_(Ye,null,[_("animate",{attributeName:"y",from:I.y+I.height,to:I.y,dur:`${r.value}ms`,fill:"freeze"},null),_("animate",{attributeName:"height",from:"0",to:I.height,dur:`${r.value}ms`,fill:"freeze"},null)])]))]),a.value&&_("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[h.value.map((I,w)=>{var P;return _("text",{x:I.x+g.value+o.value/2,y:parseInt(t.height,10)-2+(parseInt(t.labelSize,10)||7*.75),"font-size":Number(t.labelSize)||7},[((P=n.label)==null?void 0:P.call(n,{index:w,value:I.value}))??I.value])})]),_("g",{"clip-path":`url(#${s.value}-clip)`,fill:`url(#${s.value})`},[_("rect",{x:0,y:0,width:Math.max(t.modelValue.length*o.value,Number(t.width)),height:t.height},null)])])})}});function Ude(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(t.length===0)return"";const s=t.shift(),r=t[t.length-1];return(n?`M${s.x} ${i-s.x+2} L${s.x} ${s.y}`:`M${s.x} ${s.y}`)+t.map((a,o)=>{const l=t[o+1],u=t[o-1]||s,c=l&&$de(l,a,u);if(!l||c)return`L${a.x} ${a.y}`;const d=Math.min(zP(u,a),zP(l,a)),f=d/2<e?d/2:e,g=WP(u,a,f),v=WP(l,a,f);return`L${g.x} ${g.y}S${a.x} ${a.y} ${v.x} ${v.y}`}).join("")+(n?`L${r.x} ${i-s.x+2} Z`:"")}function og(t){return parseInt(t,10)}function $de(t,e,n){return og(t.x+n.x)===og(2*e.x)&&og(t.y+n.y)===og(2*e.y)}function zP(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function WP(t,e,n){const i={x:t.x-e.x,y:t.y-e.y},s=Math.sqrt(i.x*i.x+i.y*i.y),r={x:i.x/s,y:i.y/s};return{x:e.x+r.x*n,y:e.y+r.y*n}}const cB=ue({fill:Boolean,...lB()},"VTrendline"),GP=Te()({name:"VTrendline",props:cB(),setup(t,e){let{slots:n}=e;const i=hs(),s=V(()=>t.id||`trendline-${i}`),r=V(()=>Number(t.autoDrawDuration)||(t.fill?500:2e3)),a=Me(0),o=Me(null);function l(b,I){const{minX:w,maxX:P,minY:M,maxY:F}=I,U=b.length,D=t.max!=null?Number(t.max):Math.max(...b),S=t.min!=null?Number(t.min):Math.min(...b),y=(P-w)/(U-1),E=(F-M)/(D-S||1);return b.map((A,k)=>({x:w+k*y,y:F-(A-S)*E,value:A}))}const u=V(()=>!!(t.showLabels||t.labels.length>0||n!=null&&n.label)),c=V(()=>parseFloat(t.lineWidth)||4),d=V(()=>Number(t.width)),h=V(()=>{const b=Number(t.padding);return{minX:b,maxX:d.value-b,minY:b,maxY:parseInt(t.height,10)-b}}),f=V(()=>t.modelValue.map(b=>qn(b,t.itemValue,b))),g=V(()=>{const b=[],I=l(f.value,h.value),w=I.length;for(let P=0;b.length<w;P++){const M=I[P];let F=t.labels[P];F||(F=typeof M=="object"?M.value:M),b.push({x:M.x,value:String(F)})}return b});$e(()=>t.modelValue,async()=>{if(await kt(),!t.autoDraw||!o.value)return;const b=o.value,I=b.getTotalLength();t.fill?(b.style.transformOrigin="bottom center",b.style.transition="none",b.style.transform="scaleY(0)",b.getBoundingClientRect(),b.style.transition=`transform ${r.value}ms ${t.autoDrawEasing}`,b.style.transform="scaleY(1)"):(b.style.strokeDasharray=`${I}`,b.style.strokeDashoffset=`${I}`,b.getBoundingClientRect(),b.style.transition=`stroke-dashoffset ${r.value}ms ${t.autoDrawEasing}`,b.style.strokeDashoffset="0"),a.value=I},{immediate:!0});function v(b){const I=typeof t.smooth=="boolean"?t.smooth?8:0:Number(t.smooth);return Ude(l(f.value,h.value),I,b,parseInt(t.height,10))}Pe(()=>{var I;const b=t.gradient.slice().length?t.gradient.slice().reverse():[""];return _("svg",{display:"block","stroke-width":parseFloat(t.lineWidth)??4},[_("defs",null,[_("linearGradient",{id:s.value,gradientUnits:"userSpaceOnUse",x1:t.gradientDirection==="left"?"100%":"0",y1:t.gradientDirection==="top"?"100%":"0",x2:t.gradientDirection==="right"?"100%":"0",y2:t.gradientDirection==="bottom"?"100%":"0"},[b.map((w,P)=>_("stop",{offset:P/Math.max(b.length-1,1),"stop-color":w||"currentColor"},null))])]),u.value&&_("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[g.value.map((w,P)=>{var M;return _("text",{x:w.x+c.value/2+c.value/2,y:parseInt(t.height,10)-4+(parseInt(t.labelSize,10)||7*.75),"font-size":Number(t.labelSize)||7},[((M=n.label)==null?void 0:M.call(n,{index:P,value:w.value}))??w.value])})]),_("path",{ref:o,d:v(t.fill),fill:t.fill?`url(#${s.value})`:"none",stroke:t.fill?"none":`url(#${s.value})`},null),t.fill&&_("path",{d:v(!1),fill:"none",stroke:t.color??((I=t.gradient)==null?void 0:I[0])},null)])})}}),Hde=ue({type:{type:String,default:"trend"},...uB(),...cB()},"VSparkline"),jde=Te()({name:"VSparkline",props:Hde(),setup(t,e){let{slots:n}=e;const{textColorClasses:i,textColorStyles:s}=Li(ye(t,"color")),r=V(()=>!!(t.showLabels||t.labels.length>0||n!=null&&n.label)),a=V(()=>{let o=parseInt(t.height,10);return r.value&&(o+=parseInt(t.labelSize,10)*1.5),o});Pe(()=>{const o=t.type==="trend"?GP:qP,l=t.type==="trend"?GP.filterProps(t):qP.filterProps(t);return _(o,Ie({key:t.type,class:i.value,style:s.value,viewBox:`0 0 ${t.width} ${parseInt(a.value,10)}`},l),n)})}}),qde=ue({...Ke(),...QF({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),zde=Te()({name:"VSpeedDial",props:qde(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"modelValue"),s=Me(),r=V(()=>{var u;const[o,l="center"]=((u=t.location)==null?void 0:u.split(" "))??[];return`${o} ${l}`}),a=V(()=>({[`v-speed-dial__content--${r.value.replace(" ","-")}`]:!0}));return Pe(()=>{const o=Fd.filterProps(t);return _(Fd,Ie(o,{modelValue:i.value,"onUpdate:modelValue":l=>i.value=l,class:t.class,style:t.style,contentClass:["v-speed-dial__content",a.value,t.contentClass],location:r.value,ref:s,transition:"fade-transition"}),{...n,default:l=>_(_t,{defaults:{VBtn:{size:"small"}}},{default:()=>[_(Ki,{appear:!0,group:!0,transition:t.transition},{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,l)]}})]})})}),{}}}),gw=Symbol.for("vuetify:v-stepper"),dB=ue({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),hB=Te()({name:"VStepperActions",props:dB(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(t,e){let{emit:n,slots:i}=e;const{t:s}=Dn();function r(){n("click:prev")}function a(){n("click:next")}return Pe(()=>{const o={onClick:r},l={onClick:a};return _("div",{class:"v-stepper-actions"},[_(_t,{defaults:{VBtn:{disabled:["prev",!0].includes(t.disabled),text:s(t.prevText),variant:"text"}}},{default:()=>{var u;return[((u=i.prev)==null?void 0:u.call(i,{props:o}))??_(Ot,o,null)]}}),_(_t,{defaults:{VBtn:{color:t.color,disabled:["next",!0].includes(t.disabled),text:s(t.nextText),variant:"tonal"}}},{default:()=>{var u;return[((u=i.next)==null?void 0:u.call(i,{props:l}))??_(Ot,l,null)]}})])}),{}}}),fB=wa("v-stepper-header"),Wde=ue({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:nt,default:"$complete"},editable:Boolean,editIcon:{type:nt,default:"$edit"},error:Boolean,errorIcon:{type:nt,default:"$error"},icon:nt,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),Gde=ue({...Wde(),...Yu()},"VStepperItem"),mB=Te()({name:"VStepperItem",directives:{Ripple:uo},props:Gde(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const i=Xu(t,gw,!0),s=V(()=>(i==null?void 0:i.value.value)??t.value),r=V(()=>t.rules.every(h=>h()===!0)),a=V(()=>!t.disabled&&t.editable),o=V(()=>!t.disabled&&t.editable),l=V(()=>t.error||!r.value),u=V(()=>t.complete||t.rules.length>0&&r.value),c=V(()=>l.value?t.errorIcon:u.value?t.completeIcon:i.isSelected.value&&t.editable?t.editIcon:t.icon),d=V(()=>({canEdit:o.value,hasError:l.value,hasCompleted:u.value,title:t.title,subtitle:t.subtitle,step:s.value,value:t.value}));return Pe(()=>{var b,I,w;const h=(!i||i.isSelected.value||u.value||o.value)&&!l.value&&!t.disabled,f=!!(t.title!=null||n.title),g=!!(t.subtitle!=null||n.subtitle);function v(){i==null||i.toggle()}return Tn(_("button",{class:["v-stepper-item",{"v-stepper-item--complete":u.value,"v-stepper-item--disabled":t.disabled,"v-stepper-item--error":l.value},i==null?void 0:i.selectedClass.value],disabled:!t.editable,type:"button",onClick:v},[a.value&&wl(!0,"v-stepper-item"),_(ur,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:h?t.color:void 0,size:24},{default:()=>{var P;return[((P=n.icon)==null?void 0:P.call(n,d.value))??(c.value?_(Ht,{icon:c.value},null):s.value)]}}),_("div",{class:"v-stepper-item__content"},[f&&_("div",{key:"title",class:"v-stepper-item__title"},[((b=n.title)==null?void 0:b.call(n,d.value))??t.title]),g&&_("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[((I=n.subtitle)==null?void 0:I.call(n,d.value))??t.subtitle]),(w=n.default)==null?void 0:w.call(n,d.value)])]),[[Ks("ripple"),t.ripple&&t.editable,null]])}),{}}}),Kde=ue({...kn(__(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),pB=Te()({name:"VStepperWindow",props:Kde(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=vt(gw,null),s=et(t,"modelValue"),r=V({get(){var a;return s.value!=null||!i?s.value:(a=i.items.value.find(o=>i.selected.value.includes(o.id)))==null?void 0:a.value},set(a){s.value=a}});return Pe(()=>{const a=Du.filterProps(t);return _(Du,Ie({_as:"VStepperWindow"},a,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,class:["v-stepper-window",t.class],style:t.style,mandatory:!1,touch:!1}),n)}),{}}}),Yde=ue({...b_()},"VStepperWindowItem"),gB=Te()({name:"VStepperWindowItem",props:Yde(),setup(t,e){let{slots:n}=e;return Pe(()=>{const i=Ru.filterProps(t);return _(Ru,Ie({_as:"VStepperWindowItem"},i,{class:["v-stepper-window-item",t.class],style:t.style}),n)}),{}}}),Xde=ue({altLabels:Boolean,bgColor:String,completeIcon:nt,editIcon:nt,editable:Boolean,errorIcon:nt,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...ju()},"Stepper"),Qde=ue({...Xde(),...Ku({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...ew(),...Sl(dB(),["prevText","nextText"])},"VStepper"),Jde=Te()({name:"VStepper",props:Qde(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{items:i,next:s,prev:r,selected:a}=xl(t,gw),{displayClasses:o,mobile:l}=As(t),{completeIcon:u,editIcon:c,errorIcon:d,color:h,editable:f,prevText:g,nextText:v}=gl(t),b=V(()=>t.items.map((P,M)=>{const F=qn(P,t.itemTitle,P),U=qn(P,t.itemValue,M+1);return{title:F,value:U,raw:P}})),I=V(()=>i.value.findIndex(P=>a.value.includes(P.id))),w=V(()=>t.disabled?t.disabled:I.value===0?"prev":I.value===i.value.length-1?"next":!1);return Pn({VStepperItem:{editable:f,errorIcon:d,completeIcon:u,editIcon:c,prevText:g,nextText:v},VStepperActions:{color:h,disabled:w,prevText:g,nextText:v}}),Pe(()=>{const P=_m.filterProps(t),M=!!(n.header||t.items.length),F=t.items.length>0,U=!t.hideActions&&!!(F||n.actions);return _(_m,Ie(P,{color:t.bgColor,class:["v-stepper",{"v-stepper--alt-labels":t.altLabels,"v-stepper--flat":t.flat,"v-stepper--non-linear":t.nonLinear,"v-stepper--mobile":l.value},o.value,t.class],style:t.style}),{default:()=>{var D,S;return[M&&_(fB,{key:"stepper-header"},{default:()=>[b.value.map((y,E)=>{let{raw:A,...k}=y;return _(Ye,null,[!!E&&_(za,null,null),_(mB,k,{default:n[`header-item.${k.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),F&&_(pB,{key:"stepper-window"},{default:()=>[b.value.map(y=>_(gB,{value:y.value},{default:()=>{var E,A;return((E=n[`item.${y.value}`])==null?void 0:E.call(n,y))??((A=n.item)==null?void 0:A.call(n,y))}}))]}),(D=n.default)==null?void 0:D.call(n,{prev:r,next:s}),U&&(((S=n.actions)==null?void 0:S.call(n,{next:s,prev:r}))??_(hB,{key:"stepper-actions","onClick:prev":r,"onClick:next":s},n))]}})}),{prev:r,next:s}}}),Zde=ue({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...co(),...p_()},"VSwitch"),ehe=Te()({name:"VSwitch",inheritAttrs:!1,props:Zde(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{attrs:n,slots:i}=e;const s=et(t,"indeterminate"),r=et(t,"modelValue"),{loaderClasses:a}=Zm(t),{isFocused:o,focus:l,blur:u}=Ia(t),c=Me(),d=Vt&&window.matchMedia("(forced-colors: active)").matches,h=V(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),f=hs(),g=V(()=>t.id||`switch-${f}`);function v(){s.value&&(s.value=!1)}function b(I){var w,P;I.stopPropagation(),I.preventDefault(),(P=(w=c.value)==null?void 0:w.input)==null||P.click()}return Pe(()=>{const[I,w]=El(n),P=Oi.filterProps(t),M=hl.filterProps(t);return _(Oi,Ie({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":s.value},a.value,t.class]},I,P,{modelValue:r.value,"onUpdate:modelValue":F=>r.value=F,id:g.value,focused:o.value,style:t.style}),{...i,default:F=>{let{id:U,messagesId:D,isDisabled:S,isReadonly:y,isValid:E}=F;const A={model:r,isValid:E};return _(hl,Ie({ref:c},M,{modelValue:r.value,"onUpdate:modelValue":[k=>r.value=k,v],id:U.value,"aria-describedby":D.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:S.value,readonly:y.value,onFocus:l,onBlur:u},w),{...i,default:k=>{let{backgroundColorClasses:R,backgroundColorStyles:W}=k;return _("div",{class:["v-switch__track",d?void 0:R.value],style:W.value,onClick:b},[i["track-true"]&&_("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](A)]),i["track-false"]&&_("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](A)])])},input:k=>{let{inputNode:R,icon:W,backgroundColorClasses:se,backgroundColorStyles:ae}=k;return _(Ye,null,[R,_("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":W||t.loading},t.inset||d?void 0:se.value],style:t.inset?void 0:ae.value},[i.thumb?_(_t,{defaults:{VIcon:{icon:W,size:"x-small"}}},{default:()=>[i.thumb({...A,icon:W})]}):_(NC,null,{default:()=>[t.loading?_(ep,{name:"v-switch",active:!0,color:E.value===!1?void 0:h.value},{default:Z=>i.loader?i.loader(Z):_(Vd,{active:Z.isActive,color:Z.color,indeterminate:!0,size:"16",width:"2"},null)}):W&&_(Ht,{key:String(W),icon:W,size:"x-small"},null)]})])])}})}})}),{}}}),the=ue({color:String,height:[Number,String],window:Boolean,...Ke(),...ni(),...qu(),...fn(),...yt(),...Dt()},"VSystemBar"),nhe=Te()({name:"VSystemBar",props:the(),setup(t,e){let{slots:n}=e;const{themeClasses:i}=zt(t),{backgroundColorClasses:s,backgroundColorStyles:r}=en(ye(t,"color")),{elevationClasses:a}=xi(t),{roundedClasses:o}=Rn(t),{ssrBootStyles:l}=Wu(),u=V(()=>t.height??(t.window?32:24)),{layoutItemStyles:c}=zu({id:t.name,order:V(()=>parseInt(t.order,10)),position:Ue("top"),layoutSize:u,elementSize:u,active:V(()=>!0),absolute:ye(t,"absolute")});return Pe(()=>_(t.tag,{class:["v-system-bar",{"v-system-bar--window":t.window},i.value,s.value,a.value,o.value,t.class],style:[r.value,c.value,l.value,t.style]},n)),{}}}),vw=Symbol.for("vuetify:v-tabs"),ihe=ue({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...kn(m_({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),vB=Te()({name:"VTab",props:ihe(),setup(t,e){let{slots:n,attrs:i}=e;const{textColorClasses:s,textColorStyles:r}=Li(t,"sliderColor"),a=Me(),o=Me(),l=V(()=>t.direction==="horizontal"),u=V(()=>{var d,h;return((h=(d=a.value)==null?void 0:d.group)==null?void 0:h.isSelected.value)??!1});function c(d){var f,g;let{value:h}=d;if(h){const v=(g=(f=a.value)==null?void 0:f.$el.parentElement)==null?void 0:g.querySelector(".v-tab--selected .v-tab__slider"),b=o.value;if(!v||!b)return;const I=getComputedStyle(v).color,w=v.getBoundingClientRect(),P=b.getBoundingClientRect(),M=l.value?"x":"y",F=l.value?"X":"Y",U=l.value?"right":"bottom",D=l.value?"width":"height",S=w[M],y=P[M],E=S>y?w[U]-P[U]:w[M]-P[M],A=Math.sign(E)>0?l.value?"right":"bottom":Math.sign(E)<0?l.value?"left":"top":"center",R=(Math.abs(E)+(Math.sign(E)<0?w[D]:P[D]))/Math.max(w[D],P[D])||0,W=w[D]/P[D]||0,se=1.5;iu(b,{backgroundColor:[I,"currentcolor"],transform:[`translate${F}(${E}px) scale${F}(${W})`,`translate${F}(${E/se}px) scale${F}(${(R-1)/se+1})`,"none"],transformOrigin:Array(3).fill(A)},{duration:225,easing:im})}}return Pe(()=>{const d=Ot.filterProps(t);return _(Ot,Ie({symbol:vw,ref:a,class:["v-tab",t.class],style:t.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1},d,i,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":c}),{...n,default:()=>{var h;return _(Ye,null,[((h=n.default)==null?void 0:h.call(n))??t.text,!t.hideSlider&&_("div",{ref:o,class:["v-tab__slider",s.value],style:r.value},null)])}})}),Js({},a)}}),she=ue({...kn(__(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),yB=Te()({name:"VTabsWindow",props:she(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=vt(vw,null),s=et(t,"modelValue"),r=V({get(){var a;return s.value!=null||!i?s.value:(a=i.items.value.find(o=>i.selected.value.includes(o.id)))==null?void 0:a.value},set(a){s.value=a}});return Pe(()=>{const a=Du.filterProps(t);return _(Du,Ie({_as:"VTabsWindow"},a,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,class:["v-tabs-window",t.class],style:t.style,mandatory:!1,touch:!1}),n)}),{}}}),rhe=ue({...b_()},"VTabsWindowItem"),_B=Te()({name:"VTabsWindowItem",props:rhe(),setup(t,e){let{slots:n}=e;return Pe(()=>{const i=Ru.filterProps(t);return _(Ru,Ie({_as:"VTabsWindowItem"},i,{class:["v-tabs-window-item",t.class],style:t.style}),n)}),{}}});function ahe(t){return t?t.map(e=>RE(e)?e:{text:e,value:e}):[]}const ohe=ue({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...$C({mandatory:"force",selectedClass:"v-tab-item--selected"}),...fi(),...yt()},"VTabs"),lhe=Te()({name:"VTabs",props:ohe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:i}=e;const s=et(t,"modelValue"),r=V(()=>ahe(t.items)),{densityClasses:a}=es(t),{backgroundColorClasses:o,backgroundColorStyles:l}=en(ye(t,"bgColor")),{scopeId:u}=Ju();return Pn({VTab:{color:ye(t,"color"),direction:ye(t,"direction"),stacked:ye(t,"stacked"),fixed:ye(t,"fixedTabs"),sliderColor:ye(t,"sliderColor"),hideSlider:ye(t,"hideSlider")}}),Pe(()=>{const c=vm.filterProps(t),d=!!(i.window||t.items.length>0);return _(Ye,null,[_(vm,Ie(c,{modelValue:s.value,"onUpdate:modelValue":h=>s.value=h,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},a.value,o.value,t.class],style:[{"--v-tabs-height":We(t.height)},l.value,t.style],role:"tablist",symbol:vw},u,n),{default:()=>{var h;return[((h=i.default)==null?void 0:h.call(i))??r.value.map(f=>{var g;return((g=i.tab)==null?void 0:g.call(i,{item:f}))??_(vB,Ie(f,{key:f.text,value:f.value}),{default:i[`tab.${f.value}`]?()=>{var v;return(v=i[`tab.${f.value}`])==null?void 0:v.call(i,{item:f})}:void 0})})]}}),d&&_(yB,Ie({modelValue:s.value,"onUpdate:modelValue":h=>s.value=h,key:"tabs-window"},u),{default:()=>{var h;return[r.value.map(f=>{var g;return((g=i.item)==null?void 0:g.call(i,{item:f}))??_(_B,{value:f.value},{default:()=>{var v;return(v=i[`item.${f.value}`])==null?void 0:v.call(i,{item:f})}})}),(h=i.window)==null?void 0:h.call(i)]}})])}),{}}}),uhe=ue({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseFloat(t))},maxRows:{type:[Number,String],validator:t=>!isNaN(parseFloat(t))},suffix:String,modelModifiers:Object,...co(),...ap()},"VTextarea"),che=Te()({name:"VTextarea",directives:{Intersect:Jm},inheritAttrs:!1,props:uhe(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:i,slots:s}=e;const r=et(t,"modelValue"),{isFocused:a,focus:o,blur:l}=Ia(t),u=V(()=>typeof t.counterValue=="function"?t.counterValue(r.value):(r.value||"").toString().length),c=V(()=>{if(n.maxlength)return n.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter});function d(A,k){var R,W;!t.autofocus||!A||(W=(R=k[0].target)==null?void 0:R.focus)==null||W.call(R)}const h=Me(),f=Me(),g=Ue(""),v=Me(),b=V(()=>t.persistentPlaceholder||a.value||t.active);function I(){var A;v.value!==document.activeElement&&((A=v.value)==null||A.focus()),a.value||o()}function w(A){I(),i("click:control",A)}function P(A){i("mousedown:control",A)}function M(A){A.stopPropagation(),I(),kt(()=>{r.value="",Oy(t["onClick:clear"],A)})}function F(A){var R;const k=A.target;if(r.value=k.value,(R=t.modelModifiers)!=null&&R.trim){const W=[k.selectionStart,k.selectionEnd];kt(()=>{k.selectionStart=W[0],k.selectionEnd=W[1]})}}const U=Me(),D=Me(Number(t.rows)),S=V(()=>["plain","underlined"].includes(t.variant));An(()=>{t.autoGrow||(D.value=Number(t.rows))});function y(){t.autoGrow&&kt(()=>{if(!U.value||!f.value)return;const A=getComputedStyle(U.value),k=getComputedStyle(f.value.$el),R=parseFloat(A.getPropertyValue("--v-field-padding-top"))+parseFloat(A.getPropertyValue("--v-input-padding-top"))+parseFloat(A.getPropertyValue("--v-field-padding-bottom")),W=U.value.scrollHeight,se=parseFloat(A.lineHeight),ae=Math.max(parseFloat(t.rows)*se+R,parseFloat(k.getPropertyValue("--v-input-control-height"))),Z=parseFloat(t.maxRows)*se+R||1/0,ne=_n(W??0,ae,Z);D.value=Math.floor((ne-R)/se),g.value=We(ne)})}ti(y),$e(r,y),$e(()=>t.rows,y),$e(()=>t.maxRows,y),$e(()=>t.density,y);let E;return $e(U,A=>{A?(E=new ResizeObserver(y),E.observe(U.value)):E==null||E.disconnect()}),Wn(()=>{E==null||E.disconnect()}),Pe(()=>{const A=!!(s.counter||t.counter||t.counterValue),k=!!(A||s.details),[R,W]=El(n),{modelValue:se,...ae}=Oi.filterProps(t),Z=fl.filterProps(t);return _(Oi,Ie({ref:h,modelValue:r.value,"onUpdate:modelValue":ne=>r.value=ne,class:["v-textarea v-text-field",{"v-textarea--prefixed":t.prefix,"v-textarea--suffixed":t.suffix,"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-textarea--auto-grow":t.autoGrow,"v-textarea--no-resize":t.noResize||t.autoGrow,"v-input--plain-underlined":S.value},t.class],style:t.style},R,ae,{centerAffix:D.value===1&&!S.value,focused:a.value}),{...s,default:ne=>{let{id:ee,isDisabled:Q,isDirty:j,isReadonly:le,isValid:pe}=ne;return _(fl,Ie({ref:f,style:{"--v-textarea-control-height":g.value},onClick:w,onMousedown:P,"onClick:clear":M,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"]},Z,{id:ee.value,active:b.value||j.value,centerAffix:D.value===1&&!S.value,dirty:j.value||t.dirty,disabled:Q.value,focused:a.value,error:pe.value===!1}),{...s,default:Se=>{let{props:{class:Le,...we}}=Se;return _(Ye,null,[t.prefix&&_("span",{class:"v-text-field__prefix"},[t.prefix]),Tn(_("textarea",Ie({ref:v,class:Le,value:r.value,onInput:F,autofocus:t.autofocus,readonly:le.value,disabled:Q.value,placeholder:t.placeholder,rows:t.rows,name:t.name,onFocus:I,onBlur:l},we,W),null),[[Ks("intersect"),{handler:d},null,{once:!0}]]),t.autoGrow&&Tn(_("textarea",{class:[Le,"v-textarea__sizer"],id:`${we.id}-sizer`,"onUpdate:modelValue":re=>r.value=re,ref:U,readonly:!0,"aria-hidden":"true"},null),[[NU,r.value]]),t.suffix&&_("span",{class:"v-text-field__suffix"},[t.suffix])])}})},details:k?ne=>{var ee;return _(Ye,null,[(ee=s.details)==null?void 0:ee.call(s,ne),A&&_(Ye,null,[_("span",null,null),_(v_,{active:t.persistentCounter||a.value,value:u.value,max:c.value,disabled:t.disabled},s.counter)])])}:void 0})}),Js({},h,f,v)}}),dhe=ue({withBackground:Boolean,...Ke(),...Dt(),...yt()},"VThemeProvider"),hhe=Te()({name:"VThemeProvider",props:dhe(),setup(t,e){let{slots:n}=e;const{themeClasses:i}=zt(t);return()=>{var s;return t.withBackground?_(t.tag,{class:["v-theme-provider",i.value,t.class],style:t.style},{default:()=>{var r;return[(r=n.default)==null?void 0:r.call(n)]}}):(s=n.default)==null?void 0:s.call(n)}}}),fhe=ue({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:nt,iconColor:String,lineColor:String,...Ke(),...fn(),...xa(),...ni()},"VTimelineDivider"),mhe=Te()({name:"VTimelineDivider",props:fhe(),setup(t,e){let{slots:n}=e;const{sizeClasses:i,sizeStyles:s}=ah(t,"v-timeline-divider__dot"),{backgroundColorStyles:r,backgroundColorClasses:a}=en(ye(t,"dotColor")),{roundedClasses:o}=Rn(t,"v-timeline-divider__dot"),{elevationClasses:l}=xi(t),{backgroundColorClasses:u,backgroundColorStyles:c}=en(ye(t,"lineColor"));return Pe(()=>_("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":t.fillDot},t.class],style:t.style},[_("div",{class:["v-timeline-divider__before",u.value],style:c.value},null),!t.hideDot&&_("div",{key:"dot",class:["v-timeline-divider__dot",l.value,o.value,i.value],style:s.value},[_("div",{class:["v-timeline-divider__inner-dot",a.value,o.value],style:r.value},[n.default?_(_t,{key:"icon-defaults",disabled:!t.icon,defaults:{VIcon:{color:t.iconColor,icon:t.icon,size:t.size}}},n.default):_(Ht,{key:"icon",color:t.iconColor,icon:t.icon,size:t.size},null)])]),_("div",{class:["v-timeline-divider__after",u.value],style:c.value},null)])),{}}}),bB=ue({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:nt,iconColor:String,lineInset:[Number,String],side:{type:String,validator:t=>t==null||["start","end"].includes(t)},...Ke(),...Kn(),...ni(),...fn(),...xa(),...yt()},"VTimelineItem"),phe=Te()({name:"VTimelineItem",props:bB(),setup(t,e){let{slots:n}=e;const{dimensionStyles:i}=Yn(t),s=Ue(0),r=Me();return $e(r,a=>{var o;a&&(s.value=((o=a.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:o.getBoundingClientRect().width)??0)},{flush:"post"}),Pe(()=>{var a,o;return _("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":t.fillDot,"v-timeline-item--side-start":t.side==="start","v-timeline-item--side-end":t.side==="end"},t.class],style:[{"--v-timeline-dot-size":We(s.value),"--v-timeline-line-inset":t.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${We(t.lineInset)})`:We(0)},t.style]},[_("div",{class:"v-timeline-item__body",style:i.value},[(a=n.default)==null?void 0:a.call(n)]),_(mhe,{ref:r,hideDot:t.hideDot,icon:t.icon,iconColor:t.iconColor,size:t.size,elevation:t.elevation,dotColor:t.dotColor,fillDot:t.fillDot,rounded:t.rounded},{default:n.icon}),t.density!=="compact"&&_("div",{class:"v-timeline-item__opposite"},[!t.hideOpposite&&((o=n.opposite)==null?void 0:o.call(n))])])}),{}}}),ghe=ue({align:{type:String,default:"center",validator:t=>["center","start"].includes(t)},direction:{type:String,default:"vertical",validator:t=>["vertical","horizontal"].includes(t)},justify:{type:String,default:"auto",validator:t=>["auto","center"].includes(t)},side:{type:String,validator:t=>t==null||["start","end"].includes(t)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:t=>["start","end","both"].includes(t)},...Sl(bB({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...Ke(),...fi(),...yt(),...Dt()},"VTimeline"),vhe=Te()({name:"VTimeline",props:ghe(),setup(t,e){let{slots:n}=e;const{themeClasses:i}=zt(t),{densityClasses:s}=es(t),{rtlClasses:r}=Gn();Pn({VTimelineDivider:{lineColor:ye(t,"lineColor")},VTimelineItem:{density:ye(t,"density"),dotColor:ye(t,"dotColor"),fillDot:ye(t,"fillDot"),hideOpposite:ye(t,"hideOpposite"),iconColor:ye(t,"iconColor"),lineColor:ye(t,"lineColor"),lineInset:ye(t,"lineInset"),size:ye(t,"size")}});const a=V(()=>{const l=t.side?t.side:t.density!=="default"?"end":null;return l&&`v-timeline--side-${l}`}),o=V(()=>{const l=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(t.truncateLine){case"both":return l;case"start":return l[0];case"end":return l[1];default:return null}});return Pe(()=>_(t.tag,{class:["v-timeline",`v-timeline--${t.direction}`,`v-timeline--align-${t.align}`,`v-timeline--justify-${t.justify}`,o.value,{"v-timeline--inset-line":!!t.lineInset},i.value,s.value,a.value,r.value,t.class],style:[{"--v-timeline-line-thickness":We(t.lineThickness)},t.style]},n)),{}}}),yhe=ue({...Ke(),...hr({variant:"text"})},"VToolbarItems"),_he=Te()({name:"VToolbarItems",props:yhe(),setup(t,e){let{slots:n}=e;return Pn({VBtn:{color:ye(t,"color"),height:"inherit",variant:ye(t,"variant")}}),Pe(()=>{var i;return _("div",{class:["v-toolbar-items",t.class],style:t.style},[(i=n.default)==null?void 0:i.call(n)])}),{}}}),bhe=ue({id:String,interactive:Boolean,text:String,...kn(rp({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),TB=Te()({name:"VTooltip",props:bhe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=et(t,"modelValue"),{scopeId:s}=Ju(),r=hs(),a=V(()=>t.id||`v-tooltip-${r}`),o=Me(),l=V(()=>t.location.split(" ").length>1?t.location:t.location+" center"),u=V(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),c=V(()=>t.transition?t.transition:i.value?"scale-transition":"fade-transition"),d=V(()=>Ie({"aria-describedby":a.value},t.activatorProps));return Pe(()=>{const h=ba.filterProps(t);return _(ba,Ie({ref:o,class:["v-tooltip",{"v-tooltip--interactive":t.interactive},t.class],style:t.style,id:a.value},h,{modelValue:i.value,"onUpdate:modelValue":f=>i.value=f,transition:c.value,absolute:!0,location:l.value,origin:u.value,persistent:!0,role:"tooltip",activatorProps:d.value,_disableGlobalStack:!0},s),{activator:n.activator,default:function(){var b;for(var f=arguments.length,g=new Array(f),v=0;v<f;v++)g[v]=arguments[v];return((b=n.default)==null?void 0:b.call(n,...g))??t.text}})}),Js({},o)}}),The=Te()({name:"VValidation",props:EF(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const i=CF(t,"validation");return()=>{var s;return(s=n.default)==null?void 0:s.call(n,i)}}}),She=Object.freeze(Object.defineProperty({__proto__:null,VAlert:uoe,VAlertTitle:gF,VApp:yae,VAppBar:Fae,VAppBarNavIcon:roe,VAppBarTitle:aoe,VAutocomplete:kle,VAvatar:ur,VBadge:Dle,VBanner:Ole,VBannerActions:n5,VBannerText:i5,VBottomNavigation:Mle,VBottomSheet:Fle,VBreadcrumbs:Hle,VBreadcrumbsDivider:r5,VBreadcrumbsItem:a5,VBtn:Ot,VBtnGroup:yS,VBtnToggle:qae,VCard:Gle,VCardActions:o5,VCardItem:c5,VCardSubtitle:l5,VCardText:d5,VCardTitle:u5,VCarousel:nue,VCarouselItem:sue,VCheckbox:yoe,VCheckboxBtn:no,VChip:ch,VChipGroup:Eoe,VClassIcon:jE,VCode:rue,VCol:fce,VColorPicker:Iue,VCombobox:kue,VComponentIcon:BT,VConfirmEdit:Due,VContainer:uce,VCounter:v_,VDataIterator:$ue,VDataTable:ice,VDataTableFooter:bm,VDataTableHeaders:Lu,VDataTableRow:dw,VDataTableRows:Ou,VDataTableServer:oce,VDataTableVirtual:rce,VDatePicker:wce,VDatePickerControls:OS,VDatePickerHeader:NS,VDatePickerMonth:MS,VDatePickerMonths:VS,VDatePickerYears:FS,VDefaultsProvider:_t,VDialog:xS,VDialogBottomTransition:Sae,VDialogTopTransition:Eae,VDialogTransition:u_,VDivider:za,VEmptyState:Ice,VExpandTransition:c_,VExpandXTransition:VC,VExpansionPanel:Ace,VExpansionPanelText:BS,VExpansionPanelTitle:US,VExpansionPanels:Dce,VFab:Lce,VFabTransition:Tae,VFadeTransition:fm,VField:fl,VFieldLabel:uf,VFileInput:Nce,VFooter:Vce,VForm:Bce,VHover:$ce,VIcon:Ht,VImg:to,VInfiniteScroll:jce,VInput:Oi,VItem:Wce,VItemGroup:zce,VKbd:Gce,VLabel:uh,VLayout:Yce,VLayoutItem:Qce,VLazy:Zce,VLigatureIcon:tJ,VList:g_,VListGroup:SS,VListImg:zoe,VListItem:io,VListItemAction:Goe,VListItemMedia:Yoe,VListItemSubtitle:VF,VListItemTitle:FF,VListSubheader:BF,VLocaleProvider:tde,VMain:ide,VMenu:Fd,VMessages:TF,VNavigationDrawer:hde,VNoSsr:fde,VNumberInput:yde,VOtpInput:bde,VOverlay:ba,VPagination:RS,VParallax:Ede,VProgressCircular:Vd,VProgressLinear:h_,VRadio:wde,VRadioGroup:Ide,VRangeSlider:kde,VRating:Dde,VResponsive:gS,VRow:bce,VScaleTransition:NC,VScrollXReverseTransition:wae,VScrollXTransition:Cae,VScrollYReverseTransition:Iae,VScrollYTransition:xae,VSelect:QC,VSelectionControl:hl,VSelectionControlGroup:yF,VSheet:_m,VSkeletonLoader:Nde,VSlideGroup:vm,VSlideGroupItem:Mde,VSlideXReverseTransition:kae,VSlideXTransition:Aae,VSlideYReverseTransition:Pae,VSlideYTransition:MC,VSlider:DS,VSnackbar:$S,VSnackbarQueue:Bde,VSpacer:J5,VSparkline:jde,VSpeedDial:zde,VStepper:Jde,VStepperActions:hB,VStepperHeader:fB,VStepperItem:mB,VStepperWindow:pB,VStepperWindowItem:gB,VSvgIcon:Fy,VSwitch:ehe,VSystemBar:nhe,VTab:vB,VTable:Nu,VTabs:lhe,VTabsWindow:yB,VTabsWindowItem:_B,VTextField:so,VTextarea:che,VThemeProvider:hhe,VTimeline:vhe,VTimelineItem:phe,VToolbar:vS,VToolbarItems:_he,VToolbarTitle:OC,VTooltip:TB,VValidation:The,VVirtualScroll:y_,VWindow:Du,VWindowItem:Ru},Symbol.toStringTag,{value:"Module"}));function Ehe(t,e){const n=e.modifiers||{},i=e.value,{once:s,immediate:r,...a}=n,o=!Object.keys(a).length,{handler:l,options:u}=typeof i=="object"?i:{handler:i,options:{attributes:(a==null?void 0:a.attr)??o,characterData:(a==null?void 0:a.char)??o,childList:(a==null?void 0:a.child)??o,subtree:(a==null?void 0:a.sub)??o}},c=new MutationObserver(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],h=arguments.length>1?arguments[1]:void 0;l==null||l(d,h),s&&SB(t,e)});r&&(l==null||l([],c)),t._mutate=Object(t._mutate),t._mutate[e.instance.$.uid]={observer:c},c.observe(t,u)}function SB(t,e){var n;(n=t._mutate)!=null&&n[e.instance.$.uid]&&(t._mutate[e.instance.$.uid].observer.disconnect(),delete t._mutate[e.instance.$.uid])}const Che={mounted:Ehe,unmounted:SB};function whe(t,e){var s,r;const n=e.value,i={passive:!((s=e.modifiers)!=null&&s.active)};window.addEventListener("resize",n,i),t._onResize=Object(t._onResize),t._onResize[e.instance.$.uid]={handler:n,options:i},(r=e.modifiers)!=null&&r.quiet||n()}function xhe(t,e){var s;if(!((s=t._onResize)!=null&&s[e.instance.$.uid]))return;const{handler:n,options:i}=t._onResize[e.instance.$.uid];window.removeEventListener("resize",n,i),delete t._onResize[e.instance.$.uid]}const Ihe={mounted:whe,unmounted:xhe};function EB(t,e){const{self:n=!1}=e.modifiers??{},i=e.value,s=typeof i=="object"&&i.options||{passive:!0},r=typeof i=="function"||"handleEvent"in i?i:i.handler,a=n?t:e.arg?document.querySelector(e.arg):window;a&&(a.addEventListener("scroll",r,s),t._onScroll=Object(t._onScroll),t._onScroll[e.instance.$.uid]={handler:r,options:s,target:n?void 0:a})}function CB(t,e){var r;if(!((r=t._onScroll)!=null&&r[e.instance.$.uid]))return;const{handler:n,options:i,target:s=t}=t._onScroll[e.instance.$.uid];s.removeEventListener("scroll",n,i),delete t._onScroll[e.instance.$.uid]}function Ahe(t,e){e.value!==e.oldValue&&(CB(t,e),EB(t,e))}const khe={mounted:EB,unmounted:CB,updated:Ahe};function Phe(t,e){const n=typeof t=="string"?qt(t):t,i=Dhe(n,e);return{mounted:i,updated:i,unmounted(s){yR(null,s)}}}function Dhe(t,e){return function(n,i,s){var d,h,f;const r=typeof e=="function"?e(i):e,a=((d=i.value)==null?void 0:d.text)??i.value??(r==null?void 0:r.text),o=RE(i.value)?i.value:{},l=()=>a??n.textContent,u=(s.ctx===i.instance.$?(h=Rhe(s,i.instance.$))==null?void 0:h.provides:(f=s.ctx)==null?void 0:f.provides)??i.instance.$.provides,c=Mr(t,Ie(r,o),l);c.appContext=Object.assign(Object.create(null),i.instance.$.appContext,{provides:u}),yR(c,n)}}function Rhe(t,e){const n=new Set,i=r=>{var a,o;for(const l of r){if(!l)continue;if(l===t||l.el&&t.el&&l.el===t.el)return!0;n.add(l);let u;if(l.suspense?u=i([l.ssContent]):Array.isArray(l.children)?u=i(l.children):(a=l.component)!=null&&a.vnode&&(u=i([(o=l.component)==null?void 0:o.subTree])),u)return u;n.delete(l)}return!1};if(!i([e.subTree]))return e;const s=Array.from(n).reverse();for(const r of s)if(r.component)return r.component;return e}const Lhe=Phe(TB,t=>{var e;return{activator:"parent",location:(e=t.arg)==null?void 0:e.replace("-"," "),text:typeof t.value=="boolean"?void 0:t.value}}),Ohe=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:XF,Intersect:Jm,Mutate:Che,Resize:Ihe,Ripple:uo,Scroll:khe,Tooltip:Lhe,Touch:JC},Symbol.toStringTag,{value:"Module"})),Nhe={collapse:"svg:M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",complete:"svg:M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",cancel:"svg:M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",close:"svg:M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",delete:"svg:M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",clear:"svg:M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",success:"svg:M12,2C17.52,2 22,6.48 22,12C22,17.52 17.52,22 12,22C6.48,22 2,17.52 2,12C2,6.48 6.48,2 12,2M11,16.5L18,9.5L16.59,8.09L11,13.67L7.91,10.59L6.5,12L11,16.5Z",info:"svg:M13,9H11V7H13M13,17H11V11H13M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",warning:"svg:M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",error:"svg:M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",prev:"svg:M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",next:"svg:M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",checkboxOn:"svg:M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z",checkboxOff:"svg:M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z",checkboxIndeterminate:"svg:M17,13H7V11H17M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z",delimiter:"svg:M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",sortAsc:"svg:M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",sortDesc:"svg:M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z",expand:"svg:M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",menu:"svg:M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",subgroup:"svg:M7,10L12,15L17,10H7Z",dropdown:"svg:M7,10L12,15L17,10H7Z",radioOn:"svg:M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,7C9.24,7 7,9.24 7,12C7,14.76 9.24,17 12,17C14.76,17 17,14.76 17,12C17,9.24 14.76,7 12,7Z",radioOff:"svg:M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",edit:"svg:M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",ratingEmpty:"svg:M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z",ratingFull:"svg:M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",ratingHalf:"svg:M12,15.4V6.1L13.71,10.13L18.09,10.5L14.77,13.39L15.76,17.67M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z",loading:"svg:M19,8L15,12H18C18,15.31 15.31,18 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20C16.42,20 20,16.42 20,12H23M6,12C6,8.69 8.69,6 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4C7.58,4 4,7.58 4,12H1L5,16L9,12",first:"svg:M18.41,16.59L13.82,12L18.41,7.41L17,6L11,12L17,18L18.41,16.59M6,6H8V18H6V6Z",last:"svg:M5.59,7.41L10.18,12L5.59,16.59L7,18L13,12L7,6L5.59,7.41M16,6H18V18H16V6Z",unfold:"svg:M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z",file:"svg:M16.5,6V17.5C16.5,19.71 14.71,21.5 12.5,21.5C10.29,21.5 8.5,19.71 8.5,17.5V5C8.5,3.62 9.62,2.5 11,2.5C12.38,2.5 13.5,3.62 13.5,5V15.5C13.5,16.05 13.05,16.5 12.5,16.5C11.95,16.5 11.5,16.05 11.5,15.5V6H10V15.5C10,16.88 11.12,18 12.5,18C13.88,18 15,16.88 15,15.5V5C15,2.79 13.21,1 11,1C8.79,1 7,2.79 7,5V17.5C7,20.54 9.46,23 12.5,23C15.54,23 18,20.54 18,17.5V6H16.5Z",plus:"svg:M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",minus:"svg:M19,13H5V11H19V13Z",calendar:"svg:M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z",treeviewCollapse:"svg:M7,10L12,15L17,10H7Z",treeviewExpand:"svg:M10,17L15,12L10,7V17Z",eyeDropper:"svg:M19.35,11.72L17.22,13.85L15.81,12.43L8.1,20.14L3.5,22L2,20.5L3.86,15.9L11.57,8.19L10.15,6.78L12.28,4.65L19.35,11.72M16.76,3C17.93,1.83 19.83,1.83 21,3C22.17,4.17 22.17,6.07 21,7.24L19.08,9.16L14.84,4.92L16.76,3M5.56,17.03L4.5,19.5L6.97,18.44L14.4,11L13,9.6L5.56,17.03Z"},Mhe={component:Fy},cp=BU(UZ);cp.use(l_);cp.use(HU());cp.use(XM({components:She,directives:Ohe,theme:{defaultTheme:localStorage.getItem("theme")??"light",themes:{light:{colors:{background:Tv.grey.lighten4}}}},defaults:$Z,icons:{defaultSet:"mdi",aliases:Nhe,sets:{mdi:Mhe}}}));cp.use(JY,{firebaseApp:hV,modules:[KY()]});cp.mount("#app");
